var Fm=Object.defineProperty;var Sm=(y,u,w)=>u in y?Fm(y,u,{enumerable:!0,configurable:!0,writable:!0,value:w}):y[u]=w;var p=(y,u,w)=>Sm(y,typeof u!="symbol"?u+"":u,w);(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const P of document.querySelectorAll('link[rel="modulepreload"]'))v(P);new MutationObserver(P=>{for(const N of P)if(N.type==="childList")for(const I of N.addedNodes)I.tagName==="LINK"&&I.rel==="modulepreload"&&v(I)}).observe(document,{childList:!0,subtree:!0});function w(P){const N={};return P.integrity&&(N.integrity=P.integrity),P.referrerPolicy&&(N.referrerPolicy=P.referrerPolicy),P.crossOrigin==="use-credentials"?N.credentials="include":P.crossOrigin==="anonymous"?N.credentials="omit":N.credentials="same-origin",N}function v(P){if(P.ep)return;P.ep=!0;const N=w(P);fetch(P.href,N)}})();function Og(y){return y&&y.__esModule&&Object.prototype.hasOwnProperty.call(y,"default")?y.default:y}var Tu={exports:{}},sa={},Du={exports:{}},Ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kf;function bm(){if(kf)return Ee;kf=1;var y=Symbol.for("react.element"),u=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),I=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),tt=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),st=Symbol.iterator;function lt(at){return at===null||typeof at!="object"?null:(at=st&&at[st]||at["@@iterator"],typeof at=="function"?at:null)}var Lt={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vt=Object.assign,bt={};function xt(at,kt,ue){this.props=at,this.context=kt,this.refs=bt,this.updater=ue||Lt}xt.prototype.isReactComponent={},xt.prototype.setState=function(at,kt){if(typeof at!="object"&&typeof at!="function"&&at!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,at,kt,"setState")},xt.prototype.forceUpdate=function(at){this.updater.enqueueForceUpdate(this,at,"forceUpdate")};function T(){}T.prototype=xt.prototype;function ct(at,kt,ue){this.props=at,this.context=kt,this.refs=bt,this.updater=ue||Lt}var it=ct.prototype=new T;it.constructor=ct,vt(it,xt.prototype),it.isPureReactComponent=!0;var Rt=Array.isArray,q=Object.prototype.hasOwnProperty,Bt={current:null},V={key:!0,ref:!0,__self:!0,__source:!0};function me(at,kt,ue){var ye,be={},Pe=null,Te=null;if(kt!=null)for(ye in kt.ref!==void 0&&(Te=kt.ref),kt.key!==void 0&&(Pe=""+kt.key),kt)q.call(kt,ye)&&!V.hasOwnProperty(ye)&&(be[ye]=kt[ye]);var Ge=arguments.length-2;if(Ge===1)be.children=ue;else if(1<Ge){for(var Ai=Array(Ge),Li=0;Li<Ge;Li++)Ai[Li]=arguments[Li+2];be.children=Ai}if(at&&at.defaultProps)for(ye in Ge=at.defaultProps,Ge)be[ye]===void 0&&(be[ye]=Ge[ye]);return{$$typeof:y,type:at,key:Pe,ref:Te,props:be,_owner:Bt.current}}function fe(at,kt){return{$$typeof:y,type:at.type,key:kt,ref:at.ref,props:at.props,_owner:at._owner}}function Jt(at){return typeof at=="object"&&at!==null&&at.$$typeof===y}function ve(at){var kt={"=":"=0",":":"=2"};return"$"+at.replace(/[=:]/g,function(ue){return kt[ue]})}var $e=/\/+/g;function Nt(at,kt){return typeof at=="object"&&at!==null&&at.key!=null?ve(""+at.key):kt.toString(36)}function Le(at,kt,ue,ye,be){var Pe=typeof at;(Pe==="undefined"||Pe==="boolean")&&(at=null);var Te=!1;if(at===null)Te=!0;else switch(Pe){case"string":case"number":Te=!0;break;case"object":switch(at.$$typeof){case y:case u:Te=!0}}if(Te)return Te=at,be=be(Te),at=ye===""?"."+Nt(Te,0):ye,Rt(be)?(ue="",at!=null&&(ue=at.replace($e,"$&/")+"/"),Le(be,kt,ue,"",function(Li){return Li})):be!=null&&(Jt(be)&&(be=fe(be,ue+(!be.key||Te&&Te.key===be.key?"":(""+be.key).replace($e,"$&/")+"/")+at)),kt.push(be)),1;if(Te=0,ye=ye===""?".":ye+":",Rt(at))for(var Ge=0;Ge<at.length;Ge++){Pe=at[Ge];var Ai=ye+Nt(Pe,Ge);Te+=Le(Pe,kt,ue,Ai,be)}else if(Ai=lt(at),typeof Ai=="function")for(at=Ai.call(at),Ge=0;!(Pe=at.next()).done;)Pe=Pe.value,Ai=ye+Nt(Pe,Ge++),Te+=Le(Pe,kt,ue,Ai,be);else if(Pe==="object")throw kt=String(at),Error("Objects are not valid as a React child (found: "+(kt==="[object Object]"?"object with keys {"+Object.keys(at).join(", ")+"}":kt)+"). If you meant to render a collection of children, use an array instead.");return Te}function pi(at,kt,ue){if(at==null)return at;var ye=[],be=0;return Le(at,ye,"","",function(Pe){return kt.call(ue,Pe,be++)}),ye}function Ve(at){if(at._status===-1){var kt=at._result;kt=kt(),kt.then(function(ue){(at._status===0||at._status===-1)&&(at._status=1,at._result=ue)},function(ue){(at._status===0||at._status===-1)&&(at._status=2,at._result=ue)}),at._status===-1&&(at._status=0,at._result=kt)}if(at._status===1)return at._result.default;throw at._result}var ke={current:null},jt={transition:null},Ae={ReactCurrentDispatcher:ke,ReactCurrentBatchConfig:jt,ReactCurrentOwner:Bt};function Gt(){throw Error("act(...) is not supported in production builds of React.")}return Ee.Children={map:pi,forEach:function(at,kt,ue){pi(at,function(){kt.apply(this,arguments)},ue)},count:function(at){var kt=0;return pi(at,function(){kt++}),kt},toArray:function(at){return pi(at,function(kt){return kt})||[]},only:function(at){if(!Jt(at))throw Error("React.Children.only expected to receive a single React element child.");return at}},Ee.Component=xt,Ee.Fragment=w,Ee.Profiler=P,Ee.PureComponent=ct,Ee.StrictMode=v,Ee.Suspense=H,Ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ae,Ee.act=Gt,Ee.cloneElement=function(at,kt,ue){if(at==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+at+".");var ye=vt({},at.props),be=at.key,Pe=at.ref,Te=at._owner;if(kt!=null){if(kt.ref!==void 0&&(Pe=kt.ref,Te=Bt.current),kt.key!==void 0&&(be=""+kt.key),at.type&&at.type.defaultProps)var Ge=at.type.defaultProps;for(Ai in kt)q.call(kt,Ai)&&!V.hasOwnProperty(Ai)&&(ye[Ai]=kt[Ai]===void 0&&Ge!==void 0?Ge[Ai]:kt[Ai])}var Ai=arguments.length-2;if(Ai===1)ye.children=ue;else if(1<Ai){Ge=Array(Ai);for(var Li=0;Li<Ai;Li++)Ge[Li]=arguments[Li+2];ye.children=Ge}return{$$typeof:y,type:at.type,key:be,ref:Pe,props:ye,_owner:Te}},Ee.createContext=function(at){return at={$$typeof:I,_currentValue:at,_currentValue2:at,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},at.Provider={$$typeof:N,_context:at},at.Consumer=at},Ee.createElement=me,Ee.createFactory=function(at){var kt=me.bind(null,at);return kt.type=at,kt},Ee.createRef=function(){return{current:null}},Ee.forwardRef=function(at){return{$$typeof:j,render:at}},Ee.isValidElement=Jt,Ee.lazy=function(at){return{$$typeof:X,_payload:{_status:-1,_result:at},_init:Ve}},Ee.memo=function(at,kt){return{$$typeof:tt,type:at,compare:kt===void 0?null:kt}},Ee.startTransition=function(at){var kt=jt.transition;jt.transition={};try{at()}finally{jt.transition=kt}},Ee.unstable_act=Gt,Ee.useCallback=function(at,kt){return ke.current.useCallback(at,kt)},Ee.useContext=function(at){return ke.current.useContext(at)},Ee.useDebugValue=function(){},Ee.useDeferredValue=function(at){return ke.current.useDeferredValue(at)},Ee.useEffect=function(at,kt){return ke.current.useEffect(at,kt)},Ee.useId=function(){return ke.current.useId()},Ee.useImperativeHandle=function(at,kt,ue){return ke.current.useImperativeHandle(at,kt,ue)},Ee.useInsertionEffect=function(at,kt){return ke.current.useInsertionEffect(at,kt)},Ee.useLayoutEffect=function(at,kt){return ke.current.useLayoutEffect(at,kt)},Ee.useMemo=function(at,kt){return ke.current.useMemo(at,kt)},Ee.useReducer=function(at,kt,ue){return ke.current.useReducer(at,kt,ue)},Ee.useRef=function(at){return ke.current.useRef(at)},Ee.useState=function(at){return ke.current.useState(at)},Ee.useSyncExternalStore=function(at,kt,ue){return ke.current.useSyncExternalStore(at,kt,ue)},Ee.useTransition=function(){return ke.current.useTransition()},Ee.version="18.3.1",Ee}var Mf;function Ec(){return Mf||(Mf=1,Du.exports=bm()),Du.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pf;function km(){if(Pf)return sa;Pf=1;var y=Ec(),u=Symbol.for("react.element"),w=Symbol.for("react.fragment"),v=Object.prototype.hasOwnProperty,P=y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,N={key:!0,ref:!0,__self:!0,__source:!0};function I(j,H,tt){var X,st={},lt=null,Lt=null;tt!==void 0&&(lt=""+tt),H.key!==void 0&&(lt=""+H.key),H.ref!==void 0&&(Lt=H.ref);for(X in H)v.call(H,X)&&!N.hasOwnProperty(X)&&(st[X]=H[X]);if(j&&j.defaultProps)for(X in H=j.defaultProps,H)st[X]===void 0&&(st[X]=H[X]);return{$$typeof:u,type:j,key:lt,ref:Lt,props:st,_owner:P.current}}return sa.Fragment=w,sa.jsx=I,sa.jsxs=I,sa}var Qf;function Mm(){return Qf||(Qf=1,Tu.exports=km()),Tu.exports}var bn=Mm(),vi=Ec();const Pm=Og(vi);var Ql={},Iu={exports:{}},Vn={},Ou={exports:{}},Hu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uf;function Qm(){return Uf||(Uf=1,function(y){function u(jt,Ae){var Gt=jt.length;jt.push(Ae);t:for(;0<Gt;){var at=Gt-1>>>1,kt=jt[at];if(0<P(kt,Ae))jt[at]=Ae,jt[Gt]=kt,Gt=at;else break t}}function w(jt){return jt.length===0?null:jt[0]}function v(jt){if(jt.length===0)return null;var Ae=jt[0],Gt=jt.pop();if(Gt!==Ae){jt[0]=Gt;t:for(var at=0,kt=jt.length,ue=kt>>>1;at<ue;){var ye=2*(at+1)-1,be=jt[ye],Pe=ye+1,Te=jt[Pe];if(0>P(be,Gt))Pe<kt&&0>P(Te,be)?(jt[at]=Te,jt[Pe]=Gt,at=Pe):(jt[at]=be,jt[ye]=Gt,at=ye);else if(Pe<kt&&0>P(Te,Gt))jt[at]=Te,jt[Pe]=Gt,at=Pe;else break t}}return Ae}function P(jt,Ae){var Gt=jt.sortIndex-Ae.sortIndex;return Gt!==0?Gt:jt.id-Ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var N=performance;y.unstable_now=function(){return N.now()}}else{var I=Date,j=I.now();y.unstable_now=function(){return I.now()-j}}var H=[],tt=[],X=1,st=null,lt=3,Lt=!1,vt=!1,bt=!1,xt=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,ct=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function it(jt){for(var Ae=w(tt);Ae!==null;){if(Ae.callback===null)v(tt);else if(Ae.startTime<=jt)v(tt),Ae.sortIndex=Ae.expirationTime,u(H,Ae);else break;Ae=w(tt)}}function Rt(jt){if(bt=!1,it(jt),!vt)if(w(H)!==null)vt=!0,Ve(q);else{var Ae=w(tt);Ae!==null&&ke(Rt,Ae.startTime-jt)}}function q(jt,Ae){vt=!1,bt&&(bt=!1,T(me),me=-1),Lt=!0;var Gt=lt;try{for(it(Ae),st=w(H);st!==null&&(!(st.expirationTime>Ae)||jt&&!ve());){var at=st.callback;if(typeof at=="function"){st.callback=null,lt=st.priorityLevel;var kt=at(st.expirationTime<=Ae);Ae=y.unstable_now(),typeof kt=="function"?st.callback=kt:st===w(H)&&v(H),it(Ae)}else v(H);st=w(H)}if(st!==null)var ue=!0;else{var ye=w(tt);ye!==null&&ke(Rt,ye.startTime-Ae),ue=!1}return ue}finally{st=null,lt=Gt,Lt=!1}}var Bt=!1,V=null,me=-1,fe=5,Jt=-1;function ve(){return!(y.unstable_now()-Jt<fe)}function $e(){if(V!==null){var jt=y.unstable_now();Jt=jt;var Ae=!0;try{Ae=V(!0,jt)}finally{Ae?Nt():(Bt=!1,V=null)}}else Bt=!1}var Nt;if(typeof ct=="function")Nt=function(){ct($e)};else if(typeof MessageChannel<"u"){var Le=new MessageChannel,pi=Le.port2;Le.port1.onmessage=$e,Nt=function(){pi.postMessage(null)}}else Nt=function(){xt($e,0)};function Ve(jt){V=jt,Bt||(Bt=!0,Nt())}function ke(jt,Ae){me=xt(function(){jt(y.unstable_now())},Ae)}y.unstable_IdlePriority=5,y.unstable_ImmediatePriority=1,y.unstable_LowPriority=4,y.unstable_NormalPriority=3,y.unstable_Profiling=null,y.unstable_UserBlockingPriority=2,y.unstable_cancelCallback=function(jt){jt.callback=null},y.unstable_continueExecution=function(){vt||Lt||(vt=!0,Ve(q))},y.unstable_forceFrameRate=function(jt){0>jt||125<jt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):fe=0<jt?Math.floor(1e3/jt):5},y.unstable_getCurrentPriorityLevel=function(){return lt},y.unstable_getFirstCallbackNode=function(){return w(H)},y.unstable_next=function(jt){switch(lt){case 1:case 2:case 3:var Ae=3;break;default:Ae=lt}var Gt=lt;lt=Ae;try{return jt()}finally{lt=Gt}},y.unstable_pauseExecution=function(){},y.unstable_requestPaint=function(){},y.unstable_runWithPriority=function(jt,Ae){switch(jt){case 1:case 2:case 3:case 4:case 5:break;default:jt=3}var Gt=lt;lt=jt;try{return Ae()}finally{lt=Gt}},y.unstable_scheduleCallback=function(jt,Ae,Gt){var at=y.unstable_now();switch(typeof Gt=="object"&&Gt!==null?(Gt=Gt.delay,Gt=typeof Gt=="number"&&0<Gt?at+Gt:at):Gt=at,jt){case 1:var kt=-1;break;case 2:kt=250;break;case 5:kt=1073741823;break;case 4:kt=1e4;break;default:kt=5e3}return kt=Gt+kt,jt={id:X++,callback:Ae,priorityLevel:jt,startTime:Gt,expirationTime:kt,sortIndex:-1},Gt>at?(jt.sortIndex=Gt,u(tt,jt),w(H)===null&&jt===w(tt)&&(bt?(T(me),me=-1):bt=!0,ke(Rt,Gt-at))):(jt.sortIndex=kt,u(H,jt),vt||Lt||(vt=!0,Ve(q))),jt},y.unstable_shouldYield=ve,y.unstable_wrapCallback=function(jt){var Ae=lt;return function(){var Gt=lt;lt=Ae;try{return jt.apply(this,arguments)}finally{lt=Gt}}}}(Hu)),Hu}var Lf;function Um(){return Lf||(Lf=1,Ou.exports=Qm()),Ou.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nf;function Lm(){if(Nf)return Vn;Nf=1;var y=Ec(),u=Um();function w(l){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+l,m=1;m<arguments.length;m++)c+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v=new Set,P={};function N(l,c){I(l,c),I(l+"Capture",c)}function I(l,c){for(P[l]=c,l=0;l<c.length;l++)v.add(c[l])}var j=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),H=Object.prototype.hasOwnProperty,tt=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,X={},st={};function lt(l){return H.call(st,l)?!0:H.call(X,l)?!1:tt.test(l)?st[l]=!0:(X[l]=!0,!1)}function Lt(l,c,m,S){if(m!==null&&m.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return S?!1:m!==null?!m.acceptsBooleans:(l=l.toLowerCase().slice(0,5),l!=="data-"&&l!=="aria-");default:return!1}}function vt(l,c,m,S){if(c===null||typeof c>"u"||Lt(l,c,m,S))return!0;if(S)return!1;if(m!==null)switch(m.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function bt(l,c,m,S,U,E,z){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=S,this.attributeNamespace=U,this.mustUseProperty=m,this.propertyName=l,this.type=c,this.sanitizeURL=E,this.removeEmptyString=z}var xt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(l){xt[l]=new bt(l,0,!1,l,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(l){var c=l[0];xt[c]=new bt(c,1,!1,l[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(l){xt[l]=new bt(l,2,!1,l.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(l){xt[l]=new bt(l,2,!1,l,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(l){xt[l]=new bt(l,3,!1,l.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(l){xt[l]=new bt(l,3,!0,l,null,!1,!1)}),["capture","download"].forEach(function(l){xt[l]=new bt(l,4,!1,l,null,!1,!1)}),["cols","rows","size","span"].forEach(function(l){xt[l]=new bt(l,6,!1,l,null,!1,!1)}),["rowSpan","start"].forEach(function(l){xt[l]=new bt(l,5,!1,l.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function ct(l){return l[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(l){var c=l.replace(T,ct);xt[c]=new bt(c,1,!1,l,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(l){var c=l.replace(T,ct);xt[c]=new bt(c,1,!1,l,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(l){var c=l.replace(T,ct);xt[c]=new bt(c,1,!1,l,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(l){xt[l]=new bt(l,1,!1,l.toLowerCase(),null,!1,!1)}),xt.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(l){xt[l]=new bt(l,1,!1,l.toLowerCase(),null,!0,!0)});function it(l,c,m,S){var U=xt.hasOwnProperty(c)?xt[c]:null;(U!==null?U.type!==0:S||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(vt(c,m,U,S)&&(m=null),S||U===null?lt(c)&&(m===null?l.removeAttribute(c):l.setAttribute(c,""+m)):U.mustUseProperty?l[U.propertyName]=m===null?U.type===3?!1:"":m:(c=U.attributeName,S=U.attributeNamespace,m===null?l.removeAttribute(c):(U=U.type,m=U===3||U===4&&m===!0?"":""+m,S?l.setAttributeNS(S,c,m):l.setAttribute(c,m))))}var Rt=y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,q=Symbol.for("react.element"),Bt=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),me=Symbol.for("react.strict_mode"),fe=Symbol.for("react.profiler"),Jt=Symbol.for("react.provider"),ve=Symbol.for("react.context"),$e=Symbol.for("react.forward_ref"),Nt=Symbol.for("react.suspense"),Le=Symbol.for("react.suspense_list"),pi=Symbol.for("react.memo"),Ve=Symbol.for("react.lazy"),ke=Symbol.for("react.offscreen"),jt=Symbol.iterator;function Ae(l){return l===null||typeof l!="object"?null:(l=jt&&l[jt]||l["@@iterator"],typeof l=="function"?l:null)}var Gt=Object.assign,at;function kt(l){if(at===void 0)try{throw Error()}catch(m){var c=m.stack.trim().match(/\n( *(at )?)/);at=c&&c[1]||""}return`
`+at+l}var ue=!1;function ye(l,c){if(!l||ue)return"";ue=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(mt){var S=mt}Reflect.construct(l,[],c)}else{try{c.call()}catch(mt){S=mt}l.call(c.prototype)}else{try{throw Error()}catch(mt){S=mt}l()}}catch(mt){if(mt&&S&&typeof mt.stack=="string"){for(var U=mt.stack.split(`
`),E=S.stack.split(`
`),z=U.length-1,_=E.length-1;1<=z&&0<=_&&U[z]!==E[_];)_--;for(;1<=z&&0<=_;z--,_--)if(U[z]!==E[_]){if(z!==1||_!==1)do if(z--,_--,0>_||U[z]!==E[_]){var rt=`
`+U[z].replace(" at new "," at ");return l.displayName&&rt.includes("<anonymous>")&&(rt=rt.replace("<anonymous>",l.displayName)),rt}while(1<=z&&0<=_);break}}}finally{ue=!1,Error.prepareStackTrace=m}return(l=l?l.displayName||l.name:"")?kt(l):""}function be(l){switch(l.tag){case 5:return kt(l.type);case 16:return kt("Lazy");case 13:return kt("Suspense");case 19:return kt("SuspenseList");case 0:case 2:case 15:return l=ye(l.type,!1),l;case 11:return l=ye(l.type.render,!1),l;case 1:return l=ye(l.type,!0),l;default:return""}}function Pe(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case V:return"Fragment";case Bt:return"Portal";case fe:return"Profiler";case me:return"StrictMode";case Nt:return"Suspense";case Le:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case ve:return(l.displayName||"Context")+".Consumer";case Jt:return(l._context.displayName||"Context")+".Provider";case $e:var c=l.render;return l=l.displayName,l||(l=c.displayName||c.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case pi:return c=l.displayName||null,c!==null?c:Pe(l.type)||"Memo";case Ve:c=l._payload,l=l._init;try{return Pe(l(c))}catch{}}return null}function Te(l){var c=l.type;switch(l.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=c.render,l=l.displayName||l.name||"",c.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pe(c);case 8:return c===me?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function Ge(l){switch(typeof l){case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Ai(l){var c=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Li(l){var c=Ai(l)?"checked":"value",m=Object.getOwnPropertyDescriptor(l.constructor.prototype,c),S=""+l[c];if(!l.hasOwnProperty(c)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var U=m.get,E=m.set;return Object.defineProperty(l,c,{configurable:!0,get:function(){return U.call(this)},set:function(z){S=""+z,E.call(this,z)}}),Object.defineProperty(l,c,{enumerable:m.enumerable}),{getValue:function(){return S},setValue:function(z){S=""+z},stopTracking:function(){l._valueTracker=null,delete l[c]}}}}function Wr(l){l._valueTracker||(l._valueTracker=Li(l))}function xo(l){if(!l)return!1;var c=l._valueTracker;if(!c)return!0;var m=c.getValue(),S="";return l&&(S=Ai(l)?l.checked?"true":"false":l.value),l=S,l!==m?(c.setValue(l),!0):!1}function Jr(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}function FA(l,c){var m=c.checked;return Gt({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??l._wrapperState.initialChecked})}function qr(l,c){var m=c.defaultValue==null?"":c.defaultValue,S=c.checked!=null?c.checked:c.defaultChecked;m=Ge(c.value!=null?c.value:m),l._wrapperState={initialChecked:S,initialValue:m,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function Co(l,c){c=c.checked,c!=null&&it(l,"checked",c,!1)}function SA(l,c){Co(l,c);var m=Ge(c.value),S=c.type;if(m!=null)S==="number"?(m===0&&l.value===""||l.value!=m)&&(l.value=""+m):l.value!==""+m&&(l.value=""+m);else if(S==="submit"||S==="reset"){l.removeAttribute("value");return}c.hasOwnProperty("value")?Ji(l,c.type,m):c.hasOwnProperty("defaultValue")&&Ji(l,c.type,Ge(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(l.defaultChecked=!!c.defaultChecked)}function us(l,c,m){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var S=c.type;if(!(S!=="submit"&&S!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+l._wrapperState.initialValue,m||c===l.value||(l.value=c),l.defaultValue=c}m=l.name,m!==""&&(l.name=""),l.defaultChecked=!!l._wrapperState.initialChecked,m!==""&&(l.name=m)}function Ji(l,c,m){(c!=="number"||Jr(l.ownerDocument)!==l)&&(m==null?l.defaultValue=""+l._wrapperState.initialValue:l.defaultValue!==""+m&&(l.defaultValue=""+m))}var Ms=Array.isArray;function Ks(l,c,m,S){if(l=l.options,c){c={};for(var U=0;U<m.length;U++)c["$"+m[U]]=!0;for(m=0;m<l.length;m++)U=c.hasOwnProperty("$"+l[m].value),l[m].selected!==U&&(l[m].selected=U),U&&S&&(l[m].defaultSelected=!0)}else{for(m=""+Ge(m),c=null,U=0;U<l.length;U++){if(l[U].value===m){l[U].selected=!0,S&&(l[U].defaultSelected=!0);return}c!==null||l[U].disabled||(c=l[U])}c!==null&&(c.selected=!0)}}function bA(l,c){if(c.dangerouslySetInnerHTML!=null)throw Error(w(91));return Gt({},c,{value:void 0,defaultValue:void 0,children:""+l._wrapperState.initialValue})}function vo(l,c){var m=c.value;if(m==null){if(m=c.children,c=c.defaultValue,m!=null){if(c!=null)throw Error(w(92));if(Ms(m)){if(1<m.length)throw Error(w(93));m=m[0]}c=m}c==null&&(c=""),m=c}l._wrapperState={initialValue:Ge(m)}}function Zr(l,c){var m=Ge(c.value),S=Ge(c.defaultValue);m!=null&&(m=""+m,m!==l.value&&(l.value=m),c.defaultValue==null&&l.defaultValue!==m&&(l.defaultValue=m)),S!=null&&(l.defaultValue=""+S)}function Fo(l){var c=l.textContent;c===l._wrapperState.initialValue&&c!==""&&c!==null&&(l.value=c)}function Vs(l){switch(l){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ps(l,c){return l==null||l==="http://www.w3.org/1999/xhtml"?Vs(c):l==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":l}var kA,So=function(l){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,m,S,U){MSApp.execUnsafeLocalFunction(function(){return l(c,m,S,U)})}:l}(function(l,c){if(l.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in l)l.innerHTML=c;else{for(kA=kA||document.createElement("div"),kA.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=kA.firstChild;l.firstChild;)l.removeChild(l.firstChild);for(;c.firstChild;)l.appendChild(c.firstChild)}});function cs(l,c){if(c){var m=l.firstChild;if(m&&m===l.lastChild&&m.nodeType===3){m.nodeValue=c;return}}l.textContent=c}var ki={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bo=["Webkit","ms","Moz","O"];Object.keys(ki).forEach(function(l){bo.forEach(function(c){c=c+l.charAt(0).toUpperCase()+l.substring(1),ki[c]=ki[l]})});function ko(l,c,m){return c==null||typeof c=="boolean"||c===""?"":m||typeof c!="number"||c===0||ki.hasOwnProperty(l)&&ki[l]?(""+c).trim():c+"px"}function Mo(l,c){l=l.style;for(var m in c)if(c.hasOwnProperty(m)){var S=m.indexOf("--")===0,U=ko(m,c[m],S);m==="float"&&(m="cssFloat"),S?l.setProperty(m,U):l[m]=U}}var Qa=Gt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(l,c){if(c){if(Qa[l]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(w(137,l));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(w(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(w(61))}if(c.style!=null&&typeof c.style!="object")throw Error(w(62))}}function Po(l,c){if(l.indexOf("-")===-1)return typeof c.is=="string";switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ds=null;function Qo(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var lr=null,hr=null,fs=null;function Ua(l){if(l=gi(l)){if(typeof lr!="function")throw Error(w(280));var c=l.stateNode;c&&(c=Fe(c),lr(l.stateNode,l.type,c))}}function sn(l){hr?fs?fs.push(l):fs=[l]:hr=l}function MA(){if(hr){var l=hr,c=fs;if(fs=hr=null,Ua(l),c)for(l=0;l<c.length;l++)Ua(c[l])}}function PA(l,c){return l(c)}function Uo(){}var Ye=!1;function Qs(l,c,m){if(Ye)return l(c,m);Ye=!0;try{return PA(l,c,m)}finally{Ye=!1,(hr!==null||fs!==null)&&(Uo(),MA())}}function Us(l,c){var m=l.stateNode;if(m===null)return null;var S=Fe(m);if(S===null)return null;m=S[c];t:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(S=!S.disabled)||(l=l.type,S=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!S;break t;default:l=!1}if(l)return null;if(m&&typeof m!="function")throw Error(w(231,c,typeof m));return m}var Gs=!1;if(j)try{var gs={};Object.defineProperty(gs,"passive",{get:function(){Gs=!0}}),window.addEventListener("test",gs,gs),window.removeEventListener("test",gs,gs)}catch{Gs=!1}function qi(l,c,m,S,U,E,z,_,rt){var mt=Array.prototype.slice.call(arguments,3);try{c.apply(m,mt)}catch(Dt){this.onError(Dt)}}var kn=!1,Ls=null,Zn=!1,QA=null,ur={onError:function(l){kn=!0,Ls=l}};function Qe(l,c,m,S,U,E,z,_,rt){kn=!1,Ls=null,qi.apply(ur,arguments)}function xe(l,c,m,S,U,E,z,_,rt){if(Qe.apply(this,arguments),kn){if(kn){var mt=Ls;kn=!1,Ls=null}else throw Error(w(198));Zn||(Zn=!0,QA=mt)}}function Xs(l){var c=l,m=l;if(l.alternate)for(;c.return;)c=c.return;else{l=c;do c=l,c.flags&4098&&(m=c.return),l=c.return;while(l)}return c.tag===3?m:null}function La(l){if(l.tag===13){var c=l.memoizedState;if(c===null&&(l=l.alternate,l!==null&&(c=l.memoizedState)),c!==null)return c.dehydrated}return null}function Na(l){if(Xs(l)!==l)throw Error(w(188))}function Lo(l){var c=l.alternate;if(!c){if(c=Xs(l),c===null)throw Error(w(188));return c!==l?null:l}for(var m=l,S=c;;){var U=m.return;if(U===null)break;var E=U.alternate;if(E===null){if(S=U.return,S!==null){m=S;continue}break}if(U.child===E.child){for(E=U.child;E;){if(E===m)return Na(U),l;if(E===S)return Na(U),c;E=E.sibling}throw Error(w(188))}if(m.return!==S.return)m=U,S=E;else{for(var z=!1,_=U.child;_;){if(_===m){z=!0,m=U,S=E;break}if(_===S){z=!0,S=U,m=E;break}_=_.sibling}if(!z){for(_=E.child;_;){if(_===m){z=!0,m=E,S=U;break}if(_===S){z=!0,S=E,m=U;break}_=_.sibling}if(!z)throw Error(w(189))}}if(m.alternate!==S)throw Error(w(190))}if(m.tag!==3)throw Error(w(188));return m.stateNode.current===m?l:c}function Ea(l){return l=Lo(l),l!==null?Ta(l):null}function Ta(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var c=Ta(l);if(c!==null)return c;l=l.sibling}return null}var Da=u.unstable_scheduleCallback,Ia=u.unstable_cancelCallback,Mh=u.unstable_shouldYield,Ph=u.unstable_requestPaint,wi=u.unstable_now,Qh=u.unstable_getCurrentPriorityLevel,UA=u.unstable_ImmediatePriority,Kt=u.unstable_UserBlockingPriority,fn=u.unstable_NormalPriority,cr=u.unstable_LowPriority,Hi=u.unstable_IdlePriority,dr=null,je=null;function Zt(l){if(je&&typeof je.onCommitFiberRoot=="function")try{je.onCommitFiberRoot(dr,l,void 0,(l.current.flags&128)===128)}catch{}}var gn=Math.clz32?Math.clz32:Eo,No=Math.log,Oa=Math.LN2;function Eo(l){return l>>>=0,l===0?32:31-(No(l)/Oa|0)|0}var We=64,fr=4194304;function Zi(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function gr(l,c){var m=l.pendingLanes;if(m===0)return 0;var S=0,U=l.suspendedLanes,E=l.pingedLanes,z=m&268435455;if(z!==0){var _=z&~U;_!==0?S=Zi(_):(E&=z,E!==0&&(S=Zi(E)))}else z=m&~U,z!==0?S=Zi(z):E!==0&&(S=Zi(E));if(S===0)return 0;if(c!==0&&c!==S&&!(c&U)&&(U=S&-S,E=c&-c,U>=E||U===16&&(E&4194240)!==0))return c;if(S&4&&(S|=m&16),c=l.entangledLanes,c!==0)for(l=l.entanglements,c&=S;0<c;)m=31-gn(c),U=1<<m,S|=l[m],c&=~U;return S}function pn(l,c){switch(l){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Uh(l,c){for(var m=l.suspendedLanes,S=l.pingedLanes,U=l.expirationTimes,E=l.pendingLanes;0<E;){var z=31-gn(E),_=1<<z,rt=U[z];rt===-1?(!(_&m)||_&S)&&(U[z]=pn(_,c)):rt<=c&&(l.expiredLanes|=_),E&=~_}}function To(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function zs(){var l=We;return We<<=1,!(We&4194240)&&(We=64),l}function LA(l){for(var c=[],m=0;31>m;m++)c.push(l);return c}function Ce(l,c,m){l.pendingLanes|=c,c!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,c=31-gn(c),l[c]=m}function Do(l,c){var m=l.pendingLanes&~c;l.pendingLanes=c,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=c,l.mutableReadLanes&=c,l.entangledLanes&=c,c=l.entanglements;var S=l.eventTimes;for(l=l.expirationTimes;0<m;){var U=31-gn(m),E=1<<U;c[U]=0,S[U]=-1,l[U]=-1,m&=~E}}function se(l,c){var m=l.entangledLanes|=c;for(l=l.entanglements;m;){var S=31-gn(m),U=1<<S;U&c|l[S]&c&&(l[S]|=c),m&=~U}}var Je=0;function Et(l){return l&=-l,1<l?4<l?l&268435455?16:536870912:4:1}var NA,$r,EA,TA,Xt,Io=!1,Mn=[],$n=null,Ns=null,Xn=null,Pn=new Map,Vt=new Map,Fi=[],Ni="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ps(l,c){switch(l){case"focusin":case"focusout":$n=null;break;case"dragenter":case"dragleave":Ns=null;break;case"mouseover":case"mouseout":Xn=null;break;case"pointerover":case"pointerout":Pn.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vt.delete(c.pointerId)}}function Qn(l,c,m,S,U,E){return l===null||l.nativeEvent!==E?(l={blockedOn:c,domEventName:m,eventSystemFlags:S,nativeEvent:E,targetContainers:[U]},c!==null&&(c=gi(c),c!==null&&$r(c)),l):(l.eventSystemFlags|=S,c=l.targetContainers,U!==null&&c.indexOf(U)===-1&&c.push(U),l)}function pr(l,c,m,S,U){switch(c){case"focusin":return $n=Qn($n,l,c,m,S,U),!0;case"dragenter":return Ns=Qn(Ns,l,c,m,S,U),!0;case"mouseover":return Xn=Qn(Xn,l,c,m,S,U),!0;case"pointerover":var E=U.pointerId;return Pn.set(E,Qn(Pn.get(E)||null,l,c,m,S,U)),!0;case"gotpointercapture":return E=U.pointerId,Vt.set(E,Qn(Vt.get(E)||null,l,c,m,S,U)),!0}return!1}function DA(l){var c=ii(l.target);if(c!==null){var m=Xs(c);if(m!==null){if(c=m.tag,c===13){if(c=La(m),c!==null){l.blockedOn=c,Xt(l.priority,function(){EA(m)});return}}else if(c===3&&m.stateNode.current.memoizedState.isDehydrated){l.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}l.blockedOn=null}function mr(l){if(l.blockedOn!==null)return!1;for(var c=l.targetContainers;0<c.length;){var m=Es(l.domEventName,l.eventSystemFlags,c[0],l.nativeEvent);if(m===null){m=l.nativeEvent;var S=new m.constructor(m.type,m);ds=S,m.target.dispatchEvent(S),ds=null}else return c=gi(m),c!==null&&$r(c),l.blockedOn=m,!1;c.shift()}return!0}function IA(l,c,m){mr(l)&&m.delete(c)}function OA(){Io=!1,$n!==null&&mr($n)&&($n=null),Ns!==null&&mr(Ns)&&(Ns=null),Xn!==null&&mr(Xn)&&(Xn=null),Pn.forEach(IA),Vt.forEach(IA)}function zn(l,c){l.blockedOn===c&&(l.blockedOn=null,Io||(Io=!0,u.unstable_scheduleCallback(u.unstable_NormalPriority,OA)))}function _r(l){function c(U){return zn(U,l)}if(0<Mn.length){zn(Mn[0],l);for(var m=1;m<Mn.length;m++){var S=Mn[m];S.blockedOn===l&&(S.blockedOn=null)}}for($n!==null&&zn($n,l),Ns!==null&&zn(Ns,l),Xn!==null&&zn(Xn,l),Pn.forEach(c),Vt.forEach(c),m=0;m<Fi.length;m++)S=Fi[m],S.blockedOn===l&&(S.blockedOn=null);for(;0<Fi.length&&(m=Fi[0],m.blockedOn===null);)DA(m),m.blockedOn===null&&Fi.shift()}var yr=Rt.ReactCurrentBatchConfig,Ys=!0;function ms(l,c,m,S){var U=Je,E=yr.transition;yr.transition=null;try{Je=1,hi(l,c,m,S)}finally{Je=U,yr.transition=E}}function wr(l,c,m,S){var U=Je,E=yr.transition;yr.transition=null;try{Je=4,hi(l,c,m,S)}finally{Je=U,yr.transition=E}}function hi(l,c,m,S){if(Ys){var U=Es(l,c,m,S);if(U===null)et(l,c,S,ys,m),ps(l,S);else if(pr(U,l,c,m,S))S.stopPropagation();else if(ps(l,S),c&4&&-1<Ni.indexOf(l)){for(;U!==null;){var E=gi(U);if(E!==null&&NA(E),E=Es(l,c,m,S),E===null&&et(l,c,S,ys,m),E===U)break;U=E}U!==null&&S.stopPropagation()}else et(l,c,S,null,m)}}var ys=null;function Es(l,c,m,S){if(ys=null,l=Qo(S),l=ii(l),l!==null)if(c=Xs(l),c===null)l=null;else if(m=c.tag,m===13){if(l=La(c),l!==null)return l;l=null}else if(m===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;l=null}else c!==l&&(l=null);return ys=l,null}function HA(l){switch(l){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qh()){case UA:return 1;case Kt:return 4;case fn:case cr:return 16;case Hi:return 536870912;default:return 16}default:return 16}}var _n=null,tA=null,Br=null;function Ri(){if(Br)return Br;var l,c=tA,m=c.length,S,U="value"in _n?_n.value:_n.textContent,E=U.length;for(l=0;l<m&&c[l]===U[l];l++);var z=m-l;for(S=1;S<=z&&c[m-S]===U[E-S];S++);return Br=U.slice(l,1<S?1-S:void 0)}function eA(l){var c=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&c===13&&(l=13)):l=c,l===10&&(l=13),32<=l||l===13?l:0}function iA(){return!0}function Oo(){return!1}function rn(l){function c(m,S,U,E,z){this._reactName=m,this._targetInst=U,this.type=S,this.nativeEvent=E,this.target=z,this.currentTarget=null;for(var _ in l)l.hasOwnProperty(_)&&(m=l[_],this[_]=m?m(E):E[_]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?iA:Oo,this.isPropagationStopped=Oo,this}return Gt(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=iA)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=iA)},persist:function(){},isPersistent:iA}),c}var xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},RA=rn(xr),Cr=Gt({},xr,{view:0,detail:0}),Ha=rn(Cr),KA,nA,js,vr=Gt({},Cr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rA,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==js&&(js&&l.type==="mousemove"?(KA=l.screenX-js.screenX,nA=l.screenY-js.screenY):nA=KA=0,js=l),KA)},movementY:function(l){return"movementY"in l?l.movementY:nA}}),VA=rn(vr),Ra=Gt({},vr,{dataTransfer:0}),Ka=rn(Ra),ui=Gt({},Cr,{relatedTarget:0}),GA=rn(ui),sA=Gt({},xr,{animationName:0,elapsedTime:0,pseudoElement:0}),Va=rn(sA),Ho=Gt({},xr,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Ro=rn(Ho),Ko=Gt({},xr,{data:0}),XA=rn(Ko),Vo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Go={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ga={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _e(l){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(l):(l=Ga[l])?!!c[l]:!1}function rA(){return _e}var Un=Gt({},Cr,{key:function(l){if(l.key){var c=Vo[l.key]||l.key;if(c!=="Unidentified")return c}return l.type==="keypress"?(l=eA(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Go[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rA,charCode:function(l){return l.type==="keypress"?eA(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?eA(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Xa=rn(Un),mn=Gt({},vr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fr=rn(mn),za=Gt({},Cr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rA}),Lh=rn(za),zA=Gt({},xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),AA=rn(zA),ci=Gt({},vr,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),YA=rn(ci),ws=[9,13,27,32],di=j&&"CompositionEvent"in window,qe=null;j&&"documentMode"in document&&(qe=document.documentMode);var Ei=j&&"TextEvent"in window&&!qe,Mi=j&&(!di||qe&&8<qe&&11>=qe),pt=" ",Bs=!1;function Si(l,c){switch(l){case"keyup":return ws.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yn(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Ln=!1;function Me(l,c){switch(l){case"compositionend":return yn(c);case"keypress":return c.which!==32?null:(Bs=!0,pt);case"textInput":return l=c.data,l===pt&&Bs?null:l;default:return null}}function Ws(l,c){if(Ln)return l==="compositionend"||!di&&Si(l,c)?(l=Ri(),Br=tA=_n=null,Ln=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Mi&&c.locale!=="ko"?null:c.data;default:return null}}var ti={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oi(l){var c=l&&l.nodeName&&l.nodeName.toLowerCase();return c==="input"?!!ti[l.type]:c==="textarea"}function wn(l,c,m,S){sn(S),c=ht(c,"onChange"),0<c.length&&(m=new RA("onChange","change",null,m,S),l.push({event:m,listeners:c}))}var Ti=null,ts=null;function dt(l){J(l,0)}function qt(l){var c=Ki(l);if(xo(c))return l}function jA(l,c){if(l==="change")return c}var $=!1;if(j){var Sr;if(j){var Js="oninput"in document;if(!Js){var It=document.createElement("div");It.setAttribute("oninput","return;"),Js=typeof It.oninput=="function"}Sr=Js}else Sr=!1;$=Sr&&(!document.documentMode||9<document.documentMode)}function Bn(){Ti&&(Ti.detachEvent("onpropertychange",De),ts=Ti=null)}function De(l){if(l.propertyName==="value"&&qt(ts)){var c=[];wn(c,ts,l,Qo(l)),Qs(dt,c)}}function oe(l,c,m){l==="focusin"?(Bn(),Ti=c,ts=m,Ti.attachEvent("onpropertychange",De)):l==="focusout"&&Bn()}function ai(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return qt(ts)}function qs(l,c){if(l==="click")return qt(c)}function li(l,c){if(l==="input"||l==="change")return qt(c)}function Yn(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var $t=typeof Object.is=="function"?Object.is:Yn;function Ue(l,c){if($t(l,c))return!0;if(typeof l!="object"||l===null||typeof c!="object"||c===null)return!1;var m=Object.keys(l),S=Object.keys(c);if(m.length!==S.length)return!1;for(S=0;S<m.length;S++){var U=m[S];if(!H.call(c,U)||!$t(l[U],c[U]))return!1}return!0}function Nn(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function En(l,c){var m=Nn(l);l=0;for(var S;m;){if(m.nodeType===3){if(S=l+m.textContent.length,l<=c&&S>=c)return{node:m,offset:c-l};l=S}t:{for(;m;){if(m.nextSibling){m=m.nextSibling;break t}m=m.parentNode}m=void 0}m=Nn(m)}}function $i(l,c){return l&&c?l===c?!0:l&&l.nodeType===3?!1:c&&c.nodeType===3?$i(l,c.parentNode):"contains"in l?l.contains(c):l.compareDocumentPosition?!!(l.compareDocumentPosition(c)&16):!1:!1}function he(){for(var l=window,c=Jr();c instanceof l.HTMLIFrameElement;){try{var m=typeof c.contentWindow.location.href=="string"}catch{m=!1}if(m)l=c.contentWindow;else break;c=Jr(l.document)}return c}function si(l){var c=l&&l.nodeName&&l.nodeName.toLowerCase();return c&&(c==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||c==="textarea"||l.contentEditable==="true")}function br(l){var c=he(),m=l.focusedElem,S=l.selectionRange;if(c!==m&&m&&m.ownerDocument&&$i(m.ownerDocument.documentElement,m)){if(S!==null&&si(m)){if(c=S.start,l=S.end,l===void 0&&(l=c),"selectionStart"in m)m.selectionStart=c,m.selectionEnd=Math.min(l,m.value.length);else if(l=(c=m.ownerDocument||document)&&c.defaultView||window,l.getSelection){l=l.getSelection();var U=m.textContent.length,E=Math.min(S.start,U);S=S.end===void 0?E:Math.min(S.end,U),!l.extend&&E>S&&(U=S,S=E,E=U),U=En(m,E);var z=En(m,S);U&&z&&(l.rangeCount!==1||l.anchorNode!==U.node||l.anchorOffset!==U.offset||l.focusNode!==z.node||l.focusOffset!==z.offset)&&(c=c.createRange(),c.setStart(U.node,U.offset),l.removeAllRanges(),E>S?(l.addRange(c),l.extend(z.node,z.offset)):(c.setEnd(z.node,z.offset),l.addRange(c)))}}for(c=[],l=m;l=l.parentNode;)l.nodeType===1&&c.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<c.length;m++)l=c[m],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var k=j&&"documentMode"in document&&11>=document.documentMode,e=null,t=null,i=null,n=!1;function s(l,c,m){var S=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;n||e==null||e!==Jr(S)||(S=e,"selectionStart"in S&&si(S)?S={start:S.selectionStart,end:S.selectionEnd}:(S=(S.ownerDocument&&S.ownerDocument.defaultView||window).getSelection(),S={anchorNode:S.anchorNode,anchorOffset:S.anchorOffset,focusNode:S.focusNode,focusOffset:S.focusOffset}),i&&Ue(i,S)||(i=S,S=ht(t,"onSelect"),0<S.length&&(c=new RA("onSelect","select",null,c,m),l.push({event:c,listeners:S}),c.target=e)))}function r(l,c){var m={};return m[l.toLowerCase()]=c.toLowerCase(),m["Webkit"+l]="webkit"+c,m["Moz"+l]="moz"+c,m}var A={animationend:r("Animation","AnimationEnd"),animationiteration:r("Animation","AnimationIteration"),animationstart:r("Animation","AnimationStart"),transitionend:r("Transition","TransitionEnd")},o={},a={};j&&(a=document.createElement("div").style,"AnimationEvent"in window||(delete A.animationend.animation,delete A.animationiteration.animation,delete A.animationstart.animation),"TransitionEvent"in window||delete A.transitionend.transition);function h(l){if(o[l])return o[l];if(!A[l])return l;var c=A[l],m;for(m in c)if(c.hasOwnProperty(m)&&m in a)return o[l]=c[m];return l}var d=h("animationend"),f=h("animationiteration"),g=h("animationstart"),x=h("transitionend"),B=new Map,C="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function F(l,c){B.set(l,c),N(c,[l])}for(var b=0;b<C.length;b++){var L=C[b],Q=L.toLowerCase(),M=L[0].toUpperCase()+L.slice(1);F(Q,"on"+M)}F(d,"onAnimationEnd"),F(f,"onAnimationIteration"),F(g,"onAnimationStart"),F("dblclick","onDoubleClick"),F("focusin","onFocus"),F("focusout","onBlur"),F(x,"onTransitionEnd"),I("onMouseEnter",["mouseout","mouseover"]),I("onMouseLeave",["mouseout","mouseover"]),I("onPointerEnter",["pointerout","pointerover"]),I("onPointerLeave",["pointerout","pointerover"]),N("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),N("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),N("onBeforeInput",["compositionend","keypress","textInput","paste"]),N("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),N("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),N("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var O="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),D=new Set("cancel close invalid load scroll toggle".split(" ").concat(O));function K(l,c,m){var S=l.type||"unknown-event";l.currentTarget=m,xe(S,c,void 0,l),l.currentTarget=null}function J(l,c){c=(c&4)!==0;for(var m=0;m<l.length;m++){var S=l[m],U=S.event;S=S.listeners;t:{var E=void 0;if(c)for(var z=S.length-1;0<=z;z--){var _=S[z],rt=_.instance,mt=_.currentTarget;if(_=_.listener,rt!==E&&U.isPropagationStopped())break t;K(U,_,mt),E=rt}else for(z=0;z<S.length;z++){if(_=S[z],rt=_.instance,mt=_.currentTarget,_=_.listener,rt!==E&&U.isPropagationStopped())break t;K(U,_,mt),E=rt}}}if(Zn)throw l=QA,Zn=!1,QA=null,l}function R(l,c){var m=c[xn];m===void 0&&(m=c[xn]=new Set);var S=l+"__bubble";m.has(S)||(Z(c,l,2,!1),m.add(S))}function G(l,c,m){var S=0;c&&(S|=4),Z(m,l,S,c)}var W="_reactListening"+Math.random().toString(36).slice(2);function Y(l){if(!l[W]){l[W]=!0,v.forEach(function(m){m!=="selectionchange"&&(D.has(m)||G(m,!1,l),G(m,!0,l))});var c=l.nodeType===9?l:l.ownerDocument;c===null||c[W]||(c[W]=!0,G("selectionchange",!1,c))}}function Z(l,c,m,S){switch(HA(c)){case 1:var U=ms;break;case 4:U=wr;break;default:U=hi}m=U.bind(null,c,m,l),U=void 0,!Gs||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(U=!0),S?U!==void 0?l.addEventListener(c,m,{capture:!0,passive:U}):l.addEventListener(c,m,!0):U!==void 0?l.addEventListener(c,m,{passive:U}):l.addEventListener(c,m,!1)}function et(l,c,m,S,U){var E=S;if(!(c&1)&&!(c&2)&&S!==null)t:for(;;){if(S===null)return;var z=S.tag;if(z===3||z===4){var _=S.stateNode.containerInfo;if(_===U||_.nodeType===8&&_.parentNode===U)break;if(z===4)for(z=S.return;z!==null;){var rt=z.tag;if((rt===3||rt===4)&&(rt=z.stateNode.containerInfo,rt===U||rt.nodeType===8&&rt.parentNode===U))return;z=z.return}for(;_!==null;){if(z=ii(_),z===null)return;if(rt=z.tag,rt===5||rt===6){S=E=z;continue t}_=_.parentNode}}S=S.return}Qs(function(){var mt=E,Dt=Qo(m),Ot=[];t:{var Tt=B.get(l);if(Tt!==void 0){var ee=RA,le=l;switch(l){case"keypress":if(eA(m)===0)break t;case"keydown":case"keyup":ee=Xa;break;case"focusin":le="focus",ee=GA;break;case"focusout":le="blur",ee=GA;break;case"beforeblur":case"afterblur":ee=GA;break;case"click":if(m.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=VA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=Ka;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=Lh;break;case d:case f:case g:ee=Va;break;case x:ee=AA;break;case"scroll":ee=Ha;break;case"wheel":ee=YA;break;case"copy":case"cut":case"paste":ee=Ro;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=Fr}var ce=(c&4)!==0,Pi=!ce&&l==="scroll",ut=ce?Tt!==null?Tt+"Capture":null:Tt;ce=[];for(var ot=mt,ft;ot!==null;){ft=ot;var Yt=ft.stateNode;if(ft.tag===5&&Yt!==null&&(ft=Yt,ut!==null&&(Yt=Us(ot,ut),Yt!=null&&ce.push(At(ot,Yt,ft)))),Pi)break;ot=ot.return}0<ce.length&&(Tt=new ee(Tt,le,null,m,Dt),Ot.push({event:Tt,listeners:ce}))}}if(!(c&7)){t:{if(Tt=l==="mouseover"||l==="pointerover",ee=l==="mouseout"||l==="pointerout",Tt&&m!==ds&&(le=m.relatedTarget||m.fromElement)&&(ii(le)||le[Xe]))break t;if((ee||Tt)&&(Tt=Dt.window===Dt?Dt:(Tt=Dt.ownerDocument)?Tt.defaultView||Tt.parentWindow:window,ee?(le=m.relatedTarget||m.toElement,ee=mt,le=le?ii(le):null,le!==null&&(Pi=Xs(le),le!==Pi||le.tag!==5&&le.tag!==6)&&(le=null)):(ee=null,le=mt),ee!==le)){if(ce=VA,Yt="onMouseLeave",ut="onMouseEnter",ot="mouse",(l==="pointerout"||l==="pointerover")&&(ce=Fr,Yt="onPointerLeave",ut="onPointerEnter",ot="pointer"),Pi=ee==null?Tt:Ki(ee),ft=le==null?Tt:Ki(le),Tt=new ce(Yt,ot+"leave",ee,m,Dt),Tt.target=Pi,Tt.relatedTarget=ft,Yt=null,ii(Dt)===mt&&(ce=new ce(ut,ot+"enter",le,m,Dt),ce.target=ft,ce.relatedTarget=Pi,Yt=ce),Pi=Yt,ee&&le)e:{for(ce=ee,ut=le,ot=0,ft=ce;ft;ft=nt(ft))ot++;for(ft=0,Yt=ut;Yt;Yt=nt(Yt))ft++;for(;0<ot-ft;)ce=nt(ce),ot--;for(;0<ft-ot;)ut=nt(ut),ft--;for(;ot--;){if(ce===ut||ut!==null&&ce===ut.alternate)break e;ce=nt(ce),ut=nt(ut)}ce=null}else ce=null;ee!==null&&gt(Ot,Tt,ee,ce,!1),le!==null&&Pi!==null&&gt(Ot,Pi,le,ce,!0)}}t:{if(Tt=mt?Ki(mt):window,ee=Tt.nodeName&&Tt.nodeName.toLowerCase(),ee==="select"||ee==="input"&&Tt.type==="file")var de=jA;else if(oi(Tt))if($)de=li;else{de=ai;var we=oe}else(ee=Tt.nodeName)&&ee.toLowerCase()==="input"&&(Tt.type==="checkbox"||Tt.type==="radio")&&(de=qs);if(de&&(de=de(l,mt))){wn(Ot,de,m,Dt);break t}we&&we(l,Tt,mt),l==="focusout"&&(we=Tt._wrapperState)&&we.controlled&&Tt.type==="number"&&Ji(Tt,"number",Tt.value)}switch(we=mt?Ki(mt):window,l){case"focusin":(oi(we)||we.contentEditable==="true")&&(e=we,t=mt,i=null);break;case"focusout":i=t=e=null;break;case"mousedown":n=!0;break;case"contextmenu":case"mouseup":case"dragend":n=!1,s(Ot,m,Dt);break;case"selectionchange":if(k)break;case"keydown":case"keyup":s(Ot,m,Dt)}var Be;if(di)t:{switch(l){case"compositionstart":var Se="onCompositionStart";break t;case"compositionend":Se="onCompositionEnd";break t;case"compositionupdate":Se="onCompositionUpdate";break t}Se=void 0}else Ln?Si(l,m)&&(Se="onCompositionEnd"):l==="keydown"&&m.keyCode===229&&(Se="onCompositionStart");Se&&(Mi&&m.locale!=="ko"&&(Ln||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&Ln&&(Be=Ri()):(_n=Dt,tA="value"in _n?_n.value:_n.textContent,Ln=!0)),we=ht(mt,Se),0<we.length&&(Se=new XA(Se,l,null,m,Dt),Ot.push({event:Se,listeners:we}),Be?Se.data=Be:(Be=yn(m),Be!==null&&(Se.data=Be)))),(Be=Ei?Me(l,m):Ws(l,m))&&(mt=ht(mt,"onBeforeInput"),0<mt.length&&(Dt=new XA("onBeforeInput","beforeinput",null,m,Dt),Ot.push({event:Dt,listeners:mt}),Dt.data=Be))}J(Ot,c)})}function At(l,c,m){return{instance:l,listener:c,currentTarget:m}}function ht(l,c){for(var m=c+"Capture",S=[];l!==null;){var U=l,E=U.stateNode;U.tag===5&&E!==null&&(U=E,E=Us(l,m),E!=null&&S.unshift(At(l,E,U)),E=Us(l,c),E!=null&&S.push(At(l,E,U))),l=l.return}return S}function nt(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5);return l||null}function gt(l,c,m,S,U){for(var E=c._reactName,z=[];m!==null&&m!==S;){var _=m,rt=_.alternate,mt=_.stateNode;if(rt!==null&&rt===S)break;_.tag===5&&mt!==null&&(_=mt,U?(rt=Us(m,E),rt!=null&&z.unshift(At(m,rt,_))):U||(rt=Us(m,E),rt!=null&&z.push(At(m,rt,_)))),m=m.return}z.length!==0&&l.push({event:c,listeners:z})}var Ct=/\r\n?/g,Wt=/\u0000|\uFFFD/g;function St(l){return(typeof l=="string"?l:""+l).replace(Ct,`
`).replace(Wt,"")}function Qt(l,c,m){if(c=St(c),St(l)!==c&&m)throw Error(w(425))}function Mt(){}var Ut=null,ne=null;function te(l,c){return l==="textarea"||l==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Ft=typeof setTimeout=="function"?setTimeout:void 0,zt=typeof clearTimeout=="function"?clearTimeout:void 0,He=typeof Promise=="function"?Promise:void 0,ae=typeof queueMicrotask=="function"?queueMicrotask:typeof He<"u"?function(l){return He.resolve(null).then(l).catch(Pt)}:Ft;function Pt(l){setTimeout(function(){throw l})}function wt(l,c){var m=c,S=0;do{var U=m.nextSibling;if(l.removeChild(m),U&&U.nodeType===8)if(m=U.data,m==="/$"){if(S===0){l.removeChild(U),_r(c);return}S--}else m!=="$"&&m!=="$?"&&m!=="$!"||S++;m=U}while(m);_r(c)}function Ht(l){for(;l!=null;l=l.nextSibling){var c=l.nodeType;if(c===1||c===3)break;if(c===8){if(c=l.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return l}function pe(l){l=l.previousSibling;for(var c=0;l;){if(l.nodeType===8){var m=l.data;if(m==="$"||m==="$!"||m==="$?"){if(c===0)return l;c--}else m==="/$"&&c++}l=l.previousSibling}return null}var Re=Math.random().toString(36).slice(2),Ie="__reactFiber$"+Re,ei="__reactProps$"+Re,Xe="__reactContainer$"+Re,xn="__reactEvents$"+Re,An="__reactListeners$"+Re,Cn="__reactHandles$"+Re;function ii(l){var c=l[Ie];if(c)return c;for(var m=l.parentNode;m;){if(c=m[Xe]||m[Ie]){if(m=c.alternate,c.child!==null||m!==null&&m.child!==null)for(l=pe(l);l!==null;){if(m=l[Ie])return m;l=pe(l)}return c}l=m,m=l.parentNode}return null}function gi(l){return l=l[Ie]||l[Xe],!l||l.tag!==5&&l.tag!==6&&l.tag!==13&&l.tag!==3?null:l}function Ki(l){if(l.tag===5||l.tag===6)return l.stateNode;throw Error(w(33))}function Fe(l){return l[ei]||null}var Tn=[],Bi=-1;function Di(l){return{current:l}}function Ke(l){0>Bi||(l.current=Tn[Bi],Tn[Bi]=null,Bi--)}function Ne(l,c){Bi++,Tn[Bi]=l.current,l.current=c}var Dn={},on=Di(Dn),In=Di(!1),oA=Dn;function WA(l,c){var m=l.type.contextTypes;if(!m)return Dn;var S=l.stateNode;if(S&&S.__reactInternalMemoizedUnmaskedChildContext===c)return S.__reactInternalMemoizedMaskedChildContext;var U={},E;for(E in m)U[E]=c[E];return S&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=c,l.__reactInternalMemoizedMaskedChildContext=U),U}function On(l){return l=l.childContextTypes,l!=null}function Ya(){Ke(In),Ke(on)}function Wc(l,c,m){if(on.current!==Dn)throw Error(w(168));Ne(on,c),Ne(In,m)}function Jc(l,c,m){var S=l.stateNode;if(c=c.childContextTypes,typeof S.getChildContext!="function")return m;S=S.getChildContext();for(var U in S)if(!(U in c))throw Error(w(108,Te(l)||"Unknown",U));return Gt({},m,S)}function ja(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||Dn,oA=on.current,Ne(on,l),Ne(In,In.current),!0}function qc(l,c,m){var S=l.stateNode;if(!S)throw Error(w(169));m?(l=Jc(l,c,oA),S.__reactInternalMemoizedMergedChildContext=l,Ke(In),Ke(on),Ne(on,l)):Ke(In),Ne(In,m)}var Zs=null,Wa=!1,Nh=!1;function Zc(l){Zs===null?Zs=[l]:Zs.push(l)}function Xp(l){Wa=!0,Zc(l)}function kr(){if(!Nh&&Zs!==null){Nh=!0;var l=0,c=Je;try{var m=Zs;for(Je=1;l<m.length;l++){var S=m[l];do S=S(!0);while(S!==null)}Zs=null,Wa=!1}catch(U){throw Zs!==null&&(Zs=Zs.slice(l+1)),Da(UA,kr),U}finally{Je=c,Nh=!1}}return null}var JA=[],qA=0,Ja=null,qa=0,es=[],is=0,aA=null,$s=1,_s="";function lA(l,c){JA[qA++]=qa,JA[qA++]=Ja,Ja=l,qa=c}function $c(l,c,m){es[is++]=$s,es[is++]=_s,es[is++]=aA,aA=l;var S=$s;l=_s;var U=32-gn(S)-1;S&=~(1<<U),m+=1;var E=32-gn(c)+U;if(30<E){var z=U-U%5;E=(S&(1<<z)-1).toString(32),S>>=z,U-=z,$s=1<<32-gn(c)+U|m<<U|S,_s=E+l}else $s=1<<E|m<<U|S,_s=l}function Eh(l){l.return!==null&&(lA(l,1),$c(l,1,0))}function Th(l){for(;l===Ja;)Ja=JA[--qA],JA[qA]=null,qa=JA[--qA],JA[qA]=null;for(;l===aA;)aA=es[--is],es[is]=null,_s=es[--is],es[is]=null,$s=es[--is],es[is]=null}var jn=null,Wn=null,mi=!1,xs=null;function _c(l,c){var m=As(5,null,null,0);m.elementType="DELETED",m.stateNode=c,m.return=l,c=l.deletions,c===null?(l.deletions=[m],l.flags|=16):c.push(m)}function td(l,c){switch(l.tag){case 5:var m=l.type;return c=c.nodeType!==1||m.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(l.stateNode=c,jn=l,Wn=Ht(c.firstChild),!0):!1;case 6:return c=l.pendingProps===""||c.nodeType!==3?null:c,c!==null?(l.stateNode=c,jn=l,Wn=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(m=aA!==null?{id:$s,overflow:_s}:null,l.memoizedState={dehydrated:c,treeContext:m,retryLane:1073741824},m=As(18,null,null,0),m.stateNode=c,m.return=l,l.child=m,jn=l,Wn=null,!0):!1;default:return!1}}function Dh(l){return(l.mode&1)!==0&&(l.flags&128)===0}function Ih(l){if(mi){var c=Wn;if(c){var m=c;if(!td(l,c)){if(Dh(l))throw Error(w(418));c=Ht(m.nextSibling);var S=jn;c&&td(l,c)?_c(S,m):(l.flags=l.flags&-4097|2,mi=!1,jn=l)}}else{if(Dh(l))throw Error(w(418));l.flags=l.flags&-4097|2,mi=!1,jn=l}}}function ed(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;jn=l}function Za(l){if(l!==jn)return!1;if(!mi)return ed(l),mi=!0,!1;var c;if((c=l.tag!==3)&&!(c=l.tag!==5)&&(c=l.type,c=c!=="head"&&c!=="body"&&!te(l.type,l.memoizedProps)),c&&(c=Wn)){if(Dh(l))throw id(),Error(w(418));for(;c;)_c(l,c),c=Ht(c.nextSibling)}if(ed(l),l.tag===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(w(317));t:{for(l=l.nextSibling,c=0;l;){if(l.nodeType===8){var m=l.data;if(m==="/$"){if(c===0){Wn=Ht(l.nextSibling);break t}c--}else m!=="$"&&m!=="$!"&&m!=="$?"||c++}l=l.nextSibling}Wn=null}}else Wn=jn?Ht(l.stateNode.nextSibling):null;return!0}function id(){for(var l=Wn;l;)l=Ht(l.nextSibling)}function ZA(){Wn=jn=null,mi=!1}function Oh(l){xs===null?xs=[l]:xs.push(l)}var zp=Rt.ReactCurrentBatchConfig;function Xo(l,c,m){if(l=m.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(w(309));var S=m.stateNode}if(!S)throw Error(w(147,l));var U=S,E=""+l;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===E?c.ref:(c=function(z){var _=U.refs;z===null?delete _[E]:_[E]=z},c._stringRef=E,c)}if(typeof l!="string")throw Error(w(284));if(!m._owner)throw Error(w(290,l))}return l}function $a(l,c){throw l=Object.prototype.toString.call(c),Error(w(31,l==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":l))}function nd(l){var c=l._init;return c(l._payload)}function sd(l){function c(ut,ot){if(l){var ft=ut.deletions;ft===null?(ut.deletions=[ot],ut.flags|=16):ft.push(ot)}}function m(ut,ot){if(!l)return null;for(;ot!==null;)c(ut,ot),ot=ot.sibling;return null}function S(ut,ot){for(ut=new Map;ot!==null;)ot.key!==null?ut.set(ot.key,ot):ut.set(ot.index,ot),ot=ot.sibling;return ut}function U(ut,ot){return ut=Tr(ut,ot),ut.index=0,ut.sibling=null,ut}function E(ut,ot,ft){return ut.index=ft,l?(ft=ut.alternate,ft!==null?(ft=ft.index,ft<ot?(ut.flags|=2,ot):ft):(ut.flags|=2,ot)):(ut.flags|=1048576,ot)}function z(ut){return l&&ut.alternate===null&&(ut.flags|=2),ut}function _(ut,ot,ft,Yt){return ot===null||ot.tag!==6?(ot=Pu(ft,ut.mode,Yt),ot.return=ut,ot):(ot=U(ot,ft),ot.return=ut,ot)}function rt(ut,ot,ft,Yt){var de=ft.type;return de===V?Dt(ut,ot,ft.props.children,Yt,ft.key):ot!==null&&(ot.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===Ve&&nd(de)===ot.type)?(Yt=U(ot,ft.props),Yt.ref=Xo(ut,ot,ft),Yt.return=ut,Yt):(Yt=Cl(ft.type,ft.key,ft.props,null,ut.mode,Yt),Yt.ref=Xo(ut,ot,ft),Yt.return=ut,Yt)}function mt(ut,ot,ft,Yt){return ot===null||ot.tag!==4||ot.stateNode.containerInfo!==ft.containerInfo||ot.stateNode.implementation!==ft.implementation?(ot=Qu(ft,ut.mode,Yt),ot.return=ut,ot):(ot=U(ot,ft.children||[]),ot.return=ut,ot)}function Dt(ut,ot,ft,Yt,de){return ot===null||ot.tag!==7?(ot=mA(ft,ut.mode,Yt,de),ot.return=ut,ot):(ot=U(ot,ft),ot.return=ut,ot)}function Ot(ut,ot,ft){if(typeof ot=="string"&&ot!==""||typeof ot=="number")return ot=Pu(""+ot,ut.mode,ft),ot.return=ut,ot;if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case q:return ft=Cl(ot.type,ot.key,ot.props,null,ut.mode,ft),ft.ref=Xo(ut,null,ot),ft.return=ut,ft;case Bt:return ot=Qu(ot,ut.mode,ft),ot.return=ut,ot;case Ve:var Yt=ot._init;return Ot(ut,Yt(ot._payload),ft)}if(Ms(ot)||Ae(ot))return ot=mA(ot,ut.mode,ft,null),ot.return=ut,ot;$a(ut,ot)}return null}function Tt(ut,ot,ft,Yt){var de=ot!==null?ot.key:null;if(typeof ft=="string"&&ft!==""||typeof ft=="number")return de!==null?null:_(ut,ot,""+ft,Yt);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case q:return ft.key===de?rt(ut,ot,ft,Yt):null;case Bt:return ft.key===de?mt(ut,ot,ft,Yt):null;case Ve:return de=ft._init,Tt(ut,ot,de(ft._payload),Yt)}if(Ms(ft)||Ae(ft))return de!==null?null:Dt(ut,ot,ft,Yt,null);$a(ut,ft)}return null}function ee(ut,ot,ft,Yt,de){if(typeof Yt=="string"&&Yt!==""||typeof Yt=="number")return ut=ut.get(ft)||null,_(ot,ut,""+Yt,de);if(typeof Yt=="object"&&Yt!==null){switch(Yt.$$typeof){case q:return ut=ut.get(Yt.key===null?ft:Yt.key)||null,rt(ot,ut,Yt,de);case Bt:return ut=ut.get(Yt.key===null?ft:Yt.key)||null,mt(ot,ut,Yt,de);case Ve:var we=Yt._init;return ee(ut,ot,ft,we(Yt._payload),de)}if(Ms(Yt)||Ae(Yt))return ut=ut.get(ft)||null,Dt(ot,ut,Yt,de,null);$a(ot,Yt)}return null}function le(ut,ot,ft,Yt){for(var de=null,we=null,Be=ot,Se=ot=0,ji=null;Be!==null&&Se<ft.length;Se++){Be.index>Se?(ji=Be,Be=null):ji=Be.sibling;var Ze=Tt(ut,Be,ft[Se],Yt);if(Ze===null){Be===null&&(Be=ji);break}l&&Be&&Ze.alternate===null&&c(ut,Be),ot=E(Ze,ot,Se),we===null?de=Ze:we.sibling=Ze,we=Ze,Be=ji}if(Se===ft.length)return m(ut,Be),mi&&lA(ut,Se),de;if(Be===null){for(;Se<ft.length;Se++)Be=Ot(ut,ft[Se],Yt),Be!==null&&(ot=E(Be,ot,Se),we===null?de=Be:we.sibling=Be,we=Be);return mi&&lA(ut,Se),de}for(Be=S(ut,Be);Se<ft.length;Se++)ji=ee(Be,ut,Se,ft[Se],Yt),ji!==null&&(l&&ji.alternate!==null&&Be.delete(ji.key===null?Se:ji.key),ot=E(ji,ot,Se),we===null?de=ji:we.sibling=ji,we=ji);return l&&Be.forEach(function(Dr){return c(ut,Dr)}),mi&&lA(ut,Se),de}function ce(ut,ot,ft,Yt){var de=Ae(ft);if(typeof de!="function")throw Error(w(150));if(ft=de.call(ft),ft==null)throw Error(w(151));for(var we=de=null,Be=ot,Se=ot=0,ji=null,Ze=ft.next();Be!==null&&!Ze.done;Se++,Ze=ft.next()){Be.index>Se?(ji=Be,Be=null):ji=Be.sibling;var Dr=Tt(ut,Be,Ze.value,Yt);if(Dr===null){Be===null&&(Be=ji);break}l&&Be&&Dr.alternate===null&&c(ut,Be),ot=E(Dr,ot,Se),we===null?de=Dr:we.sibling=Dr,we=Dr,Be=ji}if(Ze.done)return m(ut,Be),mi&&lA(ut,Se),de;if(Be===null){for(;!Ze.done;Se++,Ze=ft.next())Ze=Ot(ut,Ze.value,Yt),Ze!==null&&(ot=E(Ze,ot,Se),we===null?de=Ze:we.sibling=Ze,we=Ze);return mi&&lA(ut,Se),de}for(Be=S(ut,Be);!Ze.done;Se++,Ze=ft.next())Ze=ee(Be,ut,Se,Ze.value,Yt),Ze!==null&&(l&&Ze.alternate!==null&&Be.delete(Ze.key===null?Se:Ze.key),ot=E(Ze,ot,Se),we===null?de=Ze:we.sibling=Ze,we=Ze);return l&&Be.forEach(function(vm){return c(ut,vm)}),mi&&lA(ut,Se),de}function Pi(ut,ot,ft,Yt){if(typeof ft=="object"&&ft!==null&&ft.type===V&&ft.key===null&&(ft=ft.props.children),typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case q:t:{for(var de=ft.key,we=ot;we!==null;){if(we.key===de){if(de=ft.type,de===V){if(we.tag===7){m(ut,we.sibling),ot=U(we,ft.props.children),ot.return=ut,ut=ot;break t}}else if(we.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===Ve&&nd(de)===we.type){m(ut,we.sibling),ot=U(we,ft.props),ot.ref=Xo(ut,we,ft),ot.return=ut,ut=ot;break t}m(ut,we);break}else c(ut,we);we=we.sibling}ft.type===V?(ot=mA(ft.props.children,ut.mode,Yt,ft.key),ot.return=ut,ut=ot):(Yt=Cl(ft.type,ft.key,ft.props,null,ut.mode,Yt),Yt.ref=Xo(ut,ot,ft),Yt.return=ut,ut=Yt)}return z(ut);case Bt:t:{for(we=ft.key;ot!==null;){if(ot.key===we)if(ot.tag===4&&ot.stateNode.containerInfo===ft.containerInfo&&ot.stateNode.implementation===ft.implementation){m(ut,ot.sibling),ot=U(ot,ft.children||[]),ot.return=ut,ut=ot;break t}else{m(ut,ot);break}else c(ut,ot);ot=ot.sibling}ot=Qu(ft,ut.mode,Yt),ot.return=ut,ut=ot}return z(ut);case Ve:return we=ft._init,Pi(ut,ot,we(ft._payload),Yt)}if(Ms(ft))return le(ut,ot,ft,Yt);if(Ae(ft))return ce(ut,ot,ft,Yt);$a(ut,ft)}return typeof ft=="string"&&ft!==""||typeof ft=="number"?(ft=""+ft,ot!==null&&ot.tag===6?(m(ut,ot.sibling),ot=U(ot,ft),ot.return=ut,ut=ot):(m(ut,ot),ot=Pu(ft,ut.mode,Yt),ot.return=ut,ut=ot),z(ut)):m(ut,ot)}return Pi}var $A=sd(!0),rd=sd(!1),_a=Di(null),tl=null,_A=null,Hh=null;function Rh(){Hh=_A=tl=null}function Kh(l){var c=_a.current;Ke(_a),l._currentValue=c}function Vh(l,c,m){for(;l!==null;){var S=l.alternate;if((l.childLanes&c)!==c?(l.childLanes|=c,S!==null&&(S.childLanes|=c)):S!==null&&(S.childLanes&c)!==c&&(S.childLanes|=c),l===m)break;l=l.return}}function to(l,c){tl=l,Hh=_A=null,l=l.dependencies,l!==null&&l.firstContext!==null&&(l.lanes&c&&(Hn=!0),l.firstContext=null)}function ns(l){var c=l._currentValue;if(Hh!==l)if(l={context:l,memoizedValue:c,next:null},_A===null){if(tl===null)throw Error(w(308));_A=l,tl.dependencies={lanes:0,firstContext:l}}else _A=_A.next=l;return c}var hA=null;function Gh(l){hA===null?hA=[l]:hA.push(l)}function Ad(l,c,m,S){var U=c.interleaved;return U===null?(m.next=m,Gh(c)):(m.next=U.next,U.next=m),c.interleaved=m,tr(l,S)}function tr(l,c){l.lanes|=c;var m=l.alternate;for(m!==null&&(m.lanes|=c),m=l,l=l.return;l!==null;)l.childLanes|=c,m=l.alternate,m!==null&&(m.childLanes|=c),m=l,l=l.return;return m.tag===3?m.stateNode:null}var Mr=!1;function Xh(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function od(l,c){l=l.updateQueue,c.updateQueue===l&&(c.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function er(l,c){return{eventTime:l,lane:c,tag:0,payload:null,callback:null,next:null}}function Pr(l,c,m){var S=l.updateQueue;if(S===null)return null;if(S=S.shared,ze&2){var U=S.pending;return U===null?c.next=c:(c.next=U.next,U.next=c),S.pending=c,tr(l,m)}return U=S.interleaved,U===null?(c.next=c,Gh(S)):(c.next=U.next,U.next=c),S.interleaved=c,tr(l,m)}function el(l,c,m){if(c=c.updateQueue,c!==null&&(c=c.shared,(m&4194240)!==0)){var S=c.lanes;S&=l.pendingLanes,m|=S,c.lanes=m,se(l,m)}}function ad(l,c){var m=l.updateQueue,S=l.alternate;if(S!==null&&(S=S.updateQueue,m===S)){var U=null,E=null;if(m=m.firstBaseUpdate,m!==null){do{var z={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};E===null?U=E=z:E=E.next=z,m=m.next}while(m!==null);E===null?U=E=c:E=E.next=c}else U=E=c;m={baseState:S.baseState,firstBaseUpdate:U,lastBaseUpdate:E,shared:S.shared,effects:S.effects},l.updateQueue=m;return}l=m.lastBaseUpdate,l===null?m.firstBaseUpdate=c:l.next=c,m.lastBaseUpdate=c}function il(l,c,m,S){var U=l.updateQueue;Mr=!1;var E=U.firstBaseUpdate,z=U.lastBaseUpdate,_=U.shared.pending;if(_!==null){U.shared.pending=null;var rt=_,mt=rt.next;rt.next=null,z===null?E=mt:z.next=mt,z=rt;var Dt=l.alternate;Dt!==null&&(Dt=Dt.updateQueue,_=Dt.lastBaseUpdate,_!==z&&(_===null?Dt.firstBaseUpdate=mt:_.next=mt,Dt.lastBaseUpdate=rt))}if(E!==null){var Ot=U.baseState;z=0,Dt=mt=rt=null,_=E;do{var Tt=_.lane,ee=_.eventTime;if((S&Tt)===Tt){Dt!==null&&(Dt=Dt.next={eventTime:ee,lane:0,tag:_.tag,payload:_.payload,callback:_.callback,next:null});t:{var le=l,ce=_;switch(Tt=c,ee=m,ce.tag){case 1:if(le=ce.payload,typeof le=="function"){Ot=le.call(ee,Ot,Tt);break t}Ot=le;break t;case 3:le.flags=le.flags&-65537|128;case 0:if(le=ce.payload,Tt=typeof le=="function"?le.call(ee,Ot,Tt):le,Tt==null)break t;Ot=Gt({},Ot,Tt);break t;case 2:Mr=!0}}_.callback!==null&&_.lane!==0&&(l.flags|=64,Tt=U.effects,Tt===null?U.effects=[_]:Tt.push(_))}else ee={eventTime:ee,lane:Tt,tag:_.tag,payload:_.payload,callback:_.callback,next:null},Dt===null?(mt=Dt=ee,rt=Ot):Dt=Dt.next=ee,z|=Tt;if(_=_.next,_===null){if(_=U.shared.pending,_===null)break;Tt=_,_=Tt.next,Tt.next=null,U.lastBaseUpdate=Tt,U.shared.pending=null}}while(!0);if(Dt===null&&(rt=Ot),U.baseState=rt,U.firstBaseUpdate=mt,U.lastBaseUpdate=Dt,c=U.shared.interleaved,c!==null){U=c;do z|=U.lane,U=U.next;while(U!==c)}else E===null&&(U.shared.lanes=0);dA|=z,l.lanes=z,l.memoizedState=Ot}}function ld(l,c,m){if(l=c.effects,c.effects=null,l!==null)for(c=0;c<l.length;c++){var S=l[c],U=S.callback;if(U!==null){if(S.callback=null,S=m,typeof U!="function")throw Error(w(191,U));U.call(S)}}}var zo={},Ts=Di(zo),Yo=Di(zo),jo=Di(zo);function uA(l){if(l===zo)throw Error(w(174));return l}function zh(l,c){switch(Ne(jo,c),Ne(Yo,l),Ne(Ts,zo),l=c.nodeType,l){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:Ps(null,"");break;default:l=l===8?c.parentNode:c,c=l.namespaceURI||null,l=l.tagName,c=Ps(c,l)}Ke(Ts),Ne(Ts,c)}function eo(){Ke(Ts),Ke(Yo),Ke(jo)}function hd(l){uA(jo.current);var c=uA(Ts.current),m=Ps(c,l.type);c!==m&&(Ne(Yo,l),Ne(Ts,m))}function Yh(l){Yo.current===l&&(Ke(Ts),Ke(Yo))}var xi=Di(0);function nl(l){for(var c=l;c!==null;){if(c.tag===13){var m=c.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if(c.flags&128)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var jh=[];function Wh(){for(var l=0;l<jh.length;l++)jh[l]._workInProgressVersionPrimary=null;jh.length=0}var sl=Rt.ReactCurrentDispatcher,Jh=Rt.ReactCurrentBatchConfig,cA=0,Ci=null,Vi=null,zi=null,rl=!1,Wo=!1,Jo=0,Yp=0;function an(){throw Error(w(321))}function qh(l,c){if(c===null)return!1;for(var m=0;m<c.length&&m<l.length;m++)if(!$t(l[m],c[m]))return!1;return!0}function Zh(l,c,m,S,U,E){if(cA=E,Ci=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,sl.current=l===null||l.memoizedState===null?qp:Zp,l=m(S,U),Wo){E=0;do{if(Wo=!1,Jo=0,25<=E)throw Error(w(301));E+=1,zi=Vi=null,c.updateQueue=null,sl.current=$p,l=m(S,U)}while(Wo)}if(sl.current=al,c=Vi!==null&&Vi.next!==null,cA=0,zi=Vi=Ci=null,rl=!1,c)throw Error(w(300));return l}function $h(){var l=Jo!==0;return Jo=0,l}function Ds(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zi===null?Ci.memoizedState=zi=l:zi=zi.next=l,zi}function ss(){if(Vi===null){var l=Ci.alternate;l=l!==null?l.memoizedState:null}else l=Vi.next;var c=zi===null?Ci.memoizedState:zi.next;if(c!==null)zi=c,Vi=l;else{if(l===null)throw Error(w(310));Vi=l,l={memoizedState:Vi.memoizedState,baseState:Vi.baseState,baseQueue:Vi.baseQueue,queue:Vi.queue,next:null},zi===null?Ci.memoizedState=zi=l:zi=zi.next=l}return zi}function qo(l,c){return typeof c=="function"?c(l):c}function _h(l){var c=ss(),m=c.queue;if(m===null)throw Error(w(311));m.lastRenderedReducer=l;var S=Vi,U=S.baseQueue,E=m.pending;if(E!==null){if(U!==null){var z=U.next;U.next=E.next,E.next=z}S.baseQueue=U=E,m.pending=null}if(U!==null){E=U.next,S=S.baseState;var _=z=null,rt=null,mt=E;do{var Dt=mt.lane;if((cA&Dt)===Dt)rt!==null&&(rt=rt.next={lane:0,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null}),S=mt.hasEagerState?mt.eagerState:l(S,mt.action);else{var Ot={lane:Dt,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null};rt===null?(_=rt=Ot,z=S):rt=rt.next=Ot,Ci.lanes|=Dt,dA|=Dt}mt=mt.next}while(mt!==null&&mt!==E);rt===null?z=S:rt.next=_,$t(S,c.memoizedState)||(Hn=!0),c.memoizedState=S,c.baseState=z,c.baseQueue=rt,m.lastRenderedState=S}if(l=m.interleaved,l!==null){U=l;do E=U.lane,Ci.lanes|=E,dA|=E,U=U.next;while(U!==l)}else U===null&&(m.lanes=0);return[c.memoizedState,m.dispatch]}function tu(l){var c=ss(),m=c.queue;if(m===null)throw Error(w(311));m.lastRenderedReducer=l;var S=m.dispatch,U=m.pending,E=c.memoizedState;if(U!==null){m.pending=null;var z=U=U.next;do E=l(E,z.action),z=z.next;while(z!==U);$t(E,c.memoizedState)||(Hn=!0),c.memoizedState=E,c.baseQueue===null&&(c.baseState=E),m.lastRenderedState=E}return[E,S]}function ud(){}function cd(l,c){var m=Ci,S=ss(),U=c(),E=!$t(S.memoizedState,U);if(E&&(S.memoizedState=U,Hn=!0),S=S.queue,eu(gd.bind(null,m,S,l),[l]),S.getSnapshot!==c||E||zi!==null&&zi.memoizedState.tag&1){if(m.flags|=2048,Zo(9,fd.bind(null,m,S,U,c),void 0,null),Yi===null)throw Error(w(349));cA&30||dd(m,c,U)}return U}function dd(l,c,m){l.flags|=16384,l={getSnapshot:c,value:m},c=Ci.updateQueue,c===null?(c={lastEffect:null,stores:null},Ci.updateQueue=c,c.stores=[l]):(m=c.stores,m===null?c.stores=[l]:m.push(l))}function fd(l,c,m,S){c.value=m,c.getSnapshot=S,pd(c)&&md(l)}function gd(l,c,m){return m(function(){pd(c)&&md(l)})}function pd(l){var c=l.getSnapshot;l=l.value;try{var m=c();return!$t(l,m)}catch{return!0}}function md(l){var c=tr(l,1);c!==null&&Ss(c,l,1,-1)}function yd(l){var c=Ds();return typeof l=="function"&&(l=l()),c.memoizedState=c.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qo,lastRenderedState:l},c.queue=l,l=l.dispatch=Jp.bind(null,Ci,l),[c.memoizedState,l]}function Zo(l,c,m,S){return l={tag:l,create:c,destroy:m,deps:S,next:null},c=Ci.updateQueue,c===null?(c={lastEffect:null,stores:null},Ci.updateQueue=c,c.lastEffect=l.next=l):(m=c.lastEffect,m===null?c.lastEffect=l.next=l:(S=m.next,m.next=l,l.next=S,c.lastEffect=l)),l}function wd(){return ss().memoizedState}function Al(l,c,m,S){var U=Ds();Ci.flags|=l,U.memoizedState=Zo(1|c,m,void 0,S===void 0?null:S)}function ol(l,c,m,S){var U=ss();S=S===void 0?null:S;var E=void 0;if(Vi!==null){var z=Vi.memoizedState;if(E=z.destroy,S!==null&&qh(S,z.deps)){U.memoizedState=Zo(c,m,E,S);return}}Ci.flags|=l,U.memoizedState=Zo(1|c,m,E,S)}function Bd(l,c){return Al(8390656,8,l,c)}function eu(l,c){return ol(2048,8,l,c)}function xd(l,c){return ol(4,2,l,c)}function Cd(l,c){return ol(4,4,l,c)}function vd(l,c){if(typeof c=="function")return l=l(),c(l),function(){c(null)};if(c!=null)return l=l(),c.current=l,function(){c.current=null}}function Fd(l,c,m){return m=m!=null?m.concat([l]):null,ol(4,4,vd.bind(null,c,l),m)}function iu(){}function Sd(l,c){var m=ss();c=c===void 0?null:c;var S=m.memoizedState;return S!==null&&c!==null&&qh(c,S[1])?S[0]:(m.memoizedState=[l,c],l)}function bd(l,c){var m=ss();c=c===void 0?null:c;var S=m.memoizedState;return S!==null&&c!==null&&qh(c,S[1])?S[0]:(l=l(),m.memoizedState=[l,c],l)}function kd(l,c,m){return cA&21?($t(m,c)||(m=zs(),Ci.lanes|=m,dA|=m,l.baseState=!0),c):(l.baseState&&(l.baseState=!1,Hn=!0),l.memoizedState=m)}function jp(l,c){var m=Je;Je=m!==0&&4>m?m:4,l(!0);var S=Jh.transition;Jh.transition={};try{l(!1),c()}finally{Je=m,Jh.transition=S}}function Md(){return ss().memoizedState}function Wp(l,c,m){var S=Nr(l);if(m={lane:S,action:m,hasEagerState:!1,eagerState:null,next:null},Pd(l))Qd(c,m);else if(m=Ad(l,c,m,S),m!==null){var U=Fn();Ss(m,l,S,U),Ud(m,c,S)}}function Jp(l,c,m){var S=Nr(l),U={lane:S,action:m,hasEagerState:!1,eagerState:null,next:null};if(Pd(l))Qd(c,U);else{var E=l.alternate;if(l.lanes===0&&(E===null||E.lanes===0)&&(E=c.lastRenderedReducer,E!==null))try{var z=c.lastRenderedState,_=E(z,m);if(U.hasEagerState=!0,U.eagerState=_,$t(_,z)){var rt=c.interleaved;rt===null?(U.next=U,Gh(c)):(U.next=rt.next,rt.next=U),c.interleaved=U;return}}catch{}finally{}m=Ad(l,c,U,S),m!==null&&(U=Fn(),Ss(m,l,S,U),Ud(m,c,S))}}function Pd(l){var c=l.alternate;return l===Ci||c!==null&&c===Ci}function Qd(l,c){Wo=rl=!0;var m=l.pending;m===null?c.next=c:(c.next=m.next,m.next=c),l.pending=c}function Ud(l,c,m){if(m&4194240){var S=c.lanes;S&=l.pendingLanes,m|=S,c.lanes=m,se(l,m)}}var al={readContext:ns,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useInsertionEffect:an,useLayoutEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useMutableSource:an,useSyncExternalStore:an,useId:an,unstable_isNewReconciler:!1},qp={readContext:ns,useCallback:function(l,c){return Ds().memoizedState=[l,c===void 0?null:c],l},useContext:ns,useEffect:Bd,useImperativeHandle:function(l,c,m){return m=m!=null?m.concat([l]):null,Al(4194308,4,vd.bind(null,c,l),m)},useLayoutEffect:function(l,c){return Al(4194308,4,l,c)},useInsertionEffect:function(l,c){return Al(4,2,l,c)},useMemo:function(l,c){var m=Ds();return c=c===void 0?null:c,l=l(),m.memoizedState=[l,c],l},useReducer:function(l,c,m){var S=Ds();return c=m!==void 0?m(c):c,S.memoizedState=S.baseState=c,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:c},S.queue=l,l=l.dispatch=Wp.bind(null,Ci,l),[S.memoizedState,l]},useRef:function(l){var c=Ds();return l={current:l},c.memoizedState=l},useState:yd,useDebugValue:iu,useDeferredValue:function(l){return Ds().memoizedState=l},useTransition:function(){var l=yd(!1),c=l[0];return l=jp.bind(null,l[1]),Ds().memoizedState=l,[c,l]},useMutableSource:function(){},useSyncExternalStore:function(l,c,m){var S=Ci,U=Ds();if(mi){if(m===void 0)throw Error(w(407));m=m()}else{if(m=c(),Yi===null)throw Error(w(349));cA&30||dd(S,c,m)}U.memoizedState=m;var E={value:m,getSnapshot:c};return U.queue=E,Bd(gd.bind(null,S,E,l),[l]),S.flags|=2048,Zo(9,fd.bind(null,S,E,m,c),void 0,null),m},useId:function(){var l=Ds(),c=Yi.identifierPrefix;if(mi){var m=_s,S=$s;m=(S&~(1<<32-gn(S)-1)).toString(32)+m,c=":"+c+"R"+m,m=Jo++,0<m&&(c+="H"+m.toString(32)),c+=":"}else m=Yp++,c=":"+c+"r"+m.toString(32)+":";return l.memoizedState=c},unstable_isNewReconciler:!1},Zp={readContext:ns,useCallback:Sd,useContext:ns,useEffect:eu,useImperativeHandle:Fd,useInsertionEffect:xd,useLayoutEffect:Cd,useMemo:bd,useReducer:_h,useRef:wd,useState:function(){return _h(qo)},useDebugValue:iu,useDeferredValue:function(l){var c=ss();return kd(c,Vi.memoizedState,l)},useTransition:function(){var l=_h(qo)[0],c=ss().memoizedState;return[l,c]},useMutableSource:ud,useSyncExternalStore:cd,useId:Md,unstable_isNewReconciler:!1},$p={readContext:ns,useCallback:Sd,useContext:ns,useEffect:eu,useImperativeHandle:Fd,useInsertionEffect:xd,useLayoutEffect:Cd,useMemo:bd,useReducer:tu,useRef:wd,useState:function(){return tu(qo)},useDebugValue:iu,useDeferredValue:function(l){var c=ss();return Vi===null?c.memoizedState=l:kd(c,Vi.memoizedState,l)},useTransition:function(){var l=tu(qo)[0],c=ss().memoizedState;return[l,c]},useMutableSource:ud,useSyncExternalStore:cd,useId:Md,unstable_isNewReconciler:!1};function Cs(l,c){if(l&&l.defaultProps){c=Gt({},c),l=l.defaultProps;for(var m in l)c[m]===void 0&&(c[m]=l[m]);return c}return c}function nu(l,c,m,S){c=l.memoizedState,m=m(S,c),m=m==null?c:Gt({},c,m),l.memoizedState=m,l.lanes===0&&(l.updateQueue.baseState=m)}var ll={isMounted:function(l){return(l=l._reactInternals)?Xs(l)===l:!1},enqueueSetState:function(l,c,m){l=l._reactInternals;var S=Fn(),U=Nr(l),E=er(S,U);E.payload=c,m!=null&&(E.callback=m),c=Pr(l,E,U),c!==null&&(Ss(c,l,U,S),el(c,l,U))},enqueueReplaceState:function(l,c,m){l=l._reactInternals;var S=Fn(),U=Nr(l),E=er(S,U);E.tag=1,E.payload=c,m!=null&&(E.callback=m),c=Pr(l,E,U),c!==null&&(Ss(c,l,U,S),el(c,l,U))},enqueueForceUpdate:function(l,c){l=l._reactInternals;var m=Fn(),S=Nr(l),U=er(m,S);U.tag=2,c!=null&&(U.callback=c),c=Pr(l,U,S),c!==null&&(Ss(c,l,S,m),el(c,l,S))}};function Ld(l,c,m,S,U,E,z){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(S,E,z):c.prototype&&c.prototype.isPureReactComponent?!Ue(m,S)||!Ue(U,E):!0}function Nd(l,c,m){var S=!1,U=Dn,E=c.contextType;return typeof E=="object"&&E!==null?E=ns(E):(U=On(c)?oA:on.current,S=c.contextTypes,E=(S=S!=null)?WA(l,U):Dn),c=new c(m,E),l.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=ll,l.stateNode=c,c._reactInternals=l,S&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=U,l.__reactInternalMemoizedMaskedChildContext=E),c}function Ed(l,c,m,S){l=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(m,S),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(m,S),c.state!==l&&ll.enqueueReplaceState(c,c.state,null)}function su(l,c,m,S){var U=l.stateNode;U.props=m,U.state=l.memoizedState,U.refs={},Xh(l);var E=c.contextType;typeof E=="object"&&E!==null?U.context=ns(E):(E=On(c)?oA:on.current,U.context=WA(l,E)),U.state=l.memoizedState,E=c.getDerivedStateFromProps,typeof E=="function"&&(nu(l,c,E,m),U.state=l.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof U.getSnapshotBeforeUpdate=="function"||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(c=U.state,typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount(),c!==U.state&&ll.enqueueReplaceState(U,U.state,null),il(l,m,U,S),U.state=l.memoizedState),typeof U.componentDidMount=="function"&&(l.flags|=4194308)}function io(l,c){try{var m="",S=c;do m+=be(S),S=S.return;while(S);var U=m}catch(E){U=`
Error generating stack: `+E.message+`
`+E.stack}return{value:l,source:c,stack:U,digest:null}}function ru(l,c,m){return{value:l,source:null,stack:m??null,digest:c??null}}function Au(l,c){try{console.error(c.value)}catch(m){setTimeout(function(){throw m})}}var _p=typeof WeakMap=="function"?WeakMap:Map;function Td(l,c,m){m=er(-1,m),m.tag=3,m.payload={element:null};var S=c.value;return m.callback=function(){pl||(pl=!0,xu=S),Au(l,c)},m}function Dd(l,c,m){m=er(-1,m),m.tag=3;var S=l.type.getDerivedStateFromError;if(typeof S=="function"){var U=c.value;m.payload=function(){return S(U)},m.callback=function(){Au(l,c)}}var E=l.stateNode;return E!==null&&typeof E.componentDidCatch=="function"&&(m.callback=function(){Au(l,c),typeof S!="function"&&(Ur===null?Ur=new Set([this]):Ur.add(this));var z=c.stack;this.componentDidCatch(c.value,{componentStack:z!==null?z:""})}),m}function Id(l,c,m){var S=l.pingCache;if(S===null){S=l.pingCache=new _p;var U=new Set;S.set(c,U)}else U=S.get(c),U===void 0&&(U=new Set,S.set(c,U));U.has(m)||(U.add(m),l=dm.bind(null,l,c,m),c.then(l,l))}function Od(l){do{var c;if((c=l.tag===13)&&(c=l.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return l;l=l.return}while(l!==null);return null}function Hd(l,c,m,S,U){return l.mode&1?(l.flags|=65536,l.lanes=U,l):(l===c?l.flags|=65536:(l.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(c=er(-1,1),c.tag=2,Pr(m,c,1))),m.lanes|=1),l)}var tm=Rt.ReactCurrentOwner,Hn=!1;function vn(l,c,m,S){c.child=l===null?rd(c,null,m,S):$A(c,l.child,m,S)}function Rd(l,c,m,S,U){m=m.render;var E=c.ref;return to(c,U),S=Zh(l,c,m,S,E,U),m=$h(),l!==null&&!Hn?(c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~U,ir(l,c,U)):(mi&&m&&Eh(c),c.flags|=1,vn(l,c,S,U),c.child)}function Kd(l,c,m,S,U){if(l===null){var E=m.type;return typeof E=="function"&&!Mu(E)&&E.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(c.tag=15,c.type=E,Vd(l,c,E,S,U)):(l=Cl(m.type,null,S,c,c.mode,U),l.ref=c.ref,l.return=c,c.child=l)}if(E=l.child,!(l.lanes&U)){var z=E.memoizedProps;if(m=m.compare,m=m!==null?m:Ue,m(z,S)&&l.ref===c.ref)return ir(l,c,U)}return c.flags|=1,l=Tr(E,S),l.ref=c.ref,l.return=c,c.child=l}function Vd(l,c,m,S,U){if(l!==null){var E=l.memoizedProps;if(Ue(E,S)&&l.ref===c.ref)if(Hn=!1,c.pendingProps=S=E,(l.lanes&U)!==0)l.flags&131072&&(Hn=!0);else return c.lanes=l.lanes,ir(l,c,U)}return ou(l,c,m,S,U)}function Gd(l,c,m){var S=c.pendingProps,U=S.children,E=l!==null?l.memoizedState:null;if(S.mode==="hidden")if(!(c.mode&1))c.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ne(so,Jn),Jn|=m;else{if(!(m&1073741824))return l=E!==null?E.baseLanes|m:m,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:l,cachePool:null,transitions:null},c.updateQueue=null,Ne(so,Jn),Jn|=l,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},S=E!==null?E.baseLanes:m,Ne(so,Jn),Jn|=S}else E!==null?(S=E.baseLanes|m,c.memoizedState=null):S=m,Ne(so,Jn),Jn|=S;return vn(l,c,U,m),c.child}function Xd(l,c){var m=c.ref;(l===null&&m!==null||l!==null&&l.ref!==m)&&(c.flags|=512,c.flags|=2097152)}function ou(l,c,m,S,U){var E=On(m)?oA:on.current;return E=WA(c,E),to(c,U),m=Zh(l,c,m,S,E,U),S=$h(),l!==null&&!Hn?(c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~U,ir(l,c,U)):(mi&&S&&Eh(c),c.flags|=1,vn(l,c,m,U),c.child)}function zd(l,c,m,S,U){if(On(m)){var E=!0;ja(c)}else E=!1;if(to(c,U),c.stateNode===null)ul(l,c),Nd(c,m,S),su(c,m,S,U),S=!0;else if(l===null){var z=c.stateNode,_=c.memoizedProps;z.props=_;var rt=z.context,mt=m.contextType;typeof mt=="object"&&mt!==null?mt=ns(mt):(mt=On(m)?oA:on.current,mt=WA(c,mt));var Dt=m.getDerivedStateFromProps,Ot=typeof Dt=="function"||typeof z.getSnapshotBeforeUpdate=="function";Ot||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(_!==S||rt!==mt)&&Ed(c,z,S,mt),Mr=!1;var Tt=c.memoizedState;z.state=Tt,il(c,S,z,U),rt=c.memoizedState,_!==S||Tt!==rt||In.current||Mr?(typeof Dt=="function"&&(nu(c,m,Dt,S),rt=c.memoizedState),(_=Mr||Ld(c,m,_,S,Tt,rt,mt))?(Ot||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount()),typeof z.componentDidMount=="function"&&(c.flags|=4194308)):(typeof z.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=S,c.memoizedState=rt),z.props=S,z.state=rt,z.context=mt,S=_):(typeof z.componentDidMount=="function"&&(c.flags|=4194308),S=!1)}else{z=c.stateNode,od(l,c),_=c.memoizedProps,mt=c.type===c.elementType?_:Cs(c.type,_),z.props=mt,Ot=c.pendingProps,Tt=z.context,rt=m.contextType,typeof rt=="object"&&rt!==null?rt=ns(rt):(rt=On(m)?oA:on.current,rt=WA(c,rt));var ee=m.getDerivedStateFromProps;(Dt=typeof ee=="function"||typeof z.getSnapshotBeforeUpdate=="function")||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(_!==Ot||Tt!==rt)&&Ed(c,z,S,rt),Mr=!1,Tt=c.memoizedState,z.state=Tt,il(c,S,z,U);var le=c.memoizedState;_!==Ot||Tt!==le||In.current||Mr?(typeof ee=="function"&&(nu(c,m,ee,S),le=c.memoizedState),(mt=Mr||Ld(c,m,mt,S,Tt,le,rt)||!1)?(Dt||typeof z.UNSAFE_componentWillUpdate!="function"&&typeof z.componentWillUpdate!="function"||(typeof z.componentWillUpdate=="function"&&z.componentWillUpdate(S,le,rt),typeof z.UNSAFE_componentWillUpdate=="function"&&z.UNSAFE_componentWillUpdate(S,le,rt)),typeof z.componentDidUpdate=="function"&&(c.flags|=4),typeof z.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof z.componentDidUpdate!="function"||_===l.memoizedProps&&Tt===l.memoizedState||(c.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||_===l.memoizedProps&&Tt===l.memoizedState||(c.flags|=1024),c.memoizedProps=S,c.memoizedState=le),z.props=S,z.state=le,z.context=rt,S=mt):(typeof z.componentDidUpdate!="function"||_===l.memoizedProps&&Tt===l.memoizedState||(c.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||_===l.memoizedProps&&Tt===l.memoizedState||(c.flags|=1024),S=!1)}return au(l,c,m,S,E,U)}function au(l,c,m,S,U,E){Xd(l,c);var z=(c.flags&128)!==0;if(!S&&!z)return U&&qc(c,m,!1),ir(l,c,E);S=c.stateNode,tm.current=c;var _=z&&typeof m.getDerivedStateFromError!="function"?null:S.render();return c.flags|=1,l!==null&&z?(c.child=$A(c,l.child,null,E),c.child=$A(c,null,_,E)):vn(l,c,_,E),c.memoizedState=S.state,U&&qc(c,m,!0),c.child}function Yd(l){var c=l.stateNode;c.pendingContext?Wc(l,c.pendingContext,c.pendingContext!==c.context):c.context&&Wc(l,c.context,!1),zh(l,c.containerInfo)}function jd(l,c,m,S,U){return ZA(),Oh(U),c.flags|=256,vn(l,c,m,S),c.child}var lu={dehydrated:null,treeContext:null,retryLane:0};function hu(l){return{baseLanes:l,cachePool:null,transitions:null}}function Wd(l,c,m){var S=c.pendingProps,U=xi.current,E=!1,z=(c.flags&128)!==0,_;if((_=z)||(_=l!==null&&l.memoizedState===null?!1:(U&2)!==0),_?(E=!0,c.flags&=-129):(l===null||l.memoizedState!==null)&&(U|=1),Ne(xi,U&1),l===null)return Ih(c),l=c.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?(c.mode&1?l.data==="$!"?c.lanes=8:c.lanes=1073741824:c.lanes=1,null):(z=S.children,l=S.fallback,E?(S=c.mode,E=c.child,z={mode:"hidden",children:z},!(S&1)&&E!==null?(E.childLanes=0,E.pendingProps=z):E=vl(z,S,0,null),l=mA(l,S,m,null),E.return=c,l.return=c,E.sibling=l,c.child=E,c.child.memoizedState=hu(m),c.memoizedState=lu,l):uu(c,z));if(U=l.memoizedState,U!==null&&(_=U.dehydrated,_!==null))return em(l,c,z,S,_,U,m);if(E){E=S.fallback,z=c.mode,U=l.child,_=U.sibling;var rt={mode:"hidden",children:S.children};return!(z&1)&&c.child!==U?(S=c.child,S.childLanes=0,S.pendingProps=rt,c.deletions=null):(S=Tr(U,rt),S.subtreeFlags=U.subtreeFlags&14680064),_!==null?E=Tr(_,E):(E=mA(E,z,m,null),E.flags|=2),E.return=c,S.return=c,S.sibling=E,c.child=S,S=E,E=c.child,z=l.child.memoizedState,z=z===null?hu(m):{baseLanes:z.baseLanes|m,cachePool:null,transitions:z.transitions},E.memoizedState=z,E.childLanes=l.childLanes&~m,c.memoizedState=lu,S}return E=l.child,l=E.sibling,S=Tr(E,{mode:"visible",children:S.children}),!(c.mode&1)&&(S.lanes=m),S.return=c,S.sibling=null,l!==null&&(m=c.deletions,m===null?(c.deletions=[l],c.flags|=16):m.push(l)),c.child=S,c.memoizedState=null,S}function uu(l,c){return c=vl({mode:"visible",children:c},l.mode,0,null),c.return=l,l.child=c}function hl(l,c,m,S){return S!==null&&Oh(S),$A(c,l.child,null,m),l=uu(c,c.pendingProps.children),l.flags|=2,c.memoizedState=null,l}function em(l,c,m,S,U,E,z){if(m)return c.flags&256?(c.flags&=-257,S=ru(Error(w(422))),hl(l,c,z,S)):c.memoizedState!==null?(c.child=l.child,c.flags|=128,null):(E=S.fallback,U=c.mode,S=vl({mode:"visible",children:S.children},U,0,null),E=mA(E,U,z,null),E.flags|=2,S.return=c,E.return=c,S.sibling=E,c.child=S,c.mode&1&&$A(c,l.child,null,z),c.child.memoizedState=hu(z),c.memoizedState=lu,E);if(!(c.mode&1))return hl(l,c,z,null);if(U.data==="$!"){if(S=U.nextSibling&&U.nextSibling.dataset,S)var _=S.dgst;return S=_,E=Error(w(419)),S=ru(E,S,void 0),hl(l,c,z,S)}if(_=(z&l.childLanes)!==0,Hn||_){if(S=Yi,S!==null){switch(z&-z){case 4:U=2;break;case 16:U=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:U=32;break;case 536870912:U=268435456;break;default:U=0}U=U&(S.suspendedLanes|z)?0:U,U!==0&&U!==E.retryLane&&(E.retryLane=U,tr(l,U),Ss(S,l,U,-1))}return ku(),S=ru(Error(w(421))),hl(l,c,z,S)}return U.data==="$?"?(c.flags|=128,c.child=l.child,c=fm.bind(null,l),U._reactRetry=c,null):(l=E.treeContext,Wn=Ht(U.nextSibling),jn=c,mi=!0,xs=null,l!==null&&(es[is++]=$s,es[is++]=_s,es[is++]=aA,$s=l.id,_s=l.overflow,aA=c),c=uu(c,S.children),c.flags|=4096,c)}function Jd(l,c,m){l.lanes|=c;var S=l.alternate;S!==null&&(S.lanes|=c),Vh(l.return,c,m)}function cu(l,c,m,S,U){var E=l.memoizedState;E===null?l.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:S,tail:m,tailMode:U}:(E.isBackwards=c,E.rendering=null,E.renderingStartTime=0,E.last=S,E.tail=m,E.tailMode=U)}function qd(l,c,m){var S=c.pendingProps,U=S.revealOrder,E=S.tail;if(vn(l,c,S.children,m),S=xi.current,S&2)S=S&1|2,c.flags|=128;else{if(l!==null&&l.flags&128)t:for(l=c.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&Jd(l,m,c);else if(l.tag===19)Jd(l,m,c);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===c)break t;for(;l.sibling===null;){if(l.return===null||l.return===c)break t;l=l.return}l.sibling.return=l.return,l=l.sibling}S&=1}if(Ne(xi,S),!(c.mode&1))c.memoizedState=null;else switch(U){case"forwards":for(m=c.child,U=null;m!==null;)l=m.alternate,l!==null&&nl(l)===null&&(U=m),m=m.sibling;m=U,m===null?(U=c.child,c.child=null):(U=m.sibling,m.sibling=null),cu(c,!1,U,m,E);break;case"backwards":for(m=null,U=c.child,c.child=null;U!==null;){if(l=U.alternate,l!==null&&nl(l)===null){c.child=U;break}l=U.sibling,U.sibling=m,m=U,U=l}cu(c,!0,m,null,E);break;case"together":cu(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function ul(l,c){!(c.mode&1)&&l!==null&&(l.alternate=null,c.alternate=null,c.flags|=2)}function ir(l,c,m){if(l!==null&&(c.dependencies=l.dependencies),dA|=c.lanes,!(m&c.childLanes))return null;if(l!==null&&c.child!==l.child)throw Error(w(153));if(c.child!==null){for(l=c.child,m=Tr(l,l.pendingProps),c.child=m,m.return=c;l.sibling!==null;)l=l.sibling,m=m.sibling=Tr(l,l.pendingProps),m.return=c;m.sibling=null}return c.child}function im(l,c,m){switch(c.tag){case 3:Yd(c),ZA();break;case 5:hd(c);break;case 1:On(c.type)&&ja(c);break;case 4:zh(c,c.stateNode.containerInfo);break;case 10:var S=c.type._context,U=c.memoizedProps.value;Ne(_a,S._currentValue),S._currentValue=U;break;case 13:if(S=c.memoizedState,S!==null)return S.dehydrated!==null?(Ne(xi,xi.current&1),c.flags|=128,null):m&c.child.childLanes?Wd(l,c,m):(Ne(xi,xi.current&1),l=ir(l,c,m),l!==null?l.sibling:null);Ne(xi,xi.current&1);break;case 19:if(S=(m&c.childLanes)!==0,l.flags&128){if(S)return qd(l,c,m);c.flags|=128}if(U=c.memoizedState,U!==null&&(U.rendering=null,U.tail=null,U.lastEffect=null),Ne(xi,xi.current),S)break;return null;case 22:case 23:return c.lanes=0,Gd(l,c,m)}return ir(l,c,m)}var Zd,du,$d,_d;Zd=function(l,c){for(var m=c.child;m!==null;){if(m.tag===5||m.tag===6)l.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===c)break;for(;m.sibling===null;){if(m.return===null||m.return===c)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},du=function(){},$d=function(l,c,m,S){var U=l.memoizedProps;if(U!==S){l=c.stateNode,uA(Ts.current);var E=null;switch(m){case"input":U=FA(l,U),S=FA(l,S),E=[];break;case"select":U=Gt({},U,{value:void 0}),S=Gt({},S,{value:void 0}),E=[];break;case"textarea":U=bA(l,U),S=bA(l,S),E=[];break;default:typeof U.onClick!="function"&&typeof S.onClick=="function"&&(l.onclick=Mt)}ge(m,S);var z;m=null;for(mt in U)if(!S.hasOwnProperty(mt)&&U.hasOwnProperty(mt)&&U[mt]!=null)if(mt==="style"){var _=U[mt];for(z in _)_.hasOwnProperty(z)&&(m||(m={}),m[z]="")}else mt!=="dangerouslySetInnerHTML"&&mt!=="children"&&mt!=="suppressContentEditableWarning"&&mt!=="suppressHydrationWarning"&&mt!=="autoFocus"&&(P.hasOwnProperty(mt)?E||(E=[]):(E=E||[]).push(mt,null));for(mt in S){var rt=S[mt];if(_=U!=null?U[mt]:void 0,S.hasOwnProperty(mt)&&rt!==_&&(rt!=null||_!=null))if(mt==="style")if(_){for(z in _)!_.hasOwnProperty(z)||rt&&rt.hasOwnProperty(z)||(m||(m={}),m[z]="");for(z in rt)rt.hasOwnProperty(z)&&_[z]!==rt[z]&&(m||(m={}),m[z]=rt[z])}else m||(E||(E=[]),E.push(mt,m)),m=rt;else mt==="dangerouslySetInnerHTML"?(rt=rt?rt.__html:void 0,_=_?_.__html:void 0,rt!=null&&_!==rt&&(E=E||[]).push(mt,rt)):mt==="children"?typeof rt!="string"&&typeof rt!="number"||(E=E||[]).push(mt,""+rt):mt!=="suppressContentEditableWarning"&&mt!=="suppressHydrationWarning"&&(P.hasOwnProperty(mt)?(rt!=null&&mt==="onScroll"&&R("scroll",l),E||_===rt||(E=[])):(E=E||[]).push(mt,rt))}m&&(E=E||[]).push("style",m);var mt=E;(c.updateQueue=mt)&&(c.flags|=4)}},_d=function(l,c,m,S){m!==S&&(c.flags|=4)};function $o(l,c){if(!mi)switch(l.tailMode){case"hidden":c=l.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?l.tail=null:m.sibling=null;break;case"collapsed":m=l.tail;for(var S=null;m!==null;)m.alternate!==null&&(S=m),m=m.sibling;S===null?c||l.tail===null?l.tail=null:l.tail.sibling=null:S.sibling=null}}function ln(l){var c=l.alternate!==null&&l.alternate.child===l.child,m=0,S=0;if(c)for(var U=l.child;U!==null;)m|=U.lanes|U.childLanes,S|=U.subtreeFlags&14680064,S|=U.flags&14680064,U.return=l,U=U.sibling;else for(U=l.child;U!==null;)m|=U.lanes|U.childLanes,S|=U.subtreeFlags,S|=U.flags,U.return=l,U=U.sibling;return l.subtreeFlags|=S,l.childLanes=m,c}function nm(l,c,m){var S=c.pendingProps;switch(Th(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ln(c),null;case 1:return On(c.type)&&Ya(),ln(c),null;case 3:return S=c.stateNode,eo(),Ke(In),Ke(on),Wh(),S.pendingContext&&(S.context=S.pendingContext,S.pendingContext=null),(l===null||l.child===null)&&(Za(c)?c.flags|=4:l===null||l.memoizedState.isDehydrated&&!(c.flags&256)||(c.flags|=1024,xs!==null&&(Fu(xs),xs=null))),du(l,c),ln(c),null;case 5:Yh(c);var U=uA(jo.current);if(m=c.type,l!==null&&c.stateNode!=null)$d(l,c,m,S,U),l.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!S){if(c.stateNode===null)throw Error(w(166));return ln(c),null}if(l=uA(Ts.current),Za(c)){S=c.stateNode,m=c.type;var E=c.memoizedProps;switch(S[Ie]=c,S[ei]=E,l=(c.mode&1)!==0,m){case"dialog":R("cancel",S),R("close",S);break;case"iframe":case"object":case"embed":R("load",S);break;case"video":case"audio":for(U=0;U<O.length;U++)R(O[U],S);break;case"source":R("error",S);break;case"img":case"image":case"link":R("error",S),R("load",S);break;case"details":R("toggle",S);break;case"input":qr(S,E),R("invalid",S);break;case"select":S._wrapperState={wasMultiple:!!E.multiple},R("invalid",S);break;case"textarea":vo(S,E),R("invalid",S)}ge(m,E),U=null;for(var z in E)if(E.hasOwnProperty(z)){var _=E[z];z==="children"?typeof _=="string"?S.textContent!==_&&(E.suppressHydrationWarning!==!0&&Qt(S.textContent,_,l),U=["children",_]):typeof _=="number"&&S.textContent!==""+_&&(E.suppressHydrationWarning!==!0&&Qt(S.textContent,_,l),U=["children",""+_]):P.hasOwnProperty(z)&&_!=null&&z==="onScroll"&&R("scroll",S)}switch(m){case"input":Wr(S),us(S,E,!0);break;case"textarea":Wr(S),Fo(S);break;case"select":case"option":break;default:typeof E.onClick=="function"&&(S.onclick=Mt)}S=U,c.updateQueue=S,S!==null&&(c.flags|=4)}else{z=U.nodeType===9?U:U.ownerDocument,l==="http://www.w3.org/1999/xhtml"&&(l=Vs(m)),l==="http://www.w3.org/1999/xhtml"?m==="script"?(l=z.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild)):typeof S.is=="string"?l=z.createElement(m,{is:S.is}):(l=z.createElement(m),m==="select"&&(z=l,S.multiple?z.multiple=!0:S.size&&(z.size=S.size))):l=z.createElementNS(l,m),l[Ie]=c,l[ei]=S,Zd(l,c,!1,!1),c.stateNode=l;t:{switch(z=Po(m,S),m){case"dialog":R("cancel",l),R("close",l),U=S;break;case"iframe":case"object":case"embed":R("load",l),U=S;break;case"video":case"audio":for(U=0;U<O.length;U++)R(O[U],l);U=S;break;case"source":R("error",l),U=S;break;case"img":case"image":case"link":R("error",l),R("load",l),U=S;break;case"details":R("toggle",l),U=S;break;case"input":qr(l,S),U=FA(l,S),R("invalid",l);break;case"option":U=S;break;case"select":l._wrapperState={wasMultiple:!!S.multiple},U=Gt({},S,{value:void 0}),R("invalid",l);break;case"textarea":vo(l,S),U=bA(l,S),R("invalid",l);break;default:U=S}ge(m,U),_=U;for(E in _)if(_.hasOwnProperty(E)){var rt=_[E];E==="style"?Mo(l,rt):E==="dangerouslySetInnerHTML"?(rt=rt?rt.__html:void 0,rt!=null&&So(l,rt)):E==="children"?typeof rt=="string"?(m!=="textarea"||rt!=="")&&cs(l,rt):typeof rt=="number"&&cs(l,""+rt):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(P.hasOwnProperty(E)?rt!=null&&E==="onScroll"&&R("scroll",l):rt!=null&&it(l,E,rt,z))}switch(m){case"input":Wr(l),us(l,S,!1);break;case"textarea":Wr(l),Fo(l);break;case"option":S.value!=null&&l.setAttribute("value",""+Ge(S.value));break;case"select":l.multiple=!!S.multiple,E=S.value,E!=null?Ks(l,!!S.multiple,E,!1):S.defaultValue!=null&&Ks(l,!!S.multiple,S.defaultValue,!0);break;default:typeof U.onClick=="function"&&(l.onclick=Mt)}switch(m){case"button":case"input":case"select":case"textarea":S=!!S.autoFocus;break t;case"img":S=!0;break t;default:S=!1}}S&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return ln(c),null;case 6:if(l&&c.stateNode!=null)_d(l,c,l.memoizedProps,S);else{if(typeof S!="string"&&c.stateNode===null)throw Error(w(166));if(m=uA(jo.current),uA(Ts.current),Za(c)){if(S=c.stateNode,m=c.memoizedProps,S[Ie]=c,(E=S.nodeValue!==m)&&(l=jn,l!==null))switch(l.tag){case 3:Qt(S.nodeValue,m,(l.mode&1)!==0);break;case 5:l.memoizedProps.suppressHydrationWarning!==!0&&Qt(S.nodeValue,m,(l.mode&1)!==0)}E&&(c.flags|=4)}else S=(m.nodeType===9?m:m.ownerDocument).createTextNode(S),S[Ie]=c,c.stateNode=S}return ln(c),null;case 13:if(Ke(xi),S=c.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(mi&&Wn!==null&&c.mode&1&&!(c.flags&128))id(),ZA(),c.flags|=98560,E=!1;else if(E=Za(c),S!==null&&S.dehydrated!==null){if(l===null){if(!E)throw Error(w(318));if(E=c.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(w(317));E[Ie]=c}else ZA(),!(c.flags&128)&&(c.memoizedState=null),c.flags|=4;ln(c),E=!1}else xs!==null&&(Fu(xs),xs=null),E=!0;if(!E)return c.flags&65536?c:null}return c.flags&128?(c.lanes=m,c):(S=S!==null,S!==(l!==null&&l.memoizedState!==null)&&S&&(c.child.flags|=8192,c.mode&1&&(l===null||xi.current&1?Gi===0&&(Gi=3):ku())),c.updateQueue!==null&&(c.flags|=4),ln(c),null);case 4:return eo(),du(l,c),l===null&&Y(c.stateNode.containerInfo),ln(c),null;case 10:return Kh(c.type._context),ln(c),null;case 17:return On(c.type)&&Ya(),ln(c),null;case 19:if(Ke(xi),E=c.memoizedState,E===null)return ln(c),null;if(S=(c.flags&128)!==0,z=E.rendering,z===null)if(S)$o(E,!1);else{if(Gi!==0||l!==null&&l.flags&128)for(l=c.child;l!==null;){if(z=nl(l),z!==null){for(c.flags|=128,$o(E,!1),S=z.updateQueue,S!==null&&(c.updateQueue=S,c.flags|=4),c.subtreeFlags=0,S=m,m=c.child;m!==null;)E=m,l=S,E.flags&=14680066,z=E.alternate,z===null?(E.childLanes=0,E.lanes=l,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=z.childLanes,E.lanes=z.lanes,E.child=z.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=z.memoizedProps,E.memoizedState=z.memoizedState,E.updateQueue=z.updateQueue,E.type=z.type,l=z.dependencies,E.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),m=m.sibling;return Ne(xi,xi.current&1|2),c.child}l=l.sibling}E.tail!==null&&wi()>ro&&(c.flags|=128,S=!0,$o(E,!1),c.lanes=4194304)}else{if(!S)if(l=nl(z),l!==null){if(c.flags|=128,S=!0,m=l.updateQueue,m!==null&&(c.updateQueue=m,c.flags|=4),$o(E,!0),E.tail===null&&E.tailMode==="hidden"&&!z.alternate&&!mi)return ln(c),null}else 2*wi()-E.renderingStartTime>ro&&m!==1073741824&&(c.flags|=128,S=!0,$o(E,!1),c.lanes=4194304);E.isBackwards?(z.sibling=c.child,c.child=z):(m=E.last,m!==null?m.sibling=z:c.child=z,E.last=z)}return E.tail!==null?(c=E.tail,E.rendering=c,E.tail=c.sibling,E.renderingStartTime=wi(),c.sibling=null,m=xi.current,Ne(xi,S?m&1|2:m&1),c):(ln(c),null);case 22:case 23:return bu(),S=c.memoizedState!==null,l!==null&&l.memoizedState!==null!==S&&(c.flags|=8192),S&&c.mode&1?Jn&1073741824&&(ln(c),c.subtreeFlags&6&&(c.flags|=8192)):ln(c),null;case 24:return null;case 25:return null}throw Error(w(156,c.tag))}function sm(l,c){switch(Th(c),c.tag){case 1:return On(c.type)&&Ya(),l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 3:return eo(),Ke(In),Ke(on),Wh(),l=c.flags,l&65536&&!(l&128)?(c.flags=l&-65537|128,c):null;case 5:return Yh(c),null;case 13:if(Ke(xi),l=c.memoizedState,l!==null&&l.dehydrated!==null){if(c.alternate===null)throw Error(w(340));ZA()}return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 19:return Ke(xi),null;case 4:return eo(),null;case 10:return Kh(c.type._context),null;case 22:case 23:return bu(),null;case 24:return null;default:return null}}var cl=!1,hn=!1,rm=typeof WeakSet=="function"?WeakSet:Set,re=null;function no(l,c){var m=l.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(S){bi(l,c,S)}else m.current=null}function fu(l,c,m){try{m()}catch(S){bi(l,c,S)}}var tf=!1;function Am(l,c){if(Ut=Ys,l=he(),si(l)){if("selectionStart"in l)var m={start:l.selectionStart,end:l.selectionEnd};else t:{m=(m=l.ownerDocument)&&m.defaultView||window;var S=m.getSelection&&m.getSelection();if(S&&S.rangeCount!==0){m=S.anchorNode;var U=S.anchorOffset,E=S.focusNode;S=S.focusOffset;try{m.nodeType,E.nodeType}catch{m=null;break t}var z=0,_=-1,rt=-1,mt=0,Dt=0,Ot=l,Tt=null;e:for(;;){for(var ee;Ot!==m||U!==0&&Ot.nodeType!==3||(_=z+U),Ot!==E||S!==0&&Ot.nodeType!==3||(rt=z+S),Ot.nodeType===3&&(z+=Ot.nodeValue.length),(ee=Ot.firstChild)!==null;)Tt=Ot,Ot=ee;for(;;){if(Ot===l)break e;if(Tt===m&&++mt===U&&(_=z),Tt===E&&++Dt===S&&(rt=z),(ee=Ot.nextSibling)!==null)break;Ot=Tt,Tt=Ot.parentNode}Ot=ee}m=_===-1||rt===-1?null:{start:_,end:rt}}else m=null}m=m||{start:0,end:0}}else m=null;for(ne={focusedElem:l,selectionRange:m},Ys=!1,re=c;re!==null;)if(c=re,l=c.child,(c.subtreeFlags&1028)!==0&&l!==null)l.return=c,re=l;else for(;re!==null;){c=re;try{var le=c.alternate;if(c.flags&1024)switch(c.tag){case 0:case 11:case 15:break;case 1:if(le!==null){var ce=le.memoizedProps,Pi=le.memoizedState,ut=c.stateNode,ot=ut.getSnapshotBeforeUpdate(c.elementType===c.type?ce:Cs(c.type,ce),Pi);ut.__reactInternalSnapshotBeforeUpdate=ot}break;case 3:var ft=c.stateNode.containerInfo;ft.nodeType===1?ft.textContent="":ft.nodeType===9&&ft.documentElement&&ft.removeChild(ft.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(w(163))}}catch(Yt){bi(c,c.return,Yt)}if(l=c.sibling,l!==null){l.return=c.return,re=l;break}re=c.return}return le=tf,tf=!1,le}function _o(l,c,m){var S=c.updateQueue;if(S=S!==null?S.lastEffect:null,S!==null){var U=S=S.next;do{if((U.tag&l)===l){var E=U.destroy;U.destroy=void 0,E!==void 0&&fu(c,m,E)}U=U.next}while(U!==S)}}function dl(l,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var m=c=c.next;do{if((m.tag&l)===l){var S=m.create;m.destroy=S()}m=m.next}while(m!==c)}}function gu(l){var c=l.ref;if(c!==null){var m=l.stateNode;switch(l.tag){case 5:l=m;break;default:l=m}typeof c=="function"?c(l):c.current=l}}function ef(l){var c=l.alternate;c!==null&&(l.alternate=null,ef(c)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(c=l.stateNode,c!==null&&(delete c[Ie],delete c[ei],delete c[xn],delete c[An],delete c[Cn])),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function nf(l){return l.tag===5||l.tag===3||l.tag===4}function sf(l){t:for(;;){for(;l.sibling===null;){if(l.return===null||nf(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue t;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function pu(l,c,m){var S=l.tag;if(S===5||S===6)l=l.stateNode,c?m.nodeType===8?m.parentNode.insertBefore(l,c):m.insertBefore(l,c):(m.nodeType===8?(c=m.parentNode,c.insertBefore(l,m)):(c=m,c.appendChild(l)),m=m._reactRootContainer,m!=null||c.onclick!==null||(c.onclick=Mt));else if(S!==4&&(l=l.child,l!==null))for(pu(l,c,m),l=l.sibling;l!==null;)pu(l,c,m),l=l.sibling}function mu(l,c,m){var S=l.tag;if(S===5||S===6)l=l.stateNode,c?m.insertBefore(l,c):m.appendChild(l);else if(S!==4&&(l=l.child,l!==null))for(mu(l,c,m),l=l.sibling;l!==null;)mu(l,c,m),l=l.sibling}var _i=null,vs=!1;function Qr(l,c,m){for(m=m.child;m!==null;)rf(l,c,m),m=m.sibling}function rf(l,c,m){if(je&&typeof je.onCommitFiberUnmount=="function")try{je.onCommitFiberUnmount(dr,m)}catch{}switch(m.tag){case 5:hn||no(m,c);case 6:var S=_i,U=vs;_i=null,Qr(l,c,m),_i=S,vs=U,_i!==null&&(vs?(l=_i,m=m.stateNode,l.nodeType===8?l.parentNode.removeChild(m):l.removeChild(m)):_i.removeChild(m.stateNode));break;case 18:_i!==null&&(vs?(l=_i,m=m.stateNode,l.nodeType===8?wt(l.parentNode,m):l.nodeType===1&&wt(l,m),_r(l)):wt(_i,m.stateNode));break;case 4:S=_i,U=vs,_i=m.stateNode.containerInfo,vs=!0,Qr(l,c,m),_i=S,vs=U;break;case 0:case 11:case 14:case 15:if(!hn&&(S=m.updateQueue,S!==null&&(S=S.lastEffect,S!==null))){U=S=S.next;do{var E=U,z=E.destroy;E=E.tag,z!==void 0&&(E&2||E&4)&&fu(m,c,z),U=U.next}while(U!==S)}Qr(l,c,m);break;case 1:if(!hn&&(no(m,c),S=m.stateNode,typeof S.componentWillUnmount=="function"))try{S.props=m.memoizedProps,S.state=m.memoizedState,S.componentWillUnmount()}catch(_){bi(m,c,_)}Qr(l,c,m);break;case 21:Qr(l,c,m);break;case 22:m.mode&1?(hn=(S=hn)||m.memoizedState!==null,Qr(l,c,m),hn=S):Qr(l,c,m);break;default:Qr(l,c,m)}}function Af(l){var c=l.updateQueue;if(c!==null){l.updateQueue=null;var m=l.stateNode;m===null&&(m=l.stateNode=new rm),c.forEach(function(S){var U=gm.bind(null,l,S);m.has(S)||(m.add(S),S.then(U,U))})}}function Fs(l,c){var m=c.deletions;if(m!==null)for(var S=0;S<m.length;S++){var U=m[S];try{var E=l,z=c,_=z;t:for(;_!==null;){switch(_.tag){case 5:_i=_.stateNode,vs=!1;break t;case 3:_i=_.stateNode.containerInfo,vs=!0;break t;case 4:_i=_.stateNode.containerInfo,vs=!0;break t}_=_.return}if(_i===null)throw Error(w(160));rf(E,z,U),_i=null,vs=!1;var rt=U.alternate;rt!==null&&(rt.return=null),U.return=null}catch(mt){bi(U,c,mt)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)of(c,l),c=c.sibling}function of(l,c){var m=l.alternate,S=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(Fs(c,l),Is(l),S&4){try{_o(3,l,l.return),dl(3,l)}catch(ce){bi(l,l.return,ce)}try{_o(5,l,l.return)}catch(ce){bi(l,l.return,ce)}}break;case 1:Fs(c,l),Is(l),S&512&&m!==null&&no(m,m.return);break;case 5:if(Fs(c,l),Is(l),S&512&&m!==null&&no(m,m.return),l.flags&32){var U=l.stateNode;try{cs(U,"")}catch(ce){bi(l,l.return,ce)}}if(S&4&&(U=l.stateNode,U!=null)){var E=l.memoizedProps,z=m!==null?m.memoizedProps:E,_=l.type,rt=l.updateQueue;if(l.updateQueue=null,rt!==null)try{_==="input"&&E.type==="radio"&&E.name!=null&&Co(U,E),Po(_,z);var mt=Po(_,E);for(z=0;z<rt.length;z+=2){var Dt=rt[z],Ot=rt[z+1];Dt==="style"?Mo(U,Ot):Dt==="dangerouslySetInnerHTML"?So(U,Ot):Dt==="children"?cs(U,Ot):it(U,Dt,Ot,mt)}switch(_){case"input":SA(U,E);break;case"textarea":Zr(U,E);break;case"select":var Tt=U._wrapperState.wasMultiple;U._wrapperState.wasMultiple=!!E.multiple;var ee=E.value;ee!=null?Ks(U,!!E.multiple,ee,!1):Tt!==!!E.multiple&&(E.defaultValue!=null?Ks(U,!!E.multiple,E.defaultValue,!0):Ks(U,!!E.multiple,E.multiple?[]:"",!1))}U[ei]=E}catch(ce){bi(l,l.return,ce)}}break;case 6:if(Fs(c,l),Is(l),S&4){if(l.stateNode===null)throw Error(w(162));U=l.stateNode,E=l.memoizedProps;try{U.nodeValue=E}catch(ce){bi(l,l.return,ce)}}break;case 3:if(Fs(c,l),Is(l),S&4&&m!==null&&m.memoizedState.isDehydrated)try{_r(c.containerInfo)}catch(ce){bi(l,l.return,ce)}break;case 4:Fs(c,l),Is(l);break;case 13:Fs(c,l),Is(l),U=l.child,U.flags&8192&&(E=U.memoizedState!==null,U.stateNode.isHidden=E,!E||U.alternate!==null&&U.alternate.memoizedState!==null||(Bu=wi())),S&4&&Af(l);break;case 22:if(Dt=m!==null&&m.memoizedState!==null,l.mode&1?(hn=(mt=hn)||Dt,Fs(c,l),hn=mt):Fs(c,l),Is(l),S&8192){if(mt=l.memoizedState!==null,(l.stateNode.isHidden=mt)&&!Dt&&l.mode&1)for(re=l,Dt=l.child;Dt!==null;){for(Ot=re=Dt;re!==null;){switch(Tt=re,ee=Tt.child,Tt.tag){case 0:case 11:case 14:case 15:_o(4,Tt,Tt.return);break;case 1:no(Tt,Tt.return);var le=Tt.stateNode;if(typeof le.componentWillUnmount=="function"){S=Tt,m=Tt.return;try{c=S,le.props=c.memoizedProps,le.state=c.memoizedState,le.componentWillUnmount()}catch(ce){bi(S,m,ce)}}break;case 5:no(Tt,Tt.return);break;case 22:if(Tt.memoizedState!==null){hf(Ot);continue}}ee!==null?(ee.return=Tt,re=ee):hf(Ot)}Dt=Dt.sibling}t:for(Dt=null,Ot=l;;){if(Ot.tag===5){if(Dt===null){Dt=Ot;try{U=Ot.stateNode,mt?(E=U.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none"):(_=Ot.stateNode,rt=Ot.memoizedProps.style,z=rt!=null&&rt.hasOwnProperty("display")?rt.display:null,_.style.display=ko("display",z))}catch(ce){bi(l,l.return,ce)}}}else if(Ot.tag===6){if(Dt===null)try{Ot.stateNode.nodeValue=mt?"":Ot.memoizedProps}catch(ce){bi(l,l.return,ce)}}else if((Ot.tag!==22&&Ot.tag!==23||Ot.memoizedState===null||Ot===l)&&Ot.child!==null){Ot.child.return=Ot,Ot=Ot.child;continue}if(Ot===l)break t;for(;Ot.sibling===null;){if(Ot.return===null||Ot.return===l)break t;Dt===Ot&&(Dt=null),Ot=Ot.return}Dt===Ot&&(Dt=null),Ot.sibling.return=Ot.return,Ot=Ot.sibling}}break;case 19:Fs(c,l),Is(l),S&4&&Af(l);break;case 21:break;default:Fs(c,l),Is(l)}}function Is(l){var c=l.flags;if(c&2){try{t:{for(var m=l.return;m!==null;){if(nf(m)){var S=m;break t}m=m.return}throw Error(w(160))}switch(S.tag){case 5:var U=S.stateNode;S.flags&32&&(cs(U,""),S.flags&=-33);var E=sf(l);mu(l,E,U);break;case 3:case 4:var z=S.stateNode.containerInfo,_=sf(l);pu(l,_,z);break;default:throw Error(w(161))}}catch(rt){bi(l,l.return,rt)}l.flags&=-3}c&4096&&(l.flags&=-4097)}function om(l,c,m){re=l,af(l)}function af(l,c,m){for(var S=(l.mode&1)!==0;re!==null;){var U=re,E=U.child;if(U.tag===22&&S){var z=U.memoizedState!==null||cl;if(!z){var _=U.alternate,rt=_!==null&&_.memoizedState!==null||hn;_=cl;var mt=hn;if(cl=z,(hn=rt)&&!mt)for(re=U;re!==null;)z=re,rt=z.child,z.tag===22&&z.memoizedState!==null?uf(U):rt!==null?(rt.return=z,re=rt):uf(U);for(;E!==null;)re=E,af(E),E=E.sibling;re=U,cl=_,hn=mt}lf(l)}else U.subtreeFlags&8772&&E!==null?(E.return=U,re=E):lf(l)}}function lf(l){for(;re!==null;){var c=re;if(c.flags&8772){var m=c.alternate;try{if(c.flags&8772)switch(c.tag){case 0:case 11:case 15:hn||dl(5,c);break;case 1:var S=c.stateNode;if(c.flags&4&&!hn)if(m===null)S.componentDidMount();else{var U=c.elementType===c.type?m.memoizedProps:Cs(c.type,m.memoizedProps);S.componentDidUpdate(U,m.memoizedState,S.__reactInternalSnapshotBeforeUpdate)}var E=c.updateQueue;E!==null&&ld(c,E,S);break;case 3:var z=c.updateQueue;if(z!==null){if(m=null,c.child!==null)switch(c.child.tag){case 5:m=c.child.stateNode;break;case 1:m=c.child.stateNode}ld(c,z,m)}break;case 5:var _=c.stateNode;if(m===null&&c.flags&4){m=_;var rt=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":rt.autoFocus&&m.focus();break;case"img":rt.src&&(m.src=rt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var mt=c.alternate;if(mt!==null){var Dt=mt.memoizedState;if(Dt!==null){var Ot=Dt.dehydrated;Ot!==null&&_r(Ot)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(w(163))}hn||c.flags&512&&gu(c)}catch(Tt){bi(c,c.return,Tt)}}if(c===l){re=null;break}if(m=c.sibling,m!==null){m.return=c.return,re=m;break}re=c.return}}function hf(l){for(;re!==null;){var c=re;if(c===l){re=null;break}var m=c.sibling;if(m!==null){m.return=c.return,re=m;break}re=c.return}}function uf(l){for(;re!==null;){var c=re;try{switch(c.tag){case 0:case 11:case 15:var m=c.return;try{dl(4,c)}catch(rt){bi(c,m,rt)}break;case 1:var S=c.stateNode;if(typeof S.componentDidMount=="function"){var U=c.return;try{S.componentDidMount()}catch(rt){bi(c,U,rt)}}var E=c.return;try{gu(c)}catch(rt){bi(c,E,rt)}break;case 5:var z=c.return;try{gu(c)}catch(rt){bi(c,z,rt)}}}catch(rt){bi(c,c.return,rt)}if(c===l){re=null;break}var _=c.sibling;if(_!==null){_.return=c.return,re=_;break}re=c.return}}var am=Math.ceil,fl=Rt.ReactCurrentDispatcher,yu=Rt.ReactCurrentOwner,rs=Rt.ReactCurrentBatchConfig,ze=0,Yi=null,Ii=null,tn=0,Jn=0,so=Di(0),Gi=0,ta=null,dA=0,gl=0,wu=0,ea=null,Rn=null,Bu=0,ro=1/0,nr=null,pl=!1,xu=null,Ur=null,ml=!1,Lr=null,yl=0,ia=0,Cu=null,wl=-1,Bl=0;function Fn(){return ze&6?wi():wl!==-1?wl:wl=wi()}function Nr(l){return l.mode&1?ze&2&&tn!==0?tn&-tn:zp.transition!==null?(Bl===0&&(Bl=zs()),Bl):(l=Je,l!==0||(l=window.event,l=l===void 0?16:HA(l.type)),l):1}function Ss(l,c,m,S){if(50<ia)throw ia=0,Cu=null,Error(w(185));Ce(l,m,S),(!(ze&2)||l!==Yi)&&(l===Yi&&(!(ze&2)&&(gl|=m),Gi===4&&Er(l,tn)),Kn(l,S),m===1&&ze===0&&!(c.mode&1)&&(ro=wi()+500,Wa&&kr()))}function Kn(l,c){var m=l.callbackNode;Uh(l,c);var S=gr(l,l===Yi?tn:0);if(S===0)m!==null&&Ia(m),l.callbackNode=null,l.callbackPriority=0;else if(c=S&-S,l.callbackPriority!==c){if(m!=null&&Ia(m),c===1)l.tag===0?Xp(df.bind(null,l)):Zc(df.bind(null,l)),ae(function(){!(ze&6)&&kr()}),m=null;else{switch(Et(S)){case 1:m=UA;break;case 4:m=Kt;break;case 16:m=fn;break;case 536870912:m=Hi;break;default:m=fn}m=xf(m,cf.bind(null,l))}l.callbackPriority=c,l.callbackNode=m}}function cf(l,c){if(wl=-1,Bl=0,ze&6)throw Error(w(327));var m=l.callbackNode;if(Ao()&&l.callbackNode!==m)return null;var S=gr(l,l===Yi?tn:0);if(S===0)return null;if(S&30||S&l.expiredLanes||c)c=xl(l,S);else{c=S;var U=ze;ze|=2;var E=gf();(Yi!==l||tn!==c)&&(nr=null,ro=wi()+500,gA(l,c));do try{um();break}catch(_){ff(l,_)}while(!0);Rh(),fl.current=E,ze=U,Ii!==null?c=0:(Yi=null,tn=0,c=Gi)}if(c!==0){if(c===2&&(U=To(l),U!==0&&(S=U,c=vu(l,U))),c===1)throw m=ta,gA(l,0),Er(l,S),Kn(l,wi()),m;if(c===6)Er(l,S);else{if(U=l.current.alternate,!(S&30)&&!lm(U)&&(c=xl(l,S),c===2&&(E=To(l),E!==0&&(S=E,c=vu(l,E))),c===1))throw m=ta,gA(l,0),Er(l,S),Kn(l,wi()),m;switch(l.finishedWork=U,l.finishedLanes=S,c){case 0:case 1:throw Error(w(345));case 2:pA(l,Rn,nr);break;case 3:if(Er(l,S),(S&130023424)===S&&(c=Bu+500-wi(),10<c)){if(gr(l,0)!==0)break;if(U=l.suspendedLanes,(U&S)!==S){Fn(),l.pingedLanes|=l.suspendedLanes&U;break}l.timeoutHandle=Ft(pA.bind(null,l,Rn,nr),c);break}pA(l,Rn,nr);break;case 4:if(Er(l,S),(S&4194240)===S)break;for(c=l.eventTimes,U=-1;0<S;){var z=31-gn(S);E=1<<z,z=c[z],z>U&&(U=z),S&=~E}if(S=U,S=wi()-S,S=(120>S?120:480>S?480:1080>S?1080:1920>S?1920:3e3>S?3e3:4320>S?4320:1960*am(S/1960))-S,10<S){l.timeoutHandle=Ft(pA.bind(null,l,Rn,nr),S);break}pA(l,Rn,nr);break;case 5:pA(l,Rn,nr);break;default:throw Error(w(329))}}}return Kn(l,wi()),l.callbackNode===m?cf.bind(null,l):null}function vu(l,c){var m=ea;return l.current.memoizedState.isDehydrated&&(gA(l,c).flags|=256),l=xl(l,c),l!==2&&(c=Rn,Rn=m,c!==null&&Fu(c)),l}function Fu(l){Rn===null?Rn=l:Rn.push.apply(Rn,l)}function lm(l){for(var c=l;;){if(c.flags&16384){var m=c.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var S=0;S<m.length;S++){var U=m[S],E=U.getSnapshot;U=U.value;try{if(!$t(E(),U))return!1}catch{return!1}}}if(m=c.child,c.subtreeFlags&16384&&m!==null)m.return=c,c=m;else{if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Er(l,c){for(c&=~wu,c&=~gl,l.suspendedLanes|=c,l.pingedLanes&=~c,l=l.expirationTimes;0<c;){var m=31-gn(c),S=1<<m;l[m]=-1,c&=~S}}function df(l){if(ze&6)throw Error(w(327));Ao();var c=gr(l,0);if(!(c&1))return Kn(l,wi()),null;var m=xl(l,c);if(l.tag!==0&&m===2){var S=To(l);S!==0&&(c=S,m=vu(l,S))}if(m===1)throw m=ta,gA(l,0),Er(l,c),Kn(l,wi()),m;if(m===6)throw Error(w(345));return l.finishedWork=l.current.alternate,l.finishedLanes=c,pA(l,Rn,nr),Kn(l,wi()),null}function Su(l,c){var m=ze;ze|=1;try{return l(c)}finally{ze=m,ze===0&&(ro=wi()+500,Wa&&kr())}}function fA(l){Lr!==null&&Lr.tag===0&&!(ze&6)&&Ao();var c=ze;ze|=1;var m=rs.transition,S=Je;try{if(rs.transition=null,Je=1,l)return l()}finally{Je=S,rs.transition=m,ze=c,!(ze&6)&&kr()}}function bu(){Jn=so.current,Ke(so)}function gA(l,c){l.finishedWork=null,l.finishedLanes=0;var m=l.timeoutHandle;if(m!==-1&&(l.timeoutHandle=-1,zt(m)),Ii!==null)for(m=Ii.return;m!==null;){var S=m;switch(Th(S),S.tag){case 1:S=S.type.childContextTypes,S!=null&&Ya();break;case 3:eo(),Ke(In),Ke(on),Wh();break;case 5:Yh(S);break;case 4:eo();break;case 13:Ke(xi);break;case 19:Ke(xi);break;case 10:Kh(S.type._context);break;case 22:case 23:bu()}m=m.return}if(Yi=l,Ii=l=Tr(l.current,null),tn=Jn=c,Gi=0,ta=null,wu=gl=dA=0,Rn=ea=null,hA!==null){for(c=0;c<hA.length;c++)if(m=hA[c],S=m.interleaved,S!==null){m.interleaved=null;var U=S.next,E=m.pending;if(E!==null){var z=E.next;E.next=U,S.next=z}m.pending=S}hA=null}return l}function ff(l,c){do{var m=Ii;try{if(Rh(),sl.current=al,rl){for(var S=Ci.memoizedState;S!==null;){var U=S.queue;U!==null&&(U.pending=null),S=S.next}rl=!1}if(cA=0,zi=Vi=Ci=null,Wo=!1,Jo=0,yu.current=null,m===null||m.return===null){Gi=1,ta=c,Ii=null;break}t:{var E=l,z=m.return,_=m,rt=c;if(c=tn,_.flags|=32768,rt!==null&&typeof rt=="object"&&typeof rt.then=="function"){var mt=rt,Dt=_,Ot=Dt.tag;if(!(Dt.mode&1)&&(Ot===0||Ot===11||Ot===15)){var Tt=Dt.alternate;Tt?(Dt.updateQueue=Tt.updateQueue,Dt.memoizedState=Tt.memoizedState,Dt.lanes=Tt.lanes):(Dt.updateQueue=null,Dt.memoizedState=null)}var ee=Od(z);if(ee!==null){ee.flags&=-257,Hd(ee,z,_,E,c),ee.mode&1&&Id(E,mt,c),c=ee,rt=mt;var le=c.updateQueue;if(le===null){var ce=new Set;ce.add(rt),c.updateQueue=ce}else le.add(rt);break t}else{if(!(c&1)){Id(E,mt,c),ku();break t}rt=Error(w(426))}}else if(mi&&_.mode&1){var Pi=Od(z);if(Pi!==null){!(Pi.flags&65536)&&(Pi.flags|=256),Hd(Pi,z,_,E,c),Oh(io(rt,_));break t}}E=rt=io(rt,_),Gi!==4&&(Gi=2),ea===null?ea=[E]:ea.push(E),E=z;do{switch(E.tag){case 3:E.flags|=65536,c&=-c,E.lanes|=c;var ut=Td(E,rt,c);ad(E,ut);break t;case 1:_=rt;var ot=E.type,ft=E.stateNode;if(!(E.flags&128)&&(typeof ot.getDerivedStateFromError=="function"||ft!==null&&typeof ft.componentDidCatch=="function"&&(Ur===null||!Ur.has(ft)))){E.flags|=65536,c&=-c,E.lanes|=c;var Yt=Dd(E,_,c);ad(E,Yt);break t}}E=E.return}while(E!==null)}mf(m)}catch(de){c=de,Ii===m&&m!==null&&(Ii=m=m.return);continue}break}while(!0)}function gf(){var l=fl.current;return fl.current=al,l===null?al:l}function ku(){(Gi===0||Gi===3||Gi===2)&&(Gi=4),Yi===null||!(dA&268435455)&&!(gl&268435455)||Er(Yi,tn)}function xl(l,c){var m=ze;ze|=2;var S=gf();(Yi!==l||tn!==c)&&(nr=null,gA(l,c));do try{hm();break}catch(U){ff(l,U)}while(!0);if(Rh(),ze=m,fl.current=S,Ii!==null)throw Error(w(261));return Yi=null,tn=0,Gi}function hm(){for(;Ii!==null;)pf(Ii)}function um(){for(;Ii!==null&&!Mh();)pf(Ii)}function pf(l){var c=Bf(l.alternate,l,Jn);l.memoizedProps=l.pendingProps,c===null?mf(l):Ii=c,yu.current=null}function mf(l){var c=l;do{var m=c.alternate;if(l=c.return,c.flags&32768){if(m=sm(m,c),m!==null){m.flags&=32767,Ii=m;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{Gi=6,Ii=null;return}}else if(m=nm(m,c,Jn),m!==null){Ii=m;return}if(c=c.sibling,c!==null){Ii=c;return}Ii=c=l}while(c!==null);Gi===0&&(Gi=5)}function pA(l,c,m){var S=Je,U=rs.transition;try{rs.transition=null,Je=1,cm(l,c,m,S)}finally{rs.transition=U,Je=S}return null}function cm(l,c,m,S){do Ao();while(Lr!==null);if(ze&6)throw Error(w(327));m=l.finishedWork;var U=l.finishedLanes;if(m===null)return null;if(l.finishedWork=null,l.finishedLanes=0,m===l.current)throw Error(w(177));l.callbackNode=null,l.callbackPriority=0;var E=m.lanes|m.childLanes;if(Do(l,E),l===Yi&&(Ii=Yi=null,tn=0),!(m.subtreeFlags&2064)&&!(m.flags&2064)||ml||(ml=!0,xf(fn,function(){return Ao(),null})),E=(m.flags&15990)!==0,m.subtreeFlags&15990||E){E=rs.transition,rs.transition=null;var z=Je;Je=1;var _=ze;ze|=4,yu.current=null,Am(l,m),of(m,l),br(ne),Ys=!!Ut,ne=Ut=null,l.current=m,om(m),Ph(),ze=_,Je=z,rs.transition=E}else l.current=m;if(ml&&(ml=!1,Lr=l,yl=U),E=l.pendingLanes,E===0&&(Ur=null),Zt(m.stateNode),Kn(l,wi()),c!==null)for(S=l.onRecoverableError,m=0;m<c.length;m++)U=c[m],S(U.value,{componentStack:U.stack,digest:U.digest});if(pl)throw pl=!1,l=xu,xu=null,l;return yl&1&&l.tag!==0&&Ao(),E=l.pendingLanes,E&1?l===Cu?ia++:(ia=0,Cu=l):ia=0,kr(),null}function Ao(){if(Lr!==null){var l=Et(yl),c=rs.transition,m=Je;try{if(rs.transition=null,Je=16>l?16:l,Lr===null)var S=!1;else{if(l=Lr,Lr=null,yl=0,ze&6)throw Error(w(331));var U=ze;for(ze|=4,re=l.current;re!==null;){var E=re,z=E.child;if(re.flags&16){var _=E.deletions;if(_!==null){for(var rt=0;rt<_.length;rt++){var mt=_[rt];for(re=mt;re!==null;){var Dt=re;switch(Dt.tag){case 0:case 11:case 15:_o(8,Dt,E)}var Ot=Dt.child;if(Ot!==null)Ot.return=Dt,re=Ot;else for(;re!==null;){Dt=re;var Tt=Dt.sibling,ee=Dt.return;if(ef(Dt),Dt===mt){re=null;break}if(Tt!==null){Tt.return=ee,re=Tt;break}re=ee}}}var le=E.alternate;if(le!==null){var ce=le.child;if(ce!==null){le.child=null;do{var Pi=ce.sibling;ce.sibling=null,ce=Pi}while(ce!==null)}}re=E}}if(E.subtreeFlags&2064&&z!==null)z.return=E,re=z;else t:for(;re!==null;){if(E=re,E.flags&2048)switch(E.tag){case 0:case 11:case 15:_o(9,E,E.return)}var ut=E.sibling;if(ut!==null){ut.return=E.return,re=ut;break t}re=E.return}}var ot=l.current;for(re=ot;re!==null;){z=re;var ft=z.child;if(z.subtreeFlags&2064&&ft!==null)ft.return=z,re=ft;else t:for(z=ot;re!==null;){if(_=re,_.flags&2048)try{switch(_.tag){case 0:case 11:case 15:dl(9,_)}}catch(de){bi(_,_.return,de)}if(_===z){re=null;break t}var Yt=_.sibling;if(Yt!==null){Yt.return=_.return,re=Yt;break t}re=_.return}}if(ze=U,kr(),je&&typeof je.onPostCommitFiberRoot=="function")try{je.onPostCommitFiberRoot(dr,l)}catch{}S=!0}return S}finally{Je=m,rs.transition=c}}return!1}function yf(l,c,m){c=io(m,c),c=Td(l,c,1),l=Pr(l,c,1),c=Fn(),l!==null&&(Ce(l,1,c),Kn(l,c))}function bi(l,c,m){if(l.tag===3)yf(l,l,m);else for(;c!==null;){if(c.tag===3){yf(c,l,m);break}else if(c.tag===1){var S=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(Ur===null||!Ur.has(S))){l=io(m,l),l=Dd(c,l,1),c=Pr(c,l,1),l=Fn(),c!==null&&(Ce(c,1,l),Kn(c,l));break}}c=c.return}}function dm(l,c,m){var S=l.pingCache;S!==null&&S.delete(c),c=Fn(),l.pingedLanes|=l.suspendedLanes&m,Yi===l&&(tn&m)===m&&(Gi===4||Gi===3&&(tn&130023424)===tn&&500>wi()-Bu?gA(l,0):wu|=m),Kn(l,c)}function wf(l,c){c===0&&(l.mode&1?(c=fr,fr<<=1,!(fr&130023424)&&(fr=4194304)):c=1);var m=Fn();l=tr(l,c),l!==null&&(Ce(l,c,m),Kn(l,m))}function fm(l){var c=l.memoizedState,m=0;c!==null&&(m=c.retryLane),wf(l,m)}function gm(l,c){var m=0;switch(l.tag){case 13:var S=l.stateNode,U=l.memoizedState;U!==null&&(m=U.retryLane);break;case 19:S=l.stateNode;break;default:throw Error(w(314))}S!==null&&S.delete(c),wf(l,m)}var Bf;Bf=function(l,c,m){if(l!==null)if(l.memoizedProps!==c.pendingProps||In.current)Hn=!0;else{if(!(l.lanes&m)&&!(c.flags&128))return Hn=!1,im(l,c,m);Hn=!!(l.flags&131072)}else Hn=!1,mi&&c.flags&1048576&&$c(c,qa,c.index);switch(c.lanes=0,c.tag){case 2:var S=c.type;ul(l,c),l=c.pendingProps;var U=WA(c,on.current);to(c,m),U=Zh(null,c,S,l,U,m);var E=$h();return c.flags|=1,typeof U=="object"&&U!==null&&typeof U.render=="function"&&U.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,On(S)?(E=!0,ja(c)):E=!1,c.memoizedState=U.state!==null&&U.state!==void 0?U.state:null,Xh(c),U.updater=ll,c.stateNode=U,U._reactInternals=c,su(c,S,l,m),c=au(null,c,S,!0,E,m)):(c.tag=0,mi&&E&&Eh(c),vn(null,c,U,m),c=c.child),c;case 16:S=c.elementType;t:{switch(ul(l,c),l=c.pendingProps,U=S._init,S=U(S._payload),c.type=S,U=c.tag=mm(S),l=Cs(S,l),U){case 0:c=ou(null,c,S,l,m);break t;case 1:c=zd(null,c,S,l,m);break t;case 11:c=Rd(null,c,S,l,m);break t;case 14:c=Kd(null,c,S,Cs(S.type,l),m);break t}throw Error(w(306,S,""))}return c;case 0:return S=c.type,U=c.pendingProps,U=c.elementType===S?U:Cs(S,U),ou(l,c,S,U,m);case 1:return S=c.type,U=c.pendingProps,U=c.elementType===S?U:Cs(S,U),zd(l,c,S,U,m);case 3:t:{if(Yd(c),l===null)throw Error(w(387));S=c.pendingProps,E=c.memoizedState,U=E.element,od(l,c),il(c,S,null,m);var z=c.memoizedState;if(S=z.element,E.isDehydrated)if(E={element:S,isDehydrated:!1,cache:z.cache,pendingSuspenseBoundaries:z.pendingSuspenseBoundaries,transitions:z.transitions},c.updateQueue.baseState=E,c.memoizedState=E,c.flags&256){U=io(Error(w(423)),c),c=jd(l,c,S,m,U);break t}else if(S!==U){U=io(Error(w(424)),c),c=jd(l,c,S,m,U);break t}else for(Wn=Ht(c.stateNode.containerInfo.firstChild),jn=c,mi=!0,xs=null,m=rd(c,null,S,m),c.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(ZA(),S===U){c=ir(l,c,m);break t}vn(l,c,S,m)}c=c.child}return c;case 5:return hd(c),l===null&&Ih(c),S=c.type,U=c.pendingProps,E=l!==null?l.memoizedProps:null,z=U.children,te(S,U)?z=null:E!==null&&te(S,E)&&(c.flags|=32),Xd(l,c),vn(l,c,z,m),c.child;case 6:return l===null&&Ih(c),null;case 13:return Wd(l,c,m);case 4:return zh(c,c.stateNode.containerInfo),S=c.pendingProps,l===null?c.child=$A(c,null,S,m):vn(l,c,S,m),c.child;case 11:return S=c.type,U=c.pendingProps,U=c.elementType===S?U:Cs(S,U),Rd(l,c,S,U,m);case 7:return vn(l,c,c.pendingProps,m),c.child;case 8:return vn(l,c,c.pendingProps.children,m),c.child;case 12:return vn(l,c,c.pendingProps.children,m),c.child;case 10:t:{if(S=c.type._context,U=c.pendingProps,E=c.memoizedProps,z=U.value,Ne(_a,S._currentValue),S._currentValue=z,E!==null)if($t(E.value,z)){if(E.children===U.children&&!In.current){c=ir(l,c,m);break t}}else for(E=c.child,E!==null&&(E.return=c);E!==null;){var _=E.dependencies;if(_!==null){z=E.child;for(var rt=_.firstContext;rt!==null;){if(rt.context===S){if(E.tag===1){rt=er(-1,m&-m),rt.tag=2;var mt=E.updateQueue;if(mt!==null){mt=mt.shared;var Dt=mt.pending;Dt===null?rt.next=rt:(rt.next=Dt.next,Dt.next=rt),mt.pending=rt}}E.lanes|=m,rt=E.alternate,rt!==null&&(rt.lanes|=m),Vh(E.return,m,c),_.lanes|=m;break}rt=rt.next}}else if(E.tag===10)z=E.type===c.type?null:E.child;else if(E.tag===18){if(z=E.return,z===null)throw Error(w(341));z.lanes|=m,_=z.alternate,_!==null&&(_.lanes|=m),Vh(z,m,c),z=E.sibling}else z=E.child;if(z!==null)z.return=E;else for(z=E;z!==null;){if(z===c){z=null;break}if(E=z.sibling,E!==null){E.return=z.return,z=E;break}z=z.return}E=z}vn(l,c,U.children,m),c=c.child}return c;case 9:return U=c.type,S=c.pendingProps.children,to(c,m),U=ns(U),S=S(U),c.flags|=1,vn(l,c,S,m),c.child;case 14:return S=c.type,U=Cs(S,c.pendingProps),U=Cs(S.type,U),Kd(l,c,S,U,m);case 15:return Vd(l,c,c.type,c.pendingProps,m);case 17:return S=c.type,U=c.pendingProps,U=c.elementType===S?U:Cs(S,U),ul(l,c),c.tag=1,On(S)?(l=!0,ja(c)):l=!1,to(c,m),Nd(c,S,U),su(c,S,U,m),au(null,c,S,!0,l,m);case 19:return qd(l,c,m);case 22:return Gd(l,c,m)}throw Error(w(156,c.tag))};function xf(l,c){return Da(l,c)}function pm(l,c,m,S){this.tag=l,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function As(l,c,m,S){return new pm(l,c,m,S)}function Mu(l){return l=l.prototype,!(!l||!l.isReactComponent)}function mm(l){if(typeof l=="function")return Mu(l)?1:0;if(l!=null){if(l=l.$$typeof,l===$e)return 11;if(l===pi)return 14}return 2}function Tr(l,c){var m=l.alternate;return m===null?(m=As(l.tag,c,l.key,l.mode),m.elementType=l.elementType,m.type=l.type,m.stateNode=l.stateNode,m.alternate=l,l.alternate=m):(m.pendingProps=c,m.type=l.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=l.flags&14680064,m.childLanes=l.childLanes,m.lanes=l.lanes,m.child=l.child,m.memoizedProps=l.memoizedProps,m.memoizedState=l.memoizedState,m.updateQueue=l.updateQueue,c=l.dependencies,m.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},m.sibling=l.sibling,m.index=l.index,m.ref=l.ref,m}function Cl(l,c,m,S,U,E){var z=2;if(S=l,typeof l=="function")Mu(l)&&(z=1);else if(typeof l=="string")z=5;else t:switch(l){case V:return mA(m.children,U,E,c);case me:z=8,U|=8;break;case fe:return l=As(12,m,c,U|2),l.elementType=fe,l.lanes=E,l;case Nt:return l=As(13,m,c,U),l.elementType=Nt,l.lanes=E,l;case Le:return l=As(19,m,c,U),l.elementType=Le,l.lanes=E,l;case ke:return vl(m,U,E,c);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case Jt:z=10;break t;case ve:z=9;break t;case $e:z=11;break t;case pi:z=14;break t;case Ve:z=16,S=null;break t}throw Error(w(130,l==null?l:typeof l,""))}return c=As(z,m,c,U),c.elementType=l,c.type=S,c.lanes=E,c}function mA(l,c,m,S){return l=As(7,l,S,c),l.lanes=m,l}function vl(l,c,m,S){return l=As(22,l,S,c),l.elementType=ke,l.lanes=m,l.stateNode={isHidden:!1},l}function Pu(l,c,m){return l=As(6,l,null,c),l.lanes=m,l}function Qu(l,c,m){return c=As(4,l.children!==null?l.children:[],l.key,c),c.lanes=m,c.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},c}function ym(l,c,m,S,U){this.tag=c,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=LA(0),this.expirationTimes=LA(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=LA(0),this.identifierPrefix=S,this.onRecoverableError=U,this.mutableSourceEagerHydrationData=null}function Uu(l,c,m,S,U,E,z,_,rt){return l=new ym(l,c,m,_,rt),c===1?(c=1,E===!0&&(c|=8)):c=0,E=As(3,null,null,c),l.current=E,E.stateNode=l,E.memoizedState={element:S,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xh(E),l}function wm(l,c,m){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bt,key:S==null?null:""+S,children:l,containerInfo:c,implementation:m}}function Cf(l){if(!l)return Dn;l=l._reactInternals;t:{if(Xs(l)!==l||l.tag!==1)throw Error(w(170));var c=l;do{switch(c.tag){case 3:c=c.stateNode.context;break t;case 1:if(On(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break t}}c=c.return}while(c!==null);throw Error(w(171))}if(l.tag===1){var m=l.type;if(On(m))return Jc(l,m,c)}return c}function vf(l,c,m,S,U,E,z,_,rt){return l=Uu(m,S,!0,l,U,E,z,_,rt),l.context=Cf(null),m=l.current,S=Fn(),U=Nr(m),E=er(S,U),E.callback=c??null,Pr(m,E,U),l.current.lanes=U,Ce(l,U,S),Kn(l,S),l}function Fl(l,c,m,S){var U=c.current,E=Fn(),z=Nr(U);return m=Cf(m),c.context===null?c.context=m:c.pendingContext=m,c=er(E,z),c.payload={element:l},S=S===void 0?null:S,S!==null&&(c.callback=S),l=Pr(U,c,z),l!==null&&(Ss(l,U,z,E),el(l,U,z)),z}function Sl(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return l.child.stateNode;default:return l.child.stateNode}}function Ff(l,c){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var m=l.retryLane;l.retryLane=m!==0&&m<c?m:c}}function Lu(l,c){Ff(l,c),(l=l.alternate)&&Ff(l,c)}var Sf=typeof reportError=="function"?reportError:function(l){console.error(l)};function Nu(l){this._internalRoot=l}bl.prototype.render=Nu.prototype.render=function(l){var c=this._internalRoot;if(c===null)throw Error(w(409));Fl(l,c,null,null)},bl.prototype.unmount=Nu.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var c=l.containerInfo;fA(function(){Fl(null,l,null,null)}),c[Xe]=null}};function bl(l){this._internalRoot=l}bl.prototype.unstable_scheduleHydration=function(l){if(l){var c=TA();l={blockedOn:null,target:l,priority:c};for(var m=0;m<Fi.length&&c!==0&&c<Fi[m].priority;m++);Fi.splice(m,0,l),m===0&&DA(l)}};function Eu(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function kl(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11&&(l.nodeType!==8||l.nodeValue!==" react-mount-point-unstable "))}function bf(){}function Bm(l,c,m,S,U){if(U){if(typeof S=="function"){var E=S;S=function(){var mt=Sl(z);E.call(mt)}}var z=vf(c,S,l,0,null,!1,!1,"",bf);return l._reactRootContainer=z,l[Xe]=z.current,Y(l.nodeType===8?l.parentNode:l),fA(),z}for(;U=l.lastChild;)l.removeChild(U);if(typeof S=="function"){var _=S;S=function(){var mt=Sl(rt);_.call(mt)}}var rt=Uu(l,0,!1,null,null,!1,!1,"",bf);return l._reactRootContainer=rt,l[Xe]=rt.current,Y(l.nodeType===8?l.parentNode:l),fA(function(){Fl(c,rt,m,S)}),rt}function Ml(l,c,m,S,U){var E=m._reactRootContainer;if(E){var z=E;if(typeof U=="function"){var _=U;U=function(){var rt=Sl(z);_.call(rt)}}Fl(c,z,l,U)}else z=Bm(m,c,l,U,S);return Sl(z)}NA=function(l){switch(l.tag){case 3:var c=l.stateNode;if(c.current.memoizedState.isDehydrated){var m=Zi(c.pendingLanes);m!==0&&(se(c,m|1),Kn(c,wi()),!(ze&6)&&(ro=wi()+500,kr()))}break;case 13:fA(function(){var S=tr(l,1);if(S!==null){var U=Fn();Ss(S,l,1,U)}}),Lu(l,1)}},$r=function(l){if(l.tag===13){var c=tr(l,134217728);if(c!==null){var m=Fn();Ss(c,l,134217728,m)}Lu(l,134217728)}},EA=function(l){if(l.tag===13){var c=Nr(l),m=tr(l,c);if(m!==null){var S=Fn();Ss(m,l,c,S)}Lu(l,c)}},TA=function(){return Je},Xt=function(l,c){var m=Je;try{return Je=l,c()}finally{Je=m}},lr=function(l,c,m){switch(c){case"input":if(SA(l,m),c=m.name,m.type==="radio"&&c!=null){for(m=l;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<m.length;c++){var S=m[c];if(S!==l&&S.form===l.form){var U=Fe(S);if(!U)throw Error(w(90));xo(S),SA(S,U)}}}break;case"textarea":Zr(l,m);break;case"select":c=m.value,c!=null&&Ks(l,!!m.multiple,c,!1)}},PA=Su,Uo=fA;var xm={usingClientEntryPoint:!1,Events:[gi,Ki,Fe,sn,MA,Su]},na={findFiberByHostInstance:ii,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Cm={bundleType:na.bundleType,version:na.version,rendererPackageName:na.rendererPackageName,rendererConfig:na.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rt.ReactCurrentDispatcher,findHostInstanceByFiber:function(l){return l=Ea(l),l===null?null:l.stateNode},findFiberByHostInstance:na.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pl.isDisabled&&Pl.supportsFiber)try{dr=Pl.inject(Cm),je=Pl}catch{}}return Vn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xm,Vn.createPortal=function(l,c){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Eu(c))throw Error(w(200));return wm(l,c,null,m)},Vn.createRoot=function(l,c){if(!Eu(l))throw Error(w(299));var m=!1,S="",U=Sf;return c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(S=c.identifierPrefix),c.onRecoverableError!==void 0&&(U=c.onRecoverableError)),c=Uu(l,1,!1,null,null,m,!1,S,U),l[Xe]=c.current,Y(l.nodeType===8?l.parentNode:l),new Nu(c)},Vn.findDOMNode=function(l){if(l==null)return null;if(l.nodeType===1)return l;var c=l._reactInternals;if(c===void 0)throw typeof l.render=="function"?Error(w(188)):(l=Object.keys(l).join(","),Error(w(268,l)));return l=Ea(c),l=l===null?null:l.stateNode,l},Vn.flushSync=function(l){return fA(l)},Vn.hydrate=function(l,c,m){if(!kl(c))throw Error(w(200));return Ml(null,l,c,!0,m)},Vn.hydrateRoot=function(l,c,m){if(!Eu(l))throw Error(w(405));var S=m!=null&&m.hydratedSources||null,U=!1,E="",z=Sf;if(m!=null&&(m.unstable_strictMode===!0&&(U=!0),m.identifierPrefix!==void 0&&(E=m.identifierPrefix),m.onRecoverableError!==void 0&&(z=m.onRecoverableError)),c=vf(c,null,l,1,m??null,U,!1,E,z),l[Xe]=c.current,Y(l),S)for(l=0;l<S.length;l++)m=S[l],U=m._getVersion,U=U(m._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[m,U]:c.mutableSourceEagerHydrationData.push(m,U);return new bl(c)},Vn.render=function(l,c,m){if(!kl(c))throw Error(w(200));return Ml(null,l,c,!1,m)},Vn.unmountComponentAtNode=function(l){if(!kl(l))throw Error(w(40));return l._reactRootContainer?(fA(function(){Ml(null,null,l,!1,function(){l._reactRootContainer=null,l[Xe]=null})}),!0):!1},Vn.unstable_batchedUpdates=Su,Vn.unstable_renderSubtreeIntoContainer=function(l,c,m,S){if(!kl(m))throw Error(w(200));if(l==null||l._reactInternals===void 0)throw Error(w(38));return Ml(l,c,m,!1,S)},Vn.version="18.3.1-next-f1338f8080-20240426",Vn}var Ef;function Nm(){if(Ef)return Iu.exports;Ef=1;function y(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(y)}catch(u){console.error(u)}}return y(),Iu.exports=Lm(),Iu.exports}var Tf;function Em(){if(Tf)return Ql;Tf=1;var y=Nm();return Ql.createRoot=y.createRoot,Ql.hydrateRoot=y.hydrateRoot,Ql}var Tm=Em(),Ru,Df;function Dm(){if(Df)return Ru;Df=1;var y=typeof Element<"u",u=typeof Map=="function",w=typeof Set=="function",v=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function P(N,I){if(N===I)return!0;if(N&&I&&typeof N=="object"&&typeof I=="object"){if(N.constructor!==I.constructor)return!1;var j,H,tt;if(Array.isArray(N)){if(j=N.length,j!=I.length)return!1;for(H=j;H--!==0;)if(!P(N[H],I[H]))return!1;return!0}var X;if(u&&N instanceof Map&&I instanceof Map){if(N.size!==I.size)return!1;for(X=N.entries();!(H=X.next()).done;)if(!I.has(H.value[0]))return!1;for(X=N.entries();!(H=X.next()).done;)if(!P(H.value[1],I.get(H.value[0])))return!1;return!0}if(w&&N instanceof Set&&I instanceof Set){if(N.size!==I.size)return!1;for(X=N.entries();!(H=X.next()).done;)if(!I.has(H.value[0]))return!1;return!0}if(v&&ArrayBuffer.isView(N)&&ArrayBuffer.isView(I)){if(j=N.length,j!=I.length)return!1;for(H=j;H--!==0;)if(N[H]!==I[H])return!1;return!0}if(N.constructor===RegExp)return N.source===I.source&&N.flags===I.flags;if(N.valueOf!==Object.prototype.valueOf&&typeof N.valueOf=="function"&&typeof I.valueOf=="function")return N.valueOf()===I.valueOf();if(N.toString!==Object.prototype.toString&&typeof N.toString=="function"&&typeof I.toString=="function")return N.toString()===I.toString();if(tt=Object.keys(N),j=tt.length,j!==Object.keys(I).length)return!1;for(H=j;H--!==0;)if(!Object.prototype.hasOwnProperty.call(I,tt[H]))return!1;if(y&&N instanceof Element)return!1;for(H=j;H--!==0;)if(!((tt[H]==="_owner"||tt[H]==="__v"||tt[H]==="__o")&&N.$$typeof)&&!P(N[tt[H]],I[tt[H]]))return!1;return!0}return N!==N&&I!==I}return Ru=function(I,j){try{return P(I,j)}catch(H){if((H.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw H}},Ru}var Im=Dm();const lc=Og(Im);function un(y,u){const w=Math.random()*(u-y+1)+y;return!Number.isInteger(y)||!Number.isInteger(u)?w:Math.floor(w)}function Ku(y,u,w){return(1-w)*y+w*u}function Om(y){const u=Math.floor(Math.random()*y.length);return y[u]}function If(y){return y?{height:y.offsetHeight,width:y.offsetWidth}:{height:0,width:0}}const Hm=Math.PI*2,Ar={color:"#dee4fd",radius:[.5,3],speed:[1,3],wind:[-.5,2],changeFrequency:200,rotationSpeed:[-1,1],opacity:[1,1]};class xA{static createSnowflakes(u,w,v){if(!u)return[];const P=[];for(let N=0;N<w;N++)P.push(new xA(u,v));return P}constructor(u,w={}){this.updateConfig(w);const{radius:v,wind:P,speed:N,rotationSpeed:I,opacity:j}=this.config;this.params={x:un(0,u.offsetWidth),y:un(-u.offsetHeight,0),rotation:un(0,360),radius:un(...v),speed:un(...N),wind:un(...P),rotationSpeed:un(...I),nextSpeed:un(...N),nextWind:un(...P),nextRotationSpeed:un(...I),opacity:un(...j)},this.framesSinceLastUpdate=0}selectImage(){this.config.images&&this.config.images.length>0?this.image=Om(this.config.images):this.image=void 0}updateConfig(u){const w=this.config;this.config={...Ar,...u},this.config.changeFrequency=un(this.config.changeFrequency,this.config.changeFrequency*1.5),this.params&&!lc(this.config.radius,w==null?void 0:w.radius)&&(this.params.radius=un(...this.config.radius)),lc(this.config.images,w==null?void 0:w.images)||this.selectImage()}updateTargetParams(){this.params.nextSpeed=un(...this.config.speed),this.params.nextWind=un(...this.config.wind),this.image&&(this.params.nextRotationSpeed=un(...this.config.rotationSpeed))}update(u,w,v=1){const{x:P,y:N,rotation:I,rotationSpeed:j,nextRotationSpeed:H,wind:tt,speed:X,nextWind:st,nextSpeed:lt,radius:Lt}=this.params;this.params.x=(P+tt*v)%(u+Lt*2),this.params.x>u+Lt&&(this.params.x=-Lt),this.params.y=(N+X*v)%(w+Lt*2),this.params.y>w+Lt&&(this.params.y=-Lt),this.image&&(this.params.rotation=(I+j)%360),this.params.speed=Ku(X,lt,.01),this.params.wind=Ku(tt,st,.01),this.params.rotationSpeed=Ku(j,H,.01),this.framesSinceLastUpdate++>this.config.changeFrequency&&(this.updateTargetParams(),this.framesSinceLastUpdate=0)}getImageOffscreenCanvas(u,w){var v,P;if(u instanceof HTMLImageElement&&u.loading)return u;let N=xA.offscreenCanvases.get(u);if(N||(N={},xA.offscreenCanvases.set(u,N)),!(w in N)){const I=document.createElement("canvas");I.width=w,I.height=w,(v=I.getContext("2d"))===null||v===void 0||v.drawImage(u,0,0,w,w),N[w]=I}return(P=N[w])!==null&&P!==void 0?P:u}drawCircle(u){u.moveTo(this.params.x,this.params.y),u.arc(this.params.x,this.params.y,this.params.radius,0,Hm)}drawImage(u){const{x:w,y:v,rotation:P,radius:N}=this.params,I=P*Math.PI/180,j=Math.cos(I),H=Math.sin(I);this.params.opacity!==1&&(u.save(),u.globalAlpha=this.params.opacity),u.setTransform(j,H,-H,j,w,v);const tt=this.getImageOffscreenCanvas(this.image,N);u.drawImage(tt,-(N/2),-(N/2),N,N),this.params.opacity!==1&&u.restore()}}xA.offscreenCanvases=new WeakMap;const Rm={pointerEvents:"none",backgroundColor:"transparent",position:"absolute",top:0,left:0,width:"100%",height:"100%"},Km=1e3/60;var Of=function(y,u,w,v){if(w==="a"&&!v)throw new TypeError("Private accessor was defined without a getter");if(typeof u=="function"?y!==u||!v:!u.has(y))throw new TypeError("Cannot read private member from an object whose class did not declare it");return w==="m"?v:w==="a"?v.call(y):v?v.value:u.get(y)},Ul=function(y,u,w,v,P){if(v==="m")throw new TypeError("Private method is not writable");if(v==="a"&&!P)throw new TypeError("Private accessor was defined without a setter");if(typeof u=="function"?y!==u||!P:!u.has(y))throw new TypeError("Cannot write private member to an object whose class did not declare it");return v==="a"?P.call(y,w):P?P.value=w:u.set(y,w),w},la,ha;class Vm{get ctx(){return Of(this,la,"f")}get canvas(){return Of(this,ha,"f")}set canvas(u){Ul(this,ha,u,"f"),Ul(this,la,u.getContext("2d"),"f")}constructor(u,w){this.lastUpdate=Date.now(),this.snowflakes=[],la.set(this,void 0),ha.set(this,void 0),Ul(this,ha,u,"f"),Ul(this,la,u.getContext("2d"),"f"),this.config={snowflakeCount:150,...Ar,...w},this.snowflakes=[],this.snowflakes=xA.createSnowflakes(u,w.snowflakeCount||150,w),this.play()}updateConfig(u){this.config={...this.config,...u};const w=this.config.snowflakeCount-this.snowflakes.length;w>0&&(this.snowflakes=[...this.snowflakes,...xA.createSnowflakes(this.canvas,w,u)]),w<0&&(this.snowflakes=this.snowflakes.slice(0,this.config.snowflakeCount));for(const v of this.snowflakes)v.updateConfig(this.config)}render(u=1){const{ctx:w,canvas:v,snowflakes:P}=this;if(!w||!v)return;const{offsetWidth:N,offsetHeight:I}=v;for(const j of P)j.update(N,I,u);if(w.setTransform(1,0,0,1,0,0),w.clearRect(0,0,N,I),this.config.images&&this.config.images.length>0){for(const j of P)j.drawImage(w);return}w.beginPath();for(const j of P)j.drawCircle(w);w.fillStyle=this.config.color,w.fill()}loop(){const u=Date.now(),w=Date.now()-this.lastUpdate;this.lastUpdate=u;const v=w/Km;this.render(v),this.animationFrame=requestAnimationFrame(()=>this.loop())}play(){this.loop()}pause(){this.animationFrame&&(cancelAnimationFrame(this.animationFrame),this.animationFrame=void 0)}}la=new WeakMap,ha=new WeakMap;const Gm=y=>{const[u,w]=vi.useState(If(y.current)),v=vi.useCallback(()=>{y.current&&w(If(y.current))},[y]);return vi.useEffect(()=>{const{ResizeObserver:P}=window;if(y.current)if(v(),typeof P=="function"){const N=new P(v);return N.observe(y.current),()=>N.disconnect()}else return window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[y,v]),u},Xm=y=>vi.useMemo(()=>({...Rm,...y||{}}),[y]);function zm(y,u){const w=vi.useRef(u);return lc(u,w.current)||(w.current=u),vi.useEffect(y,w.current)}function Ym(y){const[u,w]=vi.useState(y);return zm(()=>w(y),[y]),u}const jm=({color:y=Ar.color,changeFrequency:u=Ar.changeFrequency,radius:w=Ar.radius,speed:v=Ar.speed,wind:P=Ar.wind,rotationSpeed:N=Ar.rotationSpeed,opacity:I=Ar.opacity,snowflakeCount:j=150,images:H,style:tt}={})=>{const X=Xm(tt),st=vi.useRef(null),lt=Gm(st),Lt=Ym({color:y,changeFrequency:u,radius:w,speed:v,wind:P,rotationSpeed:N,images:H,snowflakeCount:j,opacity:I}),vt=vi.useRef(Lt),bt=vi.useRef();return vi.useEffect(()=>(!bt.current&&st.current&&(bt.current=new Vm(st.current,vt.current)),()=>{var xt;(xt=bt.current)===null||xt===void 0||xt.pause(),bt.current=void 0}),[]),vi.useEffect(()=>{bt.current&&bt.current.updateConfig(Lt)},[Lt]),Pm.createElement("canvas",{ref:st,height:lt.height,width:lt.width,style:X,"data-testid":"SnowfallCanvas"})};function Wm(){return bn.jsx(jm,{color:"white",snowflakeCount:100,radius:[0,.5],speed:[0,.5],wind:[-2,.5]})}var hc=function(y,u){return hc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,v){w.__proto__=v}||function(w,v){for(var P in v)Object.prototype.hasOwnProperty.call(v,P)&&(w[P]=v[P])},hc(y,u)};function Tc(y,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");hc(y,u);function w(){this.constructor=y}y.prototype=u===null?Object.create(u):(w.prototype=u.prototype,new w)}(function(){const y=typeof globalThis=="object"&&globalThis||typeof global=="object"&&global.global===global&&global||typeof self=="object"&&self.self===self&&self||{};y.requestAnimationFrame===void 0&&(y.setImmediate===void 0?y.requestAnimationFrame=k=>y.setTimeout(k,0):y.requestAnimationFrame=y.setImmediate);const ci=class ci{static Ck(e,t,i){let n=-1;return function(){const s=this,r=arguments;n!==-1&&ci.vg(n),n=ci.fr(()=>{n=-1,i||e.apply(s,r)},t),i&&!n&&e.apply(s,r)}}static fr(e,t){return y.setTimeout(e,t)}static vg(e){y.clearTimeout(e)}static fs(e){return y.document.createElement(e)}static o(e){throw new Error(e)}static D(e,t){let i="The object is frozen, so its properties cannot be set: "+e.toString();t!==void 0&&(i+="  to value: "+t),ci.o(i)}static lE(e,t,i,n){}static s(e,t,i,n){}static hE(e,t,i){}static oc(e,t,i){(e===null||typeof e!="object")&&ci.nC(t)}static C(e,t,i){}static aE(e,t,i){}static te(e,t,i,n){}static it(e,t,i,n){let s=ci.nC(i);n!==void 0&&(s+="."+n),ci.o(s+" is not in the range "+t+": "+e)}static Ie(e){}static ur(e,t){}static ri(e){y.console&&y.console.log(e)}static j(e){return e!==null&&typeof e=="object"}static lt(e){return typeof e=="function"}static ht(){const e=ci.Lk.pop();return e===void 0?[]:e}static et(e){e.length=0,ci.Lk.push(e)}static nC(e){return e===null?"*":typeof e=="string"?e:ci.lt(e)?e.name:""}static Vn(e){return ci.lt(e)?e.className?e.className:e.name:ci.j(e)&&e.constructor?ci.Vn(e.constructor):typeof e}static Yh(e,t){return t==null||t===""?null:ci.j(e)&&t in e||e[t]?e[t]:null}static toString(e){let t=e;return ci.j(e)&&(e.text?t=e.text:e.name?t=e.name:e.key!==void 0?t=e.key:e.id!==void 0?t=e.id:e.constructor===Object&&(e.Text?t=e.Text:e.Name?t=e.Name:e.Key!==void 0?t=e.Key:e.Id!==void 0?t=e.Id:e.ID!==void 0&&(t=e.ID))),t===void 0?"undefined":t===null?"null":t.toString()}static cw(e,t){if(e.hasOwnProperty(t))return!0;let i=Object.getPrototypeOf(e);for(;i&&i!==Function;){if(i.hasOwnProperty(t))return!0;const n=i.fE;if(n&&n[t])return!0;i=Object.getPrototypeOf(i)}return!1}static XD(e){const t=[];let i=0;for(i=0;i<256;i++)t[i]=i;let n=0,s=0;for(i=0;i<256;i++)n=(n+t[i]+119)%256,s=t[i],t[i]=t[n],t[n]=s;i=0,n=0;let r="";for(let A=0;A<e.length;A++)i=(i+1)%256,n=(n+t[i])%256,s=t[i],t[i]=t[n],t[n]=s,r+=String.fromCharCode(e.charCodeAt(A)^t[(t[i]+t[n])%256]);return r}static YD(e){const t="0123456789abcdef",i=[];for(let A=0;A<256;A++)i[t.charAt(A>>4)+t.charAt(A&15)]=String.fromCharCode(A);e.length%2&&(e="0"+e);const n=[];let s=0;for(let A=0;A<e.length;A+=2)n[s++]=i[e.substring(A,A+2)];const r=n.join("");return r===""?"0":r}static Ds(e){return ci.XD(ci.YD(e))}};p(ci,"cr",y.navigator!==void 0&&y.navigator.platform!==void 0&&y.navigator.platform.match(/(iPhone|iPod|iPad|Mac)/i)!==null),p(ci,"Lk",[]),p(ci,"cE",Object.freeze([])),p(ci,"color1","@COLOR1"),p(ci,"color2","@COLOR2"),p(ci,"fw","32ab5ff3b26f42dc0ed90f21402913b5");let u=ci;u.vfo="29e646fdb26e";class w{constructor(){p(this,"Ak");this.Ak=[]}toString(){return this.Ak.join("")}add(e){e!==""&&this.Ak.push(e)}}class v{}const YA=class YA{constructor(){p(this,"p");p(this,"key");p(this,"value");this.p=[]}[Symbol.iterator](){return this.p.values()}get iterator(){return this}reset(){}next(){return!1}hasNext(){return!1}first(){return null}any(){return!1}all(){return!0}each(){return this}map(e){return this}filter(){return this}get count(){return 0}bl(){}toString(){return"EmptyIterator"}};p(YA,"instance",new YA);let P=YA;class N{constructor(e){p(this,"key");p(this,"value");this.key=-1,this.value=e}[Symbol.iterator](){return[this.value].values()}get iterator(){return this}reset(){this.key=-1}next(){return this.key===-1?(this.key=0,!0):!1}hasNext(){return this.next()}first(){return this.key=0,this.value}any(e){return this.key=-1,e(this.value)}all(e){return this.key=-1,e(this.value)}each(e){return this.key=-1,e(this.value),this}map(e){return new N(e(this.value))}filter(e){return e(this.value)?new N(this.value):P.instance}get count(){return 1}bl(){this.value=null}toString(){return"SingletonIterator("+this.value+")"}}class I{constructor(e){p(this,"$t");p(this,"Fs");p(this,"jt");p(this,"vt");p(this,"key");p(this,"value");this.$t=e,this.Fs=null,e.dr=null,this.jt=e.ct,this.vt=-1}[Symbol.iterator](){return this.Fs===null?this.$t.r.values():this.$t.r.filter(this.Fs).values()}get iterator(){return this}get predicate(){return this.Fs}set predicate(e){this.Fs=e}reset(){const e=this.$t;e.dr=null,this.jt=e.ct,this.vt=-1}next(){const e=this.$t;if(e.ct!==this.jt&&this.key<0)return!1;const t=e.r,i=t.length;let n=++this.vt;const s=this.Fs;if(s!==null)for(;n<i;){const r=t[n];if(s(r))return this.vt=n,this.key=n,this.value=r,!0;n++}else{if(n<i)return this.key=n,this.value=t[n],!0;this.bl()}return!1}hasNext(){return this.next()}first(){const e=this.$t;this.jt=e.ct,this.vt=0;const t=e.r,i=t.length,n=this.Fs;if(n!==null){let s=0;for(;s<i;){const r=t[s];if(n(r))return this.vt=s,this.key=s,this.value=r,r;s++}return null}else if(i>0){const s=t[0];return this.key=0,this.value=s,s}else return null}any(e){const t=this.$t;t.dr=null;const i=t.ct;this.vt=-1;const n=t.r,s=n.length,r=this.Fs;for(let A=0;A<s;A++){const o=n[A];if(!(r!==null&&!r(o))){if(e(o))return!0;t.ct!==i&&u.Ie(t)}}return!1}all(e){const t=this.$t;t.dr=null;const i=t.ct;this.vt=-1;const n=t.r,s=n.length,r=this.Fs;for(let A=0;A<s;A++){const o=n[A];if(!(r!==null&&!r(o))){if(!e(o))return!1;t.ct!==i&&u.Ie(t)}}return!0}each(e){const t=this.$t;t.dr=null;const i=t.ct;this.vt=-1;const n=t.r,s=n.length,r=this.Fs;for(let A=0;A<s;A++){const o=n[A];r!==null&&!r(o)||(e(o),t.ct!==i&&u.Ie(t))}return this}map(e){const t=this.$t;t.dr=null;const i=t.ct;this.vt=-1;const n=[],s=t.r,r=s.length,A=this.Fs;for(let a=0;a<r;a++){const h=s[a];A!==null&&!A(h)||(n.push(e(h)),t.ct!==i&&u.Ie(t))}const o=new H;return o.r=n,o.Ee(),o.iterator}filter(e){const t=this.$t;t.dr=null;const i=t.ct;this.vt=-1;const n=[],s=t.r,r=s.length,A=this.Fs;for(let a=0;a<r;a++){const h=s[a];A!==null&&!A(h)||(e(h)&&n.push(h),t.ct!==i&&u.Ie(t))}const o=new H;return o.r=n,o.Ee(),o.iterator}get count(){const e=this.Fs;if(e!==null){let t=0;const i=this.$t.r,n=i.length;for(let s=0;s<n;s++)e(i[s])&&t++;return t}else return this.$t.r.length}bl(){this.key=-1,this.value=null,this.jt=-1,this.Fs=null,this.$t.dr=this}toString(){return"ListIterator@"+this.vt+"/"+this.$t.count}}class j{constructor(e){p(this,"$t");p(this,"jt");p(this,"vt");p(this,"key");p(this,"value");this.$t=e,e.gr=null,this.jt=e.ct,this.vt=e.r.length}[Symbol.iterator](){return this.$t.r.reverse().values()}get iterator(){return this}reset(){const e=this.$t;e.gr=null,this.jt=e.ct,this.vt=e.r.length}next(){const e=this.$t;if(e.ct!==this.jt&&this.key<0)return!1;const t=--this.vt;return t>=0?(this.key=t,this.value=e.r[t],!0):(this.bl(),!1)}hasNext(){return this.next()}first(){const e=this.$t;this.jt=e.ct;const t=e.r,i=t.length-1;if(this.vt=i,i>=0){const n=t[i];return this.key=i,this.value=n,n}else return null}any(e){const t=this.$t;t.gr=null;const i=t.ct,n=t.r,s=n.length;this.vt=s;for(let r=s-1;r>=0;r--){const A=n[r];if(e(A))return!0;t.ct!==i&&u.Ie(t)}return!1}all(e){const t=this.$t;t.gr=null;const i=t.ct,n=t.r,s=n.length;this.vt=s;for(let r=s-1;r>=0;r--){const A=n[r];if(!e(A))return!1;t.ct!==i&&u.Ie(t)}return!0}each(e){const t=this.$t;t.gr=null;const i=t.ct,n=t.r,s=n.length;this.vt=s;for(let r=s-1;r>=0;r--){const A=n[r];e(A),t.ct!==i&&u.Ie(t)}return this}map(e){const t=this.$t;t.gr=null;const i=t.ct,n=[],s=t.r,r=s.length;this.vt=r;for(let o=r-1;o>=0;o--){const a=s[o];n.push(e(a)),t.ct!==i&&u.Ie(t)}const A=new H;return A.r=n,A.Ee(),A.iterator}filter(e){const t=this.$t;t.gr=null;const i=t.ct,n=[],s=t.r,r=s.length;this.vt=r;for(let o=r-1;o>=0;o--){const a=s[o];e(a)&&n.push(a),t.ct!==i&&u.Ie(t)}const A=new H;return A.r=n,A.Ee(),A.iterator}get count(){return this.$t.r.length}bl(){this.key=-1,this.value=null,this.jt=-1,this.$t.gr=this}toString(){return"ListIteratorBackwards("+this.vt+"/"+this.$t.count+")"}}class H{constructor(e){p(this,"h");p(this,"r");p(this,"ct");p(this,"dr");p(this,"gr");X.qi(this),this.h=!1,this.r=[],this.ct=0,this.dr=null,this.gr=null,e!==void 0&&this.addAll(e)}[Symbol.iterator](){return this.r.values()}Ee(){let e=this.ct;e++,e>999999999&&(e=0),this.ct=e}g(){return this.h=!0,this}Tt(){return this.h=!1,this}toString(){return"List()#"+X.us(this)}add(e){return this.h&&u.D(this,e),this.r.push(e),this.Ee(),this}push(e){this.add(e)}addAll(e){if(e===null)return this;this.h&&u.D(this);const t=this.r;if(Array.isArray(e)){const i=e.length;for(let n=0;n<i;n++){const s=e[n];t.push(s)}}else{const i=e.iterator;for(;i.next();){const n=i.value;t.push(n)}}return this.Ee(),this}clear(){this.h&&u.D(this),this.r.length=0,this.Ee()}contains(e){return this.has(e)}has(e){return e===null?!1:this.r.indexOf(e)!==-1}indexOf(e){return e===null?-1:this.r.indexOf(e)}elt(e){const t=this.r;return(e<0||e>=t.length)&&u.it(e,"0 <= i < length",H,"elt:i"),t[e]}get(e){return this.elt(e)}setElt(e,t){const i=this.r;(e<0||e>=i.length)&&u.it(e,"0 <= i < length",H,"setElt:i"),this.h&&u.D(this,e),i[e]=t}set(e,t){this.setElt(e,t)}first(){const e=this.r;return e.length===0?null:e[0]}last(){const e=this.r,t=e.length;return t>0?e[t-1]:null}pop(){this.h&&u.D(this);const e=this.r;return e.length>0?e.pop():null}any(e){const t=this.r,i=this.ct,n=t.length;for(let s=0;s<n;s++){if(e(t[s]))return!0;this.ct!==i&&u.Ie(this)}return!1}all(e){const t=this.r,i=this.ct,n=t.length;for(let s=0;s<n;s++){if(!e(t[s]))return!1;this.ct!==i&&u.Ie(this)}return!0}each(e){const t=this.r,i=this.ct,n=t.length;for(let s=0;s<n;s++)e(t[s]),this.ct!==i&&u.Ie(this);return this}map(e){const t=new H,i=[],n=this.r,s=this.ct,r=n.length;for(let A=0;A<r;A++)i.push(e(n[A])),this.ct!==s&&u.Ie(this);return t.r=i,t.Ee(),t}filter(e){const t=new H,i=[],n=this.r,s=this.ct,r=n.length;for(let A=0;A<r;A++){const o=n[A];e(o)&&i.push(o),this.ct!==s&&u.Ie(this)}return t.r=i,t.Ee(),t}insertAt(e,t){e<0&&u.it(e,">= 0",H,"insertAt:i"),this.h&&u.D(this,e);const i=this.r;e>=i.length?i.push(t):i.splice(e,0,t),this.Ee()}remove(e){return this.delete(e)}delete(e){if(e===null)return!1;this.h&&u.D(this,e);const t=this.r,i=t.indexOf(e);return i===-1?!1:(i===t.length-1?t.pop():t.splice(i,1),this.Ee(),!0)}removeAt(e){const t=this.r;(e<0||e>=t.length)&&u.it(e,"0 <= i < length",H,"removeAt:i"),this.h&&u.D(this,e),e===t.length-1?t.pop():t.splice(e,1),this.Ee()}removeRange(e,t){const i=this.r,n=i.length;if(e<0)e=0;else if(e>=n)return this;if(t<0)return this;if(t>=n&&(t=n-1),e>t)return this;this.h&&u.D(this);let s=e,r=t+1;for(;r<n;)i[s++]=i[r++];return i.length=n-(t-e+1),this.Ee(),this}copy(){const e=new H,t=this.r;return t.length>0&&(e.r=Array.prototype.slice.call(t)),e}toArray(){const e=this.r,t=this.count,i=new Array(t);for(let n=0;n<t;n++)i[n]=e[n];return i}get oC(){return this.r}toSet(){const e=new X,t=this.r,i=this.count;for(let n=0;n<i;n++)e.add(t[n]);return e}sort(e){return this.h&&u.D(this),this.r.sort(e),this.Ee(),this}sortRange(e,t,i){const n=this.r,s=n.length;t===void 0&&(t=0),i===void 0&&(i=s),this.h&&u.D(this);const r=i-t;if(r<=1)return this;if((t<0||t>=s-1)&&u.it(t,"0 <= from < length",H,"sortRange:from"),r===2){const A=n[t],o=n[t+1];return e(A,o)>0&&(n[t]=o,n[t+1]=A,this.Ee()),this}if(t===0)if(i>=s)n.sort(e);else{const A=n.slice(0,i);A.sort(e);for(let o=0;o<i;o++)n[o]=A[o]}else if(i>=s){const A=n.slice(t);A.sort(e);for(let o=t;o<s;o++)n[o]=A[o-t]}else{const A=n.slice(t,i);A.sort(e);for(let o=t;o<i;o++)n[o]=A[o-t]}return this.Ee(),this}reverse(){return this.h&&u.D(this),this.r.reverse(),this.Ee(),this}get count(){return this.r.length}get size(){return this.r.length}get length(){return this.r.length}get iterator(){if(this.r.length<=0)return P.instance;const e=this.dr;return e!==null?(e.reset(),e):new I(this)}get iteratorBackwards(){if(this.r.length<=0)return P.instance;const e=this.gr;return e!==null?(e.reset(),e):new j(this)}}class tt{constructor(e){p(this,"Co");p(this,"si");p(this,"key");p(this,"value");this.Co=e,this.si=e.p.values()}[Symbol.iterator](){return this.Co.p.values()}get iterator(){return this}reset(){const e=this.Co;this.si=e.p.values()}next(){const e=this.si.next();return this.value=e.value,this.key=e.value,!e.done}hasNext(){return this.next()}first(){return this.Co.p.size===0?null:(this.si=this.Co.p.values(),this.si.next().value)}any(e){return this.Co.any(e)}all(e){return this.Co.all(e)}each(e){return this.Co.each(e),this}map(e){const t=new H;return this.Co.p.forEach(i=>t.add(e(i))),t.iterator}filter(e){const t=new H;return this.Co.p.forEach(i=>{e(i)&&t.add(i)}),t.iterator}get count(){return this.Co.count}bl(){this.key=null,this.value=null,this.si=null}toString(){return"SetIterator"}}const ws=class ws{constructor(e){p(this,"h");p(this,"p");this.h=!1,this.p=new Set,e!==void 0&&this.addAll(e)}[Symbol.iterator](){return this.p.values()}values(){return this.p.values()}g(){return this.h=!0,this}Tt(){return this.h=!1,this}toString(){return"Set()#"+ws.us(this)}add(e){return e===null?this:(this.p.add(e),this)}addAll(e){if(e===null)return this;if(Array.isArray(e)){const t=e.length;for(let i=0;i<t;i++){const n=e[i];n!==null&&this.p.add(n)}}else{const t=e.iterator;for(;t.next();){const i=t.value;i!==null&&this.p.add(i)}}return this}has(e){return this.p.has(e)}contains(e){return this.has(e)}containsAll(e){if(e===null)return!0;const t=e.iterator;for(;t.next();)if(!this.has(t.value))return!1;return!0}containsAny(e){if(e===null)return!0;const t=e.iterator;for(;t.next();)if(this.has(t.value))return!0;return!1}first(){return this.p.size===0?null:this.p.values().next().value}any(e){for(const t of this.p)if(e(t))return!0;return!1}all(e){for(const t of this.p)if(!e(t))return!1;return!0}each(e){for(const t of this.p)e(t);return this}map(e){const t=new ws;for(const i of this.p)t.add(e(i));return t}filter(e){const t=new ws;for(const i of this.p)e(i)&&t.add(i);return t}delete(e){return this.h&&u.D(this),this.p.delete(e)}remove(e){return this.delete(e)}removeAll(e){if(e===null)return this;if(this.h&&u.D(this),Array.isArray(e)){const t=e.length;for(let i=0;i<t;i++)this.delete(e[i])}else{const t=e.iterator;for(;t.next();)this.delete(t.value)}return this}retainAll(e){if(e===null)return this;if(this.count===0)return this;this.h&&u.D(this);const t=new ws;t.addAll(e);const i=[],n=this.iterator;for(;n.next();){const s=n.value;t.has(s)||i.push(s)}return this.removeAll(i),this}clear(){this.h&&u.D(this),this.p.clear()}copy(){const e=new ws;return this.p.forEach(t=>e.add(t)),e}toArray(){return Array.from(this.p)}toList(){const e=new H;return this.p.forEach(t=>e.add(t)),e}get count(){return this.p.size}get size(){return this.p.size}get iterator(){return this.p.size<=0?P.instance:new tt(this)}entries(){return this.p.entries()}keys(){return this.p.keys()}forEach(e,t){return this.p.forEach(e,t)}static qi(e){e.__gohashid=ws.uw++}static us(e){return e.__gohashid}};p(ws,"uw",1);let X=ws;class st{constructor(e){p(this,"tt");p(this,"si");p(this,"key");p(this,"value");this.tt=e,this.si=e.p.keys()}[Symbol.iterator](){return this.tt.p.keys()}get iterator(){return this}reset(){const e=this.tt;this.si=e.p.keys()}next(){const e=this.si.next();return this.value=e.value,this.key=e.value,!e.done}hasNext(){return this.next()}first(){return this.tt.p.size===0?null:(this.si=this.tt.p.keys(),this.si.next().value)}any(e){for(const t of this.tt.p)if(e(t[0]))return!0;return!1}all(e){for(const t of this.tt.p)if(!e(t[0]))return!1;return!0}each(e){for(const t of this.tt.p)e(t[0]);return this}map(e){const t=this.tt,i=new H;for(const n of t.p)i.add(e(n[0]));return i.iterator}filter(e){const t=this.tt,i=new H;for(const n of t.p){const s=n[0];e(s)&&i.add(s)}return i.iterator}get count(){return this.tt.size}bl(){this.key=null,this.value=null,this.si=null}toString(){return"MapKeySetIterator"}}class lt extends X{constructor(t){super();p(this,"tt");X.qi(this),this.h=!0,this.tt=t}[Symbol.iterator](){return this.p.keys()}values(){return this.p.keys()}g(){return this}Tt(){return this}toString(){return"MapKeySet("+this.tt.toString()+")"}add(t){u.o("This Set is read-only: "+this.toString())}has(t){return this.tt.has(t)}contains(t){return this.has(t)}delete(t){u.o("This Set is read-only: "+this.toString())}remove(t){return this.delete(t)}clear(){u.o("This Set is read-only: "+this.toString())}first(){return this.tt.p.size===0?null:this.tt.p.keys().next().value}any(t){for(const i of this.tt.p)if(t(i[0]))return!0;return!1}all(t){for(const i of this.tt.p)if(!t(i[0]))return!1;return!0}each(t){for(const i of this.tt.p)t(i[0]);return this}map(t){const i=new X;for(const n of this.tt.p)i.add(t(n[0]));return i}filter(t){const i=new X;for(const n of this.tt.p){const s=n[0];t(s)&&i.add(s)}return i}copy(){return new lt(this.tt)}toSet(){const t=new X,i=this.tt.p;for(const n of i)t.add(n[0]);return t}toArray(){const t=this.tt.p,i=new Array(t.size);let n=0;for(const s of t)i[n]=s[0],n++;return i}toList(){const t=new H,i=this.tt.p;for(const n of i)t.add(n[0]);return t}get count(){return this.tt.size}get size(){return this.tt.size}get iterator(){return this.tt.size<=0?P.instance:new st(this.tt)}}class Lt{constructor(e){p(this,"tt");p(this,"si");p(this,"key");p(this,"value");this.tt=e,this.si=e.p.values()}[Symbol.iterator](){return this.tt.p.values()}get iterator(){return this}reset(){const e=this.tt;this.si=e.p.values()}next(){const e=this.si.next();return this.value=e.value,this.key=e.value,!e.done}hasNext(){return this.next()}first(){return this.tt.p.size===0?null:(this.si=this.tt.p.values(),this.si.next().value)}any(e){for(const t of this.tt.p)if(e(t[1]))return!0;return!1}all(e){for(const t of this.tt.p)if(!e(t[1]))return!1;return!0}each(e){for(const t of this.tt.p)e(t[1]);return this}map(e){const t=this.tt,i=new H;for(const n of t.p)i.add(e(n[1]));return i.iterator}filter(e){const t=this.tt,i=new H;for(const n of t.p){const s=n[1];e(s)&&i.add(s)}return i.iterator}get count(){return this.tt.size}bl(){this.key=null,this.value=null,this.si=null}toString(){return"MapValueSetIterator"}}class vt{constructor(e,t){p(this,"key");p(this,"value");this.key=e,this.value=t}toString(){return"{"+this.key+":"+this.value+"}"}}class bt{constructor(e){p(this,"tt");p(this,"si");p(this,"key");p(this,"value");this.tt=e,this.si=e.p.entries()}[Symbol.iterator](){return this.tt.p.entries()}get iterator(){return this}reset(){const e=this.tt;this.si=e.p.entries()}next(){const e=this.si.next();return e.done?(this.key=null,this.value=null,!1):(this.key=e.value[0],this.value=e.value[1],!0)}hasNext(){return this.next()}first(){if(this.tt.p.size===0)return null;this.si=this.tt.p.entries();const e=this.si.next().value;return this.key=e[0],this.value=e[1],new vt(e[0],e[1])}any(e){return this.tt.any(e)}all(e){return this.tt.all(e)}each(e){return this.tt.each(e),this}map(e){const t=new H;let i=null;return this.tt.p.forEach((n,s)=>{i===null?i=new vt(s,n):(i.key=s,i.value=n),t.add(e(i))}),t.iterator}filter(e){const t=new H;let i=null;return this.tt.p.forEach((n,s)=>{i===null?i=new vt(s,n):(i.key=s,i.value=n),e(i)&&(t.add(i),i=null)}),t.iterator}get count(){return this.tt.size}bl(){this.key=null,this.value=null,this.si=null}toString(){return"MapIterator"}}class xt{constructor(e){p(this,"h");p(this,"p");X.qi(this),this.h=!1,this.p=new Map,e!==void 0&&this.addAll(e)}[Symbol.iterator](){return this.p.entries()}entries(){return this.p.entries()}g(){return this.h=!0,this}Tt(){return this.h=!1,this}toString(){return"Map()#"+X.us(this)}set(e,t){return this.h&&u.D(this,e),this.p.set(e,t),this}add(e,t){return this.set(e,t)}addAll(e){if(e===null)return this;if(this.h&&u.D(this),Array.isArray(e)){const t=e.length;for(let i=0;i<t;i++){const n=e[i];this.set(n.key,n.value)}}else if(e instanceof xt){const t=e.iterator;for(;t.next();)this.set(t.key,t.value)}else{const t=e.iterator;for(;t.next();){const i=t.value;this.set(i.key,i.value)}}return this}first(){if(this.p.size===0)return null;const e=this.p.entries().next().value;return new vt(e[0],e[1])}any(e){let t=null;for(const[i,n]of this.p)if(t===null?t=new vt(i,n):(t.key=i,t.value=n),e(t))return!0;return!1}all(e){let t=null;for(const[i,n]of this.p)if(t===null?t=new vt(i,n):(t.key=i,t.value=n),!e(t))return!1;return!0}each(e){let t=null;for(const[i,n]of this.p)t===null?t=new vt(i,n):(t.key=i,t.value=n),e(t);return this}map(e){const t=new xt;let i=null;for(const[n,s]of this.p)i===null?i=new vt(n,s):(i.key=n,i.value=s),t.set(n,e(i));return t}filter(e){const t=new xt;let i=null;for(const[n,s]of this.p)i===null?i=new vt(n,s):(i.key=n,i.value=s),e(i)&&t.set(n,s);return t}has(e){return this.p.has(e)}contains(e){return this.has(e)}get(e){const t=this.p.get(e);return t===void 0?null:t}getValue(e){return this.get(e)}delete(e){return e===null?!1:(this.h&&u.D(this,e),this.p.delete(e))}remove(e){return this.delete(e)}clear(){this.h&&u.D(this),this.p.clear()}copy(){const e=new xt;return e.p=new Map(this.p),e}toArray(){const e=this.p,t=new Array(e.size);let i=0;for(const n of e)t[i]=new vt(n[0],n[1]),i++;return t}toKeySet(){return new lt(this)}get count(){return this.p.size}get size(){return this.p.size}get iterator(){return this.p.size<=0?P.instance:new bt(this)}get iteratorKeys(){return this.count<=0?P.instance:new st(this)}keys(){return this.p.keys()}get iteratorValues(){return this.count<=0?P.instance:new Lt(this)}values(){return this.p.values()}forEach(e,t){return this.p.forEach(e,t)}}const di=class di{constructor(e,t){p(this,"w");p(this,"b");p(this,"h");e===void 0?(this.w=0,this.b=0):typeof e=="number"&&typeof t=="number"?(this.w=e,this.b=t):u.o("Invalid arguments to Point constructor: "+e+", "+t),this.h=!1}a(e){return this.w=e.w,this.b=e.b,this}i(e,t){return this.w=e,this.b=t,this}setTo(e,t){return this.w=e,this.b=t,this}set(e){return this.w=e.w,this.b=e.b,this}copy(){const e=new di;return e.w=this.w,e.b=this.b,e}st(){return this.h=!0,Object.freeze(this),this}N(){return this.h||Object.isFrozen(this)?this:this.copy().g()}g(){return this.h||(this.h=!0),this}Tt(){return this.h&&(Object.isFrozen(this)&&u.o("cannot thaw constant: "+this),this.h=!1),this}dw(e){}static parse(e){if(typeof e=="string"){const t=e.split(" ");let i=0,n=0;for(;t[i]==="";)i++;let s=t[i++];s&&(n=parseFloat(s));let r=0;for(;t[i]==="";)i++;return s=t[i++],s&&(r=parseFloat(s)),new di(n,r)}else return new di}static stringify(e){return e.x.toString()+" "+e.y.toString()}static stringifyFixed(e){return t=>t.x.toFixed(e)+" "+t.y.toFixed(e)}toString(){return"Point("+this.x+","+this.y+")"}equals(e){return e instanceof di?this.w===e.x&&this.b===e.y:!1}equalTo(e,t){return this.w===e&&this.b===t}equalsApprox(e){return V.u(this.w,e.x)&&V.u(this.b,e.y)}add(e){return this.w+=e.x,this.b+=e.y,this}subtract(e){return this.w-=e.x,this.b-=e.y,this}offset(e,t){return this.w+=e,this.b+=t,this}rotate(e){if(e===0)return this;const t=this.w,i=this.b;if(t===0&&i===0)return this;let n=0,s=0;if(e>=360?e-=360:e<0&&(e+=360),e===90)n=0,s=1;else if(e===180)n=-1,s=0;else if(e===270)n=0,s=-1;else{const r=e*Math.PI/180;n=Math.cos(r),s=Math.sin(r)}return this.w=n*t-s*i,this.b=s*t+n*i,this}scale(e,t){return this.w*=e,this.b*=t,this}distanceSquaredPoint(e){const t=e.x-this.w,i=e.y-this.b;return t*t+i*i}distanceSquared(e,t){const i=e-this.w,n=t-this.b;return i*i+n*n}normalize(){const e=this.w,t=this.b,i=Math.sqrt(e*e+t*t);return i>0&&(this.w=e/i,this.b=t/i),this}directionPoint(e){return this.rC(e.x-this.w,e.y-this.b)}direction(e,t){return this.rC(e-this.w,t-this.b)}rC(e,t){if(e===0)return t>0?90:t<0?270:0;if(t===0)return e>0?0:180;{if(isNaN(e)||isNaN(t))return 0;let i=Math.atan(Math.abs(t/e))*180/Math.PI;return e<0?t<0?i+=180:i=180-i:t<0&&(i=360-i),i}}static compareWithLineSegment(e,t,i,n,s,r){return V.ru(e,t,i,n,s,r)}compareWithLineSegmentPoint(e,t){return V.ru(e.x,e.y,t.x,t.y,this.x,this.y)}static intersectingLineSegments(e,t,i,n,s,r,A,o){return V.lu(e,t,i,n,s,r,A,o)}projectOntoLineSegment(e,t,i,n){return V.kl(e,t,i,n,this.w,this.b,this),this}projectOntoLineSegmentPoint(e,t){return V.kl(e.x,e.y,t.x,t.y,this.w,this.b,this),this}snapToGrid(e,t,i,n){return V.Og(this.w,this.b,e,t,i,n,this),this}snapToGridPoint(e,t){return V.Og(this.w,this.b,e.x,e.y,t.width,t.height,this),this}setRectSpot(e,t){return this.w=e.x+t.x*e.width+t.offsetX,this.b=e.y+t.y*e.height+t.offsetY,this}setSpot(e,t,i,n,s){return this.w=e+s.x*i+s.offsetX,this.b=t+s.y*n+s.offsetY,this}F(e){return e.bt(this),this}Be(e){return e._e(this),this}static distanceLineSegmentSquared(e,t,i,n,s,r){let A=s-i,o=r-n;const a=A*A+o*o,h=i-e,d=n-t,f=-h*A-d*o;if(f<=0||f>=a)return A=s-e,o=r-t,Math.min(h*h+d*d,A*A+o*o);{const g=A*d-o*h;return g*g/a}}static distanceSquared(e,t,i,n){const s=i-e,r=n-t;return s*s+r*r}static direction(e,t,i,n){const s=i-e,r=n-t;if(s===0)return r>0?90:r<0?270:0;if(r===0)return s>0?0:180;{if(isNaN(s)||isNaN(r))return 0;let A=Math.atan(Math.abs(r/s))*180/Math.PI;return s<0?r<0?A+=180:A=180-A:r<0&&(A=360-A),A}}get x(){return this.w}set x(e){this.w=e}get y(){return this.b}set y(e){this.b=e}isReal(){return isFinite(this.x)&&isFinite(this.y)}static l(){const e=di.Dk.pop();return e===void 0?new di:e}static Y(e,t){const i=di.Dk.pop();return i===void 0?new di(e,t):(i.x=e,i.y=t,i)}static e(e){di.Dk.push(e)}};p(di,"Lo",new di(0,0).st()),p(di,"lC",new di(-1/0,-1/0).st()),p(di,"hC",new di(1/0,1/0).st()),p(di,"aC",new di(6,6).st()),p(di,"Tk",new di(NaN,NaN).st()),p(di,"Dk",[]);let T=di;const qe=class qe{constructor(e,t){p(this,"q");p(this,"W");p(this,"h");e===void 0?(this.q=0,this.W=0):typeof e=="number"&&(e>=0||isNaN(e))&&typeof t=="number"&&(t>=0||isNaN(t))?(this.q=e,this.W=t):u.o("Invalid arguments to Size constructor: "+e+", "+t),this.h=!1}a(e){return this.q=e.q,this.W=e.W,this}i(e,t){return this.q=e,this.W=t,this}setTo(e,t){return this.q=e,this.W=t,this}set(e){return this.q=e.q,this.W=e.W,this}copy(){const e=new qe;return e.q=this.q,e.W=this.W,e}st(){return this.h=!0,Object.freeze(this),this}N(){return this.h||Object.isFrozen(this)?this:this.copy().g()}g(){return this.h||(this.h=!0),this}Tt(){return this.h&&(Object.isFrozen(this)&&u.o("cannot thaw constant: "+this),this.h=!1),this}dw(e){}static parse(e){if(typeof e=="string"){const t=e.split(" ");let i=0,n=0;for(;t[i]==="";)i++;let s=t[i++];s&&(n=parseFloat(s));let r=0;for(;t[i]==="";)i++;return s=t[i++],s&&(r=parseFloat(s)),new qe(n,r)}else return new qe}static stringify(e){return e.width.toString()+" "+e.height.toString()}static stringifyFixed(e){return t=>t.width.toFixed(e)+" "+t.height.toFixed(e)}toString(){return"Size("+this.width+","+this.height+")"}equals(e){return e instanceof qe?this.q===e.width&&this.W===e.height:!1}equalTo(e,t){return this.q===e&&this.W===t}equalsApprox(e){return V.u(this.q,e.width)&&V.u(this.W,e.height)}inflate(e,t){const i=this.width+e;this.q=i>=0?i:0;const n=this.height+t;return this.W=n>=0?n:0,this}get width(){return this.q}set width(e){e<0&&u.it(e,">= 0",qe,"width"),this.q=e}get height(){return this.W}set height(e){e<0&&u.it(e,">= 0",qe,"height"),this.W=e}isReal(){return isFinite(this.width)&&isFinite(this.height)}static l(){const e=qe.dC.pop();return e===void 0?new qe:e}static e(e){qe.dC.push(e)}};p(qe,"hu",new qe(0,0).st()),p(qe,"Fk",new qe(1,1).st()),p(qe,"cC",new qe(6,6).st()),p(qe,"au",new qe(8,8).st()),p(qe,"fC",new qe(10,10).st()),p(qe,"uC",new qe(1/0,1/0).st()),p(qe,"gw",new qe(NaN,NaN).st()),p(qe,"dC",[]);let ct=qe;const Ei=class Ei{constructor(e,t,i,n){p(this,"w");p(this,"b");p(this,"q");p(this,"W");p(this,"h");if(e===void 0)this.w=0,this.b=0,this.q=0,this.W=0;else if(typeof e=="number"&&typeof t=="number"&&typeof i=="number"&&(i>=0||isNaN(i))&&typeof n=="number"&&(n>=0||isNaN(n)))this.w=e,this.b=t,this.q=i,this.W=n;else if(e instanceof T){const s=e.x,r=e.y;if(t instanceof T){const A=t.x,o=t.y;this.w=Math.min(s,A),this.b=Math.min(r,o),this.q=Math.abs(s-A),this.W=Math.abs(r-o)}else t instanceof ct?(this.w=s,this.b=r,this.q=t.width,this.W=t.height):u.o("Incorrect second argument supplied to Rect constructor "+t)}else u.o("Invalid arguments to Rect constructor: "+e+", "+t+", "+i+", "+n);this.h=!1}a(e){return this.w=e.w,this.b=e.b,this.q=e.q,this.W=e.W,this}i(e,t,i,n){return this.w=e,this.b=t,this.q=i,this.W=n,this}zn(e,t){return this.q=e,this.W=t,this}setTo(e,t,i,n){return this.w=e,this.b=t,this.q=i,this.W=n,this}set(e){return this.w=e.w,this.b=e.b,this.q=e.q,this.W=e.W,this}setPoint(e){return this.w=e.x,this.b=e.y,this}setSize(e){return this.q=e.width,this.W=e.height,this}copy(){const e=new Ei;return e.w=this.w,e.b=this.b,e.q=this.q,e.W=this.W,e}st(){return this.h=!0,Object.freeze(this),this}N(){return this.h||Object.isFrozen(this)?this:this.copy().g()}g(){return this.h||(this.h=!0),this}Tt(){return this.h&&(Object.isFrozen(this)&&u.o("cannot thaw constant: "+this),this.h=!1),this}dw(e){}static parse(e){if(typeof e=="string"){const t=e.split(" ");let i=0,n=0;for(;t[i]==="";)i++;let s=t[i++];s&&(n=parseFloat(s));let r=0;for(;t[i]==="";)i++;s=t[i++],s&&(r=parseFloat(s));let A=0;for(;t[i]==="";)i++;s=t[i++],s&&(A=parseFloat(s));let o=0;for(;t[i]==="";)i++;return s=t[i++],s&&(o=parseFloat(s)),new Ei(n,r,A,o)}else return new Ei}static stringify(e){return e.x.toString()+" "+e.y.toString()+" "+e.width.toString()+" "+e.height.toString()}static stringifyFixed(e){return t=>t.x.toFixed(e)+" "+t.y.toFixed(e)+" "+t.width.toFixed(e)+" "+t.height.toFixed(e)}toString(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"}equals(e){return e instanceof Ei?this.w===e.x&&this.b===e.y&&this.q===e.width&&this.W===e.height:!1}equalTo(e,t,i,n){return this.w===e&&this.b===t&&this.q===i&&this.W===n}equalsApprox(e){return V.u(this.w,e.x)&&V.u(this.b,e.y)&&V.u(this.q,e.width)&&V.u(this.W,e.height)}equalsApproxTo(e,t,i,n){return V.u(this.w,e)&&V.u(this.b,t)&&V.u(this.q,i)&&V.u(this.W,n)}equalsApproxClose(e){return V.K(this.w,e.x)&&V.K(this.b,e.y)&&V.K(this.q,e.width)&&V.K(this.W,e.height)}containsPoint(e){return this.w<=e.x&&this.w+this.q>=e.x&&this.b<=e.y&&this.b+this.W>=e.y}containsRect(e){return this.w<=e.x&&e.x+e.width<=this.w+this.q&&this.b<=e.y&&e.y+e.height<=this.b+this.W}contains(e,t,i,n){return i===void 0&&(i=0),n===void 0&&(n=0),this.w<=e&&e+i<=this.w+this.q&&this.b<=t&&t+n<=this.b+this.W}offset(e,t){return this.w+=e,this.b+=t,this}inflate(e,t){return this.mw(t,e,t,e)}addMargin(e){return this.mw(e.top,e.right,e.bottom,e.left)}subtractMargin(e){return this.mw(-e.top,-e.right,-e.bottom,-e.left)}grow(e,t,i,n){return this.mw(e,t,i,n)}mw(e,t,i,n){const s=this.q;t+n<=-s?(this.w+=s/2,this.q=0):(this.w-=n,this.q+=t+n);const r=this.W;return e+i<=-r?(this.b+=r/2,this.W=0):(this.b-=e,this.W+=e+i),this}intersectRect(e){return this.gC(e.x,e.y,e.width,e.height)}intersect(e,t,i,n){return this.gC(e,t,i,n)}gC(e,t,i,n){const s=Math.max(this.w,e),r=Math.max(this.b,t),A=Math.min(this.w+this.q,e+i),o=Math.min(this.b+this.W,t+n);return this.w=s,this.b=r,this.q=Math.max(0,A-s),this.W=Math.max(0,o-r),this}intersectsRect(e){return this.intersects(e.x,e.y,e.width,e.height)}intersects(e,t,i,n){let s=this.q;const r=this.w;if(s!==1/0&&i!==1/0&&(s+=r,i+=e,isNaN(i)||isNaN(s)||r>i||e>s))return!1;let A=this.W;const o=this.b;return!(A!==1/0&&n!==1/0&&(A+=o,n+=t,isNaN(n)||isNaN(A)||o>n||t>A))}intersectsRectPlus(e,t){let i=this.q,n=e.width+t+t;const s=this.w,r=e.x-t;if(i+=s,n+=r,s>n||r>i)return!1;let A=this.W,o=e.height+t+t;const a=this.b,h=e.y-t;return A+=a,o+=h,!(a>o||h>A)}unionPoint(e){return this.unionNoCheck(e.x,e.y,0,0)}unionRect(e){return this.unionNoCheck(e.w,e.b,e.q,e.W)}union(e,t,i,n){return i===void 0&&(i=0),n===void 0&&(n=0),this.unionNoCheck(e,t,i,n)}unionNoCheck(e,t,i,n){const s=Math.min(this.w,e),r=Math.min(this.b,t),A=Math.max(this.w+this.q,e+i),o=Math.max(this.b+this.W,t+n);return this.w=s,this.b=r,this.q=A-s,this.W=o-r,this}setSpot(e,t,i){return this.w=e-i.offsetX-i.x*this.q,this.b=t-i.offsetY-i.y*this.W,this}static contains(e,t,i,n,s,r,A,o){return A===void 0&&(A=0),o===void 0&&(o=0),e<=s&&s+A<=e+i&&t<=r&&r+o<=t+n}static intersects(e,t,i,n,s,r,A,o){let a=i,h=A;const d=e,f=s;if(a+=d,h+=f,d>h||f>a)return!1;let g=n,x=o;const B=t,C=r;return g+=B,x+=C,!(B>x||C>g)}static intersectsLineSegment(e,t,i,n,s,r,A,o){return V.mC(e,t,i,n,s,r,A,o)}get x(){return this.w}set x(e){this.w=e}get y(){return this.b}set y(e){this.b=e}get width(){return this.q}set width(e){e<0&&u.it(e,">= 0",Ei,"width"),this.q=e}get height(){return this.W}set height(e){e<0&&u.it(e,">= 0",Ei,"height"),this.W=e}get left(){return this.w}set left(e){this.w=e}get top(){return this.b}set top(e){this.b=e}get right(){return this.w+this.q}set right(e){this.w+=e-(this.w+this.q)}get bottom(){return this.b+this.W}set bottom(e){this.b+=e-(this.b+this.W)}get position(){return new T(this.w,this.b)}set position(e){this.w=e.x,this.b=e.y}get size(){return new ct(this.q,this.W)}set size(e){this.q=e.width,this.W=e.height}get center(){return new T(this.w+this.q/2,this.b+this.W/2)}set center(e){this.w=e.x-this.q/2,this.b=e.y-this.W/2}get centerX(){return this.w+this.q/2}set centerX(e){this.w=e-this.q/2}get centerY(){return this.b+this.W/2}set centerY(e){this.b=e-this.W/2}isReal(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)}isEmpty(){return this.width===0&&this.height===0}static l(){const e=Ei.Rk.pop();return e===void 0?new Ei:e}static Y(e,t,i,n){const s=Ei.Rk.pop();return s===void 0?new Ei(e,t,i,n):s.i(e,t,i,n)}static e(e){Ei.Rk.push(e)}};p(Ei,"pw",new Ei(0,0,0,0).st()),p(Ei,"KD",new Ei(NaN,NaN,NaN,NaN).st()),p(Ei,"Rk",[]);let it=Ei;const Mi=class Mi{constructor(e,t,i,n){p(this,"rn");p(this,"ln");p(this,"hn");p(this,"an");p(this,"h");e===void 0?(this.rn=0,this.ln=0,this.hn=0,this.an=0):t===void 0?(t=e,i=e,n=e,this.top=e,this.right=t,this.bottom=i,this.left=n):i===void 0?(i=e,n=t,this.top=e,this.right=t,this.bottom=i,this.left=n):n!==void 0?(this.top=e,this.right=t,this.bottom=i,this.left=n):u.o("Invalid arguments to Margin constructor: "+e+", "+t+", "+i+", "+n),this.h=!1}a(e){return this.rn=e.rn,this.ln=e.ln,this.hn=e.hn,this.an=e.an,this}setTo(e,t,i,n){return this.rn=e,this.ln=t,this.hn=i,this.an=n,this}set(e){return this.rn=e.rn,this.ln=e.ln,this.hn=e.hn,this.an=e.an,this}copy(){const e=new Mi;return e.rn=this.rn,e.ln=this.ln,e.hn=this.hn,e.an=this.an,e}st(){return this.h=!0,Object.freeze(this),this}N(){return this.h||Object.isFrozen(this)?this:this.copy().g()}g(){return this.h||(this.h=!0),this}Tt(){return this.h&&(Object.isFrozen(this)&&u.o("cannot thaw constant: "+this),this.h=!1),this}dw(e){}static parse(e){if(typeof e=="string"){const t=e.split(" ");let i=0,n=NaN;for(;t[i]==="";)i++;let s=t[i++];if(s&&(n=parseFloat(s)),isNaN(n))return new Mi;let r=NaN;for(;t[i]==="";)i++;if(s=t[i++],s&&(r=parseFloat(s)),isNaN(r))return new Mi(n);let A=NaN;for(;t[i]==="";)i++;if(s=t[i++],s&&(A=parseFloat(s)),isNaN(A))return new Mi(n,r);let o=NaN;for(;t[i]==="";)i++;return s=t[i++],s&&(o=parseFloat(s)),isNaN(o)?new Mi(n,r):new Mi(n,r,A,o)}else return new Mi}static stringify(e){return e.top.toString()+" "+e.right.toString()+" "+e.bottom.toString()+" "+e.left.toString()}static stringifyFixed(e){return t=>t.top.toFixed(e)+" "+t.right.toFixed(e)+" "+t.bottom.toFixed(e)+" "+t.left.toFixed(e)}toString(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"}equals(e){return e instanceof Mi?this.rn===e.top&&this.ln===e.right&&this.hn===e.bottom&&this.an===e.left:!1}equalTo(e,t,i,n){return this.rn===e&&this.ln===t&&this.hn===i&&this.an===n}equalsApprox(e){return V.u(this.rn,e.top)&&V.u(this.ln,e.right)&&V.u(this.hn,e.bottom)&&V.u(this.an,e.left)}get top(){return this.rn}set top(e){this.rn=e}get right(){return this.ln}set right(e){this.ln=e}get bottom(){return this.hn}set bottom(e){this.hn=e}get left(){return this.an}set left(e){this.an=e}isReal(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)}static l(){const e=Mi.yC.pop();return e===void 0?new Mi:e}static e(e){Mi.yC.push(e)}};p(Mi,"Ig",new Mi(0,0,0,0).st()),p(Mi,"pC",new Mi(2,2,2,2).st()),p(Mi,"yC",[]);let Rt=Mi;const pt=class pt{constructor(e,t,i,n){p(this,"w");p(this,"b");p(this,"Rs");p(this,"vs");p(this,"h");e===void 0?(this.w=0,this.b=0,this.Rs=0,this.vs=0):(t===void 0&&(t=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=e,this.y=t,this.offsetX=i,this.offsetY=n),this.h=!1}a(e){return this.w=e.w,this.b=e.b,this.Rs=e.Rs,this.vs=e.vs,this}setTo(e,t,i,n){return this.w=e,this.b=t,this.Rs=i,this.vs=n,this}set(e){return this.w=e.w,this.b=e.b,this.Rs=e.Rs,this.vs=e.vs,this}copy(){const e=new pt;return e.w=this.w,e.b=this.b,e.Rs=this.Rs,e.vs=this.vs,e}st(){return this.h=!0,Object.freeze(this),this}N(){return this.h||Object.isFrozen(this)?this:this.copy().g()}g(){return this.h||(this.h=!0),this}Tt(){return this.h&&(Object.isFrozen(this)&&u.o("cannot thaw constant: "+this),this.h=!1),this}dw(e){}Ue(e){return this.w=NaN,this.b=NaN,this.Rs=e,this}uE(e,t){(isNaN(e)||e>1||e<0)&&u.it(e,"0 <= "+t+" <= 1",pt,t)}dE(e,t){(isNaN(e)||e===1/0||e===-1/0)&&u.it(e,"real number, not NaN or Infinity",pt,t)}static parse(e){if(typeof e=="string"){if(e=e.trim(),e==="None")return pt.None;if(e==="TopLeft")return pt.TopLeft;if(e==="Top"||e==="TopCenter"||e==="MiddleTop")return pt.TopCenter;if(e==="TopRight")return pt.TopRight;if(e==="Left"||e==="LeftCenter"||e==="MiddleLeft")return pt.LeftCenter;if(e==="Center")return pt.Center;if(e==="Right"||e==="RightCenter"||e==="MiddleRight")return pt.RightCenter;if(e==="BottomLeft")return pt.BottomLeft;if(e==="Bottom"||e==="BottomCenter"||e==="MiddleBottom")return pt.BottomCenter;if(e==="BottomRight")return pt.BottomRight;if(e==="TopSide")return pt.TopSide;if(e==="LeftSide")return pt.LeftSide;if(e==="RightSide")return pt.RightSide;if(e==="BottomSide")return pt.BottomSide;if(e==="TopBottomSides")return pt.TopBottomSides;if(e==="LeftRightSides")return pt.LeftRightSides;if(e==="TopLeftSides")return pt.TopLeftSides;if(e==="TopRightSides")return pt.TopRightSides;if(e==="BottomLeftSides")return pt.BottomLeftSides;if(e==="BottomRightSides")return pt.BottomRightSides;if(e==="NotTopSide")return pt.NotTopSide;if(e==="NotLeftSide")return pt.NotLeftSide;if(e==="NotRightSide")return pt.NotRightSide;if(e==="NotBottomSide")return pt.NotBottomSide;if(e==="AllSides")return pt.AllSides;if(e==="Default")return pt.Default;const t=e.split(" ");let i=0,n=0;for(;t[i]==="";)i++;let s=t[i++];s!==void 0&&s.length>0&&(n=parseFloat(s));let r=0;for(;t[i]==="";)i++;s=t[i++],s!==void 0&&s.length>0&&(r=parseFloat(s));let A=0;for(;t[i]==="";)i++;s=t[i++],s!==void 0&&s.length>0&&(A=parseFloat(s));let o=0;for(;t[i]==="";)i++;return s=t[i++],s!==void 0&&s.length>0&&(o=parseFloat(s)),new pt(n,r,A,o)}else return new pt}static stringify(e){return e.isSpot()?e.x.toString()+" "+e.y.toString()+" "+e.offsetX.toString()+" "+e.offsetY.toString():e.toString()}static stringifyFixed(e){return t=>t.x.toFixed(e)+" "+t.y.toFixed(e)+" "+t.offsetX.toFixed(e)+" "+t.offsetY.toFixed(e)}toString(){return this.isSpot()?this.Rs===0&&this.vs===0?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.equals(pt.None)?"None":this.equals(pt.TopLeft)?"TopLeft":this.equals(pt.TopCenter)?"Top":this.equals(pt.TopRight)?"TopRight":this.equals(pt.LeftCenter)?"Left":this.equals(pt.Center)?"Center":this.equals(pt.RightCenter)?"Right":this.equals(pt.BottomLeft)?"BottomLeft":this.equals(pt.BottomCenter)?"Bottom":this.equals(pt.BottomRight)?"BottomRight":this.equals(pt.TopSide)?"TopSide":this.equals(pt.LeftSide)?"LeftSide":this.equals(pt.RightSide)?"RightSide":this.equals(pt.BottomSide)?"BottomSide":this.equals(pt.TopBottomSides)?"TopBottomSides":this.equals(pt.LeftRightSides)?"LeftRightSides":this.equals(pt.TopLeftSides)?"TopLeftSides":this.equals(pt.TopRightSides)?"TopRightSides":this.equals(pt.BottomLeftSides)?"BottomLeftSides":this.equals(pt.BottomRightSides)?"BottomRightSides":this.equals(pt.NotTopSide)?"NotTopSide":this.equals(pt.NotLeftSide)?"NotLeftSide":this.equals(pt.NotRightSide)?"NotRightSide":this.equals(pt.NotBottomSide)?"NotBottomSide":this.equals(pt.AllSides)?"AllSides":this.equals(pt.Default)?"Default":"None"}equals(e){return e instanceof pt?(this.w===e.x||isNaN(this.w)&&isNaN(e.x))&&(this.b===e.y||isNaN(this.b)&&isNaN(e.y))&&this.Rs===e.offsetX&&this.vs===e.offsetY:!1}opposite(){return new pt(.5-(this.w-.5),.5-(this.b-.5),-this.Rs,-this.vs)}includesSide(e){if(!this.isSide())return!1;if(!e.isSide())if(e.equals(pt.Left))e=pt.LeftSide;else if(e.equals(pt.Right))e=pt.RightSide;else if(e.equals(pt.Top))e=pt.TopSide;else if(e.equals(pt.Bottom))e=pt.BottomSide;else return!1;const t=this.vs,i=e.offsetY;return(t&i)===i}get x(){return this.w}set x(e){this.w=e}get y(){return this.b}set y(e){this.b=e}get offsetX(){return this.Rs}set offsetX(e){this.Rs=e}get offsetY(){return this.vs}set offsetY(e){this.vs=e}isSpot(){return!isNaN(this.x)&&!isNaN(this.y)}isNoSpot(){return isNaN(this.x)||isNaN(this.y)}isSide(){return isNaN(this.x)&&isNaN(this.y)&&this.offsetX===1&&this.offsetY!==0}isNone(){return isNaN(this.x)&&isNaN(this.y)&&this.offsetX===0&&this.offsetY===0}isDefault(){return isNaN(this.x)&&isNaN(this.y)&&this.offsetX===-1&&this.offsetY===0}static l(){const e=pt.wC.pop();return e===void 0?new pt:e}static e(e){pt.wC.push(e)}};p(pt,"None",new pt(0,0,0,0).Ue(0).st()),p(pt,"Default",new pt(0,0,-1,0).Ue(-1).st()),p(pt,"TopLeft",new pt(0,0,0,0).st()),p(pt,"TopCenter",new pt(.5,0,0,0).st()),p(pt,"TopRight",new pt(1,0,0,0).st()),p(pt,"LeftCenter",new pt(0,.5,0,0).st()),p(pt,"Center",new pt(.5,.5,0,0).st()),p(pt,"RightCenter",new pt(1,.5,0,0).st()),p(pt,"BottomLeft",new pt(0,1,0,0).st()),p(pt,"BottomCenter",new pt(.5,1,0,0).st()),p(pt,"BottomRight",new pt(1,1,0,0).st()),p(pt,"MiddleTop",pt.TopCenter),p(pt,"MiddleLeft",pt.LeftCenter),p(pt,"MiddleRight",pt.RightCenter),p(pt,"MiddleBottom",pt.BottomCenter),p(pt,"Top",pt.TopCenter),p(pt,"Left",pt.LeftCenter),p(pt,"Right",pt.RightCenter),p(pt,"Bottom",pt.BottomCenter),p(pt,"TopSide",new pt(0,0,1,1).Ue(1).st()),p(pt,"LeftSide",new pt(0,0,1,2).Ue(1).st()),p(pt,"RightSide",new pt(0,0,1,4).Ue(1).st()),p(pt,"BottomSide",new pt(0,0,1,8).Ue(1).st()),p(pt,"TopBottomSides",new pt(0,0,1,9).Ue(1).st()),p(pt,"LeftRightSides",new pt(0,0,1,6).Ue(1).st()),p(pt,"TopLeftSides",new pt(0,0,1,3).Ue(1).st()),p(pt,"TopRightSides",new pt(0,0,1,5).Ue(1).st()),p(pt,"BottomLeftSides",new pt(0,0,1,10).Ue(1).st()),p(pt,"BottomRightSides",new pt(0,0,1,12).Ue(1).st()),p(pt,"NotTopSide",new pt(0,0,1,14).Ue(1).st()),p(pt,"NotLeftSide",new pt(0,0,1,13).Ue(1).st()),p(pt,"NotRightSide",new pt(0,0,1,11).Ue(1).st()),p(pt,"NotBottomSide",new pt(0,0,1,7).Ue(1).st()),p(pt,"AllSides",new pt(0,0,1,15).Ue(1).st()),p(pt,"vk",new pt(.156,.156).st()),p(pt,"Ok",new pt(.844,.844).st()),p(pt,"wC",[]);let q=pt;const Bs=class Bs{constructor(){p(this,"m11");p(this,"m12");p(this,"m21");p(this,"m22");p(this,"dx");p(this,"dy");this.m11=1,this.m12=0,this.m21=0,this.m22=1,this.dx=0,this.dy=0}set(e){return this.m11=e.m11,this.m12=e.m12,this.m21=e.m21,this.m22=e.m22,this.dx=e.dx,this.dy=e.dy,this}setTo(e,t,i,n,s,r){return this.m11=e,this.m12=t,this.m21=i,this.m22=n,this.dx=s,this.dy=r,this}copy(){const e=new Bs;return e.m11=this.m11,e.m12=this.m12,e.m21=this.m21,e.m22=this.m22,e.dx=this.dx,e.dy=this.dy,e}toString(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.dx+","+this.dy+")"}equals(e){return this.m11===e.m11&&this.m12===e.m12&&this.m21===e.m21&&this.m22===e.m22&&this.dx===e.dx&&this.dy===e.dy}Ik(){return this.dx===0&&this.dy===0&&this.m11===1&&this.m12===0&&this.m21===0&&this.m22===1}Ii(){return this.m11=1,this.m12=0,this.m21=0,this.m22=1,this.dx=0,this.dy=0,this}rc(e){const t=this.m11*e.m11+this.m21*e.m12,i=this.m12*e.m11+this.m22*e.m12,n=this.m11*e.m21+this.m21*e.m22,s=this.m12*e.m21+this.m22*e.m22;return this.dx=this.m11*e.dx+this.m21*e.dy+this.dx,this.dy=this.m12*e.dx+this.m22*e.dy+this.dy,this.m11=t,this.m12=i,this.m21=n,this.m22=s,this}xC(e){const t=1/(e.m11*e.m22-e.m12*e.m21),i=e.m22*t,n=-e.m12*t,s=-e.m21*t,r=e.m11*t,A=t*(e.m21*e.dy-e.m22*e.dx),o=t*(e.m12*e.dx-e.m11*e.dy),a=this.m11*i+this.m21*n,h=this.m12*i+this.m22*n,d=this.m11*s+this.m21*r,f=this.m12*s+this.m22*r;return this.dx=this.m11*A+this.m21*o+this.dx,this.dy=this.m12*A+this.m22*o+this.dy,this.m11=a,this.m12=h,this.m21=d,this.m22=f,this}yw(){const e=1/(this.m11*this.m22-this.m12*this.m21),t=this.m22*e,i=-this.m12*e,n=-this.m21*e,s=this.m11*e,r=e*(this.m21*this.dy-this.m22*this.dx),A=e*(this.m12*this.dx-this.m11*this.dy);return this.m11=t,this.m12=i,this.m21=n,this.m22=s,this.dx=r,this.dy=A,this}ds(e,t,i){if(e>=360?e-=360:e<0&&(e+=360),e===0)return this;this.Os(t,i);let n=0,s=0;if(e===90)n=0,s=1;else if(e===180)n=-1,s=0;else if(e===270)n=0,s=-1;else{const h=e*Math.PI/180;n=Math.cos(h),s=Math.sin(h)}const r=this.m11*n+this.m21*s,A=this.m12*n+this.m22*s,o=this.m11*-s+this.m21*n,a=this.m12*-s+this.m22*n;return this.m11=r,this.m12=A,this.m21=o,this.m22=a,this.Os(-t,-i),this}Os(e,t){return this.dx+=this.m11*e+this.m21*t,this.dy+=this.m12*e+this.m22*t,this}rt(e,t){return t===void 0&&(t=e),this.m11*=e,this.m12*=e,this.m21*=t,this.m22*=t,this}GD(){if(this.m11===1&&this.m12===0)return 0;let e=Math.atan2(this.m12,this.m11)*180/Math.PI;return e<0&&(e+=360),e}bt(e){const t=e.x,i=e.y;return e.i(t*this.m11+i*this.m21+this.dx,t*this.m12+i*this.m22+this.dy)}_e(e){const t=1/(this.m11*this.m22-this.m12*this.m21),i=this.m22*t,n=-this.m12*t,s=-this.m21*t,r=this.m11*t,A=e.x-this.dx,o=e.y-this.dy;return e.i(A*i+o*s,A*n+o*r)}ww(e){const t=1/(this.m11*this.m22-this.m12*this.m21),i=this.m22*t,n=-this.m12*t,s=-this.m21*t,r=this.m11*t,A=t*(this.m21*this.dy-this.m22*this.dx),o=t*(this.m12*this.dx-this.m11*this.dy),a=e.x*1.25,h=e.y*1.2;return e.i(a*i+h*s+A,a*n+h*r+o)}Eg(e){const t=e.x,i=e.y,n=t+e.width,s=i+e.height,r=this.m11,A=this.m12,o=this.m21,a=this.m22,h=this.dx,d=this.dy,f=t*r+i*o+h,g=t*A+i*a+d,x=n*r+i*o+h,B=n*A+i*a+d,C=t*r+s*o+h,F=t*A+s*a+d,b=n*r+s*o+h,L=n*A+s*a+d;let Q=f,M=f,O=g,D=g;return Q=Math.min(Q,x),M=Math.max(M,x),O=Math.min(O,B),D=Math.max(D,B),Q=Math.min(Q,C),M=Math.max(M,C),O=Math.min(O,F),D=Math.max(D,F),Q=Math.min(Q,b),M=Math.max(M,b),O=Math.min(O,L),D=Math.max(D,L),e.i(Q,O,M-Q,D-O),e}static l(){const e=Bs.bC.pop();return e===void 0?new Bs:e}static e(e){Bs.bC.push(e)}};p(Bs,"bC",[]),p(Bs,"Ek","54a702f3e53909c447824c6706603faf4c");let Bt=Bs;const V={HD:"7da71ca0ad381e90",Xn:4*((Math.sqrt(2)-1)/3),kC:null,xw:k=>{if(k<=0)return 0;let e=V.kC;if(e===null){e=[];for(let t=0;t<=2e3;t++)e[t]=Math.sqrt(t);V.kC=e}if(k<1){const t=1/k;return t<=2e3?1/e[t|0]:Math.sqrt(k)}else return k<=2e3?e[k|0]:Math.sqrt(k)},u:(k,e)=>{const t=k-e;return t<.5&&t>-.5},K:(k,e)=>{const t=k-e;return t<5e-8&&t>-5e-8},Ei:(k,e,t,i,n,s,r)=>{n<=0&&(n=1e-6);let A=0,o=0,a=0,h=0;if(k<t?(o=k,A=t):(o=t,A=k),e<i?(h=e,a=i):(h=i,a=e),k===t)return h<=r&&r<=a&&k-n<=s&&s<=k+n;if(e===i)return o<=s&&s<=A&&e-n<=r&&r<=e+n;const d=A+n,f=o-n;if(f<=s&&s<=d){const g=a+n,x=h-n;if(x<=r&&r<=g)if(d-f>g-x)if(k-t>n||t-k>n){const B=(i-e)/(t-k)*(s-k)+e;if(B-n<=r&&r<=B+n)return!0}else return!0;else if(e-i>n||i-e>n){const B=(t-k)/(i-e)*(r-e)+k;if(B-n<=s&&s<=B+n)return!0}else return!0}return!1},bw:(k,e,t,i,n,s,r,A,o,a,h,d)=>{if(!V.Ei(k,e,r,A,d,t,i)||!V.Ei(k,e,r,A,d,n,s)){const f=(k+t)/2,g=(e+i)/2,x=(t+n)/2,B=(i+s)/2,C=(n+r)/2,F=(s+A)/2,b=(f+x)/2,L=(g+B)/2,Q=(x+C)/2,M=(B+F)/2,O=(b+Q)/2,D=(L+M)/2;return V.bw(k,e,f,g,b,L,O,D,o,a,h,d)||V.bw(O,D,Q,M,C,F,r,A,o,a,h,d)}else return V.Ei(k,e,r,A,d,a,h)},PC:(k,e,t,i,n,s,r,A,o)=>{const a=(k+t)/2,h=(e+i)/2,d=(t+n)/2,f=(i+s)/2,g=(n+r)/2,x=(s+A)/2,B=(a+d)/2,C=(h+f)/2,F=(d+g)/2,b=(f+x)/2;return o.i((B+F)/2,(C+b)/2),o},jD:(k,e,t,i,n,s,r,A)=>{const o=(k+t)/2,a=(e+i)/2,h=(t+n)/2,d=(i+s)/2,f=(n+r)/2,g=(s+A)/2,x=(o+h)/2,B=(a+d)/2,C=(h+f)/2,F=(d+g)/2;return T.direction(x,B,C,F)},cu:(k,e,t,i,n,s,r,A,o,a)=>{if(!V.Ei(k,e,r,A,o,t,i)||!V.Ei(k,e,r,A,o,n,s)){const h=(k+t)/2,d=(e+i)/2,f=(t+n)/2,g=(i+s)/2,x=(n+r)/2,B=(s+A)/2,C=(h+f)/2,F=(d+g)/2,b=(f+x)/2,L=(g+B)/2,Q=(C+b)/2,M=(F+L)/2;V.cu(k,e,h,d,C,F,Q,M,o,a),V.cu(Q,M,b,L,x,B,r,A,o,a)}else a.unionNoCheck(k,e,0,0),a.unionNoCheck(r,A,0,0);return a},Yn:(k,e,t,i,n,s,r,A,o,a)=>{if(!V.Ei(k,e,r,A,o,t,i)||!V.Ei(k,e,r,A,o,n,s)){const h=(k+t)/2,d=(e+i)/2,f=(t+n)/2,g=(i+s)/2,x=(n+r)/2,B=(s+A)/2,C=(h+f)/2,F=(d+g)/2,b=(f+x)/2,L=(g+B)/2,Q=(C+b)/2,M=(F+L)/2;V.Yn(k,e,h,d,C,F,Q,M,o,a),V.Yn(Q,M,b,L,x,B,r,A,o,a)}else a.length===0&&(a.push(k),a.push(e)),a.push(r),a.push(A);return a},Bk:(k,e,t,i,n,s,r,A,o,a)=>{if(V.Ei(k,e,n,s,a,t,i))return V.Ei(k,e,n,s,a,A,o);{const h=(k+t)/2,d=(e+i)/2,f=(t+n)/2,g=(i+s)/2,x=(h+f)/2,B=(d+g)/2;return V.Bk(k,e,h,d,x,B,r,A,o,a)||V.Bk(x,B,f,g,n,s,r,A,o,a)}},gE:(k,e,t,i,n,s,r)=>{const A=(k+t)/2,o=(e+i)/2,a=(t+n)/2,h=(i+s)/2;return r.i((A+a)/2,(o+h)/2),r},Uk:(k,e,t,i,n,s,r,A)=>{if(V.Ei(k,e,n,s,r,t,i))A.unionNoCheck(k,e,0,0),A.unionNoCheck(n,s,0,0);else{const o=(k+t)/2,a=(e+i)/2,h=(t+n)/2,d=(i+s)/2,f=(o+h)/2,g=(a+d)/2;V.Uk(k,e,o,a,f,g,r,A),V.Uk(f,g,h,d,n,s,r,A)}return A},Bg:(k,e,t,i,n,s,r,A)=>{if(V.Ei(k,e,n,s,r,t,i))A.length===0&&(A.push(k),A.push(e)),A.push(n),A.push(s);else{const o=(k+t)/2,a=(e+i)/2,h=(t+n)/2,d=(i+s)/2,f=(o+h)/2,g=(a+d)/2;V.Bg(k,e,o,a,f,g,r,A),V.Bg(f,g,h,d,n,s,r,A)}return A},Ug:(k,e,t,i,n,s,r,A,o,a,h,d,f,g)=>{if(!V.Ei(k,e,r,A,f,t,i)||!V.Ei(k,e,r,A,f,n,s)){const x=(k+t)/2,B=(e+i)/2,C=(t+n)/2,F=(i+s)/2,b=(n+r)/2,L=(s+A)/2,Q=(x+C)/2,M=(B+F)/2,O=(C+b)/2,D=(F+L)/2,K=(Q+O)/2,J=(M+D)/2;let R=1/0,G=!1,W=0,Y=0;if(V.Ug(k,e,x,B,Q,M,K,J,o,a,h,d,f,g)){const Z=(g.x-o)*(g.x-o)+(g.y-a)*(g.y-a);Z<R&&(R=Z,G=!0,W=g.x,Y=g.y)}if(V.Ug(K,J,O,D,b,L,r,A,o,a,h,d,f,g)){const Z=(g.x-o)*(g.x-o)+(g.y-a)*(g.y-a);Z<R&&(R=Z,G=!0,W=g.x,Y=g.y)}return G&&(g.x=W,g.y=Y),G}else{if(!V.lu(k,e,r,A,o,a,h,d))return!1;const x=(k-r)*(a-d)-(e-A)*(o-h);if(x===0)return!1;const B=((k*A-e*r)*(o-h)-(k-r)*(o*d-a*h))/x,C=((k*A-e*r)*(a-d)-(e-A)*(o*d-a*h))/x;return g.i(B,C),!0}},Vg:(k,e,t,i,n,s,r,A,o,a,h,d,f)=>{let g=0;if(!V.Ei(k,e,r,A,f,t,i)||!V.Ei(k,e,r,A,f,n,s)){const x=(k+t)/2,B=(e+i)/2,C=(t+n)/2,F=(i+s)/2,b=(n+r)/2,L=(s+A)/2,Q=(x+C)/2,M=(B+F)/2,O=(C+b)/2,D=(F+L)/2,K=(Q+O)/2,J=(M+D)/2;g+=V.Vg(k,e,x,B,Q,M,K,J,o,a,h,d,f),g+=V.Vg(K,J,O,D,b,L,r,A,o,a,h,d,f)}else{const x=(k-r)*(a-d)-(e-A)*(o-h);if(x===0)return g;const B=((k*A-e*r)*(o-h)-(k-r)*(o*d-a*h))/x,C=((k*A-e*r)*(a-d)-(e-A)*(o*d-a*h))/x;if(B>=h)return g;let F=0,b=0;if((o>h?o-h:h-o)<(a>d?a-d:d-a)){if(e<A?(F=e,b=A):(F=A,b=e),C<F||C>b)return g}else if(k<r?(F=k,b=r):(F=r,b=k),B<F||B>b)return g;x>0?g++:x<0&&g--}return g},kl:(k,e,t,i,n,s,r)=>{if(V.K(k,t)){let A=0,o=0;e<i?(A=e,o=i):(A=i,o=e);const a=s;return a<A?(r.i(k,A),!1):a>o?(r.i(k,o),!1):(r.i(k,a),!0)}else if(V.K(e,i)){let A=0,o=0;k<t?(A=k,o=t):(A=t,o=k);const a=n;return a<A?(r.i(A,e),!1):a>o?(r.i(o,e),!1):(r.i(a,e),!0)}else{const A=(t-k)*(t-k)+(i-e)*(i-e),o=((k-n)*(k-t)+(e-s)*(e-i))/A;if(o<-5e-6)return r.i(k,e),!1;if(o>1.000005)return r.i(t,i),!1;{const a=k+o*(t-k),h=e+o*(i-e);return r.i(a,h),!0}}},Kn:(k,e,t,i,n,s,r,A,o)=>{if(V.u(k,t)&&V.u(e,i))return o.i(k,e),!1;if(V.K(n,r)){if(V.K(k,t))return V.kl(k,e,t,i,n,s,o),!1;{const a=(i-e)/(t-k)*(n-k)+e;return V.kl(k,e,t,i,n,a,o)}}else{const a=(A-s)/(r-n);if(V.K(k,t)){const h=a*(k-n)+s;let d=0,f=0;return e<i?(d=e,f=i):(d=i,f=e),h<d?(o.i(k,d),!1):h>f?(o.i(k,f),!1):(o.i(k,h),!0)}else{const h=(i-e)/(t-k);if(V.K(a,h))return V.kl(k,e,t,i,n,s,o),!1;{const d=(h*k-a*n+s-e)/(h-a);if(V.K(h,0)){let f=0,g=0;return k<t?(f=k,g=t):(f=t,g=k),d<f?(o.i(f,e),!1):d>g?(o.i(g,e),!1):(o.i(d,e),!0)}else{const f=h*(d-k)+e;return V.kl(k,e,t,i,d,f,o)}}}}},mE:(k,e,t,i,n)=>V.Kn(t.x,t.y,i.x,i.y,k.x,k.y,e.x,e.y,n),pE:(k,e,t,i,n,s,r,A,o,a)=>{let h=1/0;function d(O,D){const K=(O-k)*(O-k)+(D-e)*(D-e);K<h&&(h=K,o.i(O,D))}d(o.x,o.y);let f=0,g=0,x=0,B=0;n<r?(f=n,g=r):(f=r,g=n),s<A?(x=n,B=r):(x=r,B=n);const C=g-f,F=B-x,b=C/2+a,L=F/2+a,Q=(n+r)/2,M=(s+A)/2;if(b===0||L===0)return o;if((t>k?t-k:k-t)<.5){const O=1-(t-Q)*(t-Q)/(b*b);if(O<0)return o;const D=Math.sqrt(O),K=L*D+M,J=-L*D+M;d(t,K),d(t,J)}else{const O=(i-e)/(t-k),D=1/(b*b)+O*O/(L*L),K=2*O*(e-O*k)/(L*L)-2*O*M/(L*L)-2*Q/(b*b),J=2*O*k*M/(L*L)-2*e*M/(L*L)+M*M/(L*L)+Q*Q/(b*b)-1+(e-O*k)*(e-O*k)/(L*L),R=K*K-4*D*J;if(R<0)return o;const G=Math.sqrt(R),W=(-K+G)/(2*D);d(W,O*W-O*k+e);const Y=(-K-G)/(2*D);d(Y,O*Y-O*k+e)}return o},Pl:(k,e,t,i,n,s,r,A,o)=>{let a=1e21,h=k,d=e;if(V.Kn(k,e,k,i,n,s,r,A,o)){const f=(o.x-n)*(o.x-n)+(o.y-s)*(o.y-s);f<a&&(a=f,h=o.x,d=o.y)}if(V.Kn(t,e,t,i,n,s,r,A,o)){const f=(o.x-n)*(o.x-n)+(o.y-s)*(o.y-s);f<a&&(a=f,h=o.x,d=o.y)}if(V.Kn(k,e,t,e,n,s,r,A,o)){const f=(o.x-n)*(o.x-n)+(o.y-s)*(o.y-s);f<a&&(a=f,h=o.x,d=o.y)}if(V.Kn(k,i,t,i,n,s,r,A,o)){const f=(o.x-n)*(o.x-n)+(o.y-s)*(o.y-s);f<a&&(a=f,h=o.x,d=o.y)}return o.i(h,d),a<1e21},kw:(k,e,t)=>V.mC(k.x,k.y,k.width,k.height,e.x,e.y,t.x,t.y),mC:(k,e,t,i,n,s,r,A)=>{const o=k,a=k+t,h=e,d=e+i;if(n===r){let f=0,g=0;return s<A?(f=s,g=A):(f=A,g=s),o<=n&&n<=a&&f<=d&&g>=h}if(s===A){let f=0,g=0;return n<r?(f=n,g=r):(f=r,g=n),h<=s&&s<=d&&f<=a&&g>=o}return!!(it.contains(k,e,t,i,n,s)||it.contains(k,e,t,i,r,A)||V.lu(o,h,a,h,n,s,r,A)||V.lu(a,h,a,d,n,s,r,A)||V.lu(a,d,o,d,n,s,r,A)||V.lu(o,d,o,h,n,s,r,A))},lu:(k,e,t,i,n,s,r,A)=>k===t&&e===i&&n===r&&s===A?k===n&&e===s:V.ru(k,e,t,i,n,s)*V.ru(k,e,t,i,r,A)<=0&&V.ru(n,s,r,A,k,e)*V.ru(n,s,r,A,t,i)<=0,ru:(k,e,t,i,n,s)=>{const r=t-k,A=i-e;let o=n-k,a=s-e,h=o*A-a*r;return h===0&&(h=o*r+a*A,h>0&&(o-=r,a-=A,h=o*r+a*A,h<0&&(h=0))),h},zg:k=>(k<0&&(k+=360),k>=360&&(k-=360),k),SC:(k,e,t,i,n,s)=>{const r=Math.PI;s||(i=i*(r/180),n=n*(r/180));const A=i>n?-1:1,o=1e-5,a=r*2,h=[],d=r/2;let f=i,g=Math.min(a,Math.abs(n-i));if(g<o){const x=f+A*Math.min(g,d),B=k+t*Math.cos(f),C=e+t*Math.sin(f),F=k+t*Math.cos(x),b=e+t*Math.sin(x),L=(B+F)/2,Q=(C+b)/2;return h.push([B,C,L,Q,L,Q,F,b]),h}for(;g>o;){const x=f+A*Math.min(g,d);h.push(V.qD(t,f,x,k,e)),g-=Math.abs(x-f),f=x}return h},qD:(k,e,t,i,n)=>{const s=(t-e)/2,r=k*Math.cos(s),A=k*Math.sin(s),o=r,a=-A,h=o*o+a*a,d=h+o*r+a*A,f=4/3*(Math.sqrt(2*h*d)-d)/(o*A-a*r),g=o-f*a,x=a+f*o,B=g,C=-x,F=s+e,b=Math.cos(F),L=Math.sin(F);return[i+k*Math.cos(e),n+k*Math.sin(e),i+g*b-x*L,n+g*L+x*b,i+B*b-C*L,n+B*L+C*b,i+k*Math.cos(t),n+k*Math.sin(t)]},Og:(k,e,t,i,n,s,r)=>{const A=n,o=s,a=Math.floor((k-t)/A)*A+t,h=Math.floor((e-i)/o)*o+i;let d=a;a+A-k<A/2&&(d=a+A);let f=h;return h+o-e<o/2&&(f=h+o),r.i(d,f),r},MC:(k,e)=>{let t=Math.max(k,e),i=Math.min(k,e),n=1,s=1;do n=t%i,s=i,t=i,i=n;while(n>0);return s},WD:(k,e,t,i)=>{const n=t<0,s=i<0;let r=0,A=0,o=0;k<e?(A=1,o=0):(A=0,o=1);let a=0,h=0,d=0,f=0;return r=A,a=r===0?k:e,d=r===0?t:i,(r===0?n:s)&&(d=-d),r=o,h=r===0?k:e,f=r===0?t:i,(r===0?n:s)&&(f=-f),V.JD(a,h,d,f,0,0)},JD:(k,e,t,i,n,s)=>{let r=0;if(i>0)if(t>0){const A=k*k,o=e*e,a=k*t,h=e*i;let d=-o+h,f=-o+Math.sqrt(a*a+h*h),g=d;const x=9999999999;for(let F=0;F<x&&(g=.5*(d+f),!(g===d||g===f));++F){const b=a/(g+A),L=h/(g+o),Q=b*b+L*L-1;if(Q>0)d=g;else if(Q<0)f=g;else break}n=A*t/(g+A),s=o*i/(g+o);const B=n-t,C=s-i;r=Math.sqrt(B*B+C*C)}else n=0,s=e,r=Math.abs(i-e);else{const A=k*k-e*e,o=k*t;if(o<A){const a=o/A,h=a*a;n=k*a,s=e*Math.sqrt(Math.abs(1-h));const d=n-t;r=Math.sqrt(d*d+s*s)}else n=k,s=0,r=Math.abs(t-k)}return r},Gn:new v,Xg:new v,mr:new v,pr:0,Yg:100};V.za=V.HD;var me=(k=>(k[k.Line=1]="Line",k[k.Rectangle=2]="Rectangle",k[k.Ellipse=3]="Ellipse",k[k.Path=4]="Path",k))(me||{}),fe=(k=>(k[k.None=0]="None",k[k.Default=1]="Default",k[k.Fill=2]="Fill",k[k.Uniform=6]="Uniform",k))(fe||{});const Si=class Si{constructor(e){p(this,"n");p(this,"Kg");p(this,"Gg");p(this,"lc");p(this,"fu");p(this,"uu");p(this,"Hn");p(this,"jn");p(this,"qn");p(this,"_");p(this,"Pe");p(this,"Se");p(this,"ie");p(this,"ee");p(this,"Is");p(this,"hc");p(this,"ac");X.qi(this),this.n=2,e===void 0&&(e=4),this._=e,this.Pe=0,this.Se=0,this.ie=0,this.ee=0,e===4?this.Is=new H:this.Is=Si.Pw,this.Kg=this.Is.ct,this.Gg=new it().g(),this.lc=null,this.fu=null,this.uu=NaN,this.Hn=q.TopLeft,this.jn=q.BottomRight,this.hc=NaN,this.ac=NaN,this.qn=2}copy(){const e=new Si;if(e.n=this.n&-2,e._=this._,e.Pe=this.Pe,e.Se=this.Se,e.ie=this.ie,e.ee=this.ee,this._===4){const t=this.Is.r,i=e.Is;for(let n=0;n<t.length;n++){const s=t[n];i.add(s.copy())}e.Is=i}else e.Is=this.Is;return e.Kg=this.Kg,e.Gg.a(this.Gg),e.lc=this.lc,e.fu=this.fu,e.uu=this.uu,e.Hn=this.Hn.N(),e.jn=this.jn.N(),e.hc=this.hc,e.ac=this.ac,e.qn=this.qn,e}get h(){return(this.n&1)!==0}set h(e){e?this.n|=1:this.n&=-2}get Pt(){return(this.n&2)!==0}set Pt(e){e?this.n|=2:this.n&=-3}g(){if(this.h=!0,this.type!==4)return this;const e=this.figures;e.g();for(const t of e)t.g();return this}equalsApprox(e){if(!(e instanceof Si))return!1;if(this.type!==e.type)return this.type===1&&e.type===4?this.NC(e):e.type===1&&this.type===4?e.NC(this):!1;if(this.type===4){const t=this.figures.r,i=e.figures.r,n=t.length;if(n!==i.length)return!1;for(let s=0;s<n;s++){const r=t[s],A=i[s];if(!r.equalsApprox(A))return!1}return!0}else return V.u(this.startX,e.startX)&&V.u(this.startY,e.startY)&&V.u(this.endX,e.endX)&&V.u(this.endY,e.endY)}NC(e){if(this.type!==1||e.type!==4)return!1;if(e.figures.count===1){const t=e.figures.elt(0);if(t.segments.count===1&&V.u(this.startX,t.startX)&&V.u(this.startY,t.startY)){const i=t.segments.elt(0);if(i.type===2&&V.u(this.endX,i.endX)&&V.u(this.endY,i.endY))return!0}}return!1}static stringify(e){return e.toString()}static stringifyFixed(e){return t=>t.toString(e)}li(e){e in me?this.type=e:u.ur(this,e)}toString(e){e===void 0&&(e=-1);const t=n=>n===0?"0":n.toFixed(e);let i;switch(this.type){case 1:return e<0?"M"+this.startX.toString()+" "+this.startY.toString()+"L"+this.endX.toString()+" "+this.endY.toString():"M"+t(this.startX)+" "+t(this.startY)+"L"+t(this.endX)+" "+t(this.endY);case 2:return i=new it(this.startX,this.startY,0,0),i.union(this.endX,this.endY,0,0),e<0?"M"+i.x.toString()+" "+i.y.toString()+"H"+i.right.toString()+"V"+i.bottom.toString()+"H"+i.left.toString()+"z":"M"+t(i.x)+" "+t(i.y)+"H"+t(i.right)+"V"+t(i.bottom)+"H"+t(i.left)+"z";case 3:if(i=new it(this.startX,this.startY,0,0),i.union(this.endX,this.endY,0,0),e<0){const A=i.left.toString()+" "+(i.y+i.height/2).toString(),o=i.right.toString()+" "+(i.y+i.height/2).toString();return"M"+A+"A"+(i.width/2).toString()+" "+(i.height/2).toString()+" 0 0 1 "+o+"A"+(i.width/2).toString()+" "+(i.height/2).toString()+" 0 0 1 "+A}else{const A=t(i.left)+" "+t(i.y+i.height/2),o=t(i.right)+" "+t(i.y+i.height/2);return"M"+A+"A"+t(i.width/2)+" "+t(i.height/2)+" 0 0 1 "+o+"A"+t(i.width/2)+" "+t(i.height/2)+" 0 0 1 "+A}case 4:let n="";const s=this.figures.r,r=s.length;for(let A=0;A<r;A++){const o=s[A];A>0&&(n+=" x "),o.isFilled&&(n+="F "),n+=o.toString(e)}return n;default:return me[this.type]}}static fillPath(e){const t=e.split(/[Xx]/),i=t.length;let n="";for(let s=0;s<i;s++){const r=t[s];if(r.match(/[Ff]/)!==null){s===0?n+=r:n+="X"+(r[0]===" "?"":" ")+r;continue}n+=(s===0?"":"X ")+"F"+(r[0]===" "?"":" ")+r}return n}static parse(e,t){t===void 0&&(t=!1);const i=new RegExp("(["+Si.Hg+"])(["+Si.Hg+"])","gm"),n=new RegExp("(["+Si.Hg+"])([^s])","gm"),s=new RegExp("([^s])(["+Si.Hg+"])","gm");e=e.replace(/,/gm," "),e=e.replace(i,"$1 $2"),e=e.replace(i,"$1 $2"),e=e.replace(n,"$1 $2"),e=e.replace(s,"$1 $2"),e=e.replace(/([0-9])([+\-])/gm,"$1 $2"),e=e.replace(/[\s\r\t\n]+/gm," "),e=e.replace(/^\s+|\s+$/g,"");const r=e.split(" ");for(let Y=0;Y<r.length;Y++){const Z=r[Y];if(Z.match(/(\.[0-9]*)(\.)/gm)!==null){const et=u.ht();let At="",ht=!1;for(let nt=0;nt<Z.length;nt++){const gt=Z[nt];gt==="."&&!ht?(ht=!0,At+=gt):gt==="."?(et.push(At),At="."):At+=gt}et.push(At),r.splice(Y,1);for(let nt=0;nt<et.length;nt++)r.splice(Y+nt,0,et[nt]);Y+=et.length-1,u.et(et)}}let A=-1,o="",a="";const h=new T(0,0),d=new T(0,0),f=new T(0,0);let g=!0;function x(){return A>=Q-1||r[A+1].match(G)!==null?!0:(g=!1,!1)}function B(){return A++,r[A]}function C(Y){let Z=parseFloat(B()),et=parseFloat(B());o===o.toLowerCase()&&(Z=f.x+Z,et=f.y+et),Y.i(Z,et)}function F(){return C(f),f}function b(){return C(d),d}function L(){const Y=a.toLowerCase();return Y==="c"||Y==="s"||Y==="q"||Y==="t"?new T(2*f.x-d.x,2*f.y-d.y):new T(f.x,f.y)}const Q=r.length,M=zs.CC(null);let O=!1,D=!1,K=!1,J=!0,R=null;const G=new RegExp("["+Si.Hg+"]");for(;!(A>=Q-1);){if(a=o,o=B(),o==="")continue;g=!0;let Y=!1;switch(o.toUpperCase()){case"X":J=!0,O=!1,D=!1;break;case"M":for(R=F(),M.Si===null||J===!0?(M.du(R.x,R.y,O,!1,!D,K),J=!1):M.$D(R.x,R.y),h.a(f);!x();)R=F(),M.yr(R.x,R.y);break;case"L":for(;!x();)R=F(),M.yr(R.x,R.y);g&&(Y=!0);break;case"H":for(;!x();)f.i((o===o.toLowerCase()?f.x:0)+parseFloat(B()),f.y),M.yr(f.x,f.y);break;case"V":for(;!x();)f.i(f.x,(o===o.toLowerCase()?f.y:0)+parseFloat(B())),M.yr(f.x,f.y);g&&(Y=!0);break;case"C":for(;!x();){const Z=new T;C(Z);const et=b(),At=F();M.wr(Z.x,Z.y,et.x,et.y,At.x,At.y)}g&&(Y=!0);break;case"S":for(;!x();){const Z=L(),et=b(),At=F();M.wr(Z.x,Z.y,et.x,et.y,At.x,At.y)}g&&(Y=!0);break;case"Q":for(;!x();){const Z=b(),et=F();M.Sw(Z.x,Z.y,et.x,et.y)}g&&(Y=!0);break;case"T":for(;!x();){const Z=L();d.a(Z);const et=F();M.Sw(Z.x,Z.y,et.x,et.y),d.a(et)}g&&(Y=!0);break;case"B":for(;!x();){const Z=parseFloat(B()),et=parseFloat(B());let At=parseFloat(B()),ht=parseFloat(B());const nt=parseFloat(B());let gt=nt,Ct=!1;x()||(gt=parseFloat(B()),x()||(Ct=parseFloat(B())!==0)),o===o.toLowerCase()&&(At+=f.x,ht+=f.y),M.ZD(Z,et,At,ht,nt,gt,Ct)}g&&(Y=!0);break;case"A":for(;!x();){const Z=Math.abs(parseFloat(B())),et=Math.abs(parseFloat(B())),At=parseFloat(B());let ht=!1,nt=!1,gt=0,Ct=0;const Wt=B();Wt.length===1?(ht=!!parseFloat(Wt),nt=!!parseFloat(B()),gt=parseFloat(B()),Ct=parseFloat(B())):Wt.length===2?(ht=!!parseFloat(Wt[0]),nt=!!parseFloat(Wt[1]),gt=parseFloat(B()),Ct=parseFloat(B())):(ht=!!parseFloat(Wt[0]),nt=!!parseFloat(Wt[1]),gt=parseFloat(Wt.slice(2)),Ct=parseFloat(B())),o===o.toLowerCase()&&(gt=f.x+gt,Ct=f.y+Ct),f.i(gt,Ct),M.QD(Z,et,At,ht,nt,gt,Ct)}g&&(Y=!0);break;case"Z":M._D(),f.a(h);break;case"F":{let Z="",et=1;for(;r[A+et];){if(r[A+et]==="0"){K=!0,et++;continue}if(r[A+et].match(/[Uu]/)!==null){et++;continue}if(r[A+et].match(G)===null){et++;continue}Z=r[A+et];break}Z.match(/[Mm]/)?O=!0:M.tF();break}case"U":{let Z="",et=1;for(;r[A+et];){if(r[A+et].match(/[Ff]/)!==null){et++;continue}if(r[A+et].match(G)===null){et++;continue}Z=r[A+et];break}Z.match(/[Mm]/)?D=!0:M.iF(!1);break}default:if(o==="0"||o==="1")break;u.ri("Unknown geometry command: "+o);break}if(Y){u.ri(`Bad geometry command: ${o}, next token: ${B()},
string: ${e}`);break}}const W=M.jg;if(zs.LC(M),t){const Y=W.figures.iterator;for(;Y.next();){const Z=Y.value;Z.isFilled=!0}}return W}static AC(e,t){const i=e.length,n=T.l();for(let s=0;s<i;s++){const r=e[s];n.x=r[0],n.y=r[1],t.bt(n),r[0]=n.x,r[1]=n.y,n.x=r[2],n.y=r[3],t.bt(n),r[2]=n.x,r[3]=n.y,n.x=r[4],n.y=r[5],t.bt(n),r[4]=n.x,r[5]=n.y,n.x=r[6],n.y=r[7],t.bt(n),r[6]=n.x,r[7]=n.y}T.e(n)}Vk(){if(this.Pt)return!0;if(this.type===4){const e=this.figures;if(this.Kg!==e.ct)return!0;const t=this.figures.r,i=t.length;for(let n=0;n<i;n++)if(t[n].Vk())return!0}return!1}Mw(){if(this.Pt=!1,this.lc=null,this.fu=null,this.uu=NaN,this.type===4){const t=this.figures;this.Kg=t.ct;const i=this.figures.r,n=i.length;for(let s=0;s<n;s++)i[s].eF()}const e=this.Gg;e.Tt(),isNaN(this.hc)||isNaN(this.ac)?e.i(0,0,0,0):e.i(0,0,this.hc,this.ac),this.TC(e,!1),e.unionNoCheck(0,0,0,0),e.g()}computeBoundsWithoutOrigin(){const e=new it;return this.TC(e,!0),e}TC(e,t){switch(this.type){case 1:case 2:case 3:t?e.i(this.Pe,this.Se,0,0):e.unionNoCheck(this.Pe,this.Se,0,0),e.unionNoCheck(this.ie,this.ee,0,0);break;case 4:const i=this.figures,n=i.r,s=i.length;for(let r=0;r<s;r++){const A=n[r];t&&r===0?e.i(A.startX,A.startY,0,0):e.unionNoCheck(A.startX,A.startY,0,0);const o=A.segments.r,a=o.length;let h=A.startX,d=A.startY;for(let f=0;f<a;f++){const g=o[f];switch(g.type){case 2:case 1:h=g.endX,d=g.endY,e.unionNoCheck(h,d,0,0);break;case 3:V.cu(h,d,g.point1X,g.point1Y,g.point2X,g.point2Y,g.endX,g.endY,.5,e),h=g.endX,d=g.endY;break;case 4:V.Uk(h,d,g.point1X,g.point1Y,g.endX,g.endY,.5,e),h=g.endX,d=g.endY;break;case 5:case 6:const x=g.type===5?g.Ao(A):g.Kh(A,h,d),B=x.length;if(B===0){h=g.type===5?g.centerX:g.endX,d=g.type===5?g.centerY:g.endY,e.unionNoCheck(h,d,0,0);break}let C=null;for(let F=0;F<B;F++)C=x[F],V.cu(C[0],C[1],C[2],C[3],C[4],C[5],C[6],C[7],.5,e);C!==null&&(h=C[6],d=C[7]);break;default:u.o("Unknown Segment type: "+g.type)}}}break;default:u.o("Unknown Geometry type: "+this.type)}}sF(e,t){const i=this.bounds;let n=e/i.width,s=t/i.height;return isFinite(n)||(n=1),isFinite(s)||(s=1),n===1&&s===1?this:this.copy().scale(n,s)}normalize(){this.h&&u.D(this);const e=this.computeBoundsWithoutOrigin();return this.offset(-e.x,-e.y),new T(-e.x,-e.y)}offset(e,t){return this.h&&u.D(this),this.F(1,0,0,1,e,t),this}scale(e,t){return this.h&&u.D(this),this.F(e,0,0,t,0,0),this}rotate(e,t,i){this.h&&u.D(this),t===void 0&&(t=0),i===void 0&&(i=0);const n=Bt.l();return n.Ii(),n.ds(e,t,i),this.F(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),Bt.e(n),this}F(e,t,i,n,s,r){let A=0,o=0;switch(this.type){case 1:case 2:case 3:A=this.Pe,o=this.Se,this.Pe=A*e+o*i+s,this.Se=A*t+o*n+r,A=this.ie,o=this.ee,this.ie=A*e+o*i+s,this.ee=A*t+o*n+r;break;case 4:const a=this.figures.r,h=a.length;for(let d=0;d<h;d++){const f=a[d];A=f.startX,o=f.startY,f.startX=A*e+o*i+s,f.startY=A*t+o*n+r;const g=f.segments.r,x=g.length;for(let B=0;B<x;B++){const C=g[B];switch(C.type){case 2:case 1:A=C.endX,o=C.endY,C.endX=A*e+o*i+s,C.endY=A*t+o*n+r;break;case 3:A=C.point1X,o=C.point1Y,C.point1X=A*e+o*i+s,C.point1Y=A*t+o*n+r,A=C.point2X,o=C.point2Y,C.point2X=A*e+o*i+s,C.point2Y=A*t+o*n+r,A=C.endX,o=C.endY,C.endX=A*e+o*i+s,C.endY=A*t+o*n+r;break;case 4:A=C.point1X,o=C.point1Y,C.point1X=A*e+o*i+s,C.point1Y=A*t+o*n+r,A=C.endX,o=C.endY,C.endX=A*e+o*i+s,C.endY=A*t+o*n+r;break;case 5:if(A=C.centerX,o=C.centerY,C.centerX=A*e+o*i+s,C.centerY=A*t+o*n+r,t!==0){let F=Math.atan2(t,e)*180/Math.PI;F<0&&(F+=360),C.startAngle+=F}e<0&&(C.startAngle=180-C.startAngle,C.sweepAngle=-C.sweepAngle),n<0&&(C.startAngle=-C.startAngle,C.sweepAngle=-C.sweepAngle),C.radiusX*=Math.sqrt(e*e+i*i),C.radiusY!==void 0&&(C.radiusY*=Math.sqrt(t*t+n*n));break;case 6:if(A=C.endX,o=C.endY,C.endX=A*e+o*i+s,C.endY=A*t+o*n+r,C.radiusX===0||C.radiusY===0)break;if(t!==0){let F=Math.atan2(t,e)*180/Math.PI;F<0&&(F+=360),C.xAxisRotation+=F}e<0&&(C.xAxisRotation=180-C.xAxisRotation,C.isClockwiseArc=!C.isClockwiseArc),n<0&&(C.xAxisRotation=-C.xAxisRotation,C.isClockwiseArc=!C.isClockwiseArc),C.radiusX*=Math.sqrt(e*e+i*i),C.radiusY*=Math.sqrt(t*t+n*n);break;default:u.o("Unknown Segment type: "+C.type)}}}break}return this.Pt=!0,this}containsPoint(e,t){t===void 0&&(t=0);const i=this.Pe,n=this.Se,s=this.ie,r=this.ee;switch(this.type){case 1:return V.Ei(i,n,s,r,t,e.x,e.y);case 2:{const A=Math.min(i,s)-t,o=Math.min(n,r)-t,a=Math.abs(s-i)+t*2,h=Math.abs(r-n)+t*2,d=it.Y(A,o,a,h),f=d.containsPoint(e);return it.e(d),f}case 3:{let A=Math.min(i,s)-t,o=Math.min(n,r)-t;const a=Math.abs(s-i)+t*2,h=Math.abs(r-n)+t*2,d=a/2,f=h/2;return d<=0||f<=0?!1:(A=e.x-(A+d),o=e.y-(o+f),A*A/(d*d)+o*o/(f*f)<=1)}case 4:return this.zk(e,t,!0,!1);default:return!1}}zk(e,t,i,n){const s=e.x,r=e.y,A=this.bounds.x-20,o=r;let a=0,h=0,d=0,f=0,g=0,x=0;const B=this.figures.r,C=B.length;for(let F=0;F<C;F++){const b=B[F],L=!b.isEvenOdd;if(b.isFilled){if(i&&b.Xk(s,r,t))return!0}else{if(b.Xk(s,r,n?t:t+2))return!0;continue}const Q=b.segments;h=b.startX,d=b.startY;let M=h,O=d;const D=Q.r;for(let K=0;K<=Q.length;K++){let J,R;switch(K!==Q.length?(J=D[K],R=J.type,g=J.endX,x=J.endY):(R=2,g=M,x=O),R){case 1:{const G=this.Nw(s,r,A,o,h,d,M,O);if(isNaN(G))return!0;a+=G,M=g,O=x;break}case 2:{const G=this.Nw(s,r,A,o,h,d,g,x);if(isNaN(G))return!0;a+=G;break}case 3:f=V.Vg(h,d,J.point1X,J.point1Y,J.point2X,J.point2Y,g,x,A,o,s,r,.5),a+=f;break;case 4:{const G=(h+2*J.point1X)/3,W=(d+2*J.point1Y)/3,Y=(J.point1X*2+g)/3,Z=(J.point1Y*2+x)/3;f=V.Vg(h,d,G,W,Y,Z,g,x,A,o,s,r,.5),a+=f;break}case 5:case 6:{const G=J.type===5?J.Ao(b):J.Kh(b,h,d),W=G.length;if(W===0){const Z=this.Nw(s,r,A,o,h,d,J.type===5?J.centerX:J.endX,J.type===5?J.centerY:J.endY);if(isNaN(Z))return!0;a+=Z;break}let Y=null;for(let Z=0;Z<W;Z++){if(Y=G[Z],Z===0){const et=this.Nw(s,r,A,o,h,d,Y[0],Y[1]);if(isNaN(et))return!0;a+=et}f=V.Vg(Y[0],Y[1],Y[2],Y[3],Y[4],Y[5],Y[6],Y[7],A,o,s,r,.5),a+=f}Y!==null&&(g=Y[6],x=Y[7]);break}default:u.o("Unknown Segment type: "+J.type)}h=g,d=x}if(L){if(a!==0)return!0}else if(a%2!==0)return!0;a=0}return!1}Nw(e,t,i,n,s,r,A,o){if(V.Ei(s,r,A,o,.05,e,t))return NaN;const a=(e-i)*(r-o);if(a===0)return 0;const h=((e*n-t*i)*(s-A)-(e-i)*(s*o-r*A))/a,d=(e*n-t*i)*(r-o)/a;if(h>=e)return 0;if((s>A?s-A:A-s)<(r>o?r-o:o-r)){if(r<o){if(d<r||d>o)return 0}else if(d<o||d>r)return 0}else if(s<A){if(h<s||h>A)return 0}else if(h<A||h>s)return 0;return a>0?1:-1}DC(e,t,i){const n=this.figures.r,s=n.length;for(let r=0;r<s;r++)if(n[r].Xk(e,t,i))return!0;return!1}getPointAlongPath(e,t){if(e<0?e=0:e>1&&(e=1),t===void 0&&(t=new T),this.type===1)return t.i(this.startX+e*(this.endX-this.startX),this.startY+e*(this.endY-this.startY)),t;const i=this.flattenedSegments,n=this.flattenedLengths,s=this.flattenedTotalLength,r=i.length,A=s*e;let o=0;for(let a=0;a<r;a++){const h=n[a],d=h.length;for(let f=0;f<d;f++){const g=h[f];if(o+g>=A){const x=A-o,B=g===0?0:x/g,C=i[a],F=C[f*2],b=C[f*2+1],L=C[f*2+2],Q=C[f*2+3];return t.i(F+(L-F)*B,b+(Q-b)*B),t}o+=g}}return t}getAngleAlongPath(e){if(e<0?e=0:e>1&&(e=1),this.type===1)return Math.atan2(this.endY-this.startY,this.endX-this.startX)*180/Math.PI;const t=this.flattenedSegments,i=this.flattenedLengths,n=this.flattenedTotalLength,s=t.length,r=n*e;let A=0;for(let o=0;o<s;o++){const a=i[o],h=a.length;for(let d=0;d<h;d++){const f=a[d];if(A+f>=r){const g=t[o],x=g[d*2],B=g[d*2+1],C=g[d*2+2],F=g[d*2+3];return Math.abs(C-x)<1&&Math.abs(F-B)<1?0:Math.abs(C-x)<1?F-B>=0?90:270:Math.abs(F-B)<1?C-x>=0?0:180:Math.atan2(F-B,C-x)*180/Math.PI}A+=f}}return NaN}getPointAndAngleAlongPath(e,t){if(e<0?e=0:e>1&&(e=1),t===void 0&&(t=[]),t.length=3,this.type===1)return t[0]=this.startX+e*(this.endX-this.startX),t[1]=this.startY+e*(this.endY-this.startY),t[2]=Math.atan2(this.endY-this.startY,this.endX-this.startX)*180/Math.PI,t;const i=this.flattenedSegments,n=this.flattenedLengths,s=this.flattenedTotalLength,r=i.length,A=s*e;let o=0;for(let a=0;a<r;a++){const h=n[a],d=h.length;for(let f=0;f<d;f++){const g=h[f];if(o+g>=A){const x=A-o,B=g===0?0:x/g,C=i[a],F=C[f*2],b=C[f*2+1],L=C[f*2+2],Q=C[f*2+3];t[0]=F+(L-F)*B,t[1]=b+(Q-b)*B;let M;return Math.abs(L-F)<1&&Math.abs(Q-b)<1?M=0:Math.abs(L-F)<1?M=Q-b>=0?90:270:Math.abs(Q-b)<1?M=L-F>=0?0:180:M=Math.atan2(Q-b,L-F)*180/Math.PI,t[2]=M,t}o+=g}}return t}getFractionForPoint(e){if(this.type===1){const t=this.startX,i=this.startY,n=this.endX,s=this.endY;if(t===n&&i===s)return 0;{const r=e.x,A=e.y;let o=0,a=0;if(t===n)return i<s?(o=i,a=s):(o=s,a=i),A<=o?o===i?0:1:A>=a?a===i?0:1:Math.abs(A-i)/(a-o);if(i===s)return t<n?(o=t,a=n):(o=n,a=t),r<=o?o===t?0:1:r>=a?a===t?0:1:Math.abs(r-t)/(a-o);{const h=(n-t)*(n-t)+(s-i)*(s-i),d=T.l();V.kl(t,i,n,s,r,A,d);const f=d.x,g=d.y;return T.e(d),Math.sqrt(((f-t)*(f-t)+(g-i)*(g-i))/h)}}}else if(this.type===2){const t=this.startX,i=this.startY,n=this.endX,s=this.endY;if(t===n&&i===s)return 0;{const r=n-t,A=s-i,o=r*2+A*2;let a=e.x,h=e.y;a=Math.min(Math.max(a,t),n),h=Math.min(Math.max(h,i),s);const d=Math.abs(a-t),f=Math.abs(a-n),g=Math.abs(h-i),x=Math.abs(h-s),B=Math.min(d,f,g,x);if(B===g)return a/o;if(B===f)return(r+h)/o;if(B===x)return(r*2+A-a)/o;if(B===d)return(r*2+A*2-h)/o}}else{const t=this.flattenedSegments,i=this.flattenedLengths,n=this.flattenedTotalLength,s=T.l();let r=1/0,A=0,o=0;const a=t.length;let h=0,d=0;for(let g=0;g<a;g++){const x=t[g],B=i[g],C=x.length;for(let F=0;F<C;F+=2){const b=x[F],L=x[F+1];if(F===0){h=b,d=L;continue}V.kl(h,d,b,L,e.x,e.y,s);const Q=(s.x-e.x)*(s.x-e.x)+(s.y-e.y)*(s.y-e.y);Q<r&&(r=Q,A=o,A+=Math.sqrt((s.x-h)*(s.x-h)+(s.y-d)*(s.y-d))),o+=B[(F-2)/2],h=b,d=L}}T.e(s);const f=A/n;return f<0?0:f>1?1:f}return 0}get flattenedSegments(){return this.FC(),this.lc}FC(){if(this.lc===null){const e=this.lc=[],t=this.fu=[];this.nF(e,t)}}get flattenedLengths(){return this.FC(),this.fu}get flattenedTotalLength(){let e=this.uu;if(isNaN(e)){if(this.type===1){const t=Math.abs(this.endX-this.startX),i=Math.abs(this.endY-this.startY);e=Math.sqrt(t*t+i*i)}else if(this.type===2){const t=Math.abs(this.endX-this.startX),i=Math.abs(this.endY-this.startY);e=t*2+i*2}else{const t=this.flattenedLengths,i=t.length;e=0;for(let n=0;n<i;n++){const s=t[n],r=s.length;for(let A=0;A<r;A++)e+=s[A]}}this.uu=e}return e}Yk(e){const t=[];let i=0,n=0;const s=e.length;for(let r=0;r<s;r+=2){const A=e[r],o=e[r+1];if(r===0){i=A,n=o;continue}const a=Math.sqrt(T.distanceSquared(i,n,A,o));t.push(a),i=A,n=o}return t}nF(e,t){let i=[];const n=[];if(this.type===1)i.push(this.startX),i.push(this.startY),i.push(this.endX),i.push(this.endY),e.push(i),n.push(Math.sqrt((this.startX-this.endX)*(this.startX-this.endX)+(this.startY-this.endY)*(this.startY-this.endY))),t.push(n);else if(this.type===2)i.push(this.startX),i.push(this.startY),i.push(this.endX),i.push(this.startY),i.push(this.endX),i.push(this.endY),i.push(this.startX),i.push(this.endY),i.push(this.startX),i.push(this.startY),e.push(i),n.push(Math.abs(this.startX-this.endX)),n.push(Math.abs(this.startY-this.endY)),n.push(Math.abs(this.startX-this.endX)),n.push(Math.abs(this.startY-this.endY)),t.push(n);else if(this.type===3){const s=new ve;s.startX=this.endX,s.startY=(this.startY+this.endY)/2;const r=new Nt(5);r.startAngle=0,r.sweepAngle=360,r.centerX=(this.startX+this.endX)/2,r.centerY=(this.startY+this.endY)/2,r.radiusX=Math.abs(this.startX-this.endX)/2,r.radiusY=Math.abs(this.startY-this.endY)/2,s.add(r);const A=r.Ao(s),o=A.length;if(o===0)i.push(r.centerX),i.push(r.centerY);else{let a=s.startX,h=s.startY;for(let d=0;d<o;d++){const f=A[d];V.Yn(a,h,f[2],f[3],f[4],f[5],f[6],f[7],.5,i),a=f[6],h=f[7]}}e.push(i),t.push(this.Yk(i))}else{const s=this.figures.iterator;for(;s.next();){const r=s.value;i=[],i.push(r.startX),i.push(r.startY);let A=r.startX,o=r.startY,a=A,h=o;const d=r.segments.r,f=d.length;for(let g=0;g<f;g++){const x=d[g];switch(x.type){case 1:i.length>=4&&(e.push(i),t.push(this.Yk(i))),i=[],i.push(x.endX),i.push(x.endY),A=x.endX,o=x.endY,a=A,h=o;break;case 2:i.push(x.endX),i.push(x.endY),A=x.endX,o=x.endY;break;case 3:V.Yn(A,o,x.point1X,x.point1Y,x.point2X,x.point2Y,x.endX,x.endY,.5,i),A=x.endX,o=x.endY;break;case 4:V.Bg(A,o,x.point1X,x.point1Y,x.endX,x.endY,.5,i),A=x.endX,o=x.endY;break;case 5:{const B=x.Ao(r),C=B.length;if(C===0){i.push(x.centerX),i.push(x.centerY),A=x.centerX,o=x.centerY;break}for(let F=0;F<C;F++){const b=B[F];V.Yn(A,o,b[2],b[3],b[4],b[5],b[6],b[7],.5,i),A=b[6],o=b[7]}break}case 6:{const B=x.Kh(r,A,o),C=B.length,F=x.endX,b=x.endY;if(C===0){i.push(F),i.push(b),A=F,o=b;break}for(let L=0;L<C;L++){const Q=B[L];V.Yn(A,o,Q[2],Q[3],Q[4],Q[5],Q[6],Q[7],.5,i),A=Q[6],o=Q[7]}break}default:u.o("Segment not of valid type: "+x.type)}x.isClosed&&(i.push(a),i.push(h))}i.length>=4&&(e.push(i),t.push(this.Yk(i)))}}}get type(){return this._}set type(e){this._!==e&&(this.h&&u.D(this,e),this._=e,e===4?this.Is=new H:(Si.Pw===null&&(Si.Pw=new H().g()),this.Is=Si.Pw),this.Pt=!0)}get startX(){return this.Pe}set startX(e){this.Pe!==e&&(this.h&&u.D(this,e),this.Pe=e,this.Pt=!0)}get startY(){return this.Se}set startY(e){this.Se!==e&&(this.h&&u.D(this,e),this.Se=e,this.Pt=!0)}get endX(){return this.ie}set endX(e){this.ie!==e&&(this.h&&u.D(this,e),this.ie=e,this.Pt=!0)}get endY(){return this.ee}set endY(e){this.ee!==e&&(this.h&&u.D(this,e),this.ee=e,this.Pt=!0)}get figures(){return this.Is}set figures(e){this.Is!==e&&(this.h&&u.D(this,e),this.Is=e,this.Pt=!0)}add(e){return this.Is.add(e),this}setSpots(e,t,i,n,s,r,A,o){return this.h&&u.D(this),this.Hn=new q(e,t,s,r).g(),this.jn=new q(i,n,A,o).g(),this}get spot1(){return this.Hn}set spot1(e){this.h&&u.D(this,e),this.Hn=e.N()}get spot2(){return this.jn}set spot2(e){this.h&&u.D(this,e),this.jn=e.N()}get defaultStretch(){return this.qn}set defaultStretch(e){this.qn=e}get bounds(){return this.Vk()&&this.Mw(),this.Gg}};p(Si,"Line",1),p(Si,"Rectangle",2),p(Si,"Ellipse",3),p(Si,"Path",4),p(Si,"Pw",new H().g()),p(Si,"Hg","UuBbMmZzLlHhVvCcSsQqTtAaFfXx");let Jt=Si;Jt.stringify=Jt.stringify,Jt.stringifyFixed=Jt.stringifyFixed,Jt.fillPath=Jt.fillPath,Jt.parse=Jt.parse;class ve{constructor(e,t,i,n,s){p(this,"n");p(this,"Pe");p(this,"Se");p(this,"cc");p(this,"qg");p(this,"Ve");i===void 0&&(i=!0),n===void 0&&(n=!0),s===void 0&&(s=!1),this.n=2|(i?4:0)|(n?8:0)|(s?16:0),e!==void 0?this.Pe=e:this.Pe=0,t!==void 0?this.Se=t:this.Se=0,this.cc=new H,this.qg=this.cc.ct,this.Ve=null}copy(){const e=new ve;e.n=this.n&-2,e.Pe=this.Pe,e.Se=this.Se;const t=this.cc.r,i=t.length,n=e.cc;for(let s=0;s<i;s++){const r=t[s].copy();n.add(r)}return e.qg=this.qg,e.Ve=this.Ve,e}equalsApprox(e){if(!(e instanceof ve)||!V.u(this.startX,e.startX)||!V.u(this.startY,e.startY))return!1;const t=this.segments.r,i=e.segments.r,n=t.length;if(n!==i.length)return!1;for(let s=0;s<n;s++){const r=t[s],A=i[s];if(!r.equalsApprox(A))return!1}return!0}toString(e){e===void 0&&(e=-1);let t="";if(e<0)t="M"+this.startX.toString()+" "+this.startY.toString();else{const s=r=>r===0?"0":r.toFixed(e);t="M"+s(this.startX)+" "+s(this.startY)}const i=this.segments.r,n=i.length;for(let s=0;s<n;s++){const r=i[s];t+=" "+r.toString(e)}return t}get h(){return(this.n&1)!==0}set h(e){e?this.n|=1:this.n&=-2}get Pt(){return(this.n&2)!==0}set Pt(e){e?this.n|=2:this.n&=-3}g(){this.h=!0;const e=this.segments;e.g();const t=e.r,i=e.length;for(let n=0;n<i;n++)t[n].g();return this}Vk(){if(this.Pt)return!0;const e=this.segments;if(this.qg!==e.ct)return!0;for(const t of e)if(t.Pt)return!0;return!1}eF(){this.Pt=!1,this.Ve=null;const e=this.segments;this.qg=e.ct;for(const t of e)t.Pt=!1,t.Es=null}get isFilled(){return(this.n&4)!==0}set isFilled(e){this.h&&u.D(this,e),e?this.n|=4:this.n&=-5}get isShadowed(){return(this.n&8)!==0}set isShadowed(e){this.h&&u.D(this,e),e?this.n|=8:this.n&=-9}get isEvenOdd(){return(this.n&16)!==0}set isEvenOdd(e){this.h&&u.D(this,e),e?this.n|=16:this.n&=-17}get startX(){return this.Pe}set startX(e){this.h&&u.D(this,e),this.Pe=e,this.Ve=null,this.Pt=!0}get startY(){return this.Se}set startY(e){this.h&&u.D(this,e),this.Se=e,this.Ve=null,this.Pt=!0}get segments(){return this.cc}set segments(e){this.h&&u.D(this,e),this.cc=e,this.Ve=null,this.Pt=!0}add(e){return this.cc.add(e),this.Ve=null,this}Xk(e,t,i){const n=this;let s=n.startX,r=n.startY,A=s,o=r;const a=n.segments.r,h=a.length;for(let d=0;d<h;d++){const f=a[d];switch(f.type){case 1:A=f.endX,o=f.endY,s=f.endX,r=f.endY;break;case 2:if(V.Ei(s,r,f.endX,f.endY,i,e,t))return!0;s=f.endX,r=f.endY;break;case 3:if(V.bw(s,r,f.point1X,f.point1Y,f.point2X,f.point2Y,f.endX,f.endY,.5,e,t,i))return!0;s=f.endX,r=f.endY;break;case 4:if(V.Bk(s,r,f.point1X,f.point1Y,f.endX,f.endY,.5,e,t,i))return!0;s=f.endX,r=f.endY;break;case 5:case 6:const g=f.type===5?f.Ao(n):f.Kh(n,s,r),x=g.length,B=f.type===5?f.centerX:f.endX,C=f.type===5?f.centerY:f.endY;if(x===0){if(V.Ei(s,r,B,C,i,e,t))return!0;s=B,r=C;break}let F=null;for(let b=0;b<x;b++)if(F=g[b],b===0&&V.Ei(s,r,F[0],F[1],i,e,t)||V.bw(F[0],F[1],F[2],F[3],F[4],F[5],F[6],F[7],.5,e,t,i))return!0;F!==null&&(s=F[6],r=F[7]);break;default:u.o("Unknown Segment type: "+f.type)}if(f.isClosed&&(s!==A||r!==o)&&V.Ei(s,r,A,o,i,e,t))return!0}return!1}}var $e=(k=>(k[k.Move=1]="Move",k[k.Line=2]="Line",k[k.Bezier=3]="Bezier",k[k.QuadraticBezier=4]="QuadraticBezier",k[k.Arc=5]="Arc",k[k.SvgArc=6]="SvgArc",k))($e||{});const yn=class yn{constructor(e,t,i,n,s,r,A,o){p(this,"_");p(this,"n");p(this,"ie");p(this,"ee");p(this,"cn");p(this,"Sl");p(this,"Ml");p(this,"xr");p(this,"Es");if(X.qi(this),e===void 0&&(e=2),this._=e,this.n=2,t!==void 0?this.ie=t:this.ie=0,i!==void 0?this.ee=i:this.ee=0,n===void 0&&(n=0),s===void 0&&(s=0),r===void 0&&(r=0),A===void 0&&(A=0),e===6){let a=r;a=a%360,a<0&&(a+=360),this.cn=a,this.Sl=0,this.Ml=Math.max(n,0),this.xr=Math.max(s,0),typeof A=="boolean"?A&&(this.isLargeArc=!0):typeof A=="number"&&A&&(this.isLargeArc=!0),o&&(this.isClockwiseArc=!0)}else this.cn=n,this.Sl=s,e===5&&(r=Math.max(r,0)),this.Ml=r,typeof A=="number"?(e===5&&(A=Math.max(A,0)),this.xr=A):this.xr=0;this.Es=null}copy(){const e=new yn;return e._=this._,e.n=this.n&-2,e.ie=this.ie,e.ee=this.ee,e.cn=this.cn,e.Sl=this.Sl,e.Ml=this.Ml,e.xr=this.xr,e}equalsApprox(e){if(!(e instanceof yn)||this.type!==e.type||this.isClosed!==e.isClosed)return!1;switch(this.type){case 1:case 2:return V.u(this.endX,e.endX)&&V.u(this.endY,e.endY);case 3:return V.u(this.endX,e.endX)&&V.u(this.endY,e.endY)&&V.u(this.point1X,e.point1X)&&V.u(this.point1Y,e.point1Y)&&V.u(this.point2X,e.point2X)&&V.u(this.point2Y,e.point2Y);case 4:return V.u(this.endX,e.endX)&&V.u(this.endY,e.endY)&&V.u(this.point1X,e.point1X)&&V.u(this.point1Y,e.point1Y);case 5:return V.u(this.startAngle,e.startAngle)&&V.u(this.sweepAngle,e.sweepAngle)&&V.u(this.centerX,e.centerX)&&V.u(this.centerY,e.centerY)&&V.u(this.radiusX,e.radiusX)&&V.u(this.radiusY,e.radiusY);case 6:return this.isClockwiseArc===e.isClockwiseArc&&this.isLargeArc===e.isLargeArc&&V.u(this.xAxisRotation,e.xAxisRotation)&&V.u(this.endX,e.endX)&&V.u(this.endY,e.endY)&&V.u(this.radiusX,e.radiusX)&&V.u(this.radiusY,e.radiusY);default:return!1}}li(e){e in $e?this.type=e:u.ur(this,e)}toString(e){e===void 0&&(e=-1);const t=n=>n===0?"0":n.toFixed(e);let i="";switch(this.type){case 1:e<0?i="M"+this.endX.toString()+" "+this.endY.toString():i="M"+t(this.endX)+" "+t(this.endY);break;case 2:e<0?i="L"+this.endX.toString()+" "+this.endY.toString():i="L"+t(this.endX)+" "+t(this.endY);break;case 3:e<0?i="C"+this.point1X.toString()+" "+this.point1Y.toString()+" "+this.point2X.toString()+" "+this.point2Y.toString()+" "+this.endX.toString()+" "+this.endY.toString():i="C"+t(this.point1X)+" "+t(this.point1Y)+" "+t(this.point2X)+" "+t(this.point2Y)+" "+t(this.endX)+" "+t(this.endY);break;case 4:e<0?i="Q"+this.point1X.toString()+" "+this.point1Y.toString()+" "+this.endX.toString()+" "+this.endY.toString():i="Q"+t(this.point1X)+" "+t(this.point1Y)+" "+t(this.endX)+" "+t(this.endY);break;case 5:e<0?i="B"+this.startAngle.toString()+" "+this.sweepAngle.toString()+" "+this.centerX.toString()+" "+this.centerY.toString()+" "+this.radiusX.toString()+" "+this.radiusY.toString():i="B"+t(this.startAngle)+" "+t(this.sweepAngle)+" "+t(this.centerX)+" "+t(this.centerY)+" "+t(this.radiusX)+" "+t(this.radiusY);break;case 6:e<0?i="A"+this.radiusX.toString()+" "+this.radiusY.toString()+" "+this.xAxisRotation.toString()+" "+(this.isLargeArc?1:0)+" "+(this.isClockwiseArc?1:0)+" "+this.endX.toString()+" "+this.endY.toString():i="A"+t(this.radiusX)+" "+t(this.radiusY)+" "+t(this.xAxisRotation)+" "+(this.isLargeArc?1:0)+" "+(this.isClockwiseArc?1:0)+" "+t(this.endX)+" "+t(this.endY);break;default:i=$e[this.type]}return i+(this.isClosed?"z":"")}get h(){return(this.n&1)!==0}set h(e){e?this.n|=1:this.n&=-2}get Pt(){return(this.n&2)!==0}set Pt(e){e?this.n|=2:this.n&=-3}g(){return this.h=!0,this}close(){return this.isClosed=!0,this}Ao(e){if(this.Es!==null&&e.Pt===!1)return this.Es;const t=this.radiusX;let i=this.radiusY;if(i===void 0&&(i=t),t===0||i===0)return this.Es=[],this.Es;const n=this.cn,s=this.Sl,r=V.SC(0,0,t<i?t:i,this.startAngle,this.startAngle+this.sweepAngle,!1);if(t!==i){const o=Bt.l();o.Ii(),t<i?o.rt(1,i/t):o.rt(t/i,1),Jt.AC(r,o),Bt.e(o)}const A=r.length;for(let o=0;o<A;o++){const a=r[o];a[0]+=n,a[1]+=s,a[2]+=n,a[3]+=s,a[4]+=n,a[5]+=s,a[6]+=n,a[7]+=s}return this.Es=r,this.Es}Kh(e,t,i){if(this.Es!==null&&e.Pt===!1)return this.Es;if(this.radiusX===0||this.radiusY===0)return this.Es=[],this.Es;const n=t,s=i;let r=this.Ml,A=this.xr;r===0&&(r=1e-4),A===0&&(A=1e-4);const o=this.cn*(Math.PI/180),a=this.isLargeArc,h=this.isClockwiseArc,d=this.ie,f=this.ee,g=Math.cos(o),x=Math.sin(o),B=g*(n-d)/2+x*(s-f)/2,C=-x*(n-d)/2+g*(s-f)/2,F=B*B/(r*r)+C*C/(A*A);F>1&&(r*=Math.sqrt(F),A*=Math.sqrt(F));let b=(a===h?-1:1)*Math.sqrt((r*r*A*A-r*r*C*C-A*A*B*B)/(r*r*C*C+A*A*B*B));isNaN(b)&&(b=0);let L=b*r*C/A,Q=b*-A*B/r;isNaN(L)&&(L=0),isNaN(Q)&&(Q=0);const M=(n+d)/2+g*L-x*Q,O=(s+f)/2+x*L+g*Q,D=(St,Qt)=>Math.sqrt(St*St+Qt*Qt),K=(St,Qt,Mt,Ut)=>(St*Mt+Qt*Ut)/(D(St,Qt)*D(Mt,Ut)),J=(St,Qt,Mt,Ut)=>(St*Ut<Qt*Mt?-1:1)*Math.acos(K(St,Qt,Mt,Ut)),R=J(1,0,(B-L)/r,(C-Q)/A),G=(B-L)/r,W=(C-Q)/A,Y=(-B-L)/r,Z=(-C-Q)/A;let et=J(G,W,Y,Z);const At=K(G,W,Y,Z);At<=-1?et=Math.PI:At>=1&&(et=0),!h&&et>0&&(et=et-2*Math.PI),h&&et<0&&(et=et+2*Math.PI);const ht=r>A?r:A,nt=r>A?1:r/A,gt=r>A?A/r:1,Ct=V.SC(0,0,ht,R,R+et,!0),Wt=Bt.l();return Wt.Ii(),Wt.Os(M,O),Wt.ds(this.cn,0,0),Wt.rt(nt,gt),Jt.AC(Ct,Wt),Bt.e(Wt),this.Es=Ct,this.Es}get isClosed(){return(this.n&8)!==0}set isClosed(e){this.isClosed!==e&&(e?this.n|=8:this.n&=-9,this.Pt=!0)}get type(){return this._}set type(e){this.h&&u.D(this,e),this._=e,this.Pt=!0}get endX(){return this.ie}set endX(e){this.h&&u.D(this,e),this.ie=e,this.Pt=!0}get endY(){return this.ee}set endY(e){this.h&&u.D(this,e),this.ee=e,this.Pt=!0}get point1X(){return this.cn}set point1X(e){this.h&&u.D(this,e),this.cn=e,this.Pt=!0}get point1Y(){return this.Sl}set point1Y(e){this.h&&u.D(this,e),this.Sl=e,this.Pt=!0}get point2X(){return this.Ml}set point2X(e){this.h&&u.D(this,e),this.Ml=e,this.Pt=!0}get point2Y(){return this.xr}set point2Y(e){this.h&&u.D(this,e),this.xr=e,this.Pt=!0}get centerX(){return this.cn}set centerX(e){this.h&&u.D(this,e),this.cn=e,this.Pt=!0}get centerY(){return this.Sl}set centerY(e){this.h&&u.D(this,e),this.Sl=e,this.Pt=!0}get radiusX(){return this.Ml}set radiusX(e){e<0&&u.it(e,">= zero",yn,"radiusX"),this.h&&u.D(this,e),this.Ml=e,this.Pt=!0}get radiusY(){return this.xr}set radiusY(e){e<0&&u.it(e,">= zero",yn,"radiusY"),this.h&&u.D(this,e),this.xr=e,this.Pt=!0}get startAngle(){return this.ie}set startAngle(e){this.h&&u.D(this,e),e=e%360,e<0&&(e+=360),this.ie=e,this.Pt=!0}get sweepAngle(){return this.ee}set sweepAngle(e){this.h&&u.D(this,e),e>360&&(e=360),e<-360&&(e=-360),this.ee=e,this.Pt=!0}get isClockwiseArc(){return(this.n&4)!==0}set isClockwiseArc(e){this.h&&u.D(this,e),e?this.n|=4:this.n&=-5,this.Pt=!0}get isLargeArc(){return(this.n&16)!==0}set isLargeArc(e){this.h&&u.D(this,e),e?this.n|=16:this.n&=-17,this.Pt=!0}get xAxisRotation(){return this.cn}set xAxisRotation(e){this.h&&u.D(this,e),e=e%360,e<0&&(e+=360),this.cn=e,this.Pt=!0}};p(yn,"Move",1),p(yn,"Line",2),p(yn,"Bezier",3),p(yn,"QuadraticBezier",4),p(yn,"Arc",5),p(yn,"SvgArc",6);let Nt=yn;class Le{constructor(){p(this,"k");p(this,"Cw");p(this,"Lw");p(this,"Wg");p(this,"Jg");p(this,"$g");p(this,"Zg");p(this,"Qg");p(this,"_g");p(this,"tm");p(this,"im");p(this,"em");p(this,"sm");p(this,"nm");p(this,"To");p(this,"om");p(this,"rm");p(this,"lm");p(this,"Me");this.k=null,this.Cw=new T(0,0).g(),this.Lw=new T(0,0).g(),this.Wg=0,this.Jg=0,this.$g=1,this.Zg="",this.Qg="",this._g=!1,this.tm=!1,this.im=0,this.em=0,this.sm=!1,this.nm=!1,this.To=!1,this.om=null,this.rm=0,this.lm=null,this.Me=null}copy(){const e=new Le;return this.clone(e)}clone(e){return e.k=this.k,e.Cw.a(this.viewPoint),e.Lw.a(this.documentPoint),e.Wg=this.Wg,e.Jg=this.Jg,e.$g=this.$g,e.Zg=this.Zg,e.Qg=this.Qg,e._g=this._g,e.tm=this.tm,e.im=this.im,e.em=this.em,e.sm=this.sm,e.nm=this.nm,e.To=this.To,e.om=this.om,e.rm=this.rm,e.lm=this.lm,e.Me=this.Me,e}toString(){let e="^";return this.modifiers!==0&&(e+="M:"+this.modifiers),this.button!==0&&(e+="B:"+this.button),this.key!==""&&(e+="K:"+this.key),this.clickCount!==0&&(e+="C:"+this.clickCount),this.delta!==0&&(e+="D:"+this.delta),this.handled&&(e+="h"),this.bubbles&&(e+="b"),this.documentPoint!==null&&(e+="@"+this.documentPoint.toString()),e}get diagram(){return this.k}set diagram(e){this.k=e}get viewPoint(){return this.Cw}set viewPoint(e){this.Cw.a(e)}get documentPoint(){return this.Lw}set documentPoint(e){this.Lw.a(e)}getMultiTouchViewPoint(e,t){const i=this.diagram;return i===null||i.RC(this.event,e,t),t}getMultiTouchDocumentPoint(e,t){const i=this.diagram;return i===null||(i.RC(this.event,e,t),t.a(i.transformViewToDoc(t))),t}get modifiers(){return this.Wg}set modifiers(e){this.Wg=e}get button(){return this.Jg}set button(e){if(this.Jg=e,this.event===null)switch(e){case 0:this.buttons=1;return;case 1:this.buttons=4;return;case 2:this.buttons=2;return}}get buttons(){return this.$g}set buttons(e){this.$g=e}get key(){return this.Zg}set key(e){this.Zg=e}get code(){return this.Qg}set code(e){this.Qg=e}get down(){return this._g}set down(e){this._g=e}get up(){return this.tm}set up(e){this.tm=e}get clickCount(){return this.im}set clickCount(e){this.im=e}get delta(){return this.em}set delta(e){this.em=e}get isMultiTouch(){return this.sm}set isMultiTouch(e){this.sm=e}get handled(){return this.nm}set handled(e){this.nm=e}get bubbles(){return this.To}set bubbles(e){this.To=e}get event(){return this.om}set event(e){this.om=e}get isTouchEvent(){const e=this.event;return e===null?!1:e.pointerType==="touch"||e.pointerType==="pen"}get timestamp(){return this.rm}set timestamp(e){this.rm=e}get targetDiagram(){return this.lm}set targetDiagram(e){this.lm=e}get targetObject(){return this.Me}set targetObject(e){this.Me=e}get control(){return(this.modifiers&1)!==0}set control(e){this.modifiers=e?this.modifiers|1:this.modifiers&-2}get shift(){return(this.modifiers&4)!==0}set shift(e){this.modifiers=e?this.modifiers|4:this.modifiers&-5}get alt(){return(this.modifiers&2)!==0}set alt(e){this.modifiers=e?this.modifiers|2:this.modifiers&-3}get meta(){return(this.modifiers&8)!==0}set meta(e){this.modifiers=e?this.modifiers|8:this.modifiers&-9}get left(){const e=this.event;return e!==null&&(e.type==="mousedown"||e.type==="mouseup"||e.type==="pointerdown"||e.type==="pointerup")?this.button===0:(this.buttons&1)!==0}set left(e){e?this.buttons|=1:this.buttons&=-2}get right(){const e=this.event;return e!==null&&(e.type==="mousedown"||e.type==="mouseup"||e.type==="pointerdown"||e.type==="pointerup")?this.button===2:(this.buttons&2)!==0}set right(e){e?this.buttons|=2:this.buttons&=-3}get middle(){const e=this.event;return e!==null&&(e.type==="mousedown"||e.type==="mouseup"||e.type==="pointerdown"||e.type==="pointerup")?this.button===1:(this.buttons&4)!==0}set middle(e){e?this.buttons|=4:this.buttons&=-5}get commandKey(){const e=this.code,t=this.key;return"cxvyzagCXVYZAG".includes(t)?t.toLowerCase():e==="KeyC"?"c":e==="KeyX"?"x":e==="KeyV"?"v":e==="KeyY"?"y":e==="KeyZ"?"z":e==="KeyA"?"a":e==="KeyG"?"g":e!==""?e:t}}class pi{constructor(){p(this,"k");p(this,"Ct");p(this,"hm");p(this,"am");this.k=null,this.Ct="",this.hm=null,this.am=null}copy(){const e=new pi;return e.k=this.k,e.Ct=this.Ct,e.hm=this.hm,e.am=this.am,e}toString(){let e="*"+this.name;return this.subject!==null&&(e+=":"+this.subject.toString()),this.parameter!==null&&(e+="("+this.parameter.toString()+")"),e}get diagram(){return this.k}set diagram(e){this.k=e}get name(){return this.Ct}set name(e){this.Ct=e}get subject(){return this.hm}set subject(e){this.hm=e}get parameter(){return this.am}set parameter(e){this.am=e}}var Ve=(k=>(k[k.Transaction=1]="Transaction",k[k.Property=2]="Property",k[k.Insert=3]="Insert",k[k.Remove=4]="Remove",k))(Ve||{});const Ln=class Ln{constructor(){p(this,"gu");p(this,"cm");p(this,"fn");p(this,"Mi");p(this,"k");p(this,"mu");p(this,"fc");p(this,"uc");p(this,"dc");p(this,"gc");this.gu=2,this.cm="",this.fn="",this.Mi=null,this.k=null,this.mu=null,this.fc=null,this.uc=null,this.dc=null,this.gc=null}clear(){this.Mi=null,this.k=null,this.mu=null,this.fc=null,this.uc=null,this.dc=null,this.gc=null}copy(){const e=new Ln;e.gu=this.gu,e.cm=this.cm,e.fn=this.fn,e.Mi=this.Mi,e.k=this.k,e.mu=this.mu;let t=this.fc;return u.j(t)&&u.lt(t.copyFrozen)?e.fc=t.copyFrozen():e.fc=t,t=this.uc,u.j(t)&&u.lt(t.copyFrozen)?e.uc=t.copyFrozen():e.uc=t,t=this.dc,u.j(t)&&u.lt(t.copyFrozen)?e.dc=t.copyFrozen():e.dc=t,t=this.gc,u.j(t)&&u.lt(t.copyFrozen)?e.gc=t.copyFrozen():e.gc=t,e}li(e){e in Ve?this.change=e:u.ur(this,e)}toString(){let e="";return this.change===1?e+="* ":this.change===2?e+=this.model!==null?"!m":"!d":e+=(this.model!==null?"!m":"!d")+this.change,this.propertyName&&typeof this.propertyName=="string"&&(e+=" "+this.propertyName),this.modelChange&&this.modelChange!==this.propertyName&&(e+=" "+this.modelChange),e+=": ",this.change===1?this.oldValue!==null&&(e+=" "+this.oldValue):(this.object!==null&&(e+=u.toString(this.object)),this.oldValue!==null&&(e+="  old: "+u.toString(this.oldValue)),this.oldParam!==null&&(e+=" "+this.oldParam),this.newValue!==null&&(e+="  new: "+u.toString(this.newValue)),this.newParam!==null&&(e+=" "+this.newParam)),e}getValue(e){return e?this.oldValue:this.newValue}getParam(e){return e?this.oldParam:this.newParam}canUndo(){return this.model!==null||this.diagram!==null}undo(){this.canUndo()&&(this.model!==null?this.model.changeState(this,!0):this.diagram!==null&&this.diagram.vC(this,!0))}canRedo(){return this.model!==null||this.diagram!==null}redo(){this.canRedo()&&(this.model!==null?this.model.changeState(this,!1):this.diagram!==null&&this.diagram.vC(this,!1))}get model(){return this.Mi}set model(e){this.Mi=e}get diagram(){return this.k}set diagram(e){this.k=e}get change(){return this.gu}set change(e){this.gu=e}get modelChange(){return this.cm}set modelChange(e){this.cm=e}get propertyName(){return this.fn}set propertyName(e){this.fn=e}get isTransactionFinished(){return this.gu===1&&(this.fn==="CommittedTransaction"||this.fn==="FinishedUndo"||this.fn==="FinishedRedo")}get object(){return this.mu}set object(e){this.mu=e}get oldValue(){return this.fc}set oldValue(e){this.fc=e}get oldParam(){return this.uc}set oldParam(e){this.uc=e}get newValue(){return this.dc}set newValue(e){this.dc=e}get newParam(){return this.gc}set newParam(e){this.gc=e}};p(Ln,"Transaction",1),p(Ln,"Property",2),p(Ln,"Insert",3),p(Ln,"Remove",4);let ke=Ln;class jt{constructor(){p(this,"OC");p(this,"Ct");p(this,"Kk");this.OC=new H().g(),this.Ct="",this.Kk=!1}toString(e){let t="Transaction: "+this.name+" "+this.changes.count.toString()+(this.isComplete?"":", incomplete");if(e!==void 0&&e>0){const i=this.changes.count;for(let n=0;n<i;n++){const s=this.changes.elt(n);s!==null&&(t+=`
  `+s.toString())}}return t}clear(){const e=this.changes;e.Tt();for(let t=e.count-1;t>=0;t--){const i=e.elt(t);i!==null&&i.clear()}e.clear(),e.g()}canUndo(){return this.isComplete}undo(){if(this.canUndo())for(let e=this.changes.count-1;e>=0;e--){const t=this.changes.elt(e);t!==null&&t.undo()}}canRedo(){return this.isComplete}redo(){if(!this.canRedo())return;const e=this.changes.count;for(let t=0;t<e;t++){const i=this.changes.elt(t);i!==null&&i.redo()}}oF(e){const t=this.changes;for(let i=t.count-1;i>=e;i--){const n=t.elt(i);n!==null&&n.undo(),t.Tt(),t.removeAt(i)}t.g()}optimize(){if(!this.isComplete)return;const e=this.changes;e.Tt();const t=new xt;for(let n=0;n<e.count;n++){const s=e.elt(n);if(s===null||s.change!==2||!s.object)continue;let r=t.get(s.object);r||(r=new xt,t.set(s.object,r));const A=r.get(s.propertyName);A===null?r.set(s.propertyName,-1):(A>0&&e.setElt(A,null),r.set(s.propertyName,n))}let i=0;for(let n=0;n<e.count;n++){const s=e.elt(n);s!==null&&(n>i&&e.setElt(i,s),i++)}for(;e.length>i;)e.pop();e.g()}get changes(){return this.OC}get name(){return this.Ct}set name(e){this.Ct=e}get isComplete(){return this.Kk}set isComplete(e){this.Kk=e}}class Ae{constructor(e){p(this,"Aw");p(this,"Bi");p(this,"IC");p(this,"Bs");p(this,"Gk");p(this,"fm");p(this,"Wn");p(this,"Hk");p(this,"jk");p(this,"un");p(this,"mc");p(this,"Tw");p(this,"Us");p(this,"Dw");p(this,"Fw");p(this,"um");p(this,"Rw");this.Aw=new X,this.Bi=!1,this.IC=new H().g(),this.Bs=-1,this.Gk=999,this.Us=!1,this.fm=null,this.Wn=0,this.Hk=!1,this.jk=23,this.un=new H().g(),this.mc=new H,this.Tw=!0,this.Dw=!1,this.Fw=!1,this.um=!1,this.Rw=!1,e&&Object.assign(this,e)}toString(e){let t="UndoManager "+this.historyIndex+"<"+this.history.count+"<="+this.maxHistoryLength;t+="[";let i=this.nestedTransactionNames.count;for(let n=0;n<i;n++)n>0&&(t+=" "),t+=this.nestedTransactionNames.elt(n);if(t+="]",e!==void 0&&e>0){i=this.history.count;for(let n=0;n<i;n++)t+=`
 `+this.history.elt(n).toString(e-1)}return t}clear(){const e=this.history;e.Tt();for(let t=e.count-1;t>=0;t--){const i=e.elt(t);i!==null&&i.clear()}e.clear(),this.Bs=-1,e.g(),this.Us=!1,this.fm=null,this.Wn=0,this.un.Tt(),this.un.clear(),this.un.g(),this.mc.clear(),this.Dw=!1,this.Fw=!1,this.um=!1,this.Rw=!1}copyProperties(e){this.isEnabled=e.isEnabled,this.maxHistoryLength=e.maxHistoryLength,this.dm=e.dm}addModel(e){this.Aw.add(e)}removeModel(e){this.Aw.delete(e)}startTransaction(e){if(e===void 0&&(e=""),e===null&&(e=""),this.isUndoingRedoing)return!1;this.Tw===!0&&(this.Tw=!1,this.Wn++,this.Nl||this.Cl("StartingFirstTransaction",e,this.currentTransaction),this.Wn>0&&this.Wn--),this.isEnabled&&(this.un.Tt(),this.un.add(e),this.un.g(),this.currentTransaction===null?this.mc.add(0):this.mc.add(this.currentTransaction.changes.count)),this.Wn++;const t=this.transactionLevel===1;return t&&(this.Nl||this.Cl("StartedTransaction",e,this.currentTransaction)),t}commitTransaction(e){return e===void 0&&(e=""),this.EC(!0,e)}rollbackTransaction(){return this.EC(!1,"")}EC(e,t){if(this.isUndoingRedoing)return!1;this.dm&&this.transactionLevel<1&&u.ri("Ending transaction without having started a transaction: "+t);const i=this.transactionLevel===1;let n=this.currentTransaction;i&&e&&(this.Nl||this.Cl("CommittingTransaction",t,n));let s=0;if(this.transactionLevel>0&&(this.Wn--,this.isEnabled)){const r=this.un.count;r>0&&(t===""&&(t=this.un.elt(0)),this.un.Tt(),this.un.removeAt(r-1),this.un.g());const A=this.mc.count;A>0&&(s=this.mc.elt(A-1),this.mc.removeAt(A-1))}if(i){if(e){if(this.um=!1,n===null&&t!==""&&(n=this.currentTransaction),this.isEnabled&&n!==null){const r=n;r.isComplete||(r.isComplete=!0,r.name=t),this.discardHistoryAfterIndex();const A=this.history;A.Tt();const o=this.maxHistoryLength;if(o>=0){if(o===0)A.clear();else if(A.count>=o){const a=A.elt(0);a!==null&&a.clear(),A.removeAt(0),this.Bs--}}o!==0&&(A.count===0||A.get(A.count-1)!==r)&&(A.add(r),this.Bs++),A.g(),n=r}this.Nl||this.Cl("CommittedTransaction",t,n)}else{this.Us=!0;try{this.isEnabled&&n!==null&&(n.isComplete=!0,n.undo())}finally{this.Nl||this.Cl("RolledBackTransaction",t,n),this.Us=!1}n!==null&&n.clear()}return this.fm=null,this.vw&&this.clear(),this.vw=!1,this.Ow=!1,!0}else return this.isEnabled&&!e&&n!==null&&n.oF(s),!1}discardHistoryAfterIndex(){if(this.isUndoingRedoing||!this.canRedo())return;const e=this.history;e.Tt();for(let t=e.count-1;t>this.historyIndex;t--){const i=e.elt(t);i!==null&&i.clear(),e.removeAt(t),this.um=!0}e.g()}yE(e){this.Wn+=e,this.Wn<0&&(this.Wn=0)}canUndo(){if(!this.isEnabled||this.transactionLevel>0)return!1;const e=this.transactionToUndo;return!!(e!==null&&e.canUndo())}undo(){if(!this.canUndo())return;const e=this.transactionToUndo;try{this.Us=!0,this.Cl("StartingUndo","Undo",e),this.Bs--,e.undo()}catch(t){u.ri("undo error: "+t.toString())}finally{this.Cl("FinishedUndo","Undo",e),this.Us=!1}}canRedo(){if(!this.isEnabled||this.transactionLevel>0)return!1;const e=this.transactionToRedo;return!!(e!==null&&e.canRedo())}redo(){if(!this.canRedo())return;const e=this.transactionToRedo;try{this.Us=!0,this.Cl("StartingRedo","Redo",e),this.Bs++,e.redo()}catch(t){u.ri("redo error: "+t.toString())}finally{this.Cl("FinishedRedo","Redo",e),this.Us=!1}}Cl(e,t,i){i===void 0&&(i=null);const n=new ke;n.change=1,n.propertyName=e,n.object=i,n.oldValue=t;const s=this.models;for(;s.next();){const r=s.value;n.model=r,r.rF(n)}}handleChanged(e){if(this.isEnabled&&!this.isUndoingRedoing&&!this.skipsEvent(e)){let t=this.currentTransaction;t===null&&(t=new jt,this.fm=t);const i=e.copy(),n=t.changes;if(n.Tt(),n.add(i),n.g(),this.dm&&this.jk>0&&this.transactionLevel<=0&&!this.Tw){const s=e.diagram;if(s!==null&&s.Gh===!1)return;u.ri("Change not within a transaction: "+i.toString()),this.jk--}}}skipsEvent(e){if(e===null||e.change===1)return!0;const t=e.object;if(t===null)return!1;if(t.layer!==void 0){const i=t.layer;if(i!==null&&i.isTemporary)return!0}else if(t.isTemporary)return!0;return!1}get models(){return this.Aw.iterator}get isEnabled(){return this.Bi}set isEnabled(e){this.Bi=e}get transactionToUndo(){return this.historyIndex>=0&&this.historyIndex<=this.history.count-1?this.history.elt(this.historyIndex):null}get transactionToRedo(){return this.historyIndex<this.history.count-1?this.history.elt(this.historyIndex+1):null}get isUndoingRedoing(){return this.Us}get history(){return this.IC}get maxHistoryLength(){return this.Gk}set maxHistoryLength(e){this.Gk=e}get historyIndex(){return this.Bs}get currentTransaction(){return this.fm}get transactionLevel(){return this.Wn}get isInTransaction(){return this.Wn>0}get dm(){return this.Hk}set dm(e){this.Hk=e}get nestedTransactionNames(){return this.un}get vw(){return this.Dw}set vw(e){this.Dw=e}get Ow(){return this.Fw}set Ow(e){this.Fw=e}get Nl(){return this.Rw}set Nl(e){this.Rw=e}get isJustDiscarded(){return this.um}}class Gt{constructor(){p(this,"k");p(this,"Ct");p(this,"Bi");p(this,"qk");p(this,"Wk");p(this,"gm");p(this,"BC");X.qi(this),this.k=ge.mm(),this.Ct="",this.Bi=!0,this.qk=!1,this.Wk=null,this.BC=new Le,this.gm=-1}get diagram(){return this.k}set diagram(e){e instanceof ge&&(this.k=e)}toString(){return this.name!==""?this.name+" Tool":u.Vn(this.constructor)}updateAdornments(e){}canStart(){return this.isEnabled}doStart(){}doActivate(){this.isActive=!0}doDeactivate(){this.isActive=!1}doStop(){}doCancel(){this.transactionResult=null,this.stopTool()}stopTool(){const e=this.diagram;e.currentTool===this&&(e.currentTool=null,e.currentCursor="")}doMouseDown(){!this.isActive&&this.canStart()&&this.doActivate()}doMouseMove(){}doMouseUp(){this.stopTool()}doMouseWheel(){}canStartMultiTouch(){return!0}standardPinchZoomStart(){const e=this.diagram,t=e.lastInput,i=t.getMultiTouchViewPoint(0,T.Y(NaN,NaN)),n=t.getMultiTouchViewPoint(1,T.Y(NaN,NaN));if(!i.isReal()||!n.isReal()){T.e(i),T.e(n);return}if(this.doCancel(),e.getInputOption("hasGestureZoom")){e.Jk=e.scale;const s=n.x-i.x,r=n.y-i.y,A=Math.sqrt(s*s+r*r);e.$k=A,t.bubbles=!1}T.e(i),T.e(n)}standardPinchZoomMove(){const e=this.diagram,t=e.lastInput,i=t.getMultiTouchViewPoint(0,T.Y(NaN,NaN)),n=t.getMultiTouchViewPoint(1,T.Y(NaN,NaN));if(!i.isReal()||!n.isReal()){T.e(i),T.e(n);return}if(this.doCancel(),e.getInputOption("hasGestureZoom")){const s=n.x-i.x,r=n.y-i.y,A=Math.sqrt(s*s+r*r)/e.$k,o=new T((Math.min(n.x,i.x)+Math.max(n.x,i.x))/2,(Math.min(n.y,i.y)+Math.max(n.y,i.y))/2),a=e.Jk*A,h=e.commandHandler;if(a!==e.scale&&h.canResetZoom(a)){const d=e.zoomPoint;e.zoomPoint=o,h.resetZoom(a),e.zoomPoint=d}t.bubbles=!1}T.e(i),T.e(n)}doKeyDown(){this.diagram.lastInput.code==="Escape"&&this.doCancel()}doKeyUp(){}startTransaction(e){return e===void 0&&(e=this.name),this.transactionResult=null,this.diagram.startTransaction(e)}stopTransaction(){const e=this.diagram;return this.transactionResult===null?e.rollbackTransaction():e.commitTransaction(this.transactionResult)}standardMouseSelect(){const e=this.diagram;if(!e.allowSelect)return;const t=e.lastInput,i=e.findPartAt(t.documentPoint,!1);if(i!==null){if(u.cr?t.meta:t.control){e.O("ChangingSelection",e.selection);let n=i;for(;n!==null&&!n.canSelect();)n=n.containingGroup;n!==null&&(n.isSelected=!n.isSelected),e.O("ChangedSelection",e.selection)}else if(t.shift){if(!i.isSelected){e.O("ChangingSelection",e.selection);let n=i;for(;n!==null&&!n.canSelect();)n=n.containingGroup;n!==null&&(n.isSelected=!0),e.O("ChangedSelection",e.selection)}}else if(!i.isSelected){let n=i;for(;n!==null&&!n.canSelect();)n=n.containingGroup;n!==null&&e.select(n)}}else t.left&&!(u.cr?t.meta:t.control)&&!t.shift&&e.clearSelection()}standardMouseClick(e,t){e===void 0&&(e=null),t===void 0&&(t=r=>!r.layer.isTemporary);const i=this.diagram,n=i.lastInput,s=i.findObjectAt(n.documentPoint,e,t);return n.targetObject=s,this.lF(s,n,i),n.handled}lF(e,t,i){if(t.handled=!1,e!==null&&!e.isEnabledObject())return;let n=0;t.left?t.clickCount===1?n=1:t.clickCount===2?n=2:n=1:t.right&&t.clickCount===1&&(n=3);let s="ObjectSingleClicked";if(e!==null){switch(n){case 1:s="ObjectSingleClicked";break;case 2:s="ObjectDoubleClicked";break;case 3:s="ObjectContextClicked";break}n!==0&&i.O(s,e)}else{switch(n){case 1:s="BackgroundSingleClicked";break;case 2:s="BackgroundDoubleClicked";break;case 3:s="BackgroundContextClicked";break}n!==0&&i.O(s)}if(e!==null)for(;e!==null;){let r=null;switch(n){case 1:r=e.click;break;case 2:r=e.doubleClick?e.doubleClick:e.click;break;case 3:r=e.contextClick;break}if(r!==null&&(r(t,e),t.handled))break;e=e.panel}else{let r=null;switch(n){case 1:r=i.click;break;case 2:r=i.doubleClick?i.doubleClick:i.click;break;case 3:r=i.contextClick;break}r!==null&&r(t)}}standardMouseOver(){const e=this.diagram,t=e.lastInput;if(e.animationManager.xi===!0)return;const i=e.skipsUndoManager;e.skipsUndoManager=!0;let n=e.viewportBounds.containsPoint(t.documentPoint)?e.findObjectAt(t.documentPoint,null,null):null;t.event&&(t.event.type==="pointercancel"||t.event.type==="pointerout")&&(n=null),t.targetObject=n;let s=!1;if(n!==e.pc){let r=e.pc;const A=r;for(e.pc=n,this.doCurrentObjectChanged(r,n),t.handled=!1;r!==null;){const o=r.mouseLeave;if(o!==null&&(n===r||n!==null&&n.isContainedBy(r)||(o(t,r,n),s=!0,t.handled)))break;r=r.panel}for(r=A,t.handled=!1;n!==null;){const o=n.mouseEnter;if(o!==null&&(r===n||r!==null&&r.isContainedBy(n)||(o(t,n,r),s=!0,t.handled)))break;n=n.panel}n=e.pc}if(n!==null){let r=n,A="";for(;r!==null&&(A=r.cursor,A==="");)r=r.panel;for(e.currentCursor=A,t.handled=!1,r=n;r!==null;){const o=r.mouseOver;if(o!==null&&(o(t,r),s=!0,t.handled))break;r=r.panel}}else{this.doUpdateCursor(null);const r=e.mouseOver;r!==null&&(r(t),s=!0)}s&&e.requestUpdate(),e.skipsUndoManager=i}doUpdateCursor(e){const t=this.diagram;t&&(t.currentCursor="")}doCurrentObjectChanged(e,t){}standardMouseWheel(){const e=this.diagram,t=e.lastInput;let i=t.delta;if(i===0||!e.documentBounds.isReal())return;const n=e.commandHandler,s=e.toolManager.mouseWheelBehavior;if(n!==null&&(s===2&&!t.shift||s===1&&t.control)){if(i>0?n.canIncreaseZoom():n.canDecreaseZoom()){const r=e.zoomPoint;e.zoomPoint=t.viewPoint,i>0?n.increaseZoom():n.decreaseZoom(),e.zoomPoint=r}t.bubbles=!1}else if(s===2&&t.shift||s===1&&!t.control){const r=e.position.copy(),A=t.event,o=A.deltaMode;let a=A.deltaX,h=A.deltaY,d="pixel";if((a!==0||h!==0)&&!t.shift){switch(o){case 0:d="pixel";break;case 1:d="line";break;case 2:d="page";break}if(a!==0&&e.allowHorizontalScroll){const f=e.scrollHorizontalLineChange;a=a*(f/16),e.scroll(d,a>0?"right":"left",Math.abs(a))}if(h!==0&&e.allowVerticalScroll){const f=e.scrollVerticalLineChange;h=h*(f/16),e.scroll(d,h>0?"down":"up",Math.abs(h))}}else!t.shift&&e.allowVerticalScroll?(i=i*3*e.scrollVerticalLineChange,e.scroll(d,i>0?"up":"down",Math.abs(i))):t.shift&&e.allowHorizontalScroll&&(i=i*3*e.scrollHorizontalLineChange,e.scroll(d,i>0?"left":"right",Math.abs(i)));this.doWheelChange(e,r,t)}}doWheelChange(e,t,i){(!e.position.equals(t)||i.event.wheelDeltaX!==0)&&(i.bubbles=!1)}standardWaitAfter(e,t){t===void 0&&(t=this.diagram.lastInput),this.cancelWaitAfter();const i=this,n=t.clone(this.BC);this.gm=u.fr(()=>i.doWaitAfter(n),e)}cancelWaitAfter(){this.gm!==-1&&u.vg(this.gm),this.gm=-1}doWaitAfter(e){}findToolHandleAt(e,t){const i=this.diagram.findObjectAt(e,n=>{for(;n!==null&&!(n.panel instanceof se);)n=n.panel;return n});return i===null?null:i.part.category===t?i:null}isBeyondDragSize(e,t){const i=this.diagram;e===void 0&&(e=i.firstInput.viewPoint),t===void 0&&(t=i.lastInput.viewPoint);const n=i.toolManager.dragSize;let s=n.width,r=n.height;return i.firstInput.isTouchEvent&&(s+=6,r+=6),Math.abs(t.x-e.x)>s||Math.abs(t.y-e.y)>r}get name(){return this.Ct}set name(e){this.Ct=e}get isEnabled(){return this.Bi}set isEnabled(e){this.Bi=e}get isActive(){return this.qk}set isActive(e){this.qk=e}get transactionResult(){return this.Wk}set transactionResult(e){this.Wk=e}}var at=(k=>(k[k.Scroll=1]="Scroll",k[k.Zoom=2]="Zoom",k[k.None=3]="None",k))(at||{}),kt=(k=>(k[k.Zoom=1]="Zoom",k[k.Cancel=2]="Cancel",k[k.None=3]="None",k))(kt||{});class ue extends Gt{constructor(t){super();p(this,"UC");p(this,"VC");p(this,"zC");p(this,"Zk");p(this,"Qk");p(this,"_k");p(this,"tP");p(this,"iP");p(this,"eP");p(this,"sP");p(this,"pm");p(this,"Hh");this.name="ToolManager",this.UC=new H,this.VC=new H,this.zC=new H,this.Zk=850,this.Qk=850,this._k=new ct(2,2).st(),this.tP=5e3,this.iP=1,this.eP=1,this.sP=null,this.pm=null,this.Hh=-1,t&&Object.assign(this,t)}get mouseWheelBehavior(){return this.iP}set mouseWheelBehavior(t){this.iP=t}get gestureBehavior(){return this.eP}set gestureBehavior(t){this.eP=t}initializeStandardTools(){}updateAdornments(t){const i=this.currentToolTip;if(i instanceof se&&this.pm===t){const n=i.adornedObject;(t!==null?n.part===t:n===null)?this.showToolTip(i,n):this.hideToolTip()}}doMouseDown(){const t=this.diagram,i=t.lastInput;if(i.isTouchEvent&&this.gestureBehavior===2&&(i.bubbles=!1),i.isMultiTouch){if(this.cancelWaitAfter(),this.gestureBehavior===3){i.bubbles=!0;return}if(this.gestureBehavior===2)return;if(t.currentTool.canStartMultiTouch()){t.currentTool.standardPinchZoomStart();return}}t.undoManager;const n=this.mouseDownTools.length;for(let s=0;s<n;s++){const r=this.mouseDownTools.elt(s);if(r.diagram=this.diagram,r.canStart()){t.doFocus(),t.currentTool=r,t.currentTool===r&&(r.isActive||r.doActivate(),r.doMouseDown());return}}t.lastInput.button===1&&(this.mouseWheelBehavior===1?this.mouseWheelBehavior=2:this.mouseWheelBehavior===2&&(this.mouseWheelBehavior=1)),this.doActivate(),this.standardWaitAfter(this.holdDelay,i)}doMouseMove(){const t=this.diagram,i=t.lastInput;if(i.isMultiTouch){if(this.gestureBehavior===3){i.bubbles=!0;return}if(this.gestureBehavior===2)return;if(t.currentTool.canStartMultiTouch()){t.currentTool.standardPinchZoomMove();return}}if(this.isActive){const s=this.mouseMoveTools.length;for(let r=0;r<s;r++){const A=this.mouseMoveTools.elt(r);if(A.diagram=this.diagram,A.canStart()){t.doFocus(),t.currentTool=A,t.currentTool===A&&(A.isActive||A.doActivate(),A.doMouseMove());return}}}this.standardMouseActivity(t);const n=i.event;n!==null&&(n.type==="pointermove"||!n.cancelable)&&(i.bubbles=!0)}standardMouseActivity(t){this.standardMouseOver(),this.isBeyondDragSize()&&this.standardWaitAfter(this.isActive?this.holdDelay:this.hoverDelay,t.lastInput)}doCurrentObjectChanged(t,i){const n=this.currentToolTip;n!==null&&(i!==null&&n instanceof se&&(i===n||i.isContainedBy(n))||this.hideToolTip())}doWaitAfter(t){const i=this.diagram;if(i.hF()&&(this.doMouseHover(),this.isActive||this.doToolTip(),t.isTouchEvent&&!i.lastInput.handled)){const n=t.copy();n.button=2,i.lastInput=n,i.Iw=!0,i.doMouseUp();return}}doMouseHover(){const t=this.diagram,i=t.lastInput;i.targetObject===null&&(i.targetObject=t.findObjectAt(i.documentPoint,null,null));let n=i.targetObject;if(n!==null)for(i.handled=!1;n!==null;){const s=this.isActive?n.mouseHold:n.mouseHover;if(s!==null&&(s(i,n),i.handled))break;n=n.panel}else{const s=this.isActive?t.mouseHold:t.mouseHover;s!==null&&s(i)}}doToolTip(){const t=this.diagram,i=t.lastInput;i.targetObject===null&&(i.targetObject=t.findObjectAt(i.documentPoint,null,null));let n=i.targetObject;if(n!==null){const s=this.currentToolTip;if(s instanceof se&&(n===s||n.isContainedBy(s)))return;for(;n!==null;){const r=n.toolTip;if(r!==null){this.showToolTip(r,n);return}n=n.panel}this.hideToolTip()}else{const s=t.toolTip;s!==null?this.showToolTip(s,null):this.hideToolTip()}}showToolTip(t,i){const n=this.diagram;if(t!==this.currentToolTip&&this.hideToolTip(),t instanceof se){t.layerName="Tool",t.selectable=!1,t.scale=1/n.scale,t.category="ToolTip",t.hasPlaceholder()&&(t.placeholder.scale=n.scale);const r=t.diagram;r!==null&&r!==n&&r.remove(t),n.add(t),i!==null?t.adornedObject=i:t.data=n.model,t.ensureBounds(),this.positionToolTip(t,i)}else t instanceof us&&t!==this.currentToolTip&&t.show(i,n,this);this.currentToolTip=t,this.Hh!==-1&&(u.vg(this.Hh),this.Hh=-1);const s=this.toolTipDuration;if(s>0&&s!==1/0){const r=this;this.Hh=u.fr(()=>r.hideToolTip(),s)}}positionToolTip(t,i){if(t.hasPlaceholder())return;const n=t,s=this.diagram,r=s.lastInput.documentPoint.copy(),A=n.measuredBounds,o=s.viewportBounds;s.lastInput.isTouchEvent&&(r.x-=A.width),r.x+A.width>o.right&&(r.x-=A.width+5/s.scale),r.x<o.x&&(r.x=o.x),r.y+20/s.scale+A.height>o.bottom?r.y-=A.height+5/s.scale:r.y+=20/s.scale,r.y<o.y&&(r.y=o.y),n.position=r}hideToolTip(){this.Hh!==-1&&(u.vg(this.Hh),this.Hh=-1);const t=this.diagram,i=this.currentToolTip;i!==null&&(i instanceof se?(t.remove(i),this.pm!==null&&this.pm.removeAdornment(i.category),i.data=null,i.adornedObject=null):i instanceof us&&i.hide!==null&&i.hide(t,this),this.currentToolTip=null)}get currentToolTip(){return this.sP}set currentToolTip(t){this.sP=t,this.pm=t!==null&&t instanceof se?t.adornedPart:null}doMouseUp(){this.cancelWaitAfter();const t=this.diagram;if(this.isActive){const i=this.mouseUpTools.length;for(let n=0;n<i;n++){const s=this.mouseUpTools.elt(n);if(s.diagram=this.diagram,s.canStart()){t.doFocus(),t.currentTool=s,t.currentTool===s&&(s.isActive||s.doActivate(),s.doMouseUp());return}}}t.doFocus(),this.doDeactivate()}doMouseWheel(){this.standardMouseWheel()}doKeyDown(){const t=this.diagram;t.commandHandler!==null&&t.commandHandler.doKeyDown()}doKeyUp(){const t=this.diagram;t.commandHandler!==null&&t.commandHandler.doKeyUp()}findTool(t){let i=this.mouseDownTools.length;for(let n=0;n<i;n++){const s=this.mouseDownTools.elt(n);if(s.name===t)return s}i=this.mouseMoveTools.length;for(let n=0;n<i;n++){const s=this.mouseMoveTools.elt(n);if(s.name===t)return s}i=this.mouseUpTools.length;for(let n=0;n<i;n++){const s=this.mouseUpTools.elt(n);if(s.name===t)return s}return null}replaceTool(t,i){i!==null&&(i.diagram=this.diagram);let n=this.mouseDownTools.length;for(let s=0;s<n;s++){const r=this.mouseDownTools.elt(s);if(r.name===t)return i!==null?this.mouseDownTools.setElt(s,i):this.mouseDownTools.removeAt(s),r}n=this.mouseMoveTools.length;for(let s=0;s<n;s++){const r=this.mouseMoveTools.elt(s);if(r.name===t)return i!==null?this.mouseMoveTools.setElt(s,i):this.mouseMoveTools.removeAt(s),r}n=this.mouseUpTools.length;for(let s=0;s<n;s++){const r=this.mouseUpTools.elt(s);if(r.name===t)return i!==null?this.mouseUpTools.setElt(s,i):this.mouseUpTools.removeAt(s),r}return null}replaceStandardTool(t,i,n){this.Zt(t,i,n)}Zt(t,i,n){i!==null&&(i.name=t,i.diagram=this.diagram),this.findTool(t)?this.replaceTool(t,i):i!==null&&n.add(i)}get mouseDownTools(){return this.UC}get mouseMoveTools(){return this.VC}get mouseUpTools(){return this.zC}get hoverDelay(){return this.Zk}set hoverDelay(t){this.Zk=t}get holdDelay(){return this.Qk}set holdDelay(t){this.Qk=t}get dragSize(){return this._k}set dragSize(t){this._k=t.N()}get toolTipDuration(){return this.tP}set toolTipDuration(t){this.tP=t}get actionTool(){return this.findTool("Action")}set actionTool(t){this.Zt("Action",t,this.mouseDownTools)}get relinkingTool(){return this.findTool("Relinking")}set relinkingTool(t){this.Zt("Relinking",t,this.mouseDownTools)}get linkReshapingTool(){return this.findTool("LinkReshaping")}set linkReshapingTool(t){this.Zt("LinkReshaping",t,this.mouseDownTools)}get resizingTool(){return this.findTool("Resizing")}set resizingTool(t){this.Zt("Resizing",t,this.mouseDownTools)}get rotatingTool(){return this.findTool("Rotating")}set rotatingTool(t){this.Zt("Rotating",t,this.mouseDownTools)}get linkingTool(){return this.findTool("Linking")}set linkingTool(t){this.Zt("Linking",t,this.mouseMoveTools)}get draggingTool(){return this.findTool("Dragging")}set draggingTool(t){this.Zt("Dragging",t,this.mouseMoveTools)}get dragSelectingTool(){return this.findTool("DragSelecting")}set dragSelectingTool(t){this.Zt("DragSelecting",t,this.mouseMoveTools)}get panningTool(){return this.findTool("Panning")}set panningTool(t){this.Zt("Panning",t,this.mouseMoveTools)}get contextMenuTool(){return this.findTool("ContextMenu")}set contextMenuTool(t){this.Zt("ContextMenu",t,this.mouseUpTools)}get textEditingTool(){return this.findTool("TextEditing")}set textEditingTool(t){this.Zt("TextEditing",t,this.mouseUpTools)}get clickCreatingTool(){return this.findTool("ClickCreating")}set clickCreatingTool(t){this.Zt("ClickCreating",t,this.mouseUpTools)}get clickSelectingTool(){return this.findTool("ClickSelecting")}set clickSelectingTool(t){this.Zt("ClickSelecting",t,this.mouseUpTools)}}p(ue,"WheelScroll",1),p(ue,"WheelZoom",2),p(ue,"WheelNone",3),p(ue,"GestureZoom",1),p(ue,"GestureCancel",2),p(ue,"GestureNone",3);const Me=class Me extends Gt{constructor(t){super();p(this,"nP");p(this,"oP");p(this,"dn");p(this,"rP");p(this,"lP");p(this,"hP");p(this,"aP");p(this,"yc");p(this,"ym");p(this,"cP");p(this,"jh");p(this,"br");p(this,"XC");p(this,"fP");p(this,"pu");p(this,"yu");p(this,"uP");p(this,"dP");p(this,"gP");p(this,"mP");this.name="Dragging",this.nP=!0,this.mP=!0,this.oP=!0,this.dn=null,this.rP=null,this.lP=null,this.hP=null,this.aP=!1,this.pu=!1,this.yc=new T(NaN,NaN),this.ym=new T,this.cP=!0,this.jh=100,this.br=[],this.XC=new X().g(),this.fP=new lr,this.yu=null,this.uP="copy",this.dP="",this.gP="no-drop",t&&Object.assign(this,t)}get isCopyEnabled(){return this.nP}set isCopyEnabled(t){this.nP=t}get copiesEffectiveCollection(){return this.oP}set copiesEffectiveCollection(t){this.oP=t}get dragOptions(){return this.fP}set dragOptions(t){this.fP=t}get isGridSnapEnabled(){return this.dragOptions.isGridSnapEnabled}set isGridSnapEnabled(t){this.dragOptions.isGridSnapEnabled=t}get isComplexRoutingRealtime(){return this.cP}set isComplexRoutingRealtime(t){this.cP=t;const i=this.diagram.findRouter("AvoidsLinks");i!==null&&(i.isRealtime=t)}get isGridSnapRealtime(){return this.dragOptions.isGridSnapRealtime}set isGridSnapRealtime(t){this.dragOptions.isGridSnapRealtime=t}get gridSnapCellSize(){return this.dragOptions.gridSnapCellSize}set gridSnapCellSize(t){this.dragOptions.gridSnapCellSize.equals(t)||(t=t.N(),this.dragOptions.gridSnapCellSize=t)}get gridSnapCellSpot(){return this.dragOptions.gridSnapCellSpot}set gridSnapCellSpot(t){this.dragOptions.gridSnapCellSpot.equals(t)||(t=t.N(),this.dragOptions.gridSnapCellSpot=t)}get gridSnapOrigin(){return this.dragOptions.gridSnapOrigin}set gridSnapOrigin(t){this.dragOptions.gridSnapOrigin.equals(t)||(t=t.N(),this.dragOptions.gridSnapOrigin=t)}get dragsLink(){return this.dragOptions.dragsLink}set dragsLink(t){this.dragOptions.dragsLink=t}get dragsTree(){return this.dragOptions.dragsTree}set dragsTree(t){this.dragOptions.dragsTree=t}get copyCursor(){return this.uP}set copyCursor(t){this.uP=t}get moveCursor(){return this.dP}set moveCursor(t){this.dP=t}get nodropCursor(){return this.gP}set nodropCursor(t){this.gP=t}get currentPart(){return this.rP}set currentPart(t){this.rP=t}get copiedParts(){return this.hP}set copiedParts(t){this.hP=t}get draggedParts(){return this.lP}set draggedParts(t){this.lP=t}get draggingParts(){return this.copiedParts!==null?this.copiedParts.toKeySet():this.draggedParts!==null?this.draggedParts.toKeySet():this.XC}get draggedLink(){return this.diagram.draggedLink}set draggedLink(t){this.diagram.draggedLink=t}get isDragOutStarted(){return this.aP}set isDragOutStarted(t){this.aP=t}get startPoint(){return this.ym}set startPoint(t){this.ym.equals(t)||this.ym.a(t)}get delay(){return this.jh}set delay(t){this.jh=t}canStart(){if(!this.isEnabled)return!1;const t=this.diagram;if(t===null||t.isReadOnly&&!t.allowDragOut||!t.allowMove&&!t.allowCopy&&!t.allowDragOut||!t.allowSelect)return!1;const i=t.lastInput;return!i.left||t.currentTool!==this&&(!this.isBeyondDragSize()||i.isTouchEvent&&i.timestamp-t.firstInput.timestamp<this.jh)?!1:this.findDraggablePart()!==null}findDraggablePart(){const t=this.diagram;let i=t.findPartAt(t.firstInput.documentPoint,!1);if(i===null)return null;for(;i!==null&&!i.canSelect();)i=i.containingGroup;return i!==null&&(i.canMove()||i.canCopy())?i:null}standardMouseSelect(){const t=this.diagram;if(!t.allowSelect)return;let i=t.findPartAt(t.firstInput.documentPoint,!1);if(i!==null){for(;i!==null&&!i.canSelect();)i=i.containingGroup;if(this.currentPart=i,this.currentPart!==null&&!this.currentPart.isSelected){t.O("ChangingSelection",t.selection);const n=t.lastInput;!(u.cr?n.meta:n.control)&&!n.shift&&t.clearSelection(!0),this.currentPart.isSelected=!0,t.O("ChangedSelection",t.selection)}}}doActivate(){const t=this.diagram;this.yu=null,this.currentPart===null&&this.standardMouseSelect();const i=this.currentPart;if(i===null||!i.canMove()&&!i.canCopy())return;t.cacheGroupExternalLinks(!0),Me.xt=null,this.isActive=!0,this.yc.set(t.position),this.pP(t.selection),this.br.length=0,t.animationManager.stopAnimation();const n=this.computeEffectiveCollection(t.selection,this.dragOptions);this.draggedParts=n,this.mP=this.diagram.layout.isRealtime,this.diagram.layout.isRealtime=!1,t.wc=!0,t.getRenderingHint("temporaryPixelRatio")===!0&&t.avgSpf>30&&t.Ew(),t.YC(this.draggedParts),t.wu=!0,this.startTransaction("Drag"),this.startPoint=t.firstInput.documentPoint,t.isMouseCaptured=!0,t.allowDragOut&&this.aF()}pP(t){if(!this.dragsLink)return;const i=this.diagram,n=i.model.wm(),s=t.first();n&&t.count===1&&s instanceof Xt&&this.mayDragLink(s)?(this.draggedLink=s,this.draggedLink.canRelinkFrom()&&this.draggedLink.canRelinkTo()&&this.draggedLink.clearAdornments(),this.dn=i.toolManager.findTool("Relinking"),this.dn===null&&(this.dn=new Ge,this.dn.diagram=i),this.dn.originalLink=this.draggedLink):(this.draggedLink=null,this.dn=null)}mayDragLink(t){const i=this.diagram;return i!==null&&i.allowRelink}computeEffectiveCollection(t,i){return this.diagram.commandHandler.computeEffectiveCollection(t,i)}Vs(t){return t===void 0?new ds(T.Lo):this.isGridSnapEnabled?new ds(new T(Math.round(t.x*1e3)/1e3,Math.round(t.y*1e3)/1e3)):new ds(t.copy())}doDeactivate(){this.isActive=!1;const t=this.diagram;this.diagram.layout.isRealtime=this.mP,t.wu=!1,t.Ll=!0,t.cacheGroupExternalLinks(!1),t.stopAutoScroll(),this.yP(),t.wP(this.draggedParts),this.yu=null,this.currentPart=null,this.draggedParts=null,this.isDragOutStarted=!1,this.pu=!1,Me.cF(),this.KC(),this.yc.i(NaN,NaN),Me.qh!==null&&(Me.qh.currentCursor=""),Me.qh=null,Me.xt=null,this.Al(),t.isMouseCaptured=!1,t.currentCursor="",t.wc=!1,this.stopTransaction(),t.xP(!0)}stopTransaction(){const t=this.diagram,i=super.stopTransaction();return i&&t.undoManager.transactionToUndo!==null&&t.undoManager.transactionToUndo.optimize(),i}yP(){const t=this.diagram,i=t.skipsUndoManager;t.skipsUndoManager=!0;const n=t.lastInput;this.GC(n,null),t.skipsUndoManager=i,this.br.length=0}HC(){this.Al(),this.bP();const t=this.diagram;this.yc.isReal()&&(t.position=this.yc),t.stopAutoScroll()}doCancel(){this.Al(),this.bP();const t=this.diagram;this.yc.isReal()&&(t.position=this.yc),this.stopTool()}doKeyDown(){const t=this.diagram;if(!this.isActive)return;const i=t.lastInput,n=t.previousInput;i.code==="Escape"?this.doCancel():(i.code!==n.code||i.modifiers!==n.modifiers)&&this.doMouseMove()}doKeyUp(){this.isActive&&this.doMouseMove()}fF(t,i){let n=1/0,s=1/0,r=-1/0,A=-1/0;const o=t.iterator;for(;o.next();){const a=o.value;if(!a.isVisible())continue;const h=a.location,d=h.x,f=h.y;isNaN(d)||isNaN(f)||(d<n&&(n=d),f<s&&(s=f),d>r&&(r=d),f>A&&(A=f))}return n===1/0?i.i(0,0,0,0):i.i(n,s,r-n,A-s),i}kP(t){if(this.copiedParts!==null)return;const i=this.diagram;if(t&&(i.isReadOnly||i.isModelReadOnly)||this.draggedParts===null)return;const n=i.undoManager;n.isEnabled&&n.isInTransaction?n.currentTransaction!==null&&n.currentTransaction.changes.count>0&&(i.undoManager.rollbackTransaction(),i.startTransaction("Drag")):this.bP(),i.skipsUndoManager=!t,i.partManager.addsToTemporaryLayer=!t,this.startPoint=i.firstInput.documentPoint;const s=this.copiesEffectiveCollection?this.draggedParts.toKeySet():i.selection,r=i.copyParts(s,i,!0),A=new xt,o=this.draggedParts.iterator;for(;o.next();){const h=o.key;if(h.Ne()&&h.canCopy()){const d=r.get(h);if(d===null)continue;d.location=h.location,d.ensureBounds(),A.set(d,this.Vs(d.location))}}const a=r.iterator;for(;a.next();){const h=a.value;h instanceof Xt&&h.canCopy()&&A.set(h,this.Vs())}if(this.copiedParts=A,this.pP(A.toKeySet()),this.draggedLink!==null){const h=this.draggedLink,d=h.routeBounds;h.kr(this.startPoint.x-(d.x+d.width/2),this.startPoint.y-(d.y+d.height/2))}this.doUpdateCursor(null)}Al(){const t=this.diagram;if(this.copiedParts!==null){if(t.removeParts(this.copiedParts.toKeySet(),!1),this.copiedParts=null,this.draggedParts!==null){const i=this.draggedParts.iterator;for(;i.next();)if(i.key instanceof Xt){const n=i.value;n.point=new T(0,0)}}this.doUpdateCursor(null)}t.skipsUndoManager=!1,t.partManager.addsToTemporaryLayer=!1,this.startPoint=t.firstInput.documentPoint}KC(){this.draggedLink!==null&&(this.dragsLink&&this.dn!==null&&(this.dn.stopDraggingMouseMove(),this.dn.originalLink=null),this.draggedLink=null,this.dn=null)}xc(t,i){const n=this.diagram,s=this.startPoint,r=T.l();r.a(n.lastInput.documentPoint),this.moveParts(t,r.subtract(s),i),T.e(r),n.getRenderingHint("temporaryPixelRatio")===!0&&n.Tl===null&&n.avgSpf>30&&(n.Ew(),n.xu())}moveParts(t,i,n){n===void 0&&(n=!1);const s=this.diagram;s!==null&&s.PP(t,i,this.dragOptions,n)}bP(){if(this.draggedParts===null)return;const t=this.diagram;let i=this.draggedParts.iterator;for(;i.next();){const n=i.key;n.Ne()&&(n.location=i.value.point)}for(i=this.draggedParts.iterator;i.next();){const n=i.key;if(n instanceof Xt&&n.suspendsRouting){const s=i.value.point;this.draggedParts.set(n,this.Vs()),n.kr(-s.x,-s.y)}}t.maybeUpdate()}uF(t){if(t===null)return!0;const i=t.part;return!!(i===null||i instanceof se||i.layer.isTemporary||this.draggedParts&&this.draggedParts.has(i)||this.copiedParts&&this.copiedParts.has(i))}SP(t){const i=this.diagram;this.dragsLink&&(this.draggedLink!==null&&(this.draggedLink.fromNode=null,this.draggedLink.toNode=null),this.jC(!1));const n=this.findDragOverObject(t),s=i.lastInput;s.targetObject=n,this.doUpdateCursor(n);const r=i.skipsUndoManager;let A=!1;try{if(i.skipsUndoManager=!0,A=this.GC(s,n),!this.isActive&&Me.xt===null)return;const o=n!==null?n.part:null;if(o===null||i.handlesDragDropForTopLevelParts&&o.isTopLevel&&!(o instanceof Vt)){const a=i.mouseDragOver;a!==null&&(a(s),A=!0)}if(!this.isActive&&Me.xt===null||(this.doDragOver(t,n),!this.isActive&&Me.xt===null))return}finally{i.skipsUndoManager=r,A&&i.maybeUpdate()}this.yu=n,!i.isReadOnly&&(i.allowMove||i.allowCopy)&&(i.allowHorizontalScroll||i.allowVerticalScroll)&&i.doAutoScroll(s.viewPoint)}findDragOverObject(t){return this.diagram.MP(t,null,i=>!this.uF(i))}doUpdateCursor(t){const i=this.diagram;(t===null||this.yu!==t)&&(!this.diagram.currentTool.isActive||this.mayCopy()?i.currentCursor=this.copyCursor:this.mayMove()?i.currentCursor=this.moveCursor:this.mayDragOut()&&(i.currentCursor=this.nodropCursor))}GC(t,i){let n=!1,s=this.br.length;const r=s>0?this.br[0]:null;if(i===r)return!1;t.handled=!1;for(let o=0;o<s;o++){const a=this.br[o],h=a.mouseDragLeave;if(h!==null&&(h(t,a,i),n=!0,t.handled))break}if(this.br.length=0,!this.isActive&&Me.xt===null||i===null)return n;t.handled=!1;let A=i;for(;A!==null;)this.br.push(A),A=this.qC(A);s=this.br.length;for(let o=0;o<s;o++){const a=this.br[o],h=a.mouseDragEnter;if(h!==null&&(h(t,a,r),n=!0,t.handled))break}return n}wE(t,i){return t===null?!1:!!(t===i||t.isContainedBy(i)||i instanceof Vt&&!(t instanceof Vt)&&i.handlesDragDropForMembers&&t.part.isMemberOf(i))}qC(t){const i=t.panel;if(i!==null)return i;if(t instanceof Ce&&!(t instanceof Vt)){const n=t.containingGroup;if(n!==null&&n.handlesDragDropForMembers)return n}return null}WC(t,i){const n=this.diagram,s=this.dn;if(s===null)return null;const r=s.portGravity,A=n.findObjectsNear(t,r,d=>s.findValidLinkablePort(d,i)),o=T.l();let a=1/0,h=null;for(const d=A.iterator;d.next();){const f=d.value;if(f.part===null)continue;const g=f.getDocumentPoint(q.Center,o),x=t.distanceSquaredPoint(g);x<a&&(h=f,a=x)}return T.e(o),h}jC(t){const i=this.draggedLink;if(i!==null){if(i.pointsCount<2)return;const n=this.diagram;if(n.isReadOnly)return;const s=this.dn;if(s===null)return;let r=null,A=null;i.fromNode===null&&(r=this.WC(i.getPoint(0),!1),r!==null&&(A=r.part));let o=null,a=null;i.toNode===null&&(o=this.WC(i.getPoint(i.pointsCount-1),!0),o!==null&&(a=o.part)),s.isValidLink(A,r,a,o)?t?(i.defaultFromPoint=i.getPoint(0),i.defaultToPoint=i.getPoint(i.pointsCount-1),i.suspendsRouting=!1,i.fromNode=A,r!==null&&(i.fromPortId=r.portId),i.toNode=a,o!==null&&(i.toPortId=o.portId),i.fromPort!==n.NP&&n.O("LinkRelinked",i,n.NP),i.toPort!==n.CP&&n.O("LinkRelinked",i,n.CP)):s.doDraggingMouseMove(A,r,a,o):s.doDraggingMouseMove(null,null,null,null)}}doDragOver(t,i){}JC(t){const i=this.diagram;this.dragsLink&&this.jC(!0),this.yP();const n=this.findDragOverObject(t),s=i.lastInput;if(s.targetObject=n,n!==null){s.handled=!1;let a=n;for(;a!==null;){const h=a.mouseDrop;if(h!==null&&(h(s,a),s.handled))break;this.dF(s,a),a=this.qC(a)}}else{const a=i.mouseDrop;a!==null&&a(s)}if(!this.isActive&&Me.xt===null)return;const r=(this.copiedParts||this.draggedParts).iterator;for(;r.next();){const a=r.key;a instanceof Et&&a.linksConnected.each(h=>h.suspendsRouting=!1)}if(this.doDropOnto(t,n),!this.isActive&&Me.xt===null)return;const A=it.l(),o=i.selection.iterator;for(;o.next();){const a=o.value;a instanceof Et&&this.gF(i,a,A)}it.e(A)}dF(t,i){const n=this.diagram,s=i.part;if(n.handlesDragDropForTopLevelParts&&s.isTopLevel&&!(s instanceof Vt)){const r=n.mouseDrop;r!==null&&r(t)}}gF(t,i,n){if(!i.canAvoid())return;let s=!1;n=i.getAvoidableRect(n),t.viewportBounds.containsRect(n)&&(s=!0);const r=this.copiedParts||this.draggedParts,A=t.LP(n,a=>a.part,a=>a instanceof Xt,!0,a=>a instanceof Xt,s);if(A.count===0)return;const o=A.iterator;for(;o.next();){const a=o.value;r.has(a)&&r.has(i)||!a.isMemberOf(i)&&a.isAvoiding&&a.invalidateRoute()}}doDropOnto(t,i){}doMouseMove(){if(!this.isActive)return;const t=this.diagram,i=t.lastInput;this.simulatedMouseMove(i.event,i.documentPoint,i.targetDiagram)||this.currentPart!==null&&this.draggedParts!==null&&(this.mayCopy()?(this.kP(!1),this.xc(this.copiedParts,!1)):this.mayMove()?(this.Al(),this.xc(this.draggedParts,!0)):this.mayDragOut()?(this.kP(!1),this.xc(this.copiedParts,!1)):this.Al(),this.SP(t.lastInput.documentPoint))}doMouseUp(){if(!this.isActive)return;const t=this.diagram,i=t.lastInput;if(this.simulatedMouseUp(i.event,i.documentPoint,i.targetDiagram))return;let n=!1;const s=this.mayCopy();if(s&&this.copiedParts!==null?(this.Al(),this.kP(!0),this.xc(this.copiedParts,!1),this.copiedParts!==null&&(t.O("ChangingSelection",t.selection),t.clearSelection(!0),this.copiedParts.iteratorKeys.each(r=>{r.isSelected=!0}))):(n=!0,this.Al(),this.mayMove()&&(this.xc(this.draggedParts,!0),this.SP(t.lastInput.documentPoint))),this.pu=!0,this.JC(t.lastInput.documentPoint),this.isActive){const r=s&&this.copiedParts,A=r?this.copiedParts.toKeySet():this.draggedParts.toKeySet();this.copiedParts=null,n&&this.mF(),t.invalidateDocumentBounds(),t.wP(this.draggedParts),this.transactionResult=r?"Copy":"Move",t.O(r?"SelectionCopied":"SelectionMoved",A)}this.stopTool(),s&&t.O("ChangedSelection",t.selection)}simulatedMouseMove(t,i,n){if(Me.xt===null)return!1;const s=Me.xt.diagram;n instanceof ge||(n=null);const r=Me.qh;if(n!==r){if(r!==null&&r!==s){r.stopAutoScroll(),Me.xt.isDragOutStarted=!1;const o=r.toolManager.findTool("Dragging");o!==null&&o.doSimulatedDragLeave()}if(Me.qh=n,n!==null&&n!==s){Me.xt.HC();const o=n.toolManager.findTool("Dragging");o!==null&&(o.$C(),o.doSimulatedDragEnter())}this.doUpdateCursor(null)}if(n===null||n===s||!n.allowDrop||n.isReadOnly||!n.allowInsert)return!1;const A=n.toolManager.findTool("Dragging");if(A!==null){let o=i;t!==null&&(t.targetTouches!==void 0&&(t.targetTouches.length>0?t=t.targetTouches[0]:t.changedTouches.length>0&&(t=t.changedTouches[0])),o=n.getMouse(t)),n.lastInput.documentPoint=o,n.lastInput.viewPoint=n.transformDocToView(o),n.lastInput.down=!1,n.lastInput.up=!1,A.doSimulatedDragOver()}return!0}simulatedMouseUp(t,i,n){if(Me.xt===null)return!1;const s=Me.qh,r=Me.xt.diagram;if(n===null)return Me.xt.doCancel(),!0;if(n!==s){const A=s.toolManager.findTool("Dragging");if(s!==null&&s!==r&&A!==null)return s.stopAutoScroll(),Me.xt.isDragOutStarted=!1,A.doSimulatedDragLeave(),!1;Me.qh=n;const o=n.toolManager.findTool("Dragging");o!==null&&(Me.xt.HC(),o.$C(),o.doSimulatedDragEnter())}if(n!==this.diagram){let A=i;t!==null?(t.targetTouches!==void 0&&(t.targetTouches.length>0?t=t.targetTouches[0]:t.changedTouches.length>0&&(t=t.changedTouches[0])),A=n.getMouse(t)):A===null&&(A=new T),n.lastInput.documentPoint=A,n.lastInput.viewPoint=n.transformDocToView(A),n.lastInput.down=!1,n.lastInput.up=!0;const o=n.toolManager.findTool("Dragging");o!==null&&o.doSimulatedDrop();const a=Me.xt;if(a!==null){const h=a.mayCopy();a.transactionResult=h?"Copy":"Move",a.stopTool()}return!0}return!1}mF(){if(this.draggedParts===null)return;const t=this.draggedParts.iterator;for(;t.next();){const i=t.key;if(i instanceof Et){const n=i.containingGroup;n!==null&&n.hasPlaceholder()&&!this.draggedParts.has(n)&&n.placeholder.c()}}}mayCopy(){if(!this.isCopyEnabled)return!1;const t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowCopy||!(u.cr?t.lastInput.alt:t.lastInput.control))return!1;const i=t.selection.iterator;for(;i.next();)if(i.value.canCopy())return!0;return!!(this.draggedLink!==null&&this.dragsLink&&this.draggedLink.canCopy())}mayDragOut(){if(!this.isCopyEnabled)return!1;const t=this.diagram;if(!t.allowDragOut||!t.allowCopy||t.allowMove)return!1;const i=t.selection.iterator;for(;i.next();)if(i.value.canCopy())return!0;return!!(this.draggedLink!==null&&this.dragsLink&&this.draggedLink.canCopy())}mayMove(){const t=this.diagram;if(t.isReadOnly||!t.allowMove)return!1;const i=t.selection.iterator;for(;i.next();)if(i.value.canMove())return!0;return!!(this.draggedLink!==null&&this.dragsLink&&this.draggedLink.canMove())}$C(){Me.Bw.has(this)||Me.Bw.add(this)}static cF(){if(Me.Bw.count>0){const t=Me.Bw,i=t.length;for(let n=0;n<i;n++){const s=t.elt(n);s.KC(),s.Al(),s.yP(),s.diagram.stopAutoScroll()}t.clear()}}computeBorder(t,i,n){return!this.pu&&this.draggedParts!==null&&!this.draggedParts.has(t)?n.a(i):null}getDraggingSource(){return Me.xt}mayDragIn(){const t=this.diagram;if(!t.allowDrop||t.isReadOnly||t.isModelReadOnly||!t.allowInsert)return!1;const i=Me.xt;return!(i===null||i.diagram.model.dataFormat!==t.model.dataFormat)}doSimulatedDragEnter(){if(!this.mayDragIn())return;const t=this.diagram;t.animationManager.stopAnimation(),t.Pr(),t.animationManager.stopAnimation();const i=Me.xt;i!==null&&(this.diagram.wc=!0,t.lastInput.event===null&&(t.lastInput.event=i.diagram.lastInput.event)),this.doUpdateCursor(null)}doSimulatedDragLeave(){const t=Me.xt;t!==null&&t.doSimulatedDragOut(),this.diagram.wc=!1,this.doCancel()}doSimulatedDragOver(){const t=this.diagram;t.animationManager.bu=!0;const i=Me.xt;if(i!==null&&i.draggedParts!==null){if(!this.mayDragIn())return;this.ZC(i.draggedParts.toKeySet(),!1,t.firstInput),this.xc(this.copiedParts,!1),this.SP(t.lastInput.documentPoint)}t.animationManager.bu=!1}doSimulatedDrop(){const t=this.diagram,i=Me.xt;if(i!==null){const n=i.diagram;if(i.pu=!0,this.Al(),!this.mayDragIn())return;t.animationManager.bu=!0,t.O("ChangingSelection",t.selection),this.startTransaction("Drop"),this.ZC(i.draggedParts.toKeySet(),!0,t.lastInput),this.xc(this.copiedParts,!1);const s=new X;this.copiedParts!==null&&(t.clearSelection(!0),this.copiedParts.iteratorKeys.each(r=>{r.isSelected=!0,s.add(r)})),this.JC(t.lastInput.documentPoint),t.invalidateDocumentBounds(),this.copiedParts!==null&&(this.transactionResult="ExternalCopy"),this.copiedParts=null,t.doFocus(),t.wc=!1,t.O("ExternalObjectsDropped",s,n),this.stopTransaction(),t.O("ChangedSelection",t.selection)}t.animationManager.bu=!1}ZC(t,i,n){if(this.copiedParts!==null)return;const s=this.diagram;if(s.isReadOnly||s.isModelReadOnly)return;s.skipsUndoManager=!i,s.partManager.addsToTemporaryLayer=!i,this.startPoint=n.documentPoint;const r=s.copyParts(t,s,!0),A=it.l();this.fF(t,A);const o=A.x+A.width/2,a=A.y+A.height/2;it.e(A);const h=this.ym,d=new xt,f=T.l(),g=t.iterator;for(;g.next();){const B=g.value;if(B instanceof Xt&&B.canCopy()){const C=r.get(B);if(C===null)continue;C.points=B.points,C.kr(h.x-o,h.y-a),C.suspendsRouting=!0,d.set(C,this.Vs())}}const x=t.iterator;for(;x.next();){const B=x.value;if(B.Ne()&&B.canCopy()){const C=r.get(B);if(C===null)continue;const F=B.location;f.i(h.x-(o-F.x),h.y-(a-F.y)),C.location=f,C.ensureBounds(),d.set(C,this.Vs(f))}}if(T.e(f),this.copiedParts=d,this.pP(d.toKeySet()),this.draggedLink!==null){const B=this.draggedLink,C=B.routeBounds;B.kr(this.startPoint.x-(C.x+C.width/2),this.startPoint.y-(C.y+C.height/2))}this.doUpdateCursor(null)}aF(){this.isDragOutStarted=!0,this.pu=!1,Me.xt=this,Me.qh=this.diagram,this.doSimulatedDragOut()}doSimulatedDragOut(){const t=this.diagram;t.wc=!1,!this.mayCopy()&&!this.mayMove()?t.currentCursor=this.nodropCursor:t.currentCursor="",this.yu=null}computeMove(t,i,n,s){const r=this.diagram;return r!==null?r.computeMove(t,i,this.dragOptions,s):new T}};p(Me,"Bw",new H),p(Me,"xt",null),p(Me,"qh",null);let ye=Me;ue.prototype.doCancel=function(){ye.xt!==null&&ye.xt.doCancel(),Gt.prototype.doCancel.call(this)};class be extends Gt{constructor(){super();p(this,"AP");p(this,"TP");p(this,"Dl");p(this,"DP");p(this,"FP");p(this,"Wh");p(this,"RP");p(this,"Jh");p(this,"vP");p(this,"OP");p(this,"IP");p(this,"EP");p(this,"BP");p(this,"UP");p(this,"QC");p(this,"VP");p(this,"Fl");p(this,"zP");this.AP=100,this.TP=!1,this.Dl="pointer",this.DP=new Xt({layerName:"Tool"}).add(new Zt({isPanelMain:!0,stroke:"blue"}).theme("stroke","tempLink"),new Zt({toArrow:"Standard",fill:"blue",stroke:"blue"}).theme("fill","tempLink").theme("stroke","tempLink")).Xt(),this.Wh=new Zt("Rectangle",{portId:"",fill:null,stroke:"magenta",strokeWidth:2,desiredSize:ct.Fk}).theme("stroke","tempPort"),this.FP=new Et({selectable:!1,layerName:"Tool"}).add(this.Wh).Xt(),this.Jh=new Zt("Rectangle",{portId:"",fill:null,stroke:"magenta",strokeWidth:2,desiredSize:ct.Fk}).theme("stroke","tempPort"),this.RP=new Et({selectable:!1,layerName:"Tool"}).add(this.Jh).Xt(),this.vP=null,this.OP=null,this.IP=null,this.EP=null,this.BP=null,this.UP=!0,this.QC=new xt,this.VP=null,this.Fl=null,this.zP=null}doStop(){this.diagram.stopAutoScroll(),this.originalLink=null,this.originalFromNode=null,this.originalFromPort=null,this.originalToNode=null,this.originalToPort=null,this.validPortsCache.clear(),this.targetPort=null}get portGravity(){return this.AP}set portGravity(t){t>=0&&(this.AP=t)}get isUnconnectedLinkValid(){return this.TP}set isUnconnectedLinkValid(t){this.TP=t}get linkingCursor(){return this.Dl}set linkingCursor(t){this.Dl=t}get temporaryLink(){return this.DP}set temporaryLink(t){t.Xt(),this.DP=t}get temporaryFromNode(){return this.FP}set temporaryFromNode(t){t.Xt(),this.FP=t,t&&(this.Wh=t.port)}get temporaryFromPort(){return this.Wh}set temporaryFromPort(t){if(this.Wh!==null){const i=this.Wh.panel;if(i!==null){const n=i.T.indexOf(this.Wh);i.removeAt(n),i.insertAt(n,t)}}this.Wh=t}get temporaryToNode(){return this.RP}set temporaryToNode(t){t.Xt(),this.RP=t,t&&(this.Jh=t.port)}get temporaryToPort(){return this.Jh}set temporaryToPort(t){if(this.Jh!==null){const i=this.Jh.panel;if(i!==null){const n=i.T.indexOf(this.Jh);i.removeAt(n),i.insertAt(n,t)}}this.Jh=t}get originalLink(){return this.vP}set originalLink(t){this.vP=t}get originalFromNode(){return this.OP}set originalFromNode(t){this.OP=t}get originalFromPort(){return this.IP}set originalFromPort(t){this.IP=t}get originalToNode(){return this.EP}set originalToNode(t){this.EP=t}get originalToPort(){return this.BP}set originalToPort(t){this.BP=t}get isForwards(){return this.UP}set isForwards(t){this.UP=t}get validPortsCache(){return this.QC}get targetPort(){return this.VP}set targetPort(t){this.VP=t}copyPortProperties(t,i,n,s,r){if(t===null||i===null||n===null||s===null)return;const A=i.getDocumentScale(),o=ct.l();o.width=i.naturalBounds.width*A,o.height=i.naturalBounds.height*A,s.desiredSize=o,ct.e(o),r?(s.toSpot=i.toSpot,s.toEndSegmentLength=i.toEndSegmentLength):(s.fromSpot=i.fromSpot,s.fromEndSegmentLength=i.fromEndSegmentLength),n.locationSpot=q.Center;const a=T.l();n.location=i.getDocumentPoint(q.Center,a),T.e(a),s.angle=i.getDocumentAngle(),this.portTargeted!==null&&this.portTargeted(t,i,n,s,r)}setNoTargetPortProperties(t,i,n){i!==null&&(i.desiredSize=ct.Fk,i.fromSpot=q.None,i.toSpot=q.None),t!==null&&(t.location=this.diagram.lastInput.documentPoint),this.portTargeted!==null&&this.portTargeted(null,null,t,i,n)}doMouseDown(){this.isActive&&this.doMouseMove()}doMouseMove(){if(this.isActive){const t=this.diagram;if(this.targetPort=this.findTargetPort(this.isForwards),this.targetPort!==null&&this.targetPort.part instanceof Et){const i=this.targetPort.part;this.isForwards?this.copyPortProperties(i,this.targetPort,this.temporaryToNode,this.temporaryToPort,!0):this.copyPortProperties(i,this.targetPort,this.temporaryFromNode,this.temporaryFromPort,!1)}else this.isForwards?this.setNoTargetPortProperties(this.temporaryToNode,this.temporaryToPort,!0):this.setNoTargetPortProperties(this.temporaryFromNode,this.temporaryFromPort,!1);(t.allowHorizontalScroll||t.allowVerticalScroll)&&t.doAutoScroll(t.lastInput.viewPoint)}}findValidLinkablePort(t,i){if(t===null)return null;const n=t.part;if(!(n instanceof Et))return null;for(;t!==null;){const s=i?t.toLinkable:t.fromLinkable;if(s===!0&&(t.portId!==null||t instanceof Et)&&(i?this.isValidTo(n,t):this.isValidFrom(n,t)))return t;if(s===!1)return null;t=t.panel}return null}findTargetPort(t){const i=this.diagram,n=i.lastInput.documentPoint;let s=this.portGravity;const r=i.findObjectsNear(n,s,h=>this.findValidLinkablePort(h,t),null,!0);let A=1/0,o=null;const a=r.iterator;for(;a.next();){const h=a.value,d=h.part;if(!(d instanceof Et))continue;const f=h.getDocumentPoint(q.Center,T.l()),g=n.x-f.x,x=n.y-f.y;T.e(f);const B=g*g+x*x;if(B<A){const C=this.validPortsCache.get(h);C!==null?C&&(o=h,A=B):t&&this.isValidLink(this.originalFromNode,this.originalFromPort,d,h)||!t&&this.isValidLink(d,h,this.originalToNode,this.originalToPort)?(this.validPortsCache.set(h,!0),o=h,A=B):this.validPortsCache.set(h,!1)}}if(o!==null){const h=o.part;if(h instanceof Et&&(h.layer===null||h.layer.allowLink))return o}return null}isValidFrom(t,i){if(t===null||i===null)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(t.layer!==null&&!t.layer.allowLink||i.fromLinkable!==!0))return!1;const n=i.fromMaxLinks;if(n<1/0){if(this.originalLink!==null&&t===this.originalFromNode&&i===this.originalFromPort)return!0;let s=i.portId;if(s===null&&(s=""),t.findLinksOutOf(s).count>=n)return!1}return!0}isValidTo(t,i){if(t===null||i===null)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(t.layer!==null&&!t.layer.allowLink||i.toLinkable!==!0))return!1;const n=i.toMaxLinks;if(n<1/0){if(this.originalLink!==null&&t===this.originalToNode&&i===this.originalToPort)return!0;let s=i.portId;if(s===null&&(s=""),t.findLinksInto(s).count>=n)return!1}return!0}isInSameNode(t,i){if(t===null||i===null)return!1;if(t===i)return!0;const n=t.part,s=i.part;return n!==null&&n===s}isLinked(t,i){if(t===null||i===null)return!1;const n=t.part;if(!(n instanceof Et))return!1;let s=t.portId;s===null&&(s="");const r=i.part;if(!(r instanceof Et))return!1;let A=i.portId;A===null&&(A="");const o=r.findLinksInto(A);for(;o.next();){const a=o.value;if(a.fromNode===n&&a.fromPortId===s)return!0}return!1}isValidLink(t,i,n,s){if(!this.isValidFrom(t,i)||!this.isValidTo(n,s)||i!==null&&s!==null&&(!(i.fromLinkableSelfNode&&s.toLinkableSelfNode)&&this.isInSameNode(i,s)||!(i.fromLinkableDuplicates&&s.toLinkableDuplicates)&&this.isLinked(i,s))||this.originalLink!==null&&(t!==null&&this.isLabelDependentOnLink(t,this.originalLink)||n!==null&&this.isLabelDependentOnLink(n,this.originalLink))||t!==null&&n!==null&&(t.data===null&&n.data!==null||t.data!==null&&n.data===null)||!this.isValidCycle(t,n,this.originalLink))return!1;let r;return t!==null&&(r=t.linkValidation,r!==null&&!r(t,i,n,s,this.originalLink))||n!==null&&(r=n.linkValidation,r!==null&&!r(t,i,n,s,this.originalLink))?!1:(r=this.linkValidation,r!==null?r(t,i,n,s,this.originalLink):!0)}isLabelDependentOnLink(t,i){if(t===null)return!1;const n=t.labeledLink;if(n===null)return!1;if(n===i)return!0;const s=new X;return s.add(t),this.XP(n,i,s)}XP(t,i,n){if(t===i)return!0;const s=t.fromNode;if(s!==null&&s.isLinkLabel&&(n.add(s),this.XP(s.labeledLink,i,n)))return!0;const r=t.toNode;return!!(r!==null&&r.isLinkLabel&&(n.add(r),this.XP(r.labeledLink,i,n)))}isValidCycle(t,i,n){if(n===void 0&&(n=null),t===null||i===null)return this.isUnconnectedLinkValid;const s=this.diagram;let r=1;if(s&&(s.model.xm()?r=s.isTreePathToChildren?5:6:r=s.validCycle),r===1)return!0;if(r===5){const A=n||this.temporaryLink;if(A!==null&&!A.isTreeLink)return!0;const o=i.linksConnected;for(;o.next();){const a=o.value;if(a!==n&&a.isTreeLink&&a.toNode===i)return!1}return!this.ku(t,i,n,!0)}else if(r===6){const A=n||this.temporaryLink;if(A!==null&&!A.isTreeLink)return!0;const o=t.linksConnected;for(;o.next();){const a=o.value;if(a!==n&&a.isTreeLink&&a.fromNode===t)return!1}return!this.ku(t,i,n,!0)}else{if(r===2)return!this.pF(t,i,n);if(r===3)return!this.ku(t,i,n,!1);if(r===4)return!this.yF(t,i,n)}return!0}ku(t,i,n,s){if(t===i)return!0;if(t===null||i===null)return!1;const r=t.linksConnected;for(;r.next();){const A=r.value;if(A===n||s&&!A.isTreeLink||A.toNode!==t)continue;const o=A.fromNode;if(o!==t&&this.ku(o,i,n,s))return!0}return!1}pF(t,i,n){if(t===i)return!0;const s=new X;return s.add(i),this._C(s,t,i,n)}_C(t,i,n,s){if(i===n)return!0;if(i===null||n===null||t.has(i))return!1;t.add(i);const r=i.linksConnected;for(;r.next();){const A=r.value;if(A===s||A.toNode!==i)continue;const o=A.fromNode;if(o!==i&&this._C(t,o,n,s))return!0}return!1}yF(t,i,n){if(t===i)return!0;const s=new X;return s.add(i),this.tL(s,t,i,n)}tL(t,i,n,s){if(i===n)return!0;if(i===null||n===null||t.has(i))return!1;t.add(i);const r=i.linksConnected;for(;r.next();){const A=r.value;if(A===s)continue;const o=A.fromNode,a=A.toNode,h=o===i?a:o;if(h!==i&&this.tL(t,h,n,s))return!0}return!1}get linkValidation(){return this.Fl}set linkValidation(t){this.Fl=t}get portTargeted(){return this.zP}set portTargeted(t){this.zP=t}}var Pe=(k=>(k[k.Either=1]="Either",k[k.ForwardsOnly=2]="ForwardsOnly",k[k.BackwardsOnly=3]="BackwardsOnly",k))(Pe||{});const Ws=class Ws extends be{constructor(t){super();p(this,"YP");p(this,"KP");p(this,"S");p(this,"GP");this.name="Linking",this.YP={},this.KP=null,this.S=1,this.GP=null,t&&Object.assign(this,t)}get archetypeLinkData(){return this.YP}set archetypeLinkData(t){t!==null&&u.oc(t,Ws,"archetypeLinkData"),this.YP=t}get archetypeLabelNodeData(){return this.KP}set archetypeLabelNodeData(t){t!==null&&u.oc(t,Ws,"archetypeLabelNodeData"),this.KP=t}get direction(){return this.S}set direction(t){this.S=t}get startObject(){return this.GP}set startObject(t){this.GP=t}canStart(){if(!this.isEnabled)return!1;const t=this.diagram;return t.isReadOnly||t.isModelReadOnly||!t.allowLink||!t.model.Uw()||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize()?!1:this.findLinkablePort()!==null}findLinkablePort(){const t=this.diagram;let i=this.startObject;if(i===null&&(i=t.findObjectAt(t.firstInput.documentPoint,null,null)),i===null)return null;const n=i.part;if(!(n instanceof Et))return null;const s=this.direction;if(s===1||s===2){const r=this.findValidLinkablePort(i,!1);if(r!==null)return this.isForwards=!0,r;if(this.startObject===n){const A=n.port;if(this.findValidLinkablePort(A,!1))return this.isForwards=!0,A}}if(s===1||s===3){const r=this.findValidLinkablePort(i,!0);if(r!==null)return this.isForwards=!1,r;if(this.startObject===n){const A=n.port;if(this.findValidLinkablePort(A,!0))return this.isForwards=!1,A}}return null}doActivate(){const t=this.diagram,i=this.findLinkablePort();if(i===null){this.stopTool();return}if(this.startTransaction(this.name),t.isMouseCaptured=!0,t.currentCursor=this.linkingCursor,this.isForwards){this.temporaryToNode!==null&&(this.temporaryToNode.location=t.lastInput.documentPoint),this.originalFromPort=i;const n=this.originalFromPort.part;n instanceof Et&&(this.originalFromNode=n),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1)}else{this.temporaryFromNode!==null&&(this.temporaryFromNode.location=t.lastInput.documentPoint),this.originalToPort=i;const n=this.originalToPort.part;n instanceof Et&&(this.originalToNode=n),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0)}t.add(this.temporaryFromNode),this.temporaryFromNode&&this.temporaryFromNode.ensureBounds(),t.add(this.temporaryToNode),this.temporaryToNode&&this.temporaryToNode.ensureBounds(),this.temporaryLink!==null&&(this.temporaryFromNode!==null&&(this.temporaryLink.fromNode=this.temporaryFromNode),this.temporaryToNode!==null&&(this.temporaryLink.toNode=this.temporaryToNode),this.temporaryLink.isTreeLink=this.isNewTreeLink(),this.temporaryLink.invalidateRoute(),t.add(this.temporaryLink)),this.isActive=!0}doDeactivate(){this.isActive=!1;const t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor="",this.stopTransaction()}doStop(){super.doStop(),this.startObject=null}doMouseUp(){if(this.isActive){const t=this.diagram;this.transactionResult=null;let i=null,n=null,s=null,r=null,A=null;try{this.targetPort=this.findTargetPort(this.isForwards);const o=this.targetPort;if(o!==null){const a=o.part;a instanceof Et&&(this.isForwards?(this.originalFromNode!==null&&(i=this.originalFromNode,n=this.originalFromPort),s=a,r=o):(i=a,n=o,this.originalToNode!==null&&(s=this.originalToNode,r=this.originalToPort)))}else this.isForwards?this.originalFromNode!==null&&this.isUnconnectedLinkValid&&(i=this.originalFromNode,n=this.originalFromPort):this.originalToNode!==null&&this.isUnconnectedLinkValid&&(s=this.originalToNode,r=this.originalToPort);i!==null||s!==null?(A=this.insertLink(i,n,s,r),A!==null?(o===null&&(this.isForwards?A.defaultToPoint=t.lastInput.documentPoint:A.defaultFromPoint=t.lastInput.documentPoint),t.allowSelect&&(t.O("ChangingSelection",t.selection),t.clearSelection(!0),A.isSelected=!0),this.transactionResult=this.name,t.O("LinkDrawn",A)):this.doNoLink(i,n,s,r)):this.isForwards?this.doNoLink(this.originalFromNode,this.originalFromPort,null,null):this.doNoLink(null,null,this.originalToNode,this.originalToPort)}finally{this.stopTool(),A&&t.allowSelect&&t.O("ChangedSelection",t.selection)}}}isNewTreeLink(){const t=this.archetypeLinkData;if(t===null)return!0;if(t instanceof Xt)return t.isTreeLink;const i=this.diagram;if(i===null)return!0;const n=i.partManager.getLinkCategoryForData(t),s=i.partManager.findLinkTemplateForCategory(n);return s!==null?s.isTreeLink:!0}insertLink(t,i,n,s){return this.diagram.partManager.insertLink(t,i,n,s)}doNoLink(t,i,n,s){}};p(Ws,"Either",1),p(Ws,"ForwardsOnly",2),p(Ws,"BackwardsOnly",3);let Te=Ws;class Ge extends be{constructor(t){super();p(this,"iL");p(this,"eL");p(this,"HP");p(this,"jP");p(this,"gs");p(this,"qP");this.name="Relinking",this.fromHandleArchetype=new Zt("Diamond",{desiredSize:ct.au,fill:"lightblue",stroke:"dodgerblue",cursor:this.linkingCursor,segmentIndex:0}).theme("fill","adornmentFill").theme("stroke","adornmentStroke"),this.toHandleArchetype=new Zt("Diamond",{desiredSize:ct.au,fill:"lightblue",stroke:"dodgerblue",cursor:this.linkingCursor,segmentIndex:-1}).theme("fill","adornmentFill").theme("stroke","adornmentStroke"),this.gs=null,this.qP=new it,t&&Object.assign(this,t)}updateAdornments(t){if(t===null||!(t instanceof Xt))return;let i="RelinkFrom",n=null;if(t.isSelected&&!this.diagram.isReadOnly){const s=t.selectionObject;s!==null&&t.canRelinkFrom()&&t.actualBounds.isReal()&&t.isVisible()&&s.actualBounds.isReal()&&s.isVisibleObject()&&(n=t.findAdornment(i),n===null&&(n=this.makeAdornment(s,!1),t.addAdornment(i,n)))}if(n===null&&t.removeAdornment(i),i="RelinkTo",n=null,t.isSelected&&!this.diagram.isReadOnly){const s=t.selectionObject;s!==null&&t.canRelinkTo()&&t.actualBounds.isReal()&&t.isVisible()&&s.actualBounds.isReal()&&s.isVisibleObject()&&(n=t.findAdornment(i),n===null?(n=this.makeAdornment(s,!0),t.addAdornment(i,n)):n.c())}n===null&&t.removeAdornment(i)}makeAdornment(t,i){let n=i?this.jP:this.HP;return n&&(n=n.copy(),n.adornedObject=t),n}get fromHandleArchetype(){return this.iL}set fromHandleArchetype(t){this.iL=t,t!==null?this.HP=new se(Kt.Link).add(t).Xt():this.HP=null}get toHandleArchetype(){return this.eL}set toHandleArchetype(t){this.eL=t,t!==null?this.jP=new se(Kt.Link).add(t).Xt():this.jP=null}get handle(){return this.gs}set handle(t){t!==null&&(t.part instanceof se||u.o("new handle is not in an Adornment: "+t)),this.gs=t}canStart(){if(!this.isEnabled)return!1;const t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowRelink||!t.model.Uw()||!t.lastInput.left)return!1;let i=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkFrom");return i===null&&(i=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkTo")),i!==null}doActivate(){const t=this.diagram;if(this.originalLink===null){let i=this.handle;if(i===null&&(i=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkFrom"),i===null&&(i=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkTo"))),i===null)return;const n=i.part;if(!(n instanceof se)||!(n.adornedPart instanceof Xt))return;this.handle=i,this.isForwards=n===null||n.category==="RelinkTo",this.originalLink=n.adornedPart}this.startTransaction(this.name),t.isMouseCaptured=!0,t.currentCursor=this.linkingCursor,this.originalFromPort=this.originalLink.fromPort,this.originalFromNode=this.originalLink.fromNode,this.originalToPort=this.originalLink.toPort,this.originalToNode=this.originalLink.toNode,this.qP.set(this.originalLink.actualBounds),this.originalLink!==null&&this.originalLink.pointsCount>0&&(this.originalLink.fromNode===null&&(this.temporaryFromPort!==null&&(this.temporaryFromPort.desiredSize=ct.hu),this.temporaryFromNode!==null&&(this.temporaryFromNode.location=this.originalLink.getPoint(0))),this.originalLink.toNode===null&&(this.temporaryToPort!==null&&(this.temporaryToPort.desiredSize=ct.hu),this.temporaryToNode!==null&&(this.temporaryToNode.location=this.originalLink.getPoint(this.originalLink.pointsCount-1)))),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0),t.add(this.temporaryFromNode),t.add(this.temporaryToNode),this.temporaryLink!==null&&(this.temporaryFromNode!==null&&(this.temporaryLink.fromNode=this.temporaryFromNode),this.temporaryToNode!==null&&(this.temporaryLink.toNode=this.temporaryToNode),this.copyLinkProperties(this.originalLink,this.temporaryLink),this.temporaryLink.invalidateRoute(),t.add(this.temporaryLink)),this.isActive=!0}copyLinkProperties(t,i){if(t===null||i===null)return;i.adjusting=t.adjusting,i.corner=t.corner;let n=t.curve;(n===11||n===10)&&(n=0),i.curve=n,i.curviness=t.curviness,i.isTreeLink=t.isTreeLink,i.points=t.points,i.routing=t.routing,i.smoothness=t.smoothness,i.fromSpot=t.fromSpot,i.fromEndSegmentLength=t.fromEndSegmentLength,i.fromShortLength=t.fromShortLength,i.toSpot=t.toSpot,i.toEndSegmentLength=t.toEndSegmentLength,i.toShortLength=t.toShortLength}doDeactivate(){this.isActive=!1;const t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor="",this.stopTransaction()}doStop(){super.doStop(),this.handle=null}doMouseUp(){if(this.isActive){const t=this.diagram;this.transactionResult=null;let i=this.originalFromNode,n=this.originalFromPort,s=this.originalToNode,r=this.originalToPort,A=this.originalLink;try{if(this.targetPort=this.findTargetPort(this.isForwards),this.targetPort!==null){const o=this.targetPort.part;o instanceof Et&&(this.isForwards?(s=o,r=this.targetPort):(i=o,n=this.targetPort))}else this.isUnconnectedLinkValid?this.isForwards?(s=null,r=null):(i=null,n=null):A=null;A!==null?(this.reconnectLink(A,this.isForwards?s:i,this.isForwards?r:n,this.isForwards),this.targetPort===null&&(this.isForwards?A.defaultToPoint=t.lastInput.documentPoint:A.defaultFromPoint=t.lastInput.documentPoint,A.invalidateRoute()),this.transactionResult=this.name,t.O("LinkRelinked",A,this.isForwards?this.originalToPort:this.originalFromPort)):this.doNoRelink(this.originalLink,this.isForwards),this.originalLink.invalidateOtherJumpOvers(this.qP)}finally{this.stopTool()}}}reconnectLink(t,i,n,s){const r=n!==null&&n.portId!==null?n.portId:"";return s?(t.toNode=i,t.toPortId=r):(t.fromNode=i,t.fromPortId=r),!0}doNoRelink(t,i){}doDraggingMouseMove(t,i,n,s){t!==null?(this.copyPortProperties(t,i,this.temporaryFromNode,this.temporaryFromPort,!1),this.diagram.add(this.temporaryFromNode)):this.diagram.remove(this.temporaryFromNode),n!==null?(this.copyPortProperties(n,s,this.temporaryToNode,this.temporaryToPort,!0),this.diagram.add(this.temporaryToNode)):this.diagram.remove(this.temporaryToNode)}stopDraggingMouseMove(){this.diagram.remove(this.temporaryFromNode),this.diagram.remove(this.temporaryToNode)}}var Ai=(k=>(k[k.None=0]="None",k[k.Horizontal=1]="Horizontal",k[k.Vertical=2]="Vertical",k[k.All=3]="All",k))(Ai||{});class Li extends Gt{constructor(t){super();p(this,"Sr");p(this,"WP");p(this,"JP");p(this,"gs");p(this,"Vw");p(this,"$P");p(this,"bm");this.name="LinkReshaping",this.Sr=new Zt("Rectangle",{desiredSize:ct.cC,fill:"lightblue",stroke:"dodgerblue"}).theme("fill","adornmentFill").theme("stroke","adornmentStroke"),this.WP=new Zt("Diamond",{desiredSize:ct.au,fill:"lightblue",stroke:"dodgerblue",cursor:"move"}).theme("fill","adornmentFill").theme("stroke","adornmentStroke"),this.JP=3,this.gs=null,this.Vw=null,this.$P=new T,this.bm=new H,t&&Object.assign(this,t)}getReshapingBehavior(t){return t?t.Mr:0}setReshapingBehavior(t,i){t.Mr=i}updateAdornments(t){if(t===null||!(t instanceof Xt))return;let i=null;if(t.isSelected&&!this.diagram.isReadOnly){const n=t.path;n!==null&&t.canReshape()&&t.actualBounds.isReal()&&t.isVisible()&&n.actualBounds.isReal()&&n.isVisibleObject()&&(i=t.findAdornment(this.name),(i===null||i.ZP!==t.pointsCount||i.QP!==t.resegmentable)&&(i=this.makeAdornment(n),i!==null&&(i.ZP=t.pointsCount,i.QP=t.resegmentable,t.addAdornment(this.name,i))))}i===null&&t.removeAdornment(this.name)}makeAdornment(t){const i=t.part,n=i.points,s=i.pointsCount,r=i.isOrthogonal;let A=null;if(n!==null&&s>1){A=new se,A.type=Kt.Link;const o=i.firstPickIndex,a=i.lastPickIndex,h=r?1:0;if(i.resegmentable&&i.computeCurve()!==9)for(let d=o+h;d<a-h;d++){const f=this.makeResegmentHandle(t,d);f!==null&&(f.segmentIndex=d,f.segmentFraction=.5,f.fromMaxLinks=999,A.add(f))}for(let d=o+1;d<a;d++){const f=this.makeHandle(t,d);if(f!==null){if(f.segmentIndex=d,d!==o)if(d===o+1&&r){const g=i.getPoint(o);let x=i.getPoint(o+1);V.u(g.x,x.x)&&V.u(g.y,x.y)?(x=i.getPoint(o-1),V.u(g.x,x.x)?(this.setReshapingBehavior(f,2),f.cursor="n-resize"):V.u(g.y,x.y)&&(this.setReshapingBehavior(f,1),f.cursor="w-resize")):V.u(g.x,x.x)?(this.setReshapingBehavior(f,2),f.cursor="n-resize"):V.u(g.y,x.y)&&(this.setReshapingBehavior(f,1),f.cursor="w-resize")}else if(d===a-1&&r){let g=i.getPoint(a-1);const x=i.getPoint(a);V.u(g.x,x.x)&&V.u(g.y,x.y)?(g=i.getPoint(a+1),V.u(g.x,x.x)?(this.setReshapingBehavior(f,2),f.cursor="n-resize"):V.u(g.y,x.y)&&(this.setReshapingBehavior(f,1),f.cursor="w-resize")):V.u(g.x,x.x)?(this.setReshapingBehavior(f,2),f.cursor="n-resize"):V.u(g.y,x.y)&&(this.setReshapingBehavior(f,1),f.cursor="w-resize")}else d===a||(this.setReshapingBehavior(f,3),f.cursor="move");A.add(f)}}A.adornedObject=t}return A}makeHandle(t,i){const n=this.handleArchetype;return n===null?null:n.copy()._P()}get handleArchetype(){return this.Sr}set handleArchetype(t){this.Sr=t}makeResegmentHandle(t,i){const n=this.midHandleArchetype;return n===null?null:n.copy()._P()}get midHandleArchetype(){return this.WP}set midHandleArchetype(t){this.WP=t}get handle(){return this.gs}set handle(t){t!==null&&(t.part instanceof se||u.o("new handle is not in an Adornment: "+t)),this.gs=t}get adornedLink(){return this.Vw}canStart(){if(!this.isEnabled)return!1;const t=this.diagram;return t.isReadOnly||!t.allowReshape||!t.lastInput.left?!1:this.findToolHandleAt(t.firstInput.documentPoint,this.name)!==null}doActivate(){const t=this.diagram;if(this.handle===null&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),this.handle===null)return;const i=this.handle.part.adornedPart;if(i instanceof Xt){if(this.Vw=i,t.isMouseCaptured=!0,this.startTransaction(this.name),i.resegmentable&&this.handle.fromMaxLinks===999){const n=i.points.copy(),s=this.getResegmentingPoint();if(n.insertAt(this.handle.segmentIndex+1,s),i.isOrthogonal&&n.insertAt(this.handle.segmentIndex+1,s),i.points=n,i.invalidateAdornments(),i.updateAdornments(),this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name),this.handle===null){this.doDeactivate();return}}this.$P=i.getPoint(this.handle.segmentIndex),this.bm=i.points.copy(),this.isActive=!0}}doDeactivate(){this.stopTransaction(),this.handle=null,this.Vw=null;const t=this.diagram;t.isMouseCaptured=!1,this.isActive=!1}stopTransaction(){const t=this.diagram,i=super.stopTransaction();return i&&t.undoManager.transactionToUndo!==null&&t.undoManager.transactionToUndo.optimize(),i}doCancel(){const t=this.adornedLink;t!==null&&(t.points=this.bm),this.stopTool()}getResegmentingPoint(){return this.handle.getDocumentPoint(q.Center)}doMouseMove(){const t=this.diagram;if(this.isActive){const i=this.computeReshape(t.lastInput.documentPoint);this.reshape(i)}}doMouseUp(){const t=this.diagram;if(this.isActive){const i=this.computeReshape(t.lastInput.documentPoint);this.reshape(i);const n=this.adornedLink;if(n!==null&&n.resegmentable){const s=this.handle.segmentIndex,r=n.getPoint(s-1),A=n.getPoint(s),o=n.getPoint(s+1);if(n.isOrthogonal){if(s>n.firstPickIndex+1&&s<n.lastPickIndex-1){let a=n.getPoint(s-2);if(this.isWithinResegmentingDistance(r,A)&&(this.isInLineOrtho(a,r,A,o,!0)||this.isInLineOrtho(a,r,A,o,!1))){const h=n.points.copy();this.isInLineOrtho(a,r,A,o,!0)?(h.setElt(s-2,new T(a.x,(o.y+a.y)/2)),h.setElt(s+1,new T(o.x,(o.y+a.y)/2))):(h.setElt(s-2,new T((o.x+a.x)/2,a.y)),h.setElt(s+1,new T((o.x+a.x)/2,o.y))),h.removeAt(s),h.removeAt(s-1),n.points=h,n.invalidateAdornments()}else if(a=n.getPoint(s+2),this.isWithinResegmentingDistance(A,o)&&(this.isInLineOrtho(r,A,o,a,!0)||this.isInLineOrtho(r,A,o,a,!1))){const h=n.points.copy();this.isInLineOrtho(r,A,o,a,!0)?(h.setElt(s-1,new T(r.x,(r.y+a.y)/2)),h.setElt(s+2,new T(a.x,(r.y+a.y)/2))):(h.setElt(s-1,new T((r.x+a.x)/2,r.y)),h.setElt(s+2,new T((r.x+a.x)/2,a.y))),h.removeAt(s+1),h.removeAt(s),n.points=h,n.invalidateAdornments()}}}else{const a=T.l();if(V.kl(r.x,r.y,o.x,o.y,A.x,A.y,a)&&a.distanceSquaredPoint(A)<this.resegmentingDistance*this.resegmentingDistance){const h=n.points.copy();h.removeAt(s),n.points=h,n.invalidateAdornments()}T.e(a)}}t.invalidateDocumentBounds(),this.transactionResult=this.name,t.O("LinkReshaped",this.adornedLink,this.bm)}this.stopTool()}isWithinResegmentingDistance(t,i){return Math.abs(t.x-i.x)<this.resegmentingDistance&&Math.abs(t.y-i.y)<this.resegmentingDistance}isInLineOrtho(t,i,n,s,r){return r?Math.abs(t.y-i.y)<this.resegmentingDistance&&Math.abs(i.y-n.y)<this.resegmentingDistance&&Math.abs(n.y-s.y)<this.resegmentingDistance:Math.abs(t.x-i.x)<this.resegmentingDistance&&Math.abs(i.x-n.x)<this.resegmentingDistance&&Math.abs(n.x-s.x)<this.resegmentingDistance}get resegmentingDistance(){return this.JP}set resegmentingDistance(t){this.JP=t}reshape(t){const i=this.adornedLink;i.startRoute();let n=this.handle.segmentIndex;const s=this.getReshapingBehavior(this.handle);if(i.isOrthogonal)if(n===i.firstPickIndex+1){const r=i.firstPickIndex+1;s===2?(i.setPointAt(r,i.getPoint(r-1).x,t.y),i.setPointAt(r+1,i.getPoint(r+2).x,t.y)):s===1&&(i.setPointAt(r,t.x,i.getPoint(r-1).y),i.setPointAt(r+1,t.x,i.getPoint(r+2).y))}else if(n===i.lastPickIndex-1){const r=i.lastPickIndex-1;s===2?(i.setPointAt(r-1,i.getPoint(r-2).x,t.y),i.setPointAt(r,i.getPoint(r+1).x,t.y)):s===1&&(i.setPointAt(r-1,t.x,i.getPoint(r-2).y),i.setPointAt(r,t.x,i.getPoint(r+1).y))}else{let r=n;const A=i.getPoint(r),o=i.getPoint(r-1),a=i.getPoint(r+1);V.u(o.x,A.x)&&V.u(A.y,a.y)?(V.u(o.x,i.getPoint(r-2).x)&&!V.u(o.y,i.getPoint(r-2).y)?(i.insertPointAt(r,t.x,o.y),n++,r++):i.setPointAt(r-1,t.x,o.y),V.u(a.y,i.getPoint(r+2).y)&&!V.u(a.x,i.getPoint(r+2).x)?i.insertPointAt(r+1,a.x,t.y):i.setPointAt(r+1,a.x,t.y)):V.u(o.y,A.y)&&V.u(A.x,a.x)?(V.u(o.y,i.getPoint(r-2).y)&&!V.u(o.x,i.getPoint(r-2).x)?(i.insertPointAt(r,o.x,t.y),n++,r++):i.setPointAt(r-1,o.x,t.y),V.u(a.x,i.getPoint(r+2).x)&&!V.u(a.y,i.getPoint(r+2).y)?i.insertPointAt(r+1,t.x,a.y):i.setPointAt(r+1,t.x,a.y)):V.u(o.x,A.x)&&V.u(A.x,a.x)?(V.u(o.x,i.getPoint(r-2).x)&&!V.u(o.y,i.getPoint(r-2).y)?(i.insertPointAt(r,t.x,o.y),n++,r++):i.setPointAt(r-1,t.x,o.y),V.u(a.x,i.getPoint(r+2).x)&&!V.u(a.y,i.getPoint(r+2).y)?i.insertPointAt(r+1,t.x,a.y):i.setPointAt(r+1,t.x,a.y)):V.u(o.y,A.y)&&V.u(A.y,a.y)&&(V.u(o.y,i.getPoint(r-2).y)&&!V.u(o.x,i.getPoint(r-2).x)?(i.insertPointAt(r,o.x,t.y),n++,r++):i.setPointAt(r-1,o.x,t.y),V.u(a.y,i.getPoint(r+2).y)&&!V.u(a.x,i.getPoint(r+2).x)?i.insertPointAt(r+1,a.x,t.y):i.setPointAt(r+1,a.x,t.y)),i.setPointAt(n,t.x,t.y)}else{i.setPointAt(n,t.x,t.y);let r=i.fromNode,A=i.fromPort;if(r!==null){const h=r.findVisibleNode();h!==null&&h!==r&&(r=h,A=r.port)}if(n===1&&i.computeSpot(!0,A).isNoSpot()){const h=A.getDocumentPoint(q.Center,T.l()),d=i.getLinkPointFromPoint(r,A,h,t,!0,T.l());i.setPointAt(0,d.x,d.y),T.e(h),T.e(d)}let o=i.toNode,a=i.toPort;if(o!==null){const h=o.findVisibleNode();h!==null&&h!==o&&(o=h,a=o.port)}if(n===i.pointsCount-2&&i.computeSpot(!1,a).isNoSpot()){const h=a.getDocumentPoint(q.Center,T.l()),d=i.getLinkPointFromPoint(o,a,h,t,!1,T.l());i.setPointAt(i.pointsCount-1,d.x,d.y),T.e(h),T.e(d)}}i.commitRoute()}computeReshape(t){const i=this.adornedLink,n=this.handle.segmentIndex;switch(this.getReshapingBehavior(this.handle)){case 3:return t;case 2:{const s=i.getPoint(n);return new T(s.x,t.y)}case 1:{const s=i.getPoint(n);return new T(t.x,s.y)}default:case 0:return i.getPoint(n)}}get originalPoint(){return this.$P}get originalPoints(){return this.bm}}p(Li,"None",0),p(Li,"Horizontal",1),p(Li,"Vertical",2),p(Li,"All",3);class Wr extends Gt{constructor(t){super();p(this,"Nr");p(this,"Cr");p(this,"Do");p(this,"bc");p(this,"tS");p(this,"ms");p(this,"Sr");p(this,"gs");p(this,"km");p(this,"iS");p(this,"kc");p(this,"zw");p(this,"Xw");p(this,"Yw");this.name="Resizing",this.Nr=new ct(1,1).g(),this.Cr=new ct(9999,9999).g(),this.Do=new ct(NaN,NaN).g(),this.bc=!1,this.tS=!0,this.ms=null,this.Sr=new Zt("Rectangle",{alignmentFocus:q.Center,desiredSize:ct.cC,fill:"lightblue",stroke:"dodgerblue",strokeWidth:1,cursor:"pointer"}).theme("fill","adornmentFill").theme("stroke","adornmentStroke"),this.gs=null,this.km=new T,this.iS=new ct,this.kc=new T,this.zw=new ct(0,0),this.Xw=new ct(1/0,1/0),this.Yw=new ct(1,1),t&&Object.assign(this,t)}updateAdornments(t){if(!(t===null||t instanceof Xt)){if(t.isSelected&&!this.diagram.isReadOnly){const i=t.resizeObject;let n=t.findAdornment(this.name);if(i!==null&&t.canResize()&&t.actualBounds.isReal()&&t.isVisible()&&i.actualBounds.isReal()&&i.isVisibleObject()&&((n===null||n.adornedObject!==i)&&(n=this.makeAdornment(i)),n!==null)){const s=i.getDocumentAngle();t.Rl()&&this.updateResizeHandles(n,s),t.addAdornment(this.name,n);return}}t.removeAdornment(this.name)}}makeAdornment(t){let i=null;const n=t.part.resizeAdornmentTemplate;if(n===null){i=new se,i.type=Kt.Spot,i.locationSpot=q.Center;const s=new Fi;s.isPanelMain=!0,i.add(s),i.add(this.makeHandle(t,q.TopLeft)),i.add(this.makeHandle(t,q.TopRight)),i.add(this.makeHandle(t,q.BottomRight)),i.add(this.makeHandle(t,q.BottomLeft)),i.add(this.makeHandle(t,q.MiddleTop)),i.add(this.makeHandle(t,q.MiddleRight)),i.add(this.makeHandle(t,q.MiddleBottom)),i.add(this.makeHandle(t,q.MiddleLeft))}else if(i=n.copy(),i===null)return null;return i.adornedObject=t,i}makeHandle(t,i){const n=this.handleArchetype;if(n===null)return null;const s=n.copy()._P();return s.alignment=i,s}updateResizeHandles(t,i){if(t!==null){if(!t.alignment.isDefault()&&(t.cursor==="pointer"||t.cursor.indexOf("resize")>0))this.wF(t,i);else if(t instanceof Kt){const n=t.elements;for(;n.next();){const s=n.value;this.updateResizeHandles(s,i)}}}}wF(t,i){let n=t.alignment;n.isNoSpot()&&(n=q.Center);let s=i;if(n.x<=0)n.y<=0?s+=225:n.y>=1?s+=135:s+=180;else if(n.x>=1)n.y<=0?s+=315:n.y>=1&&(s+=45);else if(n.y<=0)s+=270;else if(n.y>=1)s+=90;else return;s<0?s+=360:s>=360&&(s-=360),s<22.5?t.cursor="e-resize":s<67.5?t.cursor="se-resize":s<112.5?t.cursor="s-resize":s<157.5?t.cursor="sw-resize":s<202.5?t.cursor="w-resize":s<247.5?t.cursor="nw-resize":s<292.5?t.cursor="n-resize":s<337.5?t.cursor="ne-resize":t.cursor="e-resize"}get handleArchetype(){return this.Sr}set handleArchetype(t){this.Sr=t}get handle(){return this.gs}set handle(t){t!==null&&(t.part instanceof se||u.o("new handle is not in an Adornment: "+t)),this.gs=t}get adornedObject(){return this.ms}set adornedObject(t){t!==null&&t.part instanceof se&&u.o("new handle must not be in an Adornment: "+t),this.ms=t}canStart(){if(!this.isEnabled)return!1;const t=this.diagram;return t.isReadOnly||!t.allowResize||!t.lastInput.left?!1:this.findToolHandleAt(t.firstInput.documentPoint,this.name)!==null}doActivate(){const t=this.diagram;this.handle===null&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),this.handle!==null&&(this.adornedObject=this.handle.part.adornedObject,this.adornedObject!==null&&(t.isMouseCaptured=!0,t.animationManager.stopAnimation(),t.wu=!0,this.startTransaction(this.name),this.km.set(this.adornedObject.getDocumentPoint(this.handle.alignment.opposite())),this.kc.set(this.adornedObject.part.location),this.iS.set(this.adornedObject.desiredSize),this.Yw=this.computeCellSize(),this.zw=this.computeMinSize(),this.Xw=this.computeMaxSize(),this.isActive=!0))}doDeactivate(){const t=this.diagram;t.wu=!1,t.Ll=!0,this.stopTransaction(),this.handle=null,this.ms=null,t.isMouseCaptured=!1,this.isActive=!1}stopTransaction(){const t=this.diagram,i=super.stopTransaction();return i&&t.undoManager.transactionToUndo!==null&&t.undoManager.transactionToUndo.optimize(),i}doCancel(){this.adornedObject!==null&&(this.adornedObject.desiredSize=this.originalDesiredSize,this.adornedObject.part.location=this.originalLocation),this.stopTool()}doMouseMove(){const t=this.diagram;if(!this.isActive)return;const i=this.zw,n=this.Xw,s=this.Yw,r=t.lastInput.documentPoint,A=this.adornedObject.getLocalPoint(r,T.l()),o=this.computeReshape(),a=this.computeResize(A,this.handle.alignment,i,n,s,o);this.resize(a),t.maybeUpdate(),T.e(A)}doMouseUp(){const t=this.diagram;if(this.isActive){const i=this.zw,n=this.Xw,s=this.Yw,r=this.adornedObject.getLocalPoint(t.lastInput.documentPoint,T.l()),A=this.computeReshape(),o=this.computeResize(r,this.handle.alignment,i,n,s,A);this.resize(o),T.e(r),t.invalidateDocumentBounds(),this.transactionResult=this.name,t.O("PartResized",this.adornedObject,this.originalDesiredSize)}this.stopTool()}resize(t){const i=this.diagram,n=this.adornedObject;if(n===null)return;n.desiredSize=t.size;const s=n.part;s.ensureBounds();const r=n.getDocumentPoint(this.handle.alignment.opposite());if(s instanceof Vt){const A=new H;A.add(s);let o;!this.dragsMembers&&!s.hasPlaceholder()&&(o=new lr,o.dragsMembers=!1),i.moveParts(A,this.oppositePoint.copy().subtract(r),!0,o)}else s.location=s.location.copy().subtract(r).add(this.oppositePoint);i.maybeUpdate()}computeResize(t,i,n,s,r,A){i.isNoSpot()&&(i=q.Center);const o=this.adornedObject.naturalBounds,a=o.x,h=o.y,d=o.x+o.width,f=o.y+o.height;let g=1;if(!A){let C=o.width,F=o.height;C<=0&&(C=1),F<=0&&(F=1),g=F/C}const x=T.l();V.Og(t.x,t.y,a,h,r.width,r.height,x);const B=o.copy();return i.x<=0?i.y<=0?(B.x=Math.max(x.x,d-s.width),B.x=Math.min(B.x,d-n.width),B.width=Math.max(d-B.x,n.width),B.y=Math.max(x.y,f-s.height),B.y=Math.min(B.y,f-n.height),B.height=Math.max(f-B.y,n.height),A||(B.height/B.width>=1?(B.height=Math.max(Math.min(g*B.width,s.height),n.height),B.width=B.height/g):(B.width=Math.max(Math.min(B.height/g,s.width),n.width),B.height=g*B.width),B.x=d-B.width,B.y=f-B.height)):i.y>=1?(B.x=Math.max(x.x,d-s.width),B.x=Math.min(B.x,d-n.width),B.width=Math.max(d-B.x,n.width),B.height=Math.max(Math.min(x.y-h,s.height),n.height),A||(B.height/B.width>=1?(B.height=Math.max(Math.min(g*B.width,s.height),n.height),B.width=B.height/g):(B.width=Math.max(Math.min(B.height/g,s.width),n.width),B.height=g*B.width),B.x=d-B.width)):(B.x=Math.max(x.x,d-s.width),B.x=Math.min(B.x,d-n.width),B.width=d-B.x,A||(B.height=Math.max(Math.min(g*B.width,s.height),n.height),B.width=B.height/g,B.y=h+.5*(f-h-B.height))):i.x>=1?i.y<=0?(B.width=Math.max(Math.min(x.x-a,s.width),n.width),B.y=Math.max(x.y,f-s.height),B.y=Math.min(B.y,f-n.height),B.height=Math.max(f-B.y,n.height),A||(B.height/B.width>=1?(B.height=Math.max(Math.min(g*B.width,s.height),n.height),B.width=B.height/g):(B.width=Math.max(Math.min(B.height/g,s.width),n.width),B.height=g*B.width),B.y=f-B.height)):i.y>=1?(B.width=Math.max(Math.min(x.x-a,s.width),n.width),B.height=Math.max(Math.min(x.y-h,s.height),n.height),A||(B.height/B.width>=1?(B.height=Math.max(Math.min(g*B.width,s.height),n.height),B.width=B.height/g):(B.width=Math.max(Math.min(B.height/g,s.width),n.width),B.height=g*B.width))):(B.width=Math.max(Math.min(x.x-a,s.width),n.width),A||(B.height=Math.max(Math.min(g*B.width,s.height),n.height),B.width=B.height/g,B.y=h+.5*(f-h-B.height))):i.y<=0?(B.y=Math.max(x.y,f-s.height),B.y=Math.min(B.y,f-n.height),B.height=f-B.y,A||(B.width=Math.max(Math.min(B.height/g,s.width),n.width),B.height=g*B.width,B.x=a+.5*(d-a-B.width))):i.y>=1&&(B.height=Math.max(Math.min(x.y-h,s.height),n.height),A||(B.width=Math.max(Math.min(B.height/g,s.width),n.width),B.height=g*B.width,B.x=a+.5*(d-a-B.width))),T.e(x),B}computeReshape(){let t=0;return this.adornedObject instanceof Zt&&(t=this.adornedObject.eS()),!(t===6||this.diagram.lastInput.shift)}computeMinSize(){const t=this.adornedObject.minSize.copy(),i=this.minSize;return!isNaN(i.width)&&i.width>t.width&&(t.width=i.width),!isNaN(i.height)&&i.height>t.height&&(t.height=i.height),t}computeMaxSize(){const t=this.adornedObject.maxSize.copy(),i=this.maxSize;return!isNaN(i.width)&&i.width<t.width&&(t.width=i.width),!isNaN(i.height)&&i.height<t.height&&(t.height=i.height),t}computeCellSize(){const t=new ct(NaN,NaN),i=this.adornedObject.part;if(i!==null){const r=i.resizeCellSize;!isNaN(r.width)&&r.width>0&&(t.width=r.width),!isNaN(r.height)&&r.height>0&&(t.height=r.height)}let n=this.cellSize;isNaN(t.width)&&!isNaN(n.width)&&n.width>0&&(t.width=n.width),isNaN(t.height)&&!isNaN(n.height)&&n.height>0&&(t.height=n.height);const s=this.diagram;if((isNaN(t.width)||isNaN(t.height))&&s){const r=s.grid;r!==null&&r.visible&&this.isGridSnapEnabled&&(n=r.gridCellSize,isNaN(t.width)&&!isNaN(n.width)&&n.width>0&&(t.width=n.width),isNaN(t.height)&&!isNaN(n.height)&&n.height>0&&(t.height=n.height))}return(isNaN(t.width)||t.width===0||t.width===1/0)&&(t.width=1),(isNaN(t.height)||t.height===0||t.height===1/0)&&(t.height=1),t}get minSize(){return this.Nr}set minSize(t){if(!this.Nr.equals(t)){let i=t.width;isNaN(i)&&(i=0);let n=t.height;isNaN(n)&&(n=0),this.Nr.i(i,n)}}get maxSize(){return this.Cr}set maxSize(t){if(!this.Cr.equals(t)){let i=t.width;isNaN(i)&&(i=1/0);let n=t.height;isNaN(n)&&(n=1/0),this.Cr.i(i,n)}}get cellSize(){return this.Do}set cellSize(t){this.Do.equals(t)||this.Do.a(t)}get isGridSnapEnabled(){return this.bc}set isGridSnapEnabled(t){this.bc=t}get dragsMembers(){return this.tS}set dragsMembers(t){this.tS=t}get oppositePoint(){return this.km}set oppositePoint(t){this.km.equals(t)||this.km.a(t)}get originalDesiredSize(){return this.iS}get originalLocation(){return this.kc}}class xo extends Gt{constructor(t){super();p(this,"sS");p(this,"nS");p(this,"ms");p(this,"Sr");p(this,"Kw");p(this,"gs");p(this,"oS");p(this,"Pm");p(this,"kc");p(this,"rS");p(this,"lS");this.name="Rotating",this.sS=45,this.nS=2,this.kc=new T,this.ms=null,this.handleArchetype=new Zt("Ellipse",{desiredSize:ct.au,fill:"lightblue",stroke:"dodgerblue",strokeWidth:1,cursor:"pointer"}).theme("fill","adornmentFill").theme("stroke","adornmentStroke"),this.gs=null,this.oS=0,this.Pm=new T(NaN,NaN),this.rS=0,this.lS=50,t&&Object.assign(this,t)}updateAdornments(t){if(t!==null){if(t.vl()){const i=t.rotateObject;if(i===t||i===t.path||i.isPanelMain)return}if(t.isSelected&&!this.diagram.isReadOnly){const i=t.rotateObject;if(i!==null&&t.canRotate()&&t.actualBounds.isReal()&&t.isVisible()&&i.actualBounds.isReal()&&i.isVisibleObject()){let n=t.findAdornment(this.name);if((n===null||n.adornedObject!==i)&&(n=this.makeAdornment(i)),n!==null){n.angle=i.getDocumentAngle(),n.hasPlaceholder()||(n.location=this.computeAdornmentLocation(i)),t.addAdornment(this.name,n);return}}}t.removeAdornment(this.name)}}makeAdornment(t){let i=null;const n=t.part.rotateAdornmentTemplate;return n!==null?i=n.copy():this.Kw!==null&&(i=this.Kw.copy()),i===null?null:(i.adornedObject=t,i)}get handleArchetype(){return this.Sr}set handleArchetype(t){this.Sr=t,t!==null?this.Kw=new se(Kt.Position,{locationSpot:q.Center}).add(t).Xt():this.Kw=null}get handle(){return this.gs}set handle(t){t!==null&&(t.part instanceof se||u.o("new handle is not in an Adornment: "+t)),this.gs=t}get adornedObject(){return this.ms}set adornedObject(t){t!==null&&t.part instanceof se&&u.o("new handle must not be in an Adornment: "+t),this.ms=t}canStart(){if(!this.isEnabled)return!1;const t=this.diagram;return t.isReadOnly||!t.allowRotate||!t.lastInput.left?!1:this.findToolHandleAt(t.firstInput.documentPoint,this.name)!==null}doActivate(){const t=this.diagram;if(this.adornedObject===null){if(this.handle===null&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),this.handle===null)return;this.adornedObject=this.handle.part.adornedObject}this.adornedObject!==null&&(t.isMouseCaptured=!0,t.delaysLayout=!0,this.startTransaction(this.name),this.oS=this.adornedObject.angle,this.Pm=this.computeRotationPoint(this.adornedObject),this.kc=this.adornedObject.part.location.copy(),this.isActive=!0)}computeRotationPoint(t){const i=t.part,n=i.locationObject;return i.rotationSpot.isSpot()?t.getDocumentPoint(i.rotationSpot):t===i||t===n?n.getDocumentPoint(i.locationSpot):t.getDocumentPoint(q.Center)}computeAdornmentLocation(t){let i=this.rotationPoint;i.isReal()||(i=this.computeRotationPoint(t));const n=t.getLocalPoint(i);let s=this.handleAngle;s<0?s+=360:s>=360&&(s-=360),s=Math.round(Math.round(s/45)*45);const r=this.handleDistance;return s===0?n.x=t.naturalBounds.width+r:s===45?(n.x=t.naturalBounds.width+r,n.y=t.naturalBounds.height+r):s===90?n.y=t.naturalBounds.height+r:s===135?(n.x=-r,n.y=t.naturalBounds.height+r):s===180?n.x=-r:s===225?(n.x=-r,n.y=-r):s===270?n.y=-r:s===315&&(n.x=t.naturalBounds.width+r,n.y=-r),t.getDocumentPoint(n)}doDeactivate(){const t=this.diagram;this.stopTransaction(),this.handle=null,this.ms=null,this.Pm=new T(NaN,NaN),t.isMouseCaptured=!1,this.isActive=!1}stopTransaction(){const t=this.diagram,i=super.stopTransaction();return i&&t.undoManager.transactionToUndo!==null&&t.undoManager.transactionToUndo.optimize(),i}doCancel(){const t=this.diagram;t.delaysLayout=!1,this.rotate(this.originalAngle),this.stopTool()}doMouseMove(){const t=this.diagram;if(this.isActive){const i=this.computeRotate(t.lastInput.documentPoint);this.rotate(i)}}doMouseUp(){const t=this.diagram;if(this.isActive){t.delaysLayout=!1;const i=this.computeRotate(t.lastInput.documentPoint);this.rotate(i),t.invalidateDocumentBounds(),this.transactionResult=this.name,t.O("PartRotated",this.adornedObject,this.originalAngle)}this.stopTool()}rotate(t){const i=this.adornedObject;if(i===null)return;i.angle=t;const n=i.part;n.ensureBounds();const s=n.locationObject,r=n.rotateObject;if(s===r||s.isContainedBy(r)){const A=this.kc.copy();n.location=A.subtract(this.rotationPoint).rotate(t-this.originalAngle).add(this.rotationPoint)}this.diagram.maybeUpdate()}computeRotate(t){let i=this.rotationPoint.directionPoint(t)-this.handleAngle;const n=this.adornedObject.panel;n!==null&&(i-=n.getDocumentAngle()),i>=360?i-=360:i<0&&(i+=360);const s=Math.min(Math.abs(this.snapAngleMultiple),180),r=Math.min(Math.abs(this.snapAngleEpsilon),s/2);return!this.diagram.lastInput.shift&&s>0&&r>0&&(i%s<r?i=Math.floor(i/s)*s:i%s>s-r&&(i=(Math.floor(i/s)+1)*s)),i>=360?i-=360:i<0&&(i+=360),i}get snapAngleMultiple(){return this.sS}set snapAngleMultiple(t){this.sS=t}get snapAngleEpsilon(){return this.nS}set snapAngleEpsilon(t){this.nS=t}get originalAngle(){return this.oS}get rotationPoint(){return this.Pm}set rotationPoint(t){this.Pm=t.copy()}get handleAngle(){return this.rS}set handleAngle(t){this.rS=t}get handleDistance(){return this.lS}set handleDistance(t){this.lS=t}}class Jr extends Gt{constructor(e){super(),this.name="ClickSelecting",e&&Object.assign(this,e)}canStart(){return!(!this.isEnabled||this.isBeyondDragSize())}doMouseUp(){this.isActive&&(this.standardMouseSelect(),this.standardMouseClick()||this.diagram.lastInput.isTouchEvent&&this.diagram.toolManager.doToolTip()),this.stopTool()}}class FA extends Gt{constructor(t){super();p(this,"Pc");this.name="Action",this.Pc=null,t&&Object.assign(this,t)}canStart(){if(!this.isEnabled)return!1;const t=this.diagram,i=t.lastInput,n=t.findObjectAt(i.documentPoint,s=>{for(;s.panel!==null;){if(s.isActionable)return s;s=s.panel}return s});return n!==null&&n.isActionable?(this.Pc=n,t.pc=t.findObjectAt(i.documentPoint,null,null),!0):!1}doMouseDown(){if(!this.isActive)this.canStart()&&this.doActivate();else{const t=this.diagram.lastInput,i=this.Pc;if(i===null)return;t.targetObject=i,i.actionDown!==null&&i.actionDown(t,i)}}doMouseMove(){if(this.isActive){const t=this.diagram.lastInput,i=this.Pc;if(i===null)return;t.targetObject=i,i.actionMove!==null&&i.actionMove(t,i)}}doMouseUp(){if(this.isActive){const t=this.diagram.lastInput,i=this.Pc;if(i===null)return;t.targetObject=i,i.actionUp!==null&&i.actionUp(t,i),this.standardMouseClick(n=>{for(;n.panel!==null;){if(n.isActionable&&n===i)return n;n=n.panel}return n},n=>n===i)}this.stopTool()}doCancel(){const t=this.diagram.lastInput,i=this.Pc;i!==null&&(t.targetObject=i,i.actionCancel!==null&&i.actionCancel(t,i),this.stopTool())}doStop(){this.Pc=null}}class qr extends Gt{constructor(t){super();p(this,"Ol");p(this,"hS");p(this,"bc");p(this,"aS");this.name="ClickCreating",this.Ol=null,this.hS=!0,this.bc=!1,this.aS=new T(0,0),t&&Object.assign(this,t)}canStart(){if(!this.isEnabled||this.archetypeNodeData===null)return!1;const t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.lastInput.left||this.isBeyondDragSize())return!1;if(this.isDoubleClick){if(t.lastInput.clickCount===1&&(this.aS=t.lastInput.viewPoint.copy()),t.lastInput.clickCount!==2||this.isBeyondDragSize(this.aS))return!1}else if(t.lastInput.clickCount!==1)return!1;return!(t.currentTool!==this&&t.findPartAt(t.lastInput.documentPoint,!0)!==null)}doMouseUp(){const t=this.diagram;this.isActive&&this.insertPart(t.lastInput.documentPoint),this.stopTool()}insertPart(t){const i=this.diagram,n=this.archetypeNodeData;if(n===null)return null;let s=null;try{if(i.O("ChangingSelection",i.selection),this.startTransaction(this.name),n instanceof Ce)n.Ne()&&(n.Xt(),s=n.copy(),s!==null&&i.add(s));else if(n!==null){const r=i.model.copyNodeData(n);u.j(r)&&(i.model.addNodeData(r),s=i.findPartForData(r))}if(s!==null){const r=T.Y(t.x,t.y);this.isGridSnapEnabled&&this.diagram.cS(s,t,r),s.location=r,i.allowSelect&&(i.clearSelection(!0),s.isSelected=!0),T.e(r)}i.invalidateDocumentBounds(),this.transactionResult=this.name,i.O("PartCreated",s)}finally{this.stopTransaction(),i.O("ChangedSelection",i.selection)}return s}get archetypeNodeData(){return this.Ol}set archetypeNodeData(t){t!==null&&u.oc(t,qr,"archetypeNodeData"),this.Ol=t}get isDoubleClick(){return this.hS}set isDoubleClick(t){this.hS=t}get isGridSnapEnabled(){return this.bc}set isGridSnapEnabled(t){this.bc=t}}class Co extends Gt{constructor(t){super();p(this,"jh");p(this,"fS");p(this,"Il");this.name="DragSelecting",this.jh=175,this.fS=!1,this.Il=new Ce({layerName:"Tool",selectable:!1}).add(new Zt("Rectangle",{name:"SHAPE",fill:null,stroke:"magenta"}).theme("stroke","dragSelect")).Xt(),t&&Object.assign(this,t)}canStart(){if(!this.isEnabled)return!1;const t=this.diagram;if(!t.allowSelect)return!1;const i=t.lastInput;return!(!i.left||t.currentTool!==this&&(!this.isBeyondDragSize()||i.timestamp-t.firstInput.timestamp<this.delay||t.findPartAt(i.documentPoint,!0)!==null))}doActivate(){const t=this.diagram;this.isActive=!0,t.isMouseCaptured=!0,t.skipsUndoManager=!0,t.add(this.box),this.doMouseMove()}doDeactivate(){const t=this.diagram;t.stopAutoScroll(),t.remove(this.box),t.skipsUndoManager=!1,t.isMouseCaptured=!1,this.isActive=!1}doMouseMove(){const t=this.diagram;if(this.isActive&&this.box!==null){const i=this.computeBoxBounds();let n=this.box.findObject("SHAPE");n===null&&(n=this.box.findMainElement());const s=ct.l().i(i.width,i.height);n.desiredSize=s,this.box.Sc(i.x,i.y,!1),ct.e(s),(t.allowHorizontalScroll||t.allowVerticalScroll)&&t.doAutoScroll(t.lastInput.viewPoint)}}doMouseUp(){if(this.isActive){const t=this.diagram;t.remove(this.box);try{t.currentCursor="wait",t.O("ChangingSelection",t.selection),this.selectInRect(this.computeBoxBounds()),t.O("ChangedSelection",t.selection)}finally{t.currentCursor=""}}this.stopTool()}computeBoxBounds(){const t=this.diagram;return new it(t.firstInput.documentPoint,t.lastInput.documentPoint)}selectInRect(t){const i=this.diagram,n=i.lastInput,s=i.findPartsIn(t,this.isPartialInclusion);if(u.cr?n.meta:n.control)if(n.shift){const r=s.iterator;for(;r.next();){const A=r.value;A.isSelected&&(A.isSelected=!1)}}else{const r=s.iterator;for(;r.next();){const A=r.value;A.isSelected=!A.isSelected}}else if(n.shift){const r=s.iterator;for(;r.next();){const A=r.value;A.isSelected||(A.isSelected=!0)}}else{const r=new H,A=i.selection.iterator;for(;A.next();){const h=A.value;s.has(h)||r.add(h)}const o=r.iterator;for(;o.next();){const h=o.value;h.isSelected=!1}const a=s.iterator;for(;a.next();){const h=a.value;h.isSelected||(h.isSelected=!0)}}}get delay(){return this.jh}set delay(t){this.jh=t}get isPartialInclusion(){return this.fS}set isPartialInclusion(t){this.fS=t}get box(){return this.Il}set box(t){t!==null&&t.Xt(),this.Il=t}}class SA extends Gt{constructor(t){super();p(this,"Gw");p(this,"sL");p(this,"To");p(this,"uS");this.name="Panning",this.Gw=new T,this.sL=new T,this.To=!1;const i=this;this.uS=()=>{const n=i.diagram;n!==null&&n.Ni(y.document,"scroll",i.uS,!1),i.stopTool()},t&&Object.assign(this,t)}canStart(){if(!this.isEnabled)return!1;const t=this.diagram;return!(!t.allowHorizontalScroll&&!t.allowVerticalScroll||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize())}doActivate(){const t=this.diagram;this.To?(t.lastInput.bubbles=!0,t.Yt(y.document,"scroll",this.uS,!1)):(t.currentCursor="move",t.isMouseCaptured=!0,this.Gw.a(t.position)),this.isActive=!0}doDeactivate(){const t=this.diagram;t.currentCursor="",t.isMouseCaptured=!1,this.isActive=!1}doCancel(){const t=this.diagram;t.position=this.Gw,t.isMouseCaptured=!1,this.stopTool()}doMouseMove(){this.nL()}doMouseUp(){this.nL(),this.stopTool()}nL(){const t=this.diagram;if(this.isActive&&t){if(this.To){t.lastInput.bubbles=!0;return}const i=t.position,n=t.firstInput.documentPoint,s=t.lastInput.documentPoint;let r=i.x+n.x-s.x,A=i.y+n.y-s.y;t.allowHorizontalScroll||(r=i.x),t.allowVerticalScroll||(A=i.y),t.position=this.sL.i(r,A)}}get bubbles(){return this.To}set bubbles(t){this.To=t}get originalPosition(){return this.Gw}}class us{constructor(e){p(this,"Hw");p(this,"jw");p(this,"dS");p(this,"gS");this.Hw=null,this.jw=null,this.dS=null,this.gS=null,e&&Object.assign(this,e)}get mainElement(){return this.dS}set mainElement(e){this.dS=e}get show(){return this.Hw}set show(e){this.Hw!==e&&(this.Hw=e)}get hide(){return this.jw}set hide(e){this.jw!==e&&(this.jw=e)}get valueFunction(){return this.gS}set valueFunction(e){this.gS=e}}class Ji{constructor(e,t,i){p(this,"hi");p(this,"qw");p(this,"Mc");this.hi=e,this.qw=t,this.Mc=i}}const ti=class ti extends Gt{constructor(t){super();p(this,"mS");p(this,"Ww");p(this,"pS");p(this,"yS");p(this,"Jw");p(this,"$w");p(this,"Sm");this.name="ContextMenu",this.mS=null,this.Ww=null,this.pS=null,this.yS=new T,this.Jw=null,this.Sm=!1;const i=this;this.$w=()=>i.stopTool(),t&&Object.assign(this,t)}xF(){const t=new us;t.show=(o,a,h)=>h.showDefaultContextMenu(),t.hide=(o,a)=>a.hideDefaultContextMenu(),ti.Pu=t;const i=this;this.$w=()=>i.stopTool();const n=u.fs("div"),s=u.fs("div");n.style.cssText="top: 0px;z-index:10002;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px",s.style.cssText="z-index:10001;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;opacity: 0.8;";const r=u.fs("style");y.document.getElementsByTagName("head")[0].appendChild(r),r.sheet.insertRule(".goCXul { list-style: none; }",0),r.sheet.insertRule(".goCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0),r.sheet.insertRule(".goCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0);const A=this.diagram;A!==null&&(A.Yt(n,"contextmenu",ti.$h,!1),A.Yt(n,"selectstart",ti.$h,!1),A.Yt(s,"contextmenu",ti.$h,!1)),n.className="goCXforeground",s.className="goCXbackground",y.document.body&&(y.document.body.appendChild(n),y.document.body.appendChild(s)),ti.Mm=n,ti.Nm=s,ti.wS=!0}static $h(t){return t.preventDefault(),!1}canStart(){if(!this.isEnabled)return!1;const t=this.diagram;return this.isBeyondDragSize()||!t.lastInput.right||t.lastInput.clickCount>1?!1:!!(t.lastInput.isTouchEvent&&this.defaultTouchContextMenu!==null||this.findObjectWithContextMenu()!==null)}doStart(){const t=this.diagram;this.yS.set(t.firstInput.documentPoint)}doStop(){this.hideContextMenu(),this.currentObject=null,this.Sm=!1}findObjectWithContextMenu(t){t===void 0&&(t=null);const i=this.diagram,n=i.lastInput;let s=null;if(t instanceof ge||(t instanceof Ye?s=t:s=i.findObjectAt(n.documentPoint,null,r=>!r.layer.isTemporary)),s!==null){let r=s;for(;r!==null;){if(r.contextMenu!==null)return r;r=r.panel}if(i.lastInput.isTouchEvent&&this.defaultTouchContextMenu)return s.part}else if(i.contextMenu!==null)return i;return null}doActivate(){}doMouseDown(){if(super.doMouseDown(),this.isActive&&this.currentContextMenu instanceof se){const t=this.diagram.toolManager.findTool("Action");t!==null&&t.canStart()&&(t.doActivate(),t.doMouseDown(),t.doDeactivate())}this.diagram.toolManager.mouseDownTools.has(this)&&this.doContextClick()}doMouseUp(){if(this.isActive&&this.currentContextMenu instanceof se){const t=this.diagram.toolManager.findTool("Action");t!==null&&t.canStart()&&(t.doActivate(),t.doCancel(),t.doDeactivate())}this.doContextClick()}doContextClick(){const t=this.diagram;if(!this.isActive)this.canStart()&&(this.openMenu(!0),this.isActive||this.stopTool());else{const i=this.currentContextMenu;if(i===null)return;let n=null;i instanceof us||(n=t.findObjectAt(t.lastInput.documentPoint,null,null),n!==null&&n.isContainedBy(i)&&this.standardMouseClick(null,null)),this.maybeStopTool(n)}}maybeStopTool(t){this.stopTool(),this.canStart()&&(this.diagram.currentTool=this,this.doMouseUp())}openMenu(t,i){if(i===void 0&&(i=null),this.Sm)return;this.Sm=!0,t&&this.standardMouseSelect();const n=this.standardMouseClick();if(this.Sm=!1,!n){this.isActive=!0;const s=ti.Pu;if(i===null&&(i=this.findObjectWithContextMenu()),i!==null){const r=i.contextMenu;r!==null?(this.currentObject=i instanceof Ye?i:null,this.showContextMenu(r,this.currentObject)):s!==null&&this.showContextMenu(s,this.currentObject)}else s!==null&&this.showContextMenu(s,null);this.currentContextMenu instanceof se&&!this.currentContextMenu.visible&&this.stopTool()}}doMouseMove(){const t=this.diagram.toolManager.findTool("Action");t!==null&&t.doMouseMove(),this.isActive&&this.diagram.toolManager.doMouseMove()}showContextMenu(t,i){const n=this.diagram;if(t!==this.currentContextMenu&&this.hideContextMenu(),t instanceof se){const s=t;s.layerName="Tool",s.selectable=!1,s.scale=1/n.scale,s.category=this.name,s.hasPlaceholder()&&(s.placeholder.scale=n.scale);const r=s.diagram;r!==null&&r!==n&&r.remove(s),n.add(s),i!==null?s.adornedObject=i:s.data=n.model,s.ensureBounds(),this.positionContextMenu(s,i)}else t instanceof us&&t.show(i,n,this);this.currentContextMenu=t}positionContextMenu(t,i){if(t.hasPlaceholder())return;const n=t,s=this.diagram,r=s.lastInput.documentPoint.copy(),A=n.measuredBounds,o=s.viewportBounds;s.lastInput.isTouchEvent&&(r.x-=A.width),r.x+A.width>o.right&&(r.x-=A.width+5/s.scale),r.x<o.x&&(r.x=o.x),r.y+A.height>o.bottom&&(r.y-=A.height+5/s.scale),r.y<o.y&&(r.y=o.y),n.position=r}hideContextMenu(){const t=this.diagram,i=this.currentContextMenu;i!==null&&(i instanceof se?(t.remove(i),this.Ww!==null&&this.Ww.removeAdornment(i.category),i.data=null,i.adornedObject=null):i instanceof us&&(i.hide!==null?i.hide(t,this):i.mainElement!==null&&(i.mainElement.style.display="none")),this.currentContextMenu=null,this.standardMouseOver())}bF(){const t=this,i=new H;return i.add(new Ji("Copy",n=>n.commandHandler.copySelection(),n=>n.commandHandler.canCopySelection())),i.add(new Ji("Cut",n=>n.commandHandler.cutSelection(),n=>n.commandHandler.canCutSelection())),i.add(new Ji("Delete",n=>n.commandHandler.deleteSelection(),n=>n.commandHandler.canDeleteSelection())),i.add(new Ji("Paste",n=>n.commandHandler.pasteSelection(t.mouseDownPoint),n=>n.commandHandler.canPasteSelection(t.mouseDownPoint))),i.add(new Ji("Select All",n=>n.commandHandler.selectAll(),n=>n.commandHandler.canSelectAll())),i.add(new Ji("Undo",n=>n.commandHandler.undo(),n=>n.commandHandler.canUndo())),i.add(new Ji("Redo",n=>n.commandHandler.redo(),n=>n.commandHandler.canRedo())),i.add(new Ji("Scroll To Part",n=>n.commandHandler.scrollToPart(),n=>n.commandHandler.canScrollToPart())),i.add(new Ji("Zoom To Fit",n=>n.commandHandler.zoomToFit(),n=>n.commandHandler.canZoomToFit())),i.add(new Ji("Reset Zoom",n=>n.commandHandler.resetZoom(),n=>n.commandHandler.canResetZoom())),i.add(new Ji("Group Selection",n=>n.commandHandler.groupSelection(),n=>n.commandHandler.canGroupSelection())),i.add(new Ji("Ungroup Selection",n=>n.commandHandler.ungroupSelection(),n=>n.commandHandler.canUngroupSelection())),i.add(new Ji("Edit Text",n=>n.commandHandler.editTextBlock(),n=>n.commandHandler.canEditTextBlock())),i}showDefaultContextMenu(){const t=this.diagram;this.Jw===null&&(this.Jw=this.bF()),ti.Mm.innerHTML="",ti.Nm.addEventListener("pointerdown",this.$w,!1);const i=this,n=u.fs("ul");n.className="goCXul",ti.Mm.appendChild(n),n.innerHTML="";const s=this.Jw.iterator;for(;s.next();){const r=s.value,A=r.qw,o=r.Mc;if(!u.lt(A)||u.lt(o)&&!o(t))continue;const a=u.fs("li");a.className="goCXli";const h=u.fs("a");h.className="goCXa",h.href="#",h.qw=A,h.addEventListener("pointerdown",function(d){return this.qw(t),i.stopTool(),d.preventDefault(),!1},!1),h.textContent=r.hi,a.appendChild(h),n.appendChild(a)}ti.Mm.style.display="block",ti.Nm.style.display="block"}hideDefaultContextMenu(){if(this.currentContextMenu===null||this.currentContextMenu!==ti.Pu)return;ti.Mm.style.display="none",ti.Nm.style.display="none";const t=this.diagram;t!==null&&t.Ni(ti.Nm,"pointerdown",this.$w,!1),this.currentContextMenu=null}get currentContextMenu(){return this.mS}set currentContextMenu(t){this.mS=t,this.Ww=t instanceof se?t.adornedPart:null}get defaultTouchContextMenu(){return ti.wS===!1&&ti.Pu===null&&ge.isUsingDOM()&&this.xF(),ti.Pu}set defaultTouchContextMenu(t){t===null&&(ti.wS=!0),ti.Pu=t}get currentObject(){return this.pS}set currentObject(t){this.pS=t}get mouseDownPoint(){return this.yS}};p(ti,"Pu",null),p(ti,"wS",!1),p(ti,"Nm",null),p(ti,"Mm",null);let Ms=ti;var Ks=(k=>(k[k.LostFocus=1]="LostFocus",k[k.MouseDown=2]="MouseDown",k[k.Tab=3]="Tab",k[k.Enter=4]="Enter",k))(Ks||{}),bA=(k=>(k[k.SingleClick=1]="SingleClick",k[k.SingleClickSelected=2]="SingleClickSelected",k[k.DoubleClick=3]="DoubleClick",k))(bA||{}),vo=(k=>(k[k.None=1]="None",k[k.Active=2]="Active",k[k.Editing=3]="Editing",k[k.Validating=4]="Validating",k[k.Invalid=5]="Invalid",k[k.Validated=6]="Validated",k))(vo||{});const oi=class oi extends Gt{constructor(t){super();p(this,"Ce");p(this,"xS");p(this,"bS");p(this,"El");p(this,"jt");p(this,"kS");p(this,"PS");p(this,"SS");p(this,"Zw");p(this,"Qw");this.name="TextEditing",this.Ce=new We,this.xS=null,this.bS=2,this.El=null,this.jt=1,this.kS=1,this.PS=!0,this.SS=null,this.Zw=new us,this.Qw=null,this.kF(this.Zw),t&&Object.assign(this,t)}kF(t){if(!ge.isUsingDOM())return;const i=u.fs("textarea");this.Qw=i;const n=this;i.addEventListener("input",function(s){if(n.textBlock===null)return;const r=n.measureTemporaryTextBlock(this.value),A=this.textScale;this.style.width=20+Math.max(n.textBlock.measuredBounds.width,r.measuredBounds.width)*A+"px",this.rows=Math.max(n.textBlock.lineCount,r.lineCount)},!1),i.addEventListener("keydown",function(s){if(s.isComposing||n.textBlock===null)return;const r=s.key;if(r==="Enter"){n.textBlock.isMultiline===!1&&s.preventDefault(),n.acceptText(4);return}else if(r==="Tab"){n.acceptText(3),s.preventDefault();return}else r==="Escape"&&(n.doCancel(),n.diagram!==null&&n.diagram.doFocus())},!1),i.addEventListener("focus",function(s){n.PF(s)},!1),i.addEventListener("blur",function(s){n.SF(s)},!1),t.valueFunction=()=>i.value,t.mainElement=i,t.show=(s,r,A)=>{if(!(s instanceof We)||!r||!r.div||!(A instanceof oi))return;if(A.state===5){i.style.border="3px solid red",i.focus();return}const o=s.getDocumentPoint(q.Center),a=r.position,h=r.scale;let d=s.getDocumentScale()*h;d<A.minimumEditorScale&&(d=A.minimumEditorScale);const f=s.naturalBounds.width*d+6,g=s.naturalBounds.height*d+2,x=(o.x-a.x)*h,B=(o.y-a.y)*h,C=s.verticalAlignment,F=(s.lineHeight+s.spacingAbove+s.spacingBelow)*s.lineCount*d,b=.5*g-.5*F,L=C.y*g-C.y*F+C.offsetY-b-F/2;i.value=s.text,r.div.style.font=s.font;const Q=1;i.style.position="absolute",i.style.zIndex="100",i.style.font="inherit",i.style.fontSize=d*100+"%",i.style.lineHeight="normal",i.style.width=f+"px",i.style.left=(x-f/2|0)-Q+"px",i.style.top=(B+L|0)-Q+"px",i.style.textAlign=s.textAlign,i.style.margin="0",i.style.padding=Q+"px",i.style.border="0",i.style.outline="none",i.style.whiteSpace="pre-wrap",i.style.overflow="hidden",i.rows=s.lineCount,i.textScale=d,i.className="goTXarea",r.div.appendChild(i),i.focus(),A.selectsTextOnActivate&&(i.select(),i.setSelectionRange(0,9999))},t.hide=(s,r)=>{s.div&&s.div.removeChild(i)}}get textBlock(){return this.xS}set textBlock(t){this.xS=t}get currentTextEditor(){return this.SS}set currentTextEditor(t){this.SS=t}get defaultTextEditor(){return this.Zw}set defaultTextEditor(t){this.Zw=t}get starting(){return this.bS}set starting(t){this.bS=t}canStart(){if(!this.isEnabled)return!1;const t=this.diagram;if(t===null||t.isReadOnly||oi.Nc&&oi.Nc!==this&&(oi.Nc.acceptText(2),oi.Nc&&oi.Nc!==this)||!t.lastInput.left||this.isBeyondDragSize())return!1;const i=t.lastInput.documentPoint,n=t.findObjectAt(i);if(n===null||!(n instanceof We)||!n.editable||!n.part.canEdit())return!1;const s=n.part;return!(s===null||this.starting===2&&!s.isSelected||this.starting===3&&t.lastInput.clickCount<2)}doStart(){oi.Nc=this,this.textBlock!==null&&this.doActivate()}doActivate(){if(this.isActive)return;const t=this.diagram;if(t===null)return;let i=this.textBlock;if(i===null&&(i=t.findObjectAt(t.lastInput.documentPoint)),i===null||!(i instanceof We)||(this.textBlock=i,i.part===null))return;t.animationManager.stopAnimation(),this.isActive=!0,this.jt=2;let n=this.defaultTextEditor;i.textEditor!==null&&(n=i.textEditor),this.Ce=this.textBlock.copy();const s=new it(this.textBlock.getDocumentPoint(q.TopLeft),this.textBlock.getDocumentPoint(q.BottomRight));t.scrollToRect(s),n.show(i,t,this),this.currentTextEditor=n}doCancel(){this.stopTool()}doMouseUp(){this.canStart()&&this.doActivate()}doMouseDown(){this.isActive&&this.acceptText(2)}acceptText(t){switch(t){case 2:this.jt===6?this.currentTextEditor instanceof HTMLElement&&this.currentTextEditor.focus():(this.jt===2||this.jt===5||this.jt===3)&&(this.jt=4,this.oL());break;case 1:case 4:case 3:if(t===4&&this.textBlock.isMultiline===!0)return;(this.jt===2||this.jt===5||this.jt===3)&&(this.jt=4,this.oL());break}}oL(){const t=this.textBlock,i=this.diagram,n=this.currentTextEditor;if(t!==null&&n!==null){const s=t.text;let r="";if(n.valueFunction!==null&&(r=n.valueFunction()),!this.isValidText(t,s,r)){this.jt=5,this.doError(s,r);return}this.startTransaction(this.name),this.jt=6,this.transactionResult=this.name,t.text=r,this.doSuccess(s,r),i!==null&&i.O("TextEdited",t,s),this.stopTransaction(),this.stopTool(),i!==null&&i.doFocus()}}doError(t,i){const n=this.textBlock;n.errorFunction!==null&&n.errorFunction(this,t,i);const s=this.currentTextEditor;s&&s.show(n,this.diagram,this)}doSuccess(t,i){const n=this.textBlock;n.textEdited!==null&&n.textEdited(n,t,i)}doDeactivate(){const t=this.diagram;t!==null&&(this.jt=1,this.currentTextEditor!==null&&this.currentTextEditor.hide(t,this),this.textBlock=null,this.isActive=!1)}doStop(){oi.Nc=null}PF(t){if(this.currentTextEditor===null||this.state===1)return;const i=this.Qw;this.jt===2&&(this.jt=3),u.lt(i.select)&&this.selectsTextOnActivate&&(i.select(),i.setSelectionRange(0,9999))}SF(t){if(this.currentTextEditor===null||this.state===1)return;const i=this.Qw;u.lt(i.focus)&&i.focus(),u.lt(i.select)&&this.selectsTextOnActivate&&(i.select(),i.setSelectionRange(0,9999))}isValidText(t,i,n){const s=this.textValidation;if(s!==null&&!s(t,i,n))return!1;const r=t.textValidation;return!(r!==null&&!r(t,i,n))}get textValidation(){return this.El}set textValidation(t){this.El=t}get minimumEditorScale(){return this.kS}set minimumEditorScale(t){this.kS=t}get selectsTextOnActivate(){return this.PS}set selectsTextOnActivate(t){this.PS=t}get state(){return this.jt}set state(t){this.jt!==t&&(this.jt=t)}measureTemporaryTextBlock(t){const i=this.Ce;return i.text=t,i.dt(this.textBlock.Bl,1/0),i}};p(oi,"LostFocus",1),p(oi,"MouseDown",2),p(oi,"Tab",3),p(oi,"Enter",4),p(oi,"SingleClick",1),p(oi,"SingleClickSelected",2),p(oi,"DoubleClick",3),p(oi,"StateNone",1),p(oi,"StateActive",2),p(oi,"StateEditing",3),p(oi,"StateValidating",4),p(oi,"StateInvalid",5),p(oi,"StateValidated",6),p(oi,"Nc",null);let Zr=oi;var Fo=(k=>(k[k.Default=1]="Default",k[k.AnimateLocations=2]="AnimateLocations",k[k.None=3]="None",k))(Fo||{});const wn=class wn{constructor(e){p(this,"k");p(this,"Ci");p(this,"Bi");p(this,"Lr");p(this,"Jn");p(this,"Fo");p(this,"MS");p(this,"NS");p(this,"Cm");p(this,"xi");p(this,"Cc");p(this,"gn");p(this,"Lm");p(this,"Zh");p(this,"_w");p(this,"Am");p(this,"tx");p(this,"Lc");p(this,"bu");p(this,"Tm");this.k=ge.mm(),this.Ci=!1,this.Cm=!1,this.xi=!1,this.Cc=!1,this.tx=!0,this.Lc=1,this.bu=!1,this.Bi=!0,this.Lr=!0,this.Fo=600,this.MS=!1,this.NS=!1,this.Jn=new X,this.gn=new Ps,this.Lm=new Ps,this.gn.ps=this,this.Zh=new X,this._w=new X,this.Am=new X,this.Tm=new X,e&&Object.assign(this,e)}Ro(e){this.k=e}xE(){return this.k}canStart(e){return!0}Ul(e){return!this.Bi||!this.canStart(e)?!1:(this.Jn.add(e),this.defaultAnimation.isAnimating&&this.stopAnimation(),this.k.Li(),this.xi=!0,!0)}getBundleAnimation(){return this.Lm}CS(){if(!this.Bi||(this.Lm.de.count>0&&this.Lm.start(),!this.xi))return;const e=this.gn,t=this.k,i=this.Jn.has("Model");if(i&&(this.Cc=!0,this.Lc===1?(e.isViewportUnconstrained=!0,e.de.clear(),e.add(t,"position",t.position.copy().offset(0,-200),t.position),e.add(t,"opacity",0,1)):this.Lc===3&&e.de.clear(),this.Lc===2&&t.ix.equals(t.gt)?this.tx=!0:this.tx=!1,t.O("InitialAnimationStarting",this)),i&&!this.Lr||e.de.count===0){this.Jn.clear(),this.xi=!1,e.de.clear(),e.ex(t),this.Cc=!1,t.L();return}this.Jn.clear(),t.Ar=!1;const n=e.de.get(t);t.autoScale!==1&&n!==null&&(delete n.ni.scale,delete n.ys.scale);const s=this;y.requestAnimationFrame(()=>{s.xi===!1||e.Ci||(t.getRenderingHint("temporaryPixelRatio")&&t.Ew(),t.LS(),s.xi=!1,e.start(),e.Ci&&(s.Su(),t.invalidateDocumentBounds(),e.rL(0),t.Pr(!0),s.Mu(),t.O("AnimationStarting",s)))})}AS(){return this.Jn.has("Trigger")&&this.Jn.count===1}lL(e,t,i,n){this.isTicking||this.AS()||e instanceof Xt&&(e.fromNode!==null||e.toNode!==null)||this.gn.add(e,"position",t,i,n)}sx(e){return this.gn.sx(e)}TS(e){return this.gn.TS(e)}MF(e){const t=this.Zh,i=this;function n(){if(i.Am.count>0&&(t.addAll(i.Am),i.Am.clear(),i.Ci=!0),i.Ci===!1||t.count===0)return;i._w.addAll(t);const s=i._w.iterator;for(;s.next();){const r=s.value;r.Ci!==!1&&(r.NF()?r.hL(!1):r.Ac=!0)}if(i._w.clear(),i.Ci===!1){y.requestAnimationFrame(n);return}i.Su(),i.k.Pr(),i.Mu(),y.requestAnimationFrame(n)}this.Ci?this.CF(e):(this.Ci=!0,t.add(e),y.requestAnimationFrame(()=>n()))}CF(e){this.Am.add(e)}LF(){const e=this.Zh.iterator;for(;e.next();)e.value.Ac=!1}Su(){if(this.Cm)return;const e=this.k;this.MS=e.skipsUndoManager,this.NS=e.ge,e.skipsUndoManager=!0,e.ge=!0,this.Cm=!0}Mu(){const e=this.k;e.skipsUndoManager=this.MS,e.ge=this.NS,this.Cm=!1}stopAnimation(e){const t=this.gn;if(this.xi===!0&&(this.xi=!1,this.Cc=!1,this.Jn.clear(),t.AF()&&this.k.requestUpdate()),!this.Ci){t.de.clear(),t.ex(this.k);return}if(t.Nu(!0),t.ex(null),e===!0){const i=this.Zh.toArray();for(let n=0;n<i.length;n++)i[n].Nu(!0)}}Nu(e){this.Zh.delete(e),this.Zh.count===0&&(this.Ci=!1,this.k.requestUpdate()),e===this.defaultAnimation&&this.k.O("AnimationFinished",this)}Tc(e,t){this.xi&&(!this.Jn.has("Expand Tree")&&!this.Jn.has("Expand SubGraph")||(this.gn.Tc(e,t),this.aL(e)))}Dc(e,t){this.xi&&(!this.Jn.has("Collapse Tree")&&!this.Jn.has("Collapse SubGraph")||(this.gn.Dc(e,t),this.gn.DS(t,"position",t.position,t.position),this.aL(e)))}cL(e,t){!this.xi||e.equals(t)||this.AS()||(this.k.Gh||(e=t.copy()),this.gn.DS(this.k,"position",e,t))}fL(e,t){this.xi&&(this.AS()||this.gn.add(this.k,"scale",e,t))}FS(e,t){e.Le&&(e.Tr=t,this.Tm.add(e))}aL(e){const t=e.findLinksConnected();for(;t.next();){const i=t.value;i.Le&&(i.Tr=i.points.copy(),this.Tm.add(i))}}get isEnabled(){return this.Bi}set isEnabled(e){this.Bi=e,e&&this.Zh.each(t=>{!t.isAnimating&&t.runCount===1/0&&t.start()})}get duration(){return this.Fo}set duration(e){e<1&&u.it(e,">= 1",wn,"duration"),this.Fo=e}get isAnimating(){return this.Ci}get isTicking(){return this.Cm}get isInitial(){return this.Lr}set isInitial(e){this.Lr=e}get defaultAnimation(){return this.gn}get activeAnimations(){return this.Zh}get initialAnimationStyle(){return this.Lc}set initialAnimationStyle(e){this.Lc=e}static defineAnimationEffect(e,t){wn.nx.set(e,t)}static RS(e,t,i,n,s){e===null&&(e=[0,0,0,0]),t===null&&(t=[0,0,0,0]);let r=e[0],A=e[1];const o=e[2],a=e[3];let h=t[0],d=t[1];const f=t[2],g=t[3];o===0||o===100?(r=h,A=d):(f===0||f===100)&&(h=r,d=A),Math.abs(h-r)>180&&(h>r?r+=360:h+=360);const x=s(i,r,h-r,n)%360,B=s(i,A,d-A,n),C=s(i,o,f-o,n),F=s(i,a,g-a,n);return"hsla("+x+", "+B+"%, "+C+"%, "+F+")"}};p(wn,"nx",new xt),(()=>{const e=wn.nx,t=(i,n,s,r,A,o)=>{i.position=new T(r(A,n.x,s.x-n.x,o),r(A,n.y,s.y-n.y,o))};e.set("position:diagram",t),e.set("position",t),e.set("position:part",(i,n,s,r,A,o)=>{A<o?i.Sc(r(A,n.x,s.x-n.x,o),r(A,n.y,s.y-n.y,o),!1):i.position=new T(r(A,n.x,s.x-n.x,o),r(A,n.y,s.y-n.y,o))}),e.set("location",(i,n,s,r,A,o)=>{A<o?i.Sc(r(A,n.x,s.x-n.x,o),r(A,n.y,s.y-n.y,o),!0):i.location=new T(r(A,n.x,s.x-n.x,o),r(A,n.y,s.y-n.y,o))}),e.set("position:placeholder",(i,n,s,r,A,o)=>{A<o?i.Sc(r(A,n.x,s.x-n.x,o),r(A,n.y,s.y-n.y,o),!1):i.position=new T(r(A,n.x,s.x-n.x,o),r(A,n.y,s.y-n.y,o))}),e.set("position:nodeCollapse",(i,n,s,r,A,o)=>{const a=i.actualBounds,h=s.actualBounds,d=h.x+h.width/2-a.width/2,f=h.y+h.height/2-a.height/2;A<o?i.Sc(r(A,n.x,d-n.x,o),r(A,n.y,f-n.y,o),!1):i.position=new T(r(A,n.x,d-n.x,o),r(A,n.y,f-n.y,o))}),e.set("desiredSize",(i,n,s,r,A,o)=>{i.desiredSize=new ct(r(A,n.width,s.width-n.width,o),r(A,n.height,s.height-n.height,o))}),e.set("width",(i,n,s,r,A,o)=>{i.width=r(A,n,s-n,o)}),e.set("height",(i,n,s,r,A,o)=>{i.height=r(A,n,s-n,o)}),e.set("fill",(i,n,s,r,A,o)=>{i.fill=wn.RS(n,s,A,o,r)}),e.set("stroke",(i,n,s,r,A,o)=>{i.stroke=wn.RS(n,s,A,o,r)}),e.set("strokeWidth",(i,n,s,r,A,o)=>{i.strokeWidth=r(A,n,s-n,o)}),e.set("strokeDashOffset",(i,n,s,r,A,o)=>{i.strokeDashOffset=r(A,n,s-n,o)}),e.set("background",(i,n,s,r,A,o)=>{i.background=wn.RS(n,s,A,o,r)}),e.set("opacity",(i,n,s,r,A,o)=>{i.opacity=r(A,n,s-n,o)}),e.set("scale",(i,n,s,r,A,o)=>{i.scale=r(A,n,s-n,o)}),e.set("angle",(i,n,s,r,A,o)=>{i.angle=r(A,n,s-n,o)})})(),p(wn,"Default",1),p(wn,"AnimateLocations",2),p(wn,"None",3);let Vs=wn;const Ti=class Ti{constructor(e){p(this,"ox");p(this,"Dm");p(this,"Ci");p(this,"Cu");p(this,"Fo");p(this,"ws");p(this,"uL");p(this,"Fc");p(this,"de");p(this,"rx");p(this,"ni");p(this,"$n");p(this,"Lu");p(this,"Rc");p(this,"lx");p(this,"hx");p(this,"Ac");p(this,"vS");p(this,"ax");p(this,"ps");p(this,"k");p(this,"OS");p(this,"IS");p(this,"ES");this.k=null,this.ps=null,this.vS=null,this.ax=null,this.OS=!1,this.Ci=!1,this.Ac=!1,this.ni=0,this.$n=0,this.ox=Ti.EaseInOutQuad,this.Dm=Ti.EaseInOutQuad,this.Lu=!1,this.Rc=!1,this.lx=1,this.hx=0,this.Fo=NaN,this.ws=NaN,this.IS=0,this.Cu=null,this.uL=T.Lo,this.de=new xt,this.rx=new xt,this.Fc=new X,this.ES=1,e&&Object.assign(this,e)}suspend(){this.Ac=!0}advanceTo(e,t){t&&(this.Ac=!1),this.Lu&&e>=this.ws&&(this.Rc=!0,e=e-this.ws),this.IS=e,this.hL(!0),this.ps.Su(),this.k.Pr(),this.ps.Mu(),this.k.redraw()}ex(e){if(this.rx.clear(),this.Rc=!1,this.hx=0,this.ws=NaN,this.Fc.count>0&&this.Fc.clear(),e!==null){const t=e.links;for(;t.next();)t.value.Tr=null}}AF(){return this.de.count>0}start(){if(this.de.count===0)return this;if(this.Ci)return this;let e=this.k;const t=this.de.iterator;for(;t.next();){const n=t.key;e===null&&(n instanceof ge?e=n:n instanceof Ye&&(e=n.diagram))}if(e!==null)this.k=e,this.ps=e.animationManager;else return this;const i=this.ps;return i.isEnabled===!1?this:(this.ws=isNaN(this.Fo)?i.duration:this.Fo,this.Dm=this.ox,i.Cc&&i.Lc===1&&this===i.defaultAnimation&&(this.Dm=Ti.EaseOutExpo,this.ws=isNaN(this.Fo)?i.duration===600?900:i.duration:this.Fo),this.ES=e.scrollMode,this.isViewportUnconstrained&&(e.Qh=2),i.Su(),this.Fc.each(n=>{n.data=null,e.add(n)}),i.Mu(),this.Ci=!0,this.ni=+new Date,this.$n=this.ni+this.ws,i.MF(this),this)}addTemporaryPart(e,t){return e.Ne()?(this.Fc.add(e),this.k=t,this):this}add(e,t,i,n,s){if(this.k===null&&(e instanceof ge?this.k=e:e instanceof Ye&&e.diagram!==null&&(this.k=e.diagram)),e instanceof Ce){if(!e.isAnimated)return this;t==="position"&&(t="position:part")}return this.DS(e,t,i,n,s),this}DS(e,t,i,n,s){const r=this.de;let A,o,a;if(e instanceof ge&&t==="position"&&(t="position:diagram"),(t==="fill"||t==="stroke"||t==="background")&&(Qe.vo(i),Qe.BS(),i=[Qe.Ui.n0,Qe.Ui.n1,Qe.Ui.n2,Qe.Ui.n3],Qe.vo(n),Qe.BS(),n=[Qe.Ui.n0,Qe.Ui.n1,Qe.Ui.n2,Qe.Ui.n3]),r.has(e))A=r.get(e),o=A.ni,a=A.ys,o[t]===void 0&&(o[t]=this.Au(i)),a[t]=this.Au(n);else{if(t==="position"&&i.equalsApprox(n))return;o={},a={},o[t]=this.Au(i),a[t]=this.Au(n),A=new kA(o,a,s),r.set(e,A)}const h=o[t];h instanceof T&&!h.isReal()&&h.a(this.uL),s&&t.indexOf("position:")===0&&e instanceof Ce?A.cx.location=this.Au(e.location):s&&(A.cx[t]=this.Au(i))}Au(e){return e instanceof T||e instanceof ct?e.copy():e}TF(e){const t=this.de;if(t.has(e)){const i=t.get(e);i.fx=!0}}sx(e){if(!this.Ci)return!1;const t=this.de.get(e);return t!==null&&t.fx}TS(e){if(!this.Ci)return!1;const t=this.de.get(e);return t!==null&&!!(t.ni.position||t.ni["position:part"]||t.ni.location)}NF(){if(this.Fc.count>0)return!0;const e=this.de.iterator;for(;e.next();){const t=e.key;if(t instanceof Ye&&t.diagram!==null||t instanceof ge)return!0}return!1}hL(e){if(this.Ac&&!e)return;const t=this.ps;if(this.Ci===!1)return;const i=+new Date;let n=i>this.$n?this.ws:i-this.ni;e&&(n=this.IS,n<this.ws?(this.ni=+new Date-n,this.$n=this.ni+this.ws):n=this.ws),t.Su(),this.rL(n),this.k.Pr(!0),t.Mu(),i>this.$n&&(this.Lu&&!this.Rc?(this.ni=+new Date,this.$n=this.ni+this.ws,this.Rc=!0):this.Nu(!1))}rL(e){const t=this.ws,i=this.de.iterator,n=this.Rc;for(;i.next();){const s=i.key;if(s instanceof Ye&&s.diagram===null)continue;const r=i.value,A=n?r.ys:r.ni,o=n?r.ni:r.ys,a=Vs.nx;for(const h in o)h==="position"&&(o["position:placeholder"]||o["position:nodeCollapse"])||a.get(h)!==null&&a.get(h)(s,A[h],o[h],this.Dm,e,t,this)}}stop(){return this.Ci?(this.Nu(!0),this):this}Nu(e){if(this.ax!==null&&this.ax.DF(this.vS),!this.Ci)return;const t=this.k,i=this.ps;i.Cc=!1,this.Ci=!1,this.Ac=!1,i.Su();const n=this.de,s=this.Fc.iterator;for(;s.next();)t.remove(s.value);const r=this.Lu,A=n.iterator,o=Vs.nx;for(;A.next();){const h=A.key,d=A.value,f=r?d.ys:d.ni,g=r?d.ni:d.ys,x=d.cx;for(const B in g)if(o.get(B)!==null){let C=B;d.ux&&(C==="position:nodeCollapse"||C==="position:placeholder")&&(C="position"),o.get(C)(h,f[B],x[B]!==void 0?x[B]:d.ux?f[B]:g[B],this.Dm,this.ws,this.ws,this)}d.ux&&x.location!==void 0&&h instanceof Ce&&(h.location=x.location),d.fx&&h instanceof Ce&&h.Vi(!1)}this.hx++;const a=!e&&this.lx>this.hx;if(!a&&(this===i.Lm||this===i.defaultAnimation)&&this.de.clear(),t.gx.clear(),t.xP(!1),t.invalidateDocumentBounds(),t.L(),t.Pr(!0),i.defaultAnimation===this){const h=i.Tm.iterator;for(;h.next();)h.value.FF();i.Tm.clear()}if(t.Pr(!0),this.isViewportUnconstrained&&(t.scrollMode=this.ES),i.Mu(),a){this.Rc=!1,this.start();return}this.ex(null),t.dL(),i.Nu(this),this.Cu&&this.Cu(this),t.requestUpdate()}Tc(e,t){const i=t.actualBounds;let n=null;if(t instanceof Vt&&(n=t.placeholder),n!==null&&n.visible){const s=n.getDocumentPoint(q.TopLeft),r=n.padding;s.x+=r.left,s.y+=r.top,this.add(e,"position",s,e.position,!1)}else this.add(e,"position",new T(i.x+i.width/2,i.y+i.height/2),e.position,!1);this.add(e,"scale",.01,e.scale,!1),e instanceof Vt&&this.RF(e,t)}RF(e,t){const i=e.memberParts;for(;i.next();){const n=i.value;n instanceof Et&&this.Tc(n,t)}}Dc(e,t){if(!e.isVisible())return;let i=null;if(t instanceof Vt&&(i=t.placeholder),i!==null&&i.visible){const n=i.getDocumentPoint(q.TopLeft),s=i.padding;n.x+=s.left,n.y+=s.top,this.add(e,"position:placeholder",e.position,n,!0)}else this.add(e,"position:nodeCollapse",e.position,t,!0);this.add(e,"scale",e.scale,.01,!0),this.TF(e),e instanceof Vt&&this.vF(e,t)}vF(e,t){const i=e.memberParts;for(;i.next();){const n=i.value;n instanceof Et&&this.Dc(n,t)}}get duration(){return this.Fo}set duration(e){u.s(e,"number",Ti,"duration"),e<1&&u.it(e,">= 1",Ti,"duration"),this.Fo=e}get reversible(){return this.Lu}set reversible(e){this.Lu=e}get runCount(){return this.lx}set runCount(e){e>0?this.lx=e:u.o("Animation.runCount value must be a positive integer.")}get finished(){return this.Cu}set finished(e){this.Cu!==e&&(e!==null&&u.C(e,Ti,"finished"),this.Cu=e)}get easing(){return this.ox}set easing(e){this.ox=e}get isViewportUnconstrained(){return this.OS}set isViewportUnconstrained(e){this.OS=e}get isAnimating(){return this.Ci}getTemporaryState(e){let t=this.rx.get(e);return t===null&&(t={},this.rx.set(e,t)),t}};p(Ti,"EaseLinear",(e,t,i,n)=>i*e/n+t),p(Ti,"EaseInOutQuad",(e,t,i,n)=>(e/=n/2,e<1?i/2*e*e+t:-i/2*(--e*(e-2)-1)+t)),p(Ti,"EaseInQuad",(e,t,i,n)=>i*(e/=n)*e+t),p(Ti,"EaseOutQuad",(e,t,i,n)=>-i*(e/=n)*(e-2)+t),p(Ti,"EaseInExpo",(e,t,i,n)=>e===0?t:i*Math.pow(2,10*(e/n-1))+t),p(Ti,"EaseOutExpo",(e,t,i,n)=>e===n?t+i:i*(-Math.pow(2,-10*e/n)+1)+t);let Ps=Ti;class kA{constructor(e,t,i){p(this,"ni");p(this,"ys");p(this,"cx");p(this,"ux");p(this,"fx");this.ni=e,this.ys=t,this.cx={},this.ux=i,this.fx=!1}}var So=(k=>(k[k.Default=1]="Default",k[k.Immediate=2]="Immediate",k[k.Bundled=3]="Bundled",k))(So||{});const ts=class ts{constructor(e,t,i){p(this,"Me");p(this,"fn");p(this,"Tu");p(this,"vc");this.Me=null,this.fn=e,this.Tu=i||1,this.vc=null,t!==void 0&&(this.vc=t,i===void 0&&(this.Tu=2))}copy(){const e=new ts(this.fn);e.Tu=this.Tu;const t=this.vc;if(t!==null){const i={};t.duration!==void 0&&(i.duration=t.duration),t.finished!==void 0&&(i.finished=t.finished),t.easing!==void 0&&(i.easing=t.easing),e.vc=i}return e}get propertyName(){return this.fn}set propertyName(e){this.fn=e}get animationSettings(){return this.vc}set animationSettings(e){this.vc=e}OF(e){const t=this.vc;t!==null&&(t.duration&&(e.duration=t.duration),t.finished&&(e.finished=t.finished),t.easing&&(e.easing=t.easing))}get startCondition(){return this.Tu}set startCondition(e){this.Tu=e}};p(ts,"Default",1),p(ts,"Immediate",2),p(ts,"Bundled",3);let cs=ts;class ki{constructor(e){p(this,"k");p(this,"Ct");p(this,"Qt");p(this,"Dr");p(this,"Vl");p(this,"zl");p(this,"Xl");p(this,"Yl");p(this,"Kl");p(this,"Gl");p(this,"Hl");p(this,"jl");p(this,"ql");p(this,"Wl");p(this,"Jl");p(this,"$l");p(this,"Mc");p(this,"Zl");p(this,"mx");p(this,"Fm");p(this,"Du");p(this,"Dt");X.qi(this),this.k=null,this.Dt=new H,this.Ct="",this.Qt=1,this.Dr=!1,this.Vl=!0,this.zl=!0,this.Xl=!0,this.Yl=!0,this.Kl=!0,this.Gl=!0,this.Hl=!0,this.jl=!0,this.ql=!0,this.Wl=!0,this.Jl=!0,this.$l=!0,this.Mc=!0,this.Zl=!0,this.mx=!0,this.Fm=!1,this.Du=[],e&&Object.assign(this,e)}IF(){const e=this.Dt;for(let t=0;t<e.length;t++)e.r[t].US(null);e.clear(),this.Du.length=0}Ro(e){this.k=e}toString(e){e===void 0&&(e=0);const t='Layer "'+this.name+'"';if(e<=0)return t;let i=0,n=0,s=0,r=0,A=0;const o=this.Dt.iterator;for(;o.next();){const h=o.value;h instanceof Vt?s++:h instanceof Et?n++:h instanceof Xt?r++:h instanceof se?A++:i++}let a="";if(i>0&&(a+=i+" Parts "),n>0&&(a+=n+" Nodes "),s>0&&(a+=s+" Groups "),r>0&&(a+=r+" Links "),A>0&&(a+=A+" Adornments "),e>1){const h=this.Dt.iterator;for(;h.next();){const d=h.value;a+=`
    `+d.toString();const f=d.data;f!==null&&X.us(f)&&(a+=" #"+X.us(f)),d instanceof Et?a+=" "+u.toString(f):d instanceof Xt&&(a+=" "+u.toString(d.fromNode)+" "+u.toString(d.toNode))}}return t+" "+this.Dt.count+": "+a}findObjectAt(e,t,i){if(t===void 0&&(t=null),i===void 0&&(i=null),this.Zl===!1)return null;let n=!1;this.diagram!==null&&this.diagram.viewportBounds.containsPoint(e)&&(n=!0);const s=T.l(),r=this.Dt.r,A=r.length;for(let o=A;o--;){const a=r[o];if(n===!0&&a.Rl()===!1||!a.isVisible())continue;s.a(e),s.Be(a.zs);let h=a.gL(s,t,i);if(h!==null&&(t!==null&&(h=t(h)),h!==null&&(i===null||i(h))))return T.e(s),h}return T.e(s),null}findObjectsAt(e,t,i,n){if(t===void 0&&(t=null),i===void 0&&(i=null),!(n instanceof H)&&!(n instanceof X)&&(n=new X),this.Zl===!1)return n;let s=!1;this.diagram!==null&&this.diagram.viewportBounds.containsPoint(e)&&(s=!0);const r=T.l(),A=this.Dt.r,o=A.length;for(let a=o;a--;){const h=A[a];if(s===!0&&h.Rl()===!1||!h.isVisible())continue;r.a(e),r.Be(h.zs);let d=h;h.mL(r,t,i,n)&&(t!==null&&(d=t(d)),d!==null&&(i===null||i(d))&&n.add(d))}return T.e(r),n}findObjectsIn(e,t,i,n,s){if(t===void 0&&(t=null),i===void 0&&(i=null),n===void 0&&(n=!1),!(s instanceof H)&&!(s instanceof X)&&(s=new X),this.Zl===!1)return s;let r=!1;this.diagram!==null&&this.diagram.viewportBounds.containsRect(e)&&(r=!0);const A=this.Dt.r,o=A.length;for(let a=o;a--;){const h=A[a];if(r===!0&&h.Rl()===!1||!h.isVisible())continue;let d=h;h.Rm(e,t,i,n,s)&&(t!==null&&(d=t(d)),d!==null&&(i===null||i(d))&&s.add(d))}return s}LP(e,t,i,n,s,r,A){if(this.Zl===!1)return s;const o=this.Dt.r,a=o.length;for(let h=a;h--;){const d=o[h];if(A===!0&&d.Rl()===!1||!r(d)||!d.isVisible())continue;let f=d;d.Rm(e,t,i,n,s)&&(t!==null&&(f=t(f)),f!==null&&(i===null||i(f))&&s.add(f))}return s}findObjectsNear(e,t,i,n,s,r){if(i===void 0&&(i=null),n===void 0&&(n=null),s===void 0&&(s=!0),s!==!1&&s!==!0&&((s instanceof H||s instanceof X)&&(r=s),s=!0),!(r instanceof H)&&!(r instanceof X)&&(r=new X),this.Zl===!1)return r;let A=!1;this.diagram!==null&&this.diagram.viewportBounds.containsPoint(e)&&(A=!0);const o=T.l(),a=T.l(),h=this.Dt.r,d=h.length;for(let f=d;f--;){const g=h[f];if(A===!0&&g.Rl()===!1||!g.isVisible())continue;o.a(e),o.Be(g.zs),a.i(e.x+t,e.y),a.Be(g.zs);let x=g;g.pL(o,a,i,n,s,r)&&(i!==null&&(x=i(x)),x!==null&&(n===null||n(x))&&r.add(x))}return T.e(o),T.e(a),r}VS(){return this.Dt.r}Xs(e,t){if(!this.visible)return;const i=this.Dt.r,n=i.length;if(n===0)return;const s=u.ht(),r=u.ht();for(let A=0;A<n;A++){const o=i[A];if(o.zS=A,o instanceof Xt){if(o.Le===!1)continue}else if(o instanceof se&&o.adornedPart!==null)continue;const a=o.actualBounds;o.isVisible()&&a.intersectsRectPlus(t,10)?(o.Xs(!0),s.push(o)):(o.Xs(!1),o.adornments!==null&&o.adornments.count>0&&r.push(o))}for(let A=0;A<s.length;A++){const o=s[A];o.XS();const a=o.adornments;for(;a.next();){const h=a.value;h.dt(1/0,1/0),h.Kt(),h.Xs(!0)}}for(let A=0;A<r.length;A++)r[A].XS();u.et(s),u.et(r)}Fu(e){let t=1;return this.Qt!==1&&(t=e.globalAlpha,e.globalAlpha=t*this.Qt),t}yL(e,t){for(let i=0;i<t;i++)e[i].Ru()}zi(e,t,i){if(!this.visible||this.Qt===0||(i===void 0&&(i=!0),!i&&this.isTemporary))return;const n=this.Dt.r,s=n.length;if(s===0)return;e.Dr&&this.yL(n,s);const r=this.Fu(e),A=this.Du;A.length=0;const o=t.scale,a=it.l();for(let h=0;h<s;h++){const d=n[h];this.vm(e,d,t,A,o,a,!0)}it.e(a),e.Dr&&this.yL(n,s),e.globalAlpha=r}bE(e,t,i){if(!this.visible||this.Qt===0)return;const n=this.Dt.r,s=n.length;if(s===0)return;const r=this.Fu(e),A=this.Du;A.length=0;const o=t.scale,a=it.l();for(let h=0;h<s;h++){const d=n[h];i.has(d)||this.vm(e,d,t,A,o,a,!0)}it.e(a),e.globalAlpha=r}EF(e,t,i,n){if(!this.visible||this.Qt===0||!n&&this.isTemporary)return;const s=this.Dt.r,r=s.length;if(r===0)return;const A=this.Fu(e),o=this.Du;o.length=0;const a=t.scale,h=it.l();for(let d=0;d<r;d++){const f=s[d];i.has(f)&&this.vm(e,f,t,o,a,h,!1)}it.e(h),e.globalAlpha=A}BF(e,t,i,n,s){if(!this.visible||this.opacity===0)return;const r=this.diagram.grid.part;if(!n&&this.isTemporary){if(s&&r.layer===this){const A=this.Fu(e);r.zi(e,i),e.globalAlpha=A}}else{const A=this.Fu(e),o=i.scale,a=it.l(),h=this.Dt.r,d=h.length;for(let f=0;f<d;f++){const g=h[f];!s&&g===r||this.vm(e,g,i,null,o,a,!1)}it.e(a),e.globalAlpha=A}}kE(e,t,i){if(!this.visible||this.Qt===0)return;const n=this.Fu(e),s=this.Du;s.length=0;const r=t.scale,A=it.l(),o=this.Dt.r,a=o.length,h=i.length;for(let d=0;d<a;d++){const f=o[d],g=f._h(f.actualBounds);this.UF(g,i,h,r)&&this.vm(e,f,t,s,r,A,!0)}it.e(A),e.globalAlpha=n}vm(e,t,i,n,s,r,A){if(A&&!t.Rl()){e.removePartFromView(t);return}if(n!==null&&t instanceof Xt&&(t.isOrthogonal&&n.push(t),t.Le===!1)){e.removePartFromView(t);return}let o=!1,a=t.containingGroup;for(;a!==null;)o?a.oi!==null&&r.intersectRect(a.oi):a.oi!==null&&(o=!0,r.a(a.oi)),a=a.containingGroup;const h=t.actualBounds;let d=!1;if(o&&t.isVisible()){if(!r.intersectsRect(h)){e.removePartFromView(t);return}d=!r.containsRect(h)}d&&(e.save(),e instanceof qi?e.partClipRect=r.copy():(e.beginPath(),e.rect(r.x,r.y,r.width,r.height),e.clip())),h.width*s>i.Om||h.height*s>i.Om?t.zi(e,i):this.VF(e,t,i),d&&(e.restore(),e.clearContextCache(!0))}VF(e,t,i){if(e instanceof qi){t.zi(e,i);return}const n=t.actualBounds,s=t.naturalBounds;if(n.width===0||n.height===0||isNaN(n.x)||isNaN(n.y)||!t.isVisible())return;const r=t.F;if(t.background===null){t.mn(e,"rgba(0,0,0,0.3)",!0,!1,s,n),e.fillRect(n.x,n.y,n.width,n.height);return}if(e.transform(r.m11,r.m12,r.m21,r.m22,r.dx,r.dy),t.mn(e,t.background,!0,!1,s,n),e.fillRect(0,0,s.width/2,s.height/2),!r.Ik()){const A=1/(r.m11*r.m22-r.m12*r.m21);e.transform(r.m22*A,-r.m12*A,-r.m21*A,r.m11*A,A*(r.m21*r.dy-r.m22*r.dx),A*(r.m12*r.dx-r.m11*r.dy))}}UF(e,t,i,n){const s=2/n,r=4/n;for(let A=0;A<i;A++){const o=t[A];if(!(o.width===0||o.height===0)&&e.intersects(o.x-s,o.y-s,o.width+r,o.height+r))return!0}return!1}t(e,t,i,n,s){const r=this.diagram;r!==null&&r.raiseChangedEvent(2,e,this,t,i,n,s)}ta(e,t,i){const n=this.Dt;if(t.US(this),e>=n.count)e=n.count;else if(n.elt(e)===t)return-1;n.insertAt(e,t),t.Im(i);const s=this.diagram;return s!==null&&(i?s.L():s.ta(t)),this.px(e,t),e}se(e,t,i){if(!i&&t.layer!==this&&t.layer!==null)return t.layer.se(e,t,i);const n=this.Dt;if(e<0||e>=n.length){if(e=n.indexOf(t),e<0)return-1}else if(n.elt(e)!==t&&(e=n.indexOf(t),e<0))return-1;t.Em(i),n.removeAt(e);const s=this.diagram;return s!==null&&(i?s.L():s.se(t)),t.US(null),e}px(e,t){e=this.zF(e,t),t instanceof Vt&&this.XF(e,t),t.svg!==null&&t.svg.remove()}zF(e,t){const i=t.zOrder;if(isNaN(i))return e;const n=this.Dt,s=n.count;if(s<=1)return e;if(e<0&&(e=n.indexOf(t)),e<0)return-1;let r=e-1,A=NaN;for(;r>=0&&(A=n.elt(r).zOrder,!!isNaN(A));)r--;let o=e+1,a=NaN;for(;o<s&&(a=n.elt(o).zOrder,!!isNaN(a));)o++;if(!isNaN(A)&&A>i)for(;;){if(r===-1||A<=i)return r++,r===e?e:(n.removeAt(e),n.insertAt(r,t),r);for(A=NaN;--r>=0&&(A=n.elt(r).zOrder,!!isNaN(A)););}else if(!isNaN(a)&&a<i)for(;;){if(o===s||a>=i)return o--,o===e?e:(n.removeAt(e),n.insertAt(o,t),o);for(a=NaN;++o<s&&(a=n.elt(o).zOrder,!!isNaN(a)););}return e}XF(e,t){if(t===null||!isNaN(t.zOrder))return;this.YF(e,t);const i=t.containingGroup;i!==null&&this.px(-1,i)}YF(e,t){if(t.memberParts.count===0)return;let i=-1;const n=this.Dt.r,s=n.length;for(let r=0;r<s;r++){const A=n[r];if(A===t&&(e=r,i>=0)||i<0&&A.containingGroup===t&&(i=r,e>=0))break}if(!(i<0)&&i<e){const r=this.Dt;r.removeAt(e),r.insertAt(i,t)}}get parts(){return this.Dt.iterator}get partsBackwards(){return this.Dt.iteratorBackwards}get diagram(){return this.k}get name(){return this.Ct}set name(e){const t=this.Ct;if(t!==e){const i=this.diagram;if(i!==null){t===""&&u.o("Cannot rename default Layer to: "+e);const s=i.layers;for(;s.next();)s.value.name===e&&u.o("Layer.name is already present in this diagram: "+e)}this.Ct=e,this.t("name",t,e);const n=this.Dt.iterator;for(;n.next();){const s=n.value;s.layerName=this.Ct}}}get opacity(){return this.Qt}set opacity(e){const t=this.Qt;if(t!==e){(e<0||e>1)&&u.it(e,"0 <= value <= 1",ki,"opacity"),this.Qt=e;const i=this.diagram;i!==null&&i.L(),this.t("opacity",t,e)}}get isViewportAligned(){return this.Fm}set isViewportAligned(e){const t=this.Fm;t!==e&&(this.Fm=e,this.diagram&&(this.wL(),this.diagram.L()),this.t("isViewportAligned",t,e),e&&(this.isInDocumentBounds=!1))}wL(){if(!this.Fm)return;const e=this.diagram,t=this.Dt.r,i=t.length,n=e.St,s=e.Mt;for(let r=0;r<i;r++){const A=t[r],o=A.naturalBounds.width,a=A.naturalBounds.height;let h=A.alignment;(h.isDefault()||!h.isSpot())&&(h=q.BottomRight);let d=A.alignmentFocus;d.isDefault()&&(d=new q(h.x,h.y));const f=h.x*n+h.offsetX-(d.x*o+d.offsetX),g=h.y*s+h.offsetY-(d.y*a+d.offsetY),x=T.Y(f,g);e.KF(x),A.Sc(x.x,x.y,!0),T.e(x),A.rt=1/e.scale}}get isTemporary(){return this.Dr}set isTemporary(e){const t=this.Dr;t!==e&&(this.Dr=e,this.t("isTemporary",t,e))}get visible(){return this.Mc}set visible(e){const t=this.Mc;if(t!==e){this.Mc=e;const i=this.Dt.iterator;for(;i.next();)i.value.Vi(e);const n=this.diagram;n!==null&&n.L(),this.t("visible",t,e)}}get pickable(){return this.Zl}set pickable(e){const t=this.Zl;t!==e&&(this.Zl=e,this.t("pickable",t,e))}get isInDocumentBounds(){return this.mx}set isInDocumentBounds(e){const t=this.mx;t!==e&&(this.mx=e,this.diagram!==null&&this.diagram.invalidateDocumentBounds(),this.t("isInDocumentBounds",t,e))}get allowCopy(){return this.Vl}set allowCopy(e){const t=this.Vl;t!==e&&(this.Vl=e,this.t("allowCopy",t,e))}get allowDelete(){return this.zl}set allowDelete(e){const t=this.zl;t!==e&&(this.zl=e,this.t("allowDelete",t,e))}get allowTextEdit(){return this.Xl}set allowTextEdit(e){const t=this.Xl;t!==e&&(this.Xl=e,this.t("allowTextEdit",t,e))}get allowGroup(){return this.Yl}set allowGroup(e){const t=this.Yl;t!==e&&(this.Yl=e,this.t("allowGroup",t,e))}get allowUngroup(){return this.Kl}set allowUngroup(e){const t=this.Kl;t!==e&&(this.Kl=e,this.t("allowUngroup",t,e))}get allowLink(){return this.Gl}set allowLink(e){const t=this.Gl;t!==e&&(this.Gl=e,this.t("allowLink",t,e))}get allowRelink(){return this.Hl}set allowRelink(e){const t=this.Hl;t!==e&&(this.Hl=e,this.t("allowRelink",t,e))}get allowMove(){return this.jl}set allowMove(e){const t=this.jl;t!==e&&(this.jl=e,this.t("allowMove",t,e))}get allowReshape(){return this.ql}set allowReshape(e){const t=this.ql;t!==e&&(this.ql=e,this.t("allowReshape",t,e))}get allowResize(){return this.Wl}set allowResize(e){const t=this.Wl;t!==e&&(this.Wl=e,this.t("allowResize",t,e))}get allowRotate(){return this.Jl}set allowRotate(e){const t=this.Jl;t!==e&&(this.Jl=e,this.t("allowRotate",t,e))}get allowSelect(){return this.$l}set allowSelect(e){const t=this.$l;t!==e&&(this.$l=e,this.t("allowSelect",t,e))}}var bo=(k=>(k[k.None=1]="None",k[k.Uniform=2]="Uniform",k[k.UniformToFill=3]="UniformToFill",k))(bo||{}),ko=(k=>(k[k.All=1]="All",k[k.NotDirected=2]="NotDirected",k[k.NotDirectedFast=3]="NotDirectedFast",k[k.NotUndirected=4]="NotUndirected",k[k.DestinationTree=5]="DestinationTree",k[k.SourceTree=6]="SourceTree",k))(ko||{}),Mo=(k=>(k[k.Document=1]="Document",k[k.Infinite=2]="Infinite",k))(Mo||{}),Qa=(k=>(k[k.TreeParent=1]="TreeParent",k[k.AllParents=2]="AllParents",k[k.AnyParents=3]="AnyParents",k))(Qa||{});const dt=class dt{constructor(e,t){p(this,"ps");p(this,"di");p(this,"YS");p(this,"yx");p(this,"Fr");p(this,"vu");p(this,"wx");p(this,"xx");p(this,"bx");p(this,"kx");p(this,"Px");p(this,"Sx");p(this,"Oc");p(this,"Qh");p(this,"Mx");p(this,"Nx");p(this,"Cx");p(this,"Ql");p(this,"Ic");p(this,"Rr");p(this,"Bm");p(this,"Lx");p(this,"Ax");p(this,"Ou");p(this,"Zn");p(this,"vr");p(this,"ia");p(this,"Oo");p(this,"Um");p(this,"Ec");p(this,"Vm");p(this,"Bc");p(this,"Iu");p(this,"Or");p(this,"Qn");p(this,"KS");p(this,"GS");p(this,"Tx");p(this,"Dx");p(this,"HS");p(this,"Fx");p(this,"jS");p(this,"qS");p(this,"WS");p(this,"Rx");p(this,"zm");p(this,"Ir");p(this,"Er");p(this,"Br");p(this,"Ur");p(this,"Vr");p(this,"zr");p(this,"vx");p(this,"Xr");p(this,"Ox");p(this,"Yr");p(this,"Kr");p(this,"Gr");p(this,"Hr");p(this,"Ix");p(this,"JS");p(this,"Io");p(this,"$S");p(this,"Ex");p(this,"Bx");p(this,"ZS");p(this,"Mi");p(this,"QS");p(this,"_S");p(this,"tM");p(this,"Bs");p(this,"Eo");p(this,"Bi");p(this,"Ux");p(this,"Vl");p(this,"zl");p(this,"Vx");p(this,"zx");p(this,"Xl");p(this,"Yl");p(this,"Kl");p(this,"Xx");p(this,"Gl");p(this,"Hl");p(this,"jl");p(this,"ql");p(this,"Wl");p(this,"Jl");p(this,"$l");p(this,"Yx");p(this,"Kx");p(this,"iM");p(this,"Eu");p(this,"Bu");p(this,"Gx");p(this,"Hx");p(this,"jx");p(this,"qx");p(this,"Xm");p(this,"Wx");p(this,"Jx");p(this,"$x");p(this,"_t");p(this,"eM");p(this,"Zx");p(this,"sM");p(this,"Uu");p(this,"pn");p(this,"_n");p(this,"ne");p(this,"to");p(this,"xL");p(this,"_l");p(this,"nM");p(this,"oM");p(this,"Ym");p(this,"Qx");p(this,"Vu");p(this,"Km");p(this,"_x");p(this,"jr");p(this,"th");p(this,"ea");p(this,"rM");p(this,"lM");p(this,"Gm");p(this,"tb");p(this,"ib");p(this,"ts");p(this,"zu");p(this,"Hm");p(this,"Xu");p(this,"ih");p(this,"Uc");p(this,"jm");p(this,"qr");p(this,"sa");p(this,"hM");p(this,"qm");p(this,"Jt");p(this,"F");p(this,"ze");p(this,"Ar");p(this,"Xi");p(this,"xs");p(this,"aM");p(this,"eh");p(this,"Wr");p(this,"Ll");p(this,"Jr");p(this,"na");p(this,"Vc");p(this,"cM");p(this,"Yu");p(this,"oa");p(this,"Ku");p(this,"qt");p(this,"sh");p(this,"gt");p(this,"rt");p(this,"Gu");p(this,"St");p(this,"Mt");p(this,"mt");p(this,"zc");p(this,"Iw");p(this,"eb");p(this,"ra");p(this,"Xc");p(this,"sb");p(this,"nb");p(this,"ob");p(this,"GF");p(this,"HF");p(this,"Yi");p(this,"Tl");p(this,"Om");p(this,"Wm");p(this,"fM");p(this,"uM");p(this,"bL");p(this,"Jm");p(this,"jF");p(this,"qF");p(this,"WF");p(this,"rb");p(this,"JF");p(this,"$F");p(this,"ZF");p(this,"la");p(this,"kL");p(this,"nh");p(this,"ha");p(this,"aa");p(this,"ca");p(this,"fa");p(this,"xu");p(this,"$h");p(this,"ti");p(this,"Ft");p(this,"Yc");p(this,"Jk");p(this,"$k");p(this,"pc");p(this,"Qt");p(this,"wu");p(this,"hb");p(this,"ab");p(this,"cb");p(this,"fb");p(this,"ub");p(this,"$m");p(this,"mM");p(this,"Zm");p(this,"Qm");p(this,"_m");p(this,"ix");p(this,"pM");p(this,"db");p(this,"Kc");if(dt.fw||(dt.Ek(),dt.fw=!0),X.qi(this),dt.SL(this),this.Jt=!0,this.Ft=null,this.St=0,this.Mt=0,this.mt=null,dt.isUsingDOM()){const n=this,s=()=>{n.Ni(y.document,"DOMContentLoaded",s,!1),n.setRTL()};y.document.body!==null?this.setRTL():n.Yt(y.document,"DOMContentLoaded",s,!1)}this.zc=null,dt.yM("Model",zn);const i=this;return this.QS=n=>i.partManager.doModelDataChanged(n),this._S=n=>i.partManager.doModelChanged(n),this.sb=null,this.nb=null,this.ML(),this.model=hi.wM(),this.db=null,this.themeManager=new Fr,this.Io=!0,this.NL(),this.layout=new Ni,this.Io=!1,this.jF=null,this.qF=null,this.WF=null,this.rb=null,this.JF=null,this.$F=null,this.ZF=null,this.la=null,this.kL=null,this.nh=null,this.ha=null,this.aa=null,this.ca=null,this.fa=null,this.xu=()=>{},this.$h=null,this.Xu=!1,this.Yc=new Po(this),e!==void 0&&(typeof e=="string"||y.Element&&e instanceof Element?this.xM(e):t=e),t&&this.setProperties(t),this.Jt=!1,this.requestUpdate(),this}hF(){return this.mt!==null}get renderer(){return this.Uc}set renderer(e){if(this instanceof fs)return;e===""&&(e="default");const t=e.toLowerCase(),i=this.Uc;if(t===i)return;this.Uc=t;let n=null;t==="default"||t==="canvas"?(n=this.ih.get("svg"),n!==null&&n.Ot.remove(),this.mt&&(this.ti=this.mt.ai),this.ti.clearContextCache(!0)):t==="svg"?(this.ih.has("svg")?n=this.ih.get("svg"):(n=new gs(this,y.document),this.addRenderer("svg",n)),this.div!==null&&this.div.appendChild(n.Ot),this.ti=n.ai,this.mt&&(this.mt.ai.setTransform(this.Yi,0,0,this.Yi,0,0),this.mt.ai.clearRect(0,0,this.St,this.Mt))):t==="debug"&&(this.ih.has("SVG")||(n=new gs(this,y.document),this.addRenderer("SVG",n),n.Ot.style.backgroundColor="whitesmoke",this.div!==null&&this.div.after(n.Ot))),this.Jt||this.redraw()}ML(){this.Kc=new H,this.setupRouters(),this.ps=new Vs,this.ps.Ro(this),this.di=17,this.YS=!1,this.Gu=!1,this.yx="default",this.qt=new H,this.ih=new xt,this.Uc="default",this.resetRenderingHints(),this.QF(),this.Qt=1,this.gt=new T(NaN,NaN).g(),this.ix=new T(NaN,NaN),this.rt=1,this.qm=1,this.wx=new T(NaN,NaN).g(),this.xx=NaN,this.bx=1e-4,this.kx=100,this.F=new Bt,this.Px=new T(NaN,NaN).g(),this.Sx=new it(NaN,NaN,NaN,NaN).g(),this.Oc=new Rt(0,0,0,0).g(),this.Qh=1,this.Mx=!1,this.Nx=null,this.Cx=null,this.Ql=1,this.Ic=q.Default,this.Rr=1,this.Bm=q.Default,this.Lx=q.None,this.Ax=q.None,this.ze=!0,this.Ou=!1,this.Zn=new Set,this.vr=new X,this.ia=new X,this.Oo=!1,this.sh=new xt,this.Yu=!0,this.Um=250,this.Ec=-1,this.Vm=new Rt(16,16,16,16).g(),this.Ar=!1,this.Bc=!1,this.Iu=!0,this.jm=new Le,this.jm.diagram=this,this.qr=new Le,this.qr.diagram=this,this.sa=new Le,this.sa.diagram=this,this.Or=null,this.Qn=null,this.Iw=!1,this._F(),this.Jr=new X,this.Tx=!0,this.Dx=1,this.HS=!1,this.Fx=1,this.Rx="auto",this.zm="auto",this.Ir=null,this.Er=null,this.Br=null,this.Ur=null,this.Vr=null,this.zr=null,this.vx=null,this.Xr=null,this.Ox=!1,this.Yr=null,this.Kr=null,this.Gr=null,this.Hr=null,this.Ix=!1,this.eb={},this.ra=[null,null],this.Io=!1,this.$S=!1,this.Ex=!1,this.Bx=!1,this.ZS=!0,this.xs=!1,this.oa=!1,this.tM=!0,this.Bs=-2,this.eh=new xt,this.Ku=new H,this.Eo=!1,this.Bi=!0,this.Ux=!0,this.Vl=!0,this.zl=!0,this.Vx=!1,this.zx=!0,this.Xl=!0,this.Yl=!0,this.Kl=!0,this.Xx=!0,this.Gl=!0,this.Hl=!0,this.jl=!0,this.ql=!0,this.Wl=!0,this.Jl=!0,this.$l=!0,this.Yx=!0,this.Kx=!0,this.iM=!1,this.Xc=!1,this.Eu=!0,this.Bu=!0,this.Gx=!0,this.Hx=!0,this.jx=16,this.qx=16,this.Xm=!1,this.Wx=!1,this.Jx=0,this.$x=0,this._t=new Rt(5).g(),this.eM=new X().g(),this.Zx=999999999,this.sM=new X().g(),this.na=!0,this.Uu=!0,this.Vc=!0,this.pn=!1,this._n=!1,this.Wr=!0,this.Ll=!1,this.to=!1,this.xL=new X,this.cM=new X,this._l=null,this.nM=new ct(8,8),this.oM=999,this.Ym=!1,this.Jk=1,this.$k=0,this.Xi={scale:1,position:new T,bounds:new it,canvasSize:new ct,newCanvasSize:new ct,isScroll:!1},this.Xi.canvasSize=this.Xi.canvasSize,this.Xi.newCanvasSize=this.Xi.newCanvasSize,this.Xi.isScroll=!1,this.Qx=new it(NaN,NaN,NaN,NaN).g(),this.Vu=new ct(NaN,NaN).g(),this.Km=new it(NaN,NaN,NaN,NaN).g(),this._x=!1,this.tR(),this.ts=null,this.zu=!1,this.pc=null,this.partManager=new zn,this.toolManager=new ue,this.toolManager.initializeStandardTools(),this.defaultTool=this.toolManager,this.currentTool=this.defaultTool,this.ab=null,this.cb=new lr,this.fb=null,this.ub=null,this.hb=!1,this.wu=!1,this.commandHandler=new sn,this.Qm=null,this._m=T.Tk,this.pM=!1,this.Yi=1,this.Tl=null,this.Om=1,this.$m=0,this.mM=[0,0,0,0,0],this.Zm=0,this.Wm=1,this.fM=0,this.uM=new T,this.bL=500,this.Hm=new T,this.Jm=!1}static isUsingDOM(){return dt.CL}static useDOM(e){dt.CL=e?y.document!==void 0:!1}clear(){this.animationManager.stopAnimation(),this.model.clear(),dt.LL(),this.AL(!1),this.Ku.clear(),this.TL(),this._l=null,this.invalidateDocumentBounds(),this.ensureBounds(),this.L()}AL(e){this.animationManager.stopAnimation(!0),this.eM=new X().g(),this.sM=new X().g();const t=this.skipsUndoManager,i=this.Mi!==null&&this.Mi!==void 0;i&&(this.skipsUndoManager=!0);let n=null;this.ts!==null&&(n=this.ts.part,n!==null&&this.remove(n));const s=[],r=this.qt.length;if(e){for(let A=0;A<r;A++){const o=this.qt.r[A].parts;for(;o.next();){const a=o.value;a!==n&&a.data===null&&s.push(a)}}for(let A=0;A<s.length;A++){const o=s[A];this.remove(o)}}for(let A=0;A<r;A++)this.qt.r[A].IF();return this.partManager.clear(),this.Zn.clear(),this.vr.clear(),this.ia.clear(),this.sh.clear(),this.Jr.clear(),this.pc=null,this.Ku.clear(),this.TL(),u.Lk=[],n!==null&&(this.add(n),this.partManager.parts.delete(n)),i&&(this.skipsUndoManager=t),s}static LL(){dt.t0=null,dt.gb=""}static PE(){return null}reset(){this.clear(),this.Jt=!0,this.ML(),this.themeManager=new Fr,this.oh(),this.Io=!0,this.NL(),this.layout=new Ni,this.Io=!1,this.model=hi.wM(),this.model.undoManager=new Ae,this.Xu=!1,this.Jt=!1,this.L()}tR(){this.jr=new xt,this.rM=new Et().add(new We({stroke:"black",font:"10pt sans-serif"}).bind("text","",u.toString).theme("stroke","text").theme("font","normal")),this.jr.set("",this.rM),this.jr.set("Comment",new Et().add(new We({stroke:"brown",font:"10pt sans-serif"}).bind("text","",u.toString).theme("stroke","comment").theme("font","normal"))),this.jr.set("LinkLabel",new Et({selectable:!1,avoidable:!1}).add(new Zt("Ellipse",{fill:"black",stroke:null,desiredSize:new ct(3,3).st()}).theme("fill","link"))),this.ea=new xt,this.aM=new Vt(Kt.Vertical,{selectionObjectName:"GROUPPANEL"}).add(new We({stroke:"black",font:"bold 12pt sans-serif"}).bind("text","",u.toString).theme("stroke","text").theme("font","bold"),new Kt(Kt.Auto,{name:"GROUPPPANEL"}).add(new Zt({fill:"rgba(128,128,128,0.2)",stroke:"black",strokeWidth:1}).theme("fill","group").theme("stroke","outline").theme("strokeWidth","group"),new Fi({padding:5}).theme("padding","group"))),this.ea.set("",this.aM),this.th=new xt,this.lM=new Xt().add(new Zt({isPanelMain:!0,stroke:"black"}).theme("stroke","link"),new Zt({toArrow:"Standard",fill:"black",stroke:null,strokeWidth:0}).theme("toArrow").theme("fill","link")),this.th.set("",this.lM),this.th.set("Comment",new Xt().add(new Zt({isPanelMain:!0,stroke:"brown"}).theme("stroke","comment"))),this.Gm=new se(Kt.Auto).add(new Zt({fill:null,stroke:"dodgerblue",strokeWidth:3}).theme("stroke","selection").theme("strokeWidth","selection"),new Fi({margin:1.5}).theme("margin","selection","numbers",null,e=>e?new Rt(e/2):1.5)),this.tb=this.Gm,this.ib=new se(Kt.Link).add(new Zt({isPanelMain:!0,fill:null,stroke:"dodgerblue",strokeWidth:3}).theme("stroke","selection").theme("strokeWidth","selection"))}setRTL(e){let t=e===void 0?this.div:e;t===null&&(t=y.document.body);const i=u.fs("div");i.dir="rtl",i.style.cssText="font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll;",i.textContent="A",t.appendChild(i);let n="reverse";i.scrollLeft>0?n="default":(i.scrollLeft=1,i.scrollLeft===0&&(n="negative")),t.removeChild(i),this.yx=n}setScrollWidth(e){let t=e===void 0?this.div:e;t===null&&(t=y.document.body);let i=0;if(dt.isUsingDOM()){let n=dt.gM,s=dt.dM;n===null&&(dt.gM=u.fs("p"),n=dt.gM,n.style.width="100%",n.style.height="200px",n.style.boxSizing="content-box",dt.dM=u.fs("div"),s=dt.dM,s.style.position="absolute",s.style.visibility="hidden",s.style.width="200px",s.style.height="150px",s.style.boxSizing="content-box",s.appendChild(n)),s.style.overflow="hidden",t.appendChild(s);const r=n.offsetWidth;s.style.overflow="scroll";let A=n.offsetWidth;r===A&&(A=s.clientWidth),t.removeChild(s),i=r-A,i===0&&!u.cr&&(i=11)}this.di=i,this.YS=!0}li(e){e in bo?this.autoScale=e:u.ur(this,e)}toString(e){e===void 0&&(e=0);let t="";this.div&&this.div.id&&(t=this.div.id);let i='Diagram "'+t+'"';if(e<=0)return i;const n=this.qt.iterator;for(;n.next();){const s=n.value;i+=`
  `+s.toString(e-1)}return i}static SL(e){dt.lb=e}static mm(){return dt.lb}static fromDiv(e){let t=e;if(typeof e=="string"&&(t=y.document.getElementById(e)),t instanceof HTMLDivElement){const i=dt.is.get(t);if(i)return i}return null}get div(){return this.Ft}set div(e){if(this.Ft!==e){const t=this.Ft;if(t!==null){if(dt.is.delete(t),t.goDiagram=void 0,t.go=void 0,t.innerHTML="",this.mt!==null){const n=this.mt.Ot;this.Ni(n,"pointermove",this.ha,!1),this.Ni(n,"pointerdown",this.nh,!1),this.Ni(n,"pointerup",this.aa,!1),this.Ni(n,"pointerout",this.ca,!1),this.Ni(n,"pointercancel",this.fa,!1),this.mt.dispose()}this.zc&&(this.zc.disconnect(),this.zc=null);const i=this.toolManager;i!==null&&(i.mouseDownTools.each(n=>n.cancelWaitAfter()),i.mouseMoveTools.each(n=>n.cancelWaitAfter()),i.mouseUpTools.each(n=>n.cancelWaitAfter())),i.cancelWaitAfter(),this.currentTool.doCancel(),this.mt=null,this.Ni(y,"resize",this.rb,!1),this.Ni(y,"wheel",this.la,!0),dt.mm()===this&&dt.SL(null)}else this.nh===null&&(this.to=!1);if(this.Ft=null,e!==null){const i=dt.is.get(e);i&&(i.div=null),this.xM(e),this.xu(),this.themeManager&&this.themeManager.iR()}else this.themeManager&&this.themeManager.eR()}}setupRouters(){this.Kc.push(new Lh)}xM(e){const t=this;if(!dt.isUsingDOM())return;e==null&&u.o("Diagram setup requires an argument DIV."),t.Ft!==null&&u.o("Diagram has already completed setup."),typeof e=="string"?t.Ft=y.document.getElementById(e):e instanceof HTMLDivElement?t.Ft=e:u.o("No DIV or DIV id supplied: "+e),t.Ft===null&&u.o("Invalid DIV id; could not get element with id: "+e);const i=dt.is.get(t.Ft);if(i&&i!==this&&u.o("Invalid div id; div already has a Diagram associated with it."),!t.zc&&y.ResizeObserver){const d=y.ResizeObserver,f=u.Ck(()=>t.requestUpdate(),250,!1);t.zc=new d(()=>f()),t.zc.observe(t.Ft)}y.getComputedStyle(t.Ft,null).position==="static"&&(t.Ft.style.position="relative");let n=5;const s="rgba(2"+n+"5, 255, 255, 0)";n--,t.Ft.style["-webkit-tap-highlight-color"]=s,t.Ft.innerHTML="",dt.is.set(t.Ft,t),t.Ft.goDiagram=t,t.Ft.go=y.go;const r=new kn(t);r.style!==void 0&&(r.style.position="absolute",r.style.top="0px",r.style.left="0px",y.getComputedStyle(t.Ft,null).getPropertyValue("direction")==="rtl"&&(t.Gu=!0),r.style.zIndex="2",r.style.userSelect="none",r.style.MozUserSelect="none",r.style.touchAction="none",r.style.letterSpacing="normal !important",r.style.wordSpacing="normal !important",r.style.lang="unknown"),t.mt=r,t.ti=r.ai;const A=t.ti;t.Yi=t.computePixelRatio(),t.viewSize.isReal()||(t.St=t.Ft.clientWidth||1,t.Mt=t.Ft.clientHeight||1),t.DL(t.St,t.Mt);const o=t;t.Ft.insertBefore(r.Ot,t.Ft.firstChild);const a=new kn(null);if(a.width=1,a.height=1,t.GF=a,t.HF=a.ai,dt.isUsingDOM()){const d=u.fs("div"),f=u.fs("div");d.style.position="absolute",d.style.overflow="auto",d.style.width=t.St+"px",d.style.height=t.Mt+"px",d.style.zIndex="1",f.style.position="absolute",f.style.width="1px",f.style.height="1px",t.Ft.appendChild(d),d.appendChild(f),d.onscroll=dt.sR,d.addEventListener("pointerdown",dt.nR),d.k=t,d.oR=!0,d.rR=!0,t.sb=d,t.nb=f}t.xu=u.Ck(()=>{t.Tl=null,t.L()},300,!1),t.rb=u.Ck(()=>{t.LS()},250,!1),t.$h=d=>(d.preventDefault(),!1),t.la=d=>{if(!o.isEnabled)return;const f=o.Gc(d,!0);f.bubbles=!0;let g=0,x=0;f.delta=0,d.deltaX!==void 0?(d.deltaX!==0&&(g=d.deltaX>0?1:-1),d.deltaY!==0&&(x=d.deltaY>0?1:-1),f.delta=Math.abs(d.deltaX)>Math.abs(d.deltaY)?-g:-x):d.wheelDeltaX!==void 0?(d.wheelDeltaX!==0&&(g=d.wheelDeltaX>0?-1:1),d.wheelDeltaY!==0&&(x=d.wheelDeltaY>0?-1:1),f.delta=Math.abs(d.wheelDeltaX)>Math.abs(d.wheelDeltaY)?-g:-x):d.wheelDelta!==void 0&&d.wheelDelta!==0&&(f.delta=d.wheelDelta>0?1:-1),o.doMouseWheel(),o.ua(f,d)},t.kL=d=>{if(!o.isEnabled)return;t.Xc=!1,o.Gc(d,!0);const f=o.currentTool;f.cancelWaitAfter(),f.standardMouseOver()},t.nh=d=>{if(!o.isEnabled)return;t.Xc=!0;const f=o.eb;f[d.pointerId]===void 0&&(f[d.pointerId]=d);const g=o.ra;let x=!1;if(g[0]!==null&&(g[0].pointerId===d.pointerId||g[0].pointerType!==d.pointerType))g[0]=d;else if(g[1]!==null&&g[1].pointerId===d.pointerId)g[1]=d,x=!0;else if(g[0]===null)g[0]=d;else if(g[1]===null)g[1]=d,x=!0;else{d.preventDefault();return}const B=d.pointerType==="touch"||d.pointerType==="pen";B&&(o.Iw=!1,o.Jm=!0);const C=o.lR(d,d,x),F=o.uM,b=B?25:10;if(d.timeStamp-o.fM<o.bL&&!(Math.abs(F.x-d.screenX)>b||Math.abs(F.y-d.screenY)>b)?o.Wm++:o.Wm=1,C.clickCount=o.Wm,o.fM=d.timeStamp,o.uM.setTo(d.screenX,d.screenY),o.doMouseDown(),d.button===1){d.preventDefault();return}o.ua(C,d)},t.ha=d=>{if(!o.isEnabled)return;t.Xc=!0;const f=o.ra;if(f[0]!==null&&(f[0].pointerId===d.pointerId||f[0].pointerType!==d.pointerType))f[0]=d;else if(f[1]!==null&&f[1].pointerId===d.pointerId){f[1]=d;return}else if(f[0]===null)f[0]=d;else return;if(f[0].pointerId!==d.pointerId)return;const g=o.hR(d,d,f[1]!==null);o.doMouseMove(),o.ua(g,d)},t.aa=d=>{if(!o.isEnabled)return;t.Xc=!0;const f=d.pointerType==="touch"||d.pointerType==="pen",g=o.eb;if(f&&o.Iw){delete g[d.pointerId],d.preventDefault();return}const x=o.ra;if(x[0]!==null&&(x[0].pointerId===d.pointerId||x[0].pointerType!==d.pointerType))x[0]=null;else if(x[1]!==null&&x[1].pointerId===d.pointerId){x[1]=null;return}else return;const B=o.bM(d,!1,!0,!1,!0,!1);let C=y.document.elementFromPoint(d.clientX,d.clientY)||null;C!==null&&C.shadowRoot!==void 0&&C.shadowRoot!==null&&(C=C.shadowRoot.elementFromPoint(d.clientX,d.clientY)),C!==null&&C.k instanceof dt&&C.k!==o&&C.k.i0(d,B),C===null&&(C=d.target),o.i0(d,B),B.clickCount=o.Wm,B.targetDiagram=o.mb(d,C),B.targetObject=null,o.doMouseUp(),o.ua(B,d),f&&(o.Jm=!1)},t.ca=d=>{if(!o.isEnabled)return;t.Xc=!1;const f=o.eb;f[d.pointerId]&&delete f[d.pointerId];const g=o.ra;if(g[0]!==null&&g[0].pointerId===d.pointerId&&(g[0]=null),g[1]!==null&&g[1].pointerId===d.pointerId&&(g[1]=null),d.pointerType==="touch"||d.pointerType==="pen")return;const x=o.currentTool;x.cancelWaitAfter(),x.standardMouseOver()},t.fa=d=>{const f=o.ra;f[0]!==null&&f[0].pointerId===d.pointerId?(f[0]=null,o.Jm=!1):f[1]!==null&&f[1].pointerId===d.pointerId&&(f[1]=null)};const h=A;if(t.ob=h.V[u.Ds("7eba17a4ca3b1a8346")][u.Ds("78a118b7")](h.V,dt.Hu,n,n),A.clearContextCache(!0),t.aR(),this.Uc==="svg"){const d=this.ih.get("svg");this.Ft.appendChild(d.Ot),this.ti=d.ai}}addEventListener(e,t,i,n){e.addEventListener(t,i,{capture:n,passive:!1})}Yt(e,t,i,n){e.addEventListener(t,i,{capture:n,passive:!1})}removeEventListener(e,t,i,n){e.removeEventListener(t,i,{capture:n})}Ni(e,t,i,n){e.removeEventListener(t,i,{capture:n})}aR(){const e=this;let t=this.mt.Ot;t instanceof HTMLCanvasElement||(t=e.div),this.Yt(t,"pointerdown",e.nh,!1),this.Yt(t,"pointermove",e.ha,!1),this.Yt(t,"pointerup",e.aa,!1),this.Yt(t,"pointerout",e.ca,!1),this.Yt(t,"pointercancel",e.fa,!1),this.Yt(t,"pointerenter",e.cR,!1),this.Yt(t,"pointerleave",e.fR,!1),this.Yt(t,"wheel",e.la,!1),this.Yt(t,"keydown",e.uR,!1),this.Yt(t,"keyup",e.dR,!1),this.Yt(t,"blur",e.gR,!1),this.Yt(t,"focus",e.mR,!1),this.Yt(t,"selectstart",i=>(i.preventDefault(),!1),!1),this.Yt(t,"contextmenu",i=>(i.preventDefault(),!1),!1),this.Yt(y,"resize",e.rb,!1)}Ew(){this.$m>30&&(this.Tl=1)}xP(e){this.Tl!==null&&(this.Tl=null,e&&this.xu(),this.$m=0,this.mM=[0,0,0,0,0],this.Zm=0)}computePixelRatio(){return this.Tl!==null?this.Tl:y.devicePixelRatio||1}get avgSpf(){return this.$m}doMouseDown(){this.currentTool.doMouseDown()}doMouseMove(){this.currentTool.doMouseMove()}doMouseUp(){this.currentTool.doMouseUp()}doMouseWheel(){this.currentTool.doMouseWheel()}doKeyDown(){this.currentTool.doKeyDown()}doKeyUp(){this.currentTool.doKeyUp()}doFocus(){this.focus()}focus(){if(this.mt)if(this.scrollsPageOnFocus)this.mt.focus();else{const e=y.scrollX,t=y.scrollY;this.mt.focus(),y.scrollTo(e,t)}}mR(e){const t=dt.is.get(this);t&&t.O("GainedFocus")}gR(e){const t=dt.is.get(this);t&&t.O("LostFocus")}LS(){if(this.mt===null)return;const e=this.Ft;if(e===null||e.clientWidth===0||e.clientHeight===0)return;this.YS||this.setScrollWidth();const t=this._n?this.di:0,i=this.pn?this.di:0,n=this.Yi;if(this.Yi=this.computePixelRatio(),this.Yi!==n&&(this.Ou=!0,this.requestUpdate()),e.clientWidth!==this.St+t||e.clientHeight!==this.Mt+i){this.da(),this.ze=!0;const s=this.layout;s!==null&&s.isViewportSized&&this.autoScale===1&&(this.Bc=!0,s.invalidateLayout()),this.xs||this.requestUpdate()}}NL(){let e=0,t=new ki;t.name="Grid",t.allowSelect=!1,t.pickable=!1,t.isTemporary=!0,t.isInDocumentBounds=!1,this.$r(t,e++),t=new ki,t.name="ViewportBackground",t.isViewportAligned=!0,t.isTemporary=!0,t.isInDocumentBounds=!1,this.$r(t,e++),t=new ki,t.name="Background",this.$r(t,e++),t=new ki,t.name="",this.$r(t,e++),t=new ki,t.name="Foreground",this.$r(t,e++),t=new ki,t.name="ViewportForeground",t.isViewportAligned=!0,t.isTemporary=!0,t.isInDocumentBounds=!1,this.$r(t,e++),t=new ki,t.name="Adornment",t.isTemporary=!0,t.isInDocumentBounds=!1,this.$r(t,e++),t=new ki,t.name="Tool",t.isTemporary=!0,t.isInDocumentBounds=!0,this.$r(t,e++)}FL(){const e=new Kt(Kt.Grid,{name:"GRID"}).add(new Zt("LineH",{stroke:"lightgray",strokeWidth:.5,interval:1}).theme("stroke","gridMinor"),new Zt("LineV",{stroke:"lightgray",strokeWidth:.5,interval:1}).theme("stroke","gridMinor"),new Zt("LineH",{stroke:"gray",strokeWidth:.5,interval:5}).theme("stroke","gridMajor"),new Zt("LineV",{stroke:"gray",strokeWidth:.5,interval:5}).theme("stroke","gridMajor"),new Zt("LineH",{stroke:"gray",strokeWidth:1,interval:10}).theme("stroke","gridMajor"),new Zt("LineV",{stroke:"gray",strokeWidth:1,interval:10}).theme("stroke","gridMajor")),t=new Ce({layerName:"Grid",zOrder:0,isInDocumentBounds:!1,isAnimated:!1,pickable:!1,locationObjectName:"GRID"}).add(e);return this.add(t),this.partManager.parts.delete(t),e.visible=!1,e}static sR(){const e=dt.is.get(this.parentElement||this);if(e){if(e.Wx){e.Wx=!1;return}if(!e.isEnabled){e.RL();return}e.diagramScroll(this)}}static nR(e){if(!this.k.isEnabled){this.k.updateScroll();return}this.k.Jx=e.target.scrollTop,this.k.$x=e.target.scrollLeft}diagramScroll(e){if(this.mt===null)return;const t=this.sb,i=this.nb;this.Xm=!0;let n=this.documentBounds,s=this.viewportBounds;const r=this.Oc;let A=n.x-r.left,o=n.y-r.top;const a=n.width+r.left+r.right,h=n.height+r.top+r.bottom;let d=n.right+r.right,f=n.bottom+r.bottom,g=s.x,x=s.y;const B=s.width,C=s.height;let F=s.right,b=s.bottom;const L=this.scale;let Q,M=e.scrollLeft;if(this.Gu)switch(this.yx){case"negative":M=M+e.scrollWidth-e.clientWidth;break;case"reverse":M=e.scrollWidth-M-e.clientWidth;break}const O=M;if(B<a||C<h){Q=T.Y(this.position.x,this.position.y),this.allowHorizontalScroll&&this.$x!==O&&(Q.x=O/L+A,this.$x=O),this.allowVerticalScroll&&this.Jx!==e.scrollTop&&(Q.y=e.scrollTop/L+o,this.Jx=e.scrollTop),this.position=Q,T.e(Q),this.Xm=!1,this.Uu=!1;return}if(Q=T.l(),e.oR&&this.allowHorizontalScroll&&(A<g&&(this.position=Q.i(O+A,this.position.y)),d>F)){const D=t.scrollWidth-this.St;this.position=Q.i(-D+O-this.St/L+d,this.position.y)}if(e.rR&&this.allowVerticalScroll&&(o<x&&(this.position=Q.i(this.position.x,e.scrollTop+o)),f>b)){const D=t.scrollHeight-this.Mt;this.position=Q.i(this.position.x,-D+e.scrollTop-this.Mt/L+f)}T.e(Q),this.rh(),this.Xm=!1,this.Uu=!1,n=this.documentBounds,s=this.viewportBounds,d=n.right,F=s.right,f=n.bottom,b=s.bottom,A=n.x,g=s.x,o=n.y,x=s.y,B>=a&&A>=g&&d<=F&&(i.style.width="1px"),C>=h&&o>=x&&f<=b&&(i.style.height="1px")}computeBounds(e){return e===void 0&&(e=new it),this.Li(),this.vL(e)}vL(e){if(this.fixedBounds.isReal())return e.a(this.fixedBounds),e.addMargin(this._t),e;let t=!0;const i=this.qt.r,n=i.length;for(let s=0;s<n;s++){const r=i[s];if(!r.visible||!r.isInDocumentBounds)continue;const A=r.Dt.r,o=A.length;for(let a=0;a<o;a++){const h=A[a];if(!h.isInDocumentBounds||!h.isVisible())continue;const d=h.actualBounds;d.isReal()&&(t?(t=!1,e.a(d)):e.unionRect(d))}}return t&&e.i(0,0,0,0),e.addMargin(this._t),e}computePartsBounds(e,t){t===void 0&&(t=!1);let i=null;if(Array.isArray(e))for(let n=0;n<e.length;n++){const s=e[n];!t&&s instanceof Xt||(s.ensureBounds(),i===null?i=s.actualBounds.copy():i.unionRect(s.actualBounds))}else{const n=e.iterator;for(;n.next();){const s=n.value;!t&&s instanceof Xt||(s.ensureBounds(),i===null?i=s.actualBounds.copy():i.unionRect(s.actualBounds))}}return i===null?new it(NaN,NaN,0,0):i}Ys(e){if(!e&&!this.to||this.Jt||this.mt===null||!this.documentBounds.isReal())return;if(this.Jt=!0,e){const f=this.initialPosition;if(f.isReal()){this.Jt=!1,this.position=f;return}let g=this.initialDocumentSpot,x=this.initialViewportSpot;g.isNoSpot()&&(g=q.TopLeft),x.isNoSpot()&&(x=q.TopLeft);const B=T.l();B.setRectSpot(this.documentBounds,g);const C=this.viewportBounds,F=it.Y(0,0,C.width,C.height),b=T.l();b.setRectSpot(F,x),b.i(B.x-b.x,B.y-b.y),this.Jt=!1,this.position=b,it.e(F),T.e(b)}let t=this.Ql;e&&this.Rr!==1&&(t=this.Rr);const i=t!==1?this.ju(t):this.scale,n=this.gt.x,s=this.gt.y,r=this.St/i,A=this.Mt/i;let o=this.Ic;const a=this.Bm;if(e&&!o.isSpot()&&(a.isSpot()||a.isDefault())){const f=this.initialDocumentSpot.isSpot()&&this.initialViewportSpot.isSpot();o=a.isDefault()&&!f?q.Center:a}this.kM(this.documentBounds,r,A,o,e);const h=this.scale;this.scale=i,this.Jt=!1;const d=this.viewportBounds;d.equalsApproxTo(n,s,r,A)||this.onViewportBoundsChanged(new it(n,s,r,A),d,h,!1)}ju(e){const t=this.qm;if(this.mt===null)return t;this.ensureBounds();const i=this.documentBounds;if(!i.isReal())return t;const n=i.width,s=i.height,r=this.St+(this._n?this.di:0),A=this.Mt+(this.pn?this.di:0),o=r/n,a=A/s;let h;return e===2?(h=Math.min(a,o),h>t&&(h=t),h<this.minScale&&(h=this.minScale),h>this.maxScale&&(h=this.maxScale),h):e===3?(h=0,a>o?h=(A-this.di)/s:h=(r-this.di)/n,h>t&&(h=t),h<this.minScale&&(h=this.minScale),h>this.maxScale&&(h=this.maxScale),h):this.scale}zoomToFit(){const e=this.Qh;this.Qh=1,this.scale=this.ju(2),e!==1&&(this.Ys(!1),this.kM(this.documentBounds,this.St/this.rt,this.Mt/this.rt,this.Ic,!1)),this.Qh=e}zoomToRect(e,t){t===void 0&&(t=2);const i=e.width,n=e.height;if(i===0||n===0||isNaN(i)&&isNaN(n))return;let s=1;if(t===2||t===3)if(isNaN(i))s=this.viewportBounds.height*this.scale/n;else if(isNaN(n))s=this.viewportBounds.width*this.scale/i;else{const r=this.St,A=this.Mt;t===3?A/n>r/i?s=(A-(this.pn?this.di:0))/n:s=(r-(this._n?this.di:0))/i:s=Math.min(A/n,r/i)}this.scale=s,this.position=new T(e.x,e.y)}get pR(){return this.Jt}set pR(e){this.Jt=e}alignDocument(e,t){this.ensureBounds();const i=this.documentBounds,n=this.viewportBounds;this.position=new T(i.x+(e.x*i.width+e.offsetX)-(t.x*n.width-t.offsetX),i.y+(e.y*i.height+e.offsetY)-(t.y*n.height-t.offsetY))}focusObject(e){if(e instanceof Ye){this.Qm=e;const t=T.l();this._m=this.transformDocToView(e.getDocumentPoint(q.TopLeft,t)),T.e(t)}else this.Qm=null,this._m=T.Tk}kM(e,t,i,n,s){const r=T.Y(this.gt.x,this.gt.y);let A=r.x,o=r.y;if(this.Qm!==null){let a=T.l();a=this.Qm.getDocumentPoint(q.TopLeft,a),A=a.x-this._m.x/this.scale,o=a.y-this._m.y/this.scale,n=q.None,T.e(a)}if(s||this.scrollMode===1){n.isSpot()&&(t>e.width&&(A=e.x+(n.x*e.width+n.offsetX)-(n.x*t-n.offsetX)),i>e.height&&(o=e.y+(n.y*e.height+n.offsetY)-(n.y*i-n.offsetY)));const a=this.Oc,h=t-e.width;if(t<e.width+a.left+a.right){let f=A+t/2;f=Math.min(f,e.right+Math.max(h,a.right)-t/2),f=Math.max(f,e.left-Math.max(h,a.left)+t/2),A=f-t/2}else A>e.left?A=e.left:A<e.right-t&&(A=e.right-t);const d=i-e.height;if(i<e.height+a.top+a.bottom){let f=o+i/2;f=Math.min(f,e.bottom+Math.max(d,a.bottom)-i/2),f=Math.max(f,e.top-Math.max(d,a.top)+i/2),o=f-i/2}else o>e.top?o=e.top:o<e.bottom-i&&(o=e.bottom-i)}if(r.x=isFinite(A)?A:-this._t.left,r.y=isFinite(o)?o:-this._t.top,this.positionComputation!==null){const a=this.positionComputation(this,r);r.x=a.x,r.y=a.y}this.ps.cL(this.gt,r),this.gt.i(r.x,r.y),this.pb(),this.oh(),this.yR(),T.e(r)}findPartAt(e,t){if(t===void 0&&(t=!0),t){const i=this.MP(e,n=>n.part,n=>n.canSelect());if(i instanceof Ce)return i}else{const i=this.MP(e,n=>n.part);if(i instanceof Ce)return i}return null}findObjectAt(e,t,i){t===void 0&&(t=null),i===void 0&&(i=null),this.Li();const n=this.qt.iteratorBackwards;for(;n.next();){const s=n.value;if(!s.visible)continue;const r=s.findObjectAt(e,t,i);if(r!==null)return r}return null}MP(e,t,i){t===void 0&&(t=null),i===void 0&&(i=null),this.Li();const n=this.qt.iteratorBackwards;for(;n.next();){const s=n.value;if(!s.visible||s.isTemporary)continue;const r=s.findObjectAt(e,t,i);if(r!==null)return r}return null}findPartsAt(e,t,i){return t===void 0&&(t=!0),this.wR(e,n=>n.part,t?n=>n instanceof Ce&&n.canSelect():null,i)}wR(e,t,i,n){t===void 0&&(t=null),i===void 0&&(i=null),!(n instanceof H)&&!(n instanceof X)&&(n=new X),this.Li();const s=this.qt.iteratorBackwards;for(;s.next();){const r=s.value;!r.visible||r.isTemporary||r.findObjectsAt(e,t,i,n)}return n}findObjectsAt(e,t,i,n){t===void 0&&(t=null),i===void 0&&(i=null),!(n instanceof H)&&!(n instanceof X)&&(n=new X),this.Li();const s=this.qt.iteratorBackwards;for(;s.next();){const r=s.value;r.visible&&r.findObjectsAt(e,t,i,n)}return n}findPartsIn(e,t,i,n){return t===void 0&&(t=!1),i===void 0&&(i=!0),this.xR(e,null,s=>s instanceof Ce&&(!i||s.canSelect()),t,n)}findObjectsIn(e,t,i,n,s){t===void 0&&(t=null),i===void 0&&(i=null),n===void 0&&(n=!1),!(s instanceof H)&&!(s instanceof X)&&(s=new X),this.Li();const r=this.qt.iteratorBackwards;for(;r.next();){const A=r.value;A.visible&&A.findObjectsIn(e,t,i,n,s)}return s}LP(e,t,i,n,s,r){const A=new X;this.Li();const o=this.qt.iteratorBackwards;for(;o.next();){const a=o.value;a.visible&&a.LP(e,t,i,n,A,s,r)}return A}xR(e,t,i,n,s){t===void 0&&(t=null),i===void 0&&(i=null),n===void 0&&(n=!1),!(s instanceof H)&&!(s instanceof X)&&(s=new X),this.Li();const r=this.qt.iteratorBackwards;for(;r.next();){const A=r.value;!A.visible||A.isTemporary||A.findObjectsIn(e,t,i,n,s)}return s}findPartsNear(e,t,i,n,s){return i===void 0&&(i=!0),n===void 0&&(n=!0),this.bR(e,t,null,r=>r instanceof Ce&&(!n||r.canSelect()),i,s)}findObjectsNear(e,t,i,n,s,r){i===void 0&&(i=null),n===void 0&&(n=null),s===void 0&&(s=!0),s!==!1&&s!==!0&&((s instanceof H||s instanceof X)&&(r=s),s=!0),!(r instanceof H)&&!(r instanceof X)&&(r=new X),this.Li();const A=this.qt.iteratorBackwards;for(;A.next();){const o=A.value;o.visible&&o.findObjectsNear(e,t,i,n,s,r)}return r}bR(e,t,i,n,s,r){i===void 0&&(i=null),n===void 0&&(n=null),s===void 0&&(s=!0),s!==!1&&s!==!0&&((s instanceof H||s instanceof X)&&(r=s),s=!0),!(r instanceof H)&&!(r instanceof X)&&(r=new X),this.Li();const A=this.qt.iteratorBackwards;for(;A.next();){const o=A.value;!o.visible||o.isTemporary||o.findObjectsNear(e,t,i,n,s,r)}return r}acceptEvent(e){return this.Gc(e,e instanceof MouseEvent)}Gc(e,t){const i=this.qr;this.qr=this.sa,this.sa=i,i.diagram=this,i.event=e,t?this.i0(e,i):(i.viewPoint=this.qr.viewPoint,i.documentPoint=this.qr.documentPoint);let n=0;const s=e;return s.ctrlKey&&(n+=1),s.altKey&&(n+=2),s.shiftKey&&(n+=4),s.metaKey&&(n+=8),i.modifiers=n,i.button=s.button,s.buttons!==void 0&&(i.buttons=s.buttons),u.cr&&s.button===0&&s.ctrlKey&&(i.button=2),i.down=!1,i.up=!1,i.clickCount=1,i.delta=0,i.handled=!1,i.bubbles=!1,i.timestamp=e.timeStamp,i.isMultiTouch=!1,i.targetDiagram=this.mb(e,e.target),i.targetObject=null,i}mb(e,t){if(t===null)return null;const i=dt.is.get(t);if(i)return i;let n=e.path;if(!n&&u.lt(e.composedPath)&&(n=e.composedPath()),n&&n[0]){const s=dt.is.get(n[0]);if(s)return s}return null}lR(e,t,i){const n=this.bM(e,!0,!1,!1,!0,i);return this.i0(t,n),n.targetDiagram=this.mb(e,e.target),n.targetObject=null,i||n.clone(this.jm),n}hR(e,t,i){const n=this.bM(e,!1,!1,!1,!1,i);let s=y.document.elementFromPoint(t.clientX,t.clientY)||null;s!==null&&s.shadowRoot!==void 0&&s.shadowRoot!==null&&(s=s.shadowRoot.elementFromPoint(t.clientX,t.clientY));let r=this,A=e;if(s){const o=this.mb(e,s);o&&(A=t,r=o)}return n.targetDiagram=r,this.i0(A,n),n.targetObject=null,n}bM(e,t,i,n,s,r){const A=this.qr;this.qr=this.sa,this.sa=A,A.diagram=this,A.clickCount=1,A.delta=0;let o=0;return e.ctrlKey&&(o+=1),e.altKey&&(o+=2),e.shiftKey&&(o+=4),e.metaKey&&(o+=8),A.modifiers=o,A.event=e,A.timestamp=e.timeStamp,A.button=i?this.firstInput.button:e.button,A.buttons=e.buttons,u.cr&&e.button===0&&e.ctrlKey&&(A.button=2),A.down=t,A.up=i,A.handled=n,A.bubbles=s,A.isMultiTouch=r,A}ua(e,t){return e.bubbles?!0:(t.stopPropagation!==void 0&&t.stopPropagation(),t.cancelable!==!1&&t.preventDefault(),t.cancelBubble=!0,!1)}uR(e){const t=dt.is.get(this);if(!t||!t.isEnabled)return!1;const i=t.Gc(e,!1);return i.key=e.key,i.code=e.code,i.down=!0,t.doKeyDown(),t.ua(i,e)}dR(e){const t=dt.is.get(this);if(!t||!t.isEnabled)return!1;const i=t.Gc(e,!1);return i.key=e.key,i.code=e.code,i.up=!0,t.doKeyUp(),t.ua(i,e)}cR(e){const t=dt.is.get(this);if(!t||!t.isEnabled)return!1;const i=t.Gc(e,!0);return t.mouseEnter!==null&&t.mouseEnter(i),t.currentTool.standardMouseOver(),t.ua(i,e)}fR(e){const t=dt.is.get(this);if(!t||!t.isEnabled)return!1;const i=t.Gc(e,!0);return t.mouseLeave!==null&&t.mouseLeave(i),t.ua(i,e)}getMouse(e){const t=this.mt;if(t===null)return new T(0,0);const i=t.getBoundingClientRect(),n=(e.clientX-i.left)*(this.St/i.width),s=(e.clientY-i.top)*(this.Mt/i.height);return new T(n,s).Be(this.F)}i0(e,t){const i=this.mt;let n=0,s=0;if(i!==null){const A=i.getBoundingClientRect();n=(e.clientX-A.left)*(this.St/A.width),s=(e.clientY-A.top)*(this.Mt/A.height)}t.viewPoint.i(n,s);const r=T.Y(n,s);this.F._e(r),t.documentPoint.a(r),T.e(r)}RC(e,t,i){let n;if(this.ra[0]!==null)n=this.ra[t];else return;const s=this.mt;if(s!==null){const r=s.getBoundingClientRect();i.i((n.clientX-r.left)*(this.St/r.width),(n.clientY-r.top)*(this.Mt/r.height))}}invalidateDocumentBounds(){this.na||(this.na=!0,this.requestUpdate(!1))}kR(){this.xs||this.Li(),this.ensureBounds()}redraw(){this.Jt||this.xs||(this.L(),this.maybeUpdate())}isUpdateRequested(){return this.Ar}delayInitialization(e){e===void 0&&(e=null);const t=this.animationManager,i=t.isEnabled;t.stopAnimation(),t.isEnabled=!1,this.Pr(),this.to=!1,this.ix=new T(NaN,NaN),t.isEnabled=i,this.xs=!0;const n=this;e!==null&&u.fr(()=>{n.xs=!1,t.Ul("Model"),e(n)},1)}requestUpdate(e){if(e===void 0&&(e=!1),this.Ar===!0||this.Jt||e===!1&&this.xs)return;this.Ar=!0;const t=this;y.requestAnimationFrame(()=>{t.Ar&&t.maybeUpdate()})}maybeUpdate(){this.Iu&&!this.Ar||(this.Iu&&(this.Iu=!1),this.Pr())}PM(e,t){!this.Uu||this.Jt||this.animationManager.defaultAnimation.isAnimating||this.RL()||(e&&this.Li(),t&&this.Ys(!1))}Pr(e){if(this.xs||(this.Ar=!1,this.Ft===null&&!this.Vu.isReal()))return;this.xs=!0;const t=this.animationManager,i=this.Ku;if(!t.isAnimating&&i.length!==0){const d=i.r,f=d.length;for(let g=0;g<f;g++){const x=d[g];x.me(!1),x.c()}i.clear()}const n=this.cM;n.count>0&&(n.each(d=>d.SM()),n.clear());let s=!1,r=!1;t.defaultAnimation.isAnimating&&(r=!0,s=this.skipsUndoManager,this.skipsUndoManager=!0),t.xi||this.LS(),e||this.PM(!1,!0);const A=!this.undoManager.isUndoingRedoing&&(this.Ll||this.Kc.count!==0&&this.vr.size!==0),o=!this.to||this.Wr;this.Li(!0);let a=!1;(o||A)&&(this.to?this.MM(!this.Bc,A):(this.startTransaction("Initial Layout"),t.isEnabled===!1&&t.stopAnimation(),this.MM(!1,A)),a=o),this.Bc=!1,this.Ll=!1,this.Li(),this.ts!==null&&(this.ts.visible&&!this.zu&&(this.lh(),this.zu=!0),!this.ts.visible&&this.zu&&(this.zu=!1)),this.Ex||this.kR(),e||this.PM(!0,!1);let h=!1;if(a){const d=it.l();d.a(this.viewportBounds),this.to||(this.to=!0,h=!0,this.skipsUndoManager||(this.undoManager.vw=!0),this.undoManager.Ow=!0,this.PR()),this.SR(),this.Li(!1),e||this.PM(!0,!0),it.e(d)}else if(t.Cc&&t.tx){if(this.Rr!==1)this.scale=this.ju(this.Rr);else if(this.Ql!==1)this.scale=this.ju(this.Ql);else{const d=this.initialScale;isFinite(d)&&d>0&&(this.scale=d)}this.Ys(!0)}a&&h&&this.commitTransaction("Initial Layout"),e||this.zi(this.ti),r&&(this.skipsUndoManager=s),this.xs=!1}get Gh(){return this.to}PR(){if(this.Rr!==1)this.scale=this.ju(this.Rr);else if(this.Ql!==1)this.scale=this.ju(this.Ql);else{const t=this.initialScale;isFinite(t)&&t>0&&(this.scale=t)}this.Ys(!0);const e=this.qt.r;this.Xs(e,e.length,this,this.viewportBounds),this.O("InitialLayoutCompleted"),this.ix.a(this.gt),this.lh()}SR(){this.O("LayoutCompleted")}e0(e){this.Zn.add(e)}addInvalidRoute(e){this.Oo?this.ia.add(e):this.vr.add(e)}Li(e){if(this.Zn.size!==0&&!(!this.xs&&this.animationManager.isTicking)){if(this.xs||(this.Ll=!0),e){this.OL(this.Zn);return}for(let t=0;t<23&&this.Zn.size!==0;t++){const i=new Set(this.Zn);this.Zn.clear(),this.SM(i,this.Zn)}this.nodes.each(t=>{t instanceof Vt&&t.IL(!1)})}}OL(e,t){for(const i of e)!i.Ne()||i instanceof Vt||(i.Zr()?(i.dt(1/0,1/0),i.Kt()):t&&t.add(i));for(const i of e)if(i instanceof Vt){if(!i.isVisible())continue;this.yb(i)}}SM(e,t){this.OL(e,t);for(const i of e){if(!(i instanceof Xt))continue;const n=i;n.isVisible()&&(n.Zr()?(n.dt(1/0,1/0),n.Kt()):t.add(n))}for(const i of e)i instanceof se&&i.isVisible()&&(i.Zr()?(i.dt(1/0,1/0),i.Kt()):t.add(i))}s0(e){const t=e instanceof dt,i=t?e.links:e.memberParts,n=this.Zn;if(t)this.Li(!0);else{for(;i.next();){const s=i.value;n.has(s)&&(!s.Ne()||s instanceof Vt||s.Zr()&&(s.dt(1/0,1/0),s.Kt()))}for(i.reset();i.next();){const s=i.value;if(n.has(s)&&s instanceof Vt){if(!s.isVisible())continue;this.yb(s)}}i.reset()}for(;i.next();){const s=i.value;s instanceof Xt&&n.has(s)&&s.isVisible()&&s.Zr()&&(s.dt(1/0,1/0),s.Kt())}}yb(e){const t=u.ht(),i=u.ht(),n=e.memberParts;for(;n.next();){const r=n.value;r.isVisible()&&(r instanceof Vt?(r.Bo()||r.es()||r.hh())&&this.yb(r):r instanceof Xt?r.fromNode===e||r.toNode===e?i.push(r):t.push(r):(r.dt(1/0,1/0),r.Kt()))}let s=t.length;for(let r=0;r<s;r++){const A=t[r];A.dt(1/0,1/0),A.Kt()}u.et(t),e.dt(1/0,1/0),e.Kt(),s=i.length;for(let r=0;r<s;r++){const A=i[r];A.dt(1/0,1/0),A.Kt()}u.et(i)}Xs(e,t,i,n){if(!(!this.Vc&&!this.animationManager.isAnimating)){for(let s=0;s<t;s++)e[s].Xs(i,n);this.Li()}}zi(e){this.Ft!==null&&(this.mt===null&&u.o("No canvas specified"),this.Uc==="svg"?this.MR(e):this.NR(e))}NR(e){const t=this.animationManager;if(t.xi||t.isAnimating&&!t.isTicking)return;const i=new Date;if(this.o0(),this.Ft.style.opacity==="0")return;const n=e!==this.ti,s=this.qt.r,r=s.length,A=this;if(this.Xs(s,r,A,A.viewportBounds),n)e.clearContextCache(!0),this.rh();else if(!this.ze&&!t.isAnimating)return;const o=this.F,a=this.Yi;e.setTransform(a,0,0,a,0,0),e.clearRect(0,0,this.St,this.Mt),this.Qt!==1&&(e.globalAlpha=this.Qt),this.NM(e);for(let x=0;x<r;x++)e.setTransform(a,0,0,a,0,0),e.transform(o.m11,o.m12,o.m21,o.m22,o.dx,o.dy),e.commitTransform(),s[x].zi(e,A);let h=!1;this.Yc?this.Yc.Hu(this)&&(h=this.ob()):h=!0,h&&(Bt.prototype._e=Bt.prototype.ww),n?(this.ti.clearContextCache(!0),this.rh()):(this.Vc=!1,this.ze=!1);const d=+new Date-+i,f=!1,g=this.mM;if(this.Tl===null){g[this.Zm]=d,this.Zm=(this.Zm+1)%g.length;let x=0;for(let B=0;B<g.length;B++)x+=g[B];this.$m=x/g.length}this.Qt!==1&&(e.globalAlpha=1)}MR(e){if(this.Ft===null)return;const t=this.animationManager;if(t.xi||t.isAnimating&&!t.isTicking)return;this.o0();const i=this.St,n=this.Mt;e.surface.resize(i,n,i,n);const s=this.qt.r,r=s.length,A=this;if(this.Xs(s,r,A,A.viewportBounds),!this.ze&&!t.isAnimating)return;const o=this.F;e.lastDrawnPart=null,e.setDiagramPosScale(o.m11,o.m12,o.m21,o.m22,o.dx,o.dy),this.Qt!==1&&(e.globalAlpha=this.Qt),this.NM(e);const a=this.Yi;this.mt.ai.setTransform(a,0,0,a,0,0),this.mt.ai.clearRect(0,0,this.St,this.Mt);for(let d=0;d<r;d++)s[d].zi(e,A);let h=!1;this.Yc?this.Yc.Hu(this)&&(h=this.ob()):h=!0,h&&(Bt.prototype._e=Bt.prototype.ww),this.Vc=!1,this.ze=!1}wb(e,t,i,n,s,r,A,o,a){if(this.Ft===null)return;this.mt===null&&u.o("No canvas specified"),r===void 0&&(r=null),A===void 0&&(A=null),o===void 0&&(o=!1),a===void 0&&(a=!1),this.o0(),this.ti.clearContextCache(!0),this.rh(),this.oa=!0;const h=this.rt;this.rt=n;const d=this,f=this.qt.r,g=f.length;try{const x=new it(s.x,s.y,i.width/n,i.height/n),B=x.copy();B.addMargin(t),this.lh(B),this.Li(),this.Xs(f,g,d,x),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,i.width,i.height),A!==null&&A!==""&&(e.fillStyle=A,e.fillBackground(0,0,i.width,i.height));const C=this.Yi;e.scale(C,C);const F=Bt.l();F.Ii(),F.Os(t.left,t.top),F.rt(n),(s.x!==0||s.y!==0)&&F.Os(-s.x,-s.y),e.setTransform(F.m11,F.m12,F.m21,F.m22,F.dx,F.dy),e.commitTransform(),e instanceof qi&&e.setDiagramPosScale(F.m11,F.m12,F.m21,F.m22,F.dx,F.dy),Bt.e(F),this.NM(e),e.globalAlpha=this.Qt;const b=this.findLayer("Grid");if(r){const L=new X,Q=r.iterator;for(Q.reset();Q.next();){const M=Q.value;M instanceof Ce&&(!a&&M.layer===b||(M.Ru(),L.add(M)))}for(let M=0;M<g;M++)f[M].EF(e,d,L,o);L.each(M=>M.Ru())}else for(let L=0;L<g;L++){const Q=f[L];Q===b?a&&Q.zi(e,d,!0):Q.zi(e,d,o)}this.oa=!1,this.Yc&&this.Yc.Hu(this)&&this.ob()}finally{this.rt=h,this.ti.clearContextCache(!0),this.rh(),this.Xs(f,g,d,d.viewportBounds),this.lh(),this.ti instanceof qi&&(this.ti.diagramGroup.replaceChildren(),this.redraw())}}getRenderingHint(e){return this.Fr[e]}setRenderingHint(e,t){e==="minDrawingLength"&&(this.Om=t),this.Fr[e]=t,this.redraw()}resetRenderingHints(){this.Fr=new v,this.Fr.drawShadows=!0,this.Fr.textGreeking=!0,this.Fr.viewportOptimizations=!u.cr,this.Fr.temporaryPixelRatio=!0,this.Fr.pictureRatioOptimization=!0,this.Fr.minDrawingLength=1,this.Om=1}NM(e){const t=this.Fr;if(t===null)return;if(t.imageSmoothingEnabled!==void 0){const n=!!t.imageSmoothingEnabled;e.setImageSmoothingEnabled(n)}const i=t.defaultFont;i!=null&&(e.font=i)}getInputOption(e){return this.vu[e]}setInputOption(e,t){this.vu[e]=t}QF(){this.vu=new v,this.vu.extraTouchArea=10,this.vu.extraTouchThreshold=10,this.vu.hasGestureZoom=!0}set(e){return Object.assign(this,e),this}attach(e){return this.setProperties(e)}setProperties(e){return dt.r0(this,e),this}static r0(e,t){const i=e instanceof Kt,n=e instanceof dt;for(const s in t){s===""&&u.o("Setting properties requires non-empty property names");let r=e,A=s;if(i||n){const a=s.indexOf(".");if(a>0){const h=s.substring(0,a);i?r=e.findObject(h):(r=e[h],r==null&&(r=e.toolManager[h])),u.j(r)?A=s.substring(a+1):u.o("Unable to find object named: "+h+" in "+e.toString()+" when trying to set property: "+s)}}if(A[0]!=="_"&&!u.cw(r,A))if(n&&A==="ModelChanged"){e.addModelChangedListener(t[A]);continue}else if(n&&A==="Changed"){e.addChangedListener(t[A]);continue}else if(n&&u.cw(e.toolManager,A))r=e.toolManager;else if(n&&e.EL(A)){e.addDiagramListener(A,t[A]);continue}else if(e instanceof hi&&A==="Changed"){e.addChangedListener(t[A]);continue}else u.o('Trying to set undefined property "'+A+'" on object: '+r.toString());const o=t[s];r[A]=o,A[0]==="_"&&r instanceof Ye&&r.addCopyProperty(A)}}dL(){if(this.sh.count!==0&&!(this.undoManager.transactionLevel>1)){for(;this.sh.count>0;){const e=this.sh;this.sh=new xt;const t=e.iterator;for(;t.next();){const i=t.key;i.invalidateOtherJumpOvers(t.value),i.oe()}}this.L()}}L(e){if(e===void 0)this.ze=!0,this.requestUpdate();else{const t=this.viewportBounds;e.isReal()&&t.intersectsRect(e)&&(this.ze=!0,this.requestUpdate())}this.O("InvalidateDraw")}invalidateViewport(e,t){if(this.ze!==!0){if(this.ze=!0,this.Uc==="svg"){this.maybeUpdate();return}this.getRenderingHint("temporaryPixelRatio")===!0?(this.Ew(),this.maybeUpdate(),this.xP(!0)):this.maybeUpdate()}}da(){this.Uu=!0}rh(){this.Vc=!0}o0(){this.Ou!==!1&&(this.Ou=!1,this.DL(this.St,this.Mt))}DL(e,t){this.oh();const i=this.Yi,n=e*i,s=t*i;this.mt.resize(n,s,e,t)&&(this.ze=!0,this.ti.clearContextCache(!0))}RL(){const e=this.mt;if(e===null||this.Vu.isReal())return!0;const t=this.St,i=this.Mt,n=this.Ft;let s=!1,r=this._n?this.di:0,A=this.pn?this.di:0,o=n.clientWidth||t+r,a=n.clientHeight||i+A;const h=this.viewportBounds,d=h.x,f=h.y,g=h.width,x=h.height;if((o!==t+r||a!==i+A)&&(this._n=!1,this.pn=!1,r=0,A=0,this.St=o,this.Mt=a,this.Ou=!0,s=!0,this.oh()),!this.to||!this.viewportBounds.isReal())return!0;const B=this.sb,C=this.nb;if(this.Uu=!1,!s&&!this._n&&!this.pn&&!this.Eu&&!this.Bu)return!0;const F=this.documentBounds;let b=0,L=0,Q=0,M=0;const O=h.width,D=h.height,K=this.Oc;this.contentAlignment.isSpot()?(F.width>O&&(b=K.left,L=K.right),F.height>D&&(Q=K.top,M=K.bottom)):(b=K.left,L=K.right,Q=K.top,M=K.bottom);const J=F.width+b+L,R=F.height+Q+M,G=this.scale,W=G;let Y=J>o/G,Z=R>a/G;if(!s&&!this._n&&!this.pn&&!Y&&!Z)return!0;const et=F.x-b,At=h.x,ht=F.right+L;let nt=h.right+r;const gt=F.y-Q,Ct=h.y,Wt=F.bottom+M;let St=h.bottom+A,Qt="1px",Mt="1px";if(this.scrollMode===1&&(Y||Z)){if(Y&&this.hasHorizontalScrollbar&&this.allowHorizontalScroll){let Ft=1;et+1<At&&(Ft=Math.max((At-et)*G+this.St,Ft)),ht>nt+1&&(Ft=Math.max((ht-nt)*G+this.St,Ft)),O+r+1<J&&(Ft=Math.max((J-O)*G+this.St,Ft)),Qt=Ft.toString()+"px"}if(Z&&this.hasVerticalScrollbar&&this.allowVerticalScroll){let Ft=1;gt+1<Ct&&(Ft=Math.max((Ct-gt)*G+this.Mt,Ft)),Wt>St+1&&(Ft=Math.max((Wt-St)*G+this.Mt,Ft)),D+A+1<R&&(Ft=Math.max((R-D)*G+this.Mt,Ft)),Mt=Ft.toString()+"px"}}let Ut=Qt!=="1px",ne=Mt!=="1px";if(!(Ut&&ne)&&(Ut||ne)){if(Y=!(J<O+r),Z=!(R<D+A),ne&&(nt-=this.di),Ut&&(St-=this.di),Y&&this.hasHorizontalScrollbar&&this.allowHorizontalScroll){let zt=1;et+1<At&&(zt=Math.max((At-et)*G+this.St,zt)),ht>nt+1&&(zt=Math.max((ht-nt)*G+this.St,zt)),O+1<J&&(zt=Math.max((J-O)*G+this.St,zt)),Qt=zt.toString()+"px"}Ut=Qt!=="1px";let Ft=this.Mt;if(Ut!==this.pn&&(Ft=Ut?this.Mt-this.di:this.Mt+this.di),Z&&this.hasVerticalScrollbar&&this.allowVerticalScroll){let zt=1;gt+1<Ct&&(zt=Math.max((Ct-gt)*G+Ft,zt)),Wt>St+1&&(zt=Math.max((Wt-St)*G+Ft,zt)),D+1<R&&(zt=Math.max((R-D)*G+Ft,zt)),Mt=zt.toString()+"px"}ne=Mt!=="1px"}if(this.Xm&&!(Ut!==this.pn||ne!==this._n))return(t!==this.St||i!==this.Mt)&&this.maybeUpdate(),!1;if(Ut!==this.pn&&(Qt==="1px"?this.Mt=this.Mt+this.di:this.Mt=Math.max(this.Mt-this.di,1),s=!0),this.pn=Ut,C.style.width=Qt,ne!==this._n&&(Mt==="1px"?this.St=this.St+this.di:this.St=Math.max(this.St-this.di,1),s=!0,this.Gu)){const Ft=T.l();ne?(e.style.left=this.di+"px",this.position=Ft.i(this.gt.x+this.di/this.scale,this.gt.y)):(e.style.left="0px",this.position=Ft.i(this.gt.x-this.di/this.scale,this.gt.y)),T.e(Ft)}s&&this.oh(),this._n=ne,C.style.height=Mt,this.Wx=!0,s&&(this.Ou=!0);let te=B.scrollLeft;if(this.hasHorizontalScrollbar&&this.allowHorizontalScroll&&(O+1<J?te=(this.position.x-et)*G:et+1<At?te=B.scrollWidth-B.clientWidth:ht>nt+1&&(te=this.position.x*G)),this.Gu)switch(this.yx){case"negative":te=-(B.scrollWidth-te-B.clientWidth);break;case"reverse":te=B.scrollWidth-te-B.clientWidth;break}if(B.scrollLeft=te,this.hasVerticalScrollbar&&this.allowVerticalScroll&&(D+1<R?B.scrollTop=(this.position.y-gt)*G:gt+1<Ct?B.scrollTop=B.scrollHeight-B.clientHeight:Wt>St+1&&(B.scrollTop=this.position.y*G)),o=this.St,a=this.Mt,B.style.width=o+(this._n?this.di:0)+"px",B.style.height=a+(this.pn?this.di:0)+"px",t!==o||i!==a||this.animationManager.xi){const Ft=it.Y(d,f,g,x);return this.onViewportBoundsChanged(Ft,this.viewportBounds,W,s),it.e(Ft),!1}return!0}add(e){const t=e.diagram;if(t===this)return;t!==null&&u.o("Cannot add part "+e.toString()+" to "+this.toString()+". It is already a part of "+t.toString());let i=this.findLayer(e.layerName);if(i===null&&(i=this.findLayer("")),i===null&&u.o('Cannot add a Part when unable find a Layer named "'+e.layerName+'" and there is no default Layer'),e.layer===i)return;const n=i.ta(99999999,e,e.diagram===this);n>=0&&this.raiseChangedEvent(3,"parts",i,null,e,null,n),i.isTemporary||this.invalidateDocumentBounds(),e.invalidateLayout(1);const s=e.layerChanged;s!==null&&s(e,null,i)}ta(e){this.partManager.ta(e);const t=this;e.Qr(i=>t.BL(i)),e.data||e.Uo(),e.hasPlaceholder()&&e.c(),e.data!==null&&e.Qr(i=>t.partManager.CM(i,null)),(e.es()===!0||e.hh()===!0)&&this.e0(e),e.UL(!0,this),e.VL()?(e.actualBounds.isReal()&&this.L(e._h(e.actualBounds)),this.invalidateDocumentBounds()):e.isVisible()&&e.actualBounds.isReal()&&this.L(e._h(e.actualBounds)),this.requestUpdate()}se(e){e.clearAdornments(),this.partManager.se(e);const t=this;e.data!==null&&e.Qr(i=>t.partManager.LM(i,t)),this.Zn.delete(e),e instanceof Xt&&this.vr.delete(e),e.VL()?(e.actualBounds.isReal()&&this.L(e._h(e.actualBounds)),this.invalidateDocumentBounds()):e.isVisible()&&e.actualBounds.isReal()&&this.L(e._h(e.actualBounds)),this.requestUpdate()}remove(e){this.AM(e,!0)}AM(e,t){const i=e.layer;if(i===null||i.diagram!==this)return;e.isSelected=!1,e.isHighlighted=!1,e.invalidateLayout(2),t&&e.Hc();const n=i.se(-1,e,!1);n>=0&&this.raiseChangedEvent(4,"parts",i,e,null,n,null);const s=e.layerChanged;s!==null&&s(e,i,null)}removeParts(e,t){if(t===void 0&&(t=!1),Array.isArray(e)){const i=e.length;for(let n=0;n<i;n++){const s=e[n];t&&!s.canDelete()||this.remove(s)}}else{const i=new X;i.addAll(e);const n=i.iterator;for(;n.next();){const s=n.value;t&&!s.canDelete()||this.remove(s)}}}copyParts(e,t,i){i===void 0&&(i=!1);let n=null;const s=t||this,r=s.model;let A=!1,o=!1;try{r.xm()&&(A=r.copiesParentKeyOfNodeData,r.copiesParentKeyOfNodeData=s.commandHandler.copiesParentKey),(r.wm()||r.xb())&&(o=r.copiesGroupKeyOfNodeData,r.copiesGroupKeyOfNodeData=s.commandHandler.copiesGroupKey),n=this.partManager.copyParts(e,t,i)}finally{r.xm()&&(r.copiesParentKeyOfNodeData=A),(r.wm()||r.xb())&&(r.copiesGroupKeyOfNodeData=o)}return n}moveParts(e,t,i,n){if(i===void 0&&(i=!1),n===void 0&&(n=this.l0()),this.toolManager===null)return;const s=new xt;if(e!==null)if(Array.isArray(e))for(let r=0;r<e.length;r++)this._r(s,e[r],i,n);else{const r=e.iterator;for(;r.next();)this._r(s,r.value,i,n)}else{let r=this.parts;for(;r.next();){const A=r.value;this._r(s,A,i,n)}for(r=this.nodes;r.next();){const A=r.value;this._r(s,A,i,n)}for(r=this.links;r.next();){const A=r.value;this._r(s,A,i,n)}}this.PP(s,t,n,i)}_r(e,t,i,n,s){if(!e.has(t)&&(s===void 0&&(s=!1),!(i&&!s&&!t.canMove()&&!t.canCopy())))if(n===void 0&&(n=this.l0()),t instanceof Et){if(e.set(t,this.Vs(n,t,t.location)),t instanceof Vt&&(t.hasPlaceholder()||n.dragsMembers)){const A=t.memberParts;for(;A.next();){const o=A.value;this._r(e,o,i,n,n.groupsAlwaysMove)}}const r=t.linksConnected;for(;r.next();){const A=r.value;if(e.has(A))continue;const o=A.fromNode,a=A.toNode;o!==null&&e.has(o)&&a!==null&&e.has(a)&&this._r(e,A,i,n)}if(n.dragsTree){const A=t.findTreeChildrenNodes();for(;A.next();){const o=A.value;this._r(e,o,i,n)}}}else if(t instanceof Xt){e.set(t,this.Vs(n,t));const r=t.labelNodes;for(;r.next();){const A=r.value;this._r(e,A,i,n)}}else t instanceof se||e.set(t,this.Vs(n,t,t.location))}PP(e,t,i,n){if(e===null||e.count===0)return;const s=T.l(),r=T.l();r.a(t),isNaN(r.x)&&(r.x=0),isNaN(r.y)&&(r.y=0);const A=this.hb;A||this.YC(e);const o=u.ht(),a=u.ht(),h=e.iterator;let d=T.l();for(;h.next();){const C=h.key,F=h.value;if(C.Ne()){const b=this.zL(C,e);if(b!==null)o.push(new Qo(C,F,b));else if(!n||C.canMove()){const L=F.point;s.a(L),this.computeMove(C,s.add(r),i,d),C.location=d,F.shifted===void 0&&(F.shifted=new T),F.shifted.a(d.subtract(L))}}else h.key instanceof Xt&&a.push(new vt(h.key,h.value))}T.e(d);const f=o.length;for(let C=0;C<f;C++){const F=o[C],b=F.XL.point;s.a(b),F.bb.shifted===void 0&&(F.bb.shifted=new T),F.pe.location=s.add(F.bb.shifted)}const g=T.l(),x=T.l(),B=a.length;for(let C=0;C<B;C++){const F=a[C],b=F.key;if(b instanceof Xt){if(b.suspendsRouting){b.Tr=null;const L=b.fromNode,Q=b.toNode;if(this.draggedLink!==null&&i.dragsLink){const M=F.value.point;if(b.dragComputation===null){e.set(b,this.Vs(i,b,r));const O=r.x-M.x,D=r.y-M.y;b.kr(O,D)}else{const O=T.Y(0,0),D=b.getPoint(0);D&&D.isReal()&&O.a(D),d=T.l().a(O).add(r);let K=d;i.isGridSnapEnabled&&(i.isGridSnapRealtime||this.lastInput.up)&&(K=T.l(),this.cS(b,d,K,i)),d.a(b.dragComputation(b,d,K)).subtract(O),e.set(b,this.Vs(i,b,d));const J=d.x-M.x,R=d.y-M.y;b.kr(J,R),T.e(O),T.e(d),K!==d&&T.e(K)}}else{if(L!==null){g.a(L.location);const M=e.get(L);M!==null&&g.subtract(M.point)}if(Q!==null){x.a(Q.location);const M=e.get(Q);M!==null&&x.subtract(M.point)}if(L!==null&&Q!==null)if(g.equalsApprox(x)){const M=F.value.point,O=s;O.a(g),O.subtract(M),e.set(b,this.Vs(i,b,g)),b.kr(O.x,O.y)}else b.suspendsRouting=!1,b.invalidateRoute();else{const M=F.value.point;let O;L!==null?O=g:Q!==null?O=x:O=r,e.set(b,this.Vs(i,b,O));const D=O.x-M.x,K=O.y-M.y;b.kr(D,K)}}}else if(b.fromNode===null||b.toNode===null){const L=F.value.point;e.set(b,this.Vs(i,b,r));const Q=r.x-L.x,M=r.y-L.y;b.kr(Q,M)}}}T.e(s),T.e(r),T.e(g),T.e(x),u.et(o),u.et(a),A||(this.Li(),this.wP(e))}computeMove(e,t,i,n){if(n===void 0&&(n=new T),n.a(t),e===null)return n;let s=t;const r=i.isGridSnapEnabled;r&&(i.isGridSnapRealtime||this.lastInput.up)&&(s=T.l(),this.cS(e,t,s,i));const A=e.dragComputation!==null?e.dragComputation(e,t,s):s,o=e.minLocation;let a=o.x;isNaN(a)&&(a=r?Math.round(e.location.x*1e3)/1e3:e.location.x);let h=o.y;isNaN(h)&&(h=r?Math.round(e.location.y*1e3)/1e3:e.location.y);const d=e.maxLocation;let f=d.x;isNaN(f)&&(f=r?Math.round(e.location.x*1e3)/1e3:e.location.x);let g=d.y;return isNaN(g)&&(g=r?Math.round(e.location.y*1e3)/1e3:e.location.y),n.i(Math.max(a,Math.min(A.x,f)),Math.max(h,Math.min(A.y,g))),s!==t&&T.e(s),n}l0(){const e=this.toolManager.findTool("Dragging");return e instanceof ye?e.dragOptions:this.cb}cS(e,t,i,n){if(n===void 0&&(n=this.l0()),i.a(t),e===null)return i;const s=this.grid,r=n.gridSnapCellSize;let A=r.width,o=r.height;const a=n.gridSnapOrigin;let h=a.x,d=a.y;const f=n.gridSnapCellSpot;if(s!==null){const x=s.gridCellSize;isNaN(A)&&(A=x.width),isNaN(o)&&(o=x.height);const B=s.gridOrigin;isNaN(h)&&(h=B.x),isNaN(d)&&(d=B.y)}const g=T.Y(0,0);return g.setSpot(0,0,A,o,f),V.Og(t.x,t.y,h+g.x,d+g.y,A,o,i),T.e(g),i}YC(e){if(e===null)return;this.hb=!0;const t=e.iterator;for(;t.next();){const i=t.key;i instanceof Xt&&(i.suspendsRouting=!0)}}wP(e){if(e===null)return;const t=e.iterator;for(;t.next();){const i=t.key;i instanceof Xt&&(i.suspendsRouting=!1,i.YL()&&i.invalidateRoute())}this.hb=!1}get draggedLink(){return this.ab}set draggedLink(e){this.ab!==e&&(this.ab=e,e!==null&&(this.fb=e.fromPort,this.ub=e.toPort))}get NP(){return this.fb}set NP(e){this.fb=e}get CP(){return this.ub}set CP(e){this.ub=e}zL(e,t){const i=e.containingGroup;if(i!==null){let n=this.zL(i,t);if(n!==null||(n=t.get(i),n!==null))return n}return null}Vs(e,t,i){if(i===void 0)return new ds(T.Lo);let n=e.isGridSnapEnabled;return!e.groupsSnapMembers&&t.containingGroup!==null&&(n=!1),n?new ds(new T(Math.round(i.x*1e3)/1e3,Math.round(i.y*1e3)/1e3)):new ds(i.copy())}TM(e,t){if(e.diagram!==null&&e.diagram!==this&&u.o("Cannot share a Layer with another Diagram: "+e+" of "+e.diagram),t===null?e.diagram!==null&&u.o("Cannot add an existing Layer to this Diagram again: "+e):(t.diagram!==this&&u.o("Existing Layer must be in this Diagram: "+t+" not in "+t.diagram),e===t&&u.o("Cannot move a Layer before or after itself: "+e)),e.diagram===this)return;const i=e.name,n=this.qt,s=n.count;for(let r=0;r<s;r++)n.elt(r).name===i&&u.o("Cannot add Layer with the name '"+i+"'; a Layer with the same name is already present in this Diagram.")}addLayer(e){this.TM(e,null),e.Ro(this);const t=this.qt;let i=t.count-1;if(!e.isTemporary)for(;i>=0&&t.elt(i).isTemporary;)i--;return t.insertAt(i+1,e),this.Mi!==null&&this.raiseChangedEvent(3,"layers",this,null,e,null,i+1),this.L(),this.invalidateDocumentBounds(),this}addLayerBefore(e,t){this.TM(e,t),e.Ro(this);const i=this.qt,n=i.indexOf(e);n>=0&&(i.delete(e),this.Mi!==null&&this.raiseChangedEvent(4,"layers",this,e,null,n,null));const s=i.count;let r;for(r=0;r<s;r++)if(i.elt(r)===t){i.insertAt(r,e);break}return this.Mi!==null&&this.raiseChangedEvent(3,"layers",this,null,e,null,r),this.L(),n<0&&this.invalidateDocumentBounds(),this}addLayerAfter(e,t){this.TM(e,t),e.Ro(this);const i=this.qt,n=i.indexOf(e);n>=0&&(i.delete(e),this.Mi!==null&&this.raiseChangedEvent(4,"layers",this,e,null,n,null));const s=i.count;let r;for(r=0;r<s;r++)if(i.elt(r)===t){i.insertAt(r+1,e);break}return this.Mi!==null&&this.raiseChangedEvent(3,"layers",this,null,e,null,r+1),this.L(),n<0&&this.invalidateDocumentBounds(),this}$r(e,t){e.Ro(this),this.qt.insertAt(t,e)}KL(e){this.qt.removeAt(e)}removeLayer(e){if(e.diagram!==this&&u.o("Cannot remove a Layer from another Diagram: "+e+" of "+e.diagram),e.name==="")return;const t=this.qt,i=t.indexOf(e);if(t.delete(e)){const n=e.Dt.copy().iterator;for(;n.next();){const s=n.value,r=s.layerName;r!==e.name?s.layerName=r:s.layerName=""}this.Mi!==null&&this.raiseChangedEvent(4,"layers",this,e,null,i,null),this.L(),this.invalidateDocumentBounds()}}findLayer(e){const t=this.layers;for(;t.next();){const i=t.value;if(i.name===e)return i}return null}findRouter(e){for(const t of this.Kc)if(t.name===e)return t;return null}addModelChangedListener(e){return u.C(e,dt,"addModelChangedListener:listener"),this.Qn===null&&(this.Qn=new H),this.Qn.add(e),this.model.addChangedListener(e),this}removeModelChangedListener(e){u.C(e,dt,"removeModelChangedListener:listener"),this.Qn!==null&&(this.Qn.delete(e),this.Qn.count===0&&(this.Qn=null)),this.model.removeChangedListener(e)}addChangedListener(e){return u.C(e,dt,"addChangedListener:listener"),this.Or===null&&(this.Or=new H),this.Or.add(e),this}removeChangedListener(e){u.C(e,dt,"removeChangedListener:listener"),this.Or!==null&&(this.Or.delete(e),this.Or.count===0&&(this.Or=null))}DM(e){if(!this.skipsUndoManager&&!this.model.skipsUndoManager&&this.model.undoManager.handleChanged(e),e.change!==1&&(this.isModified=!0),this.Or!==null){const t=this.Or,i=t.length;for(let n=0;n<i;n++)t.elt(n)(e)}}raiseChangedEvent(e,t,i,n,s,r,A){r===void 0&&(r=null),A===void 0&&(A=null);const o=new ke;o.diagram=this,o.change=e,o.propertyName=t,o.object=i,o.oldValue=n,o.oldParam=r,o.newValue=s,o.newParam=A,this.DM(o)}raiseChanged(e,t,i,n,s){this.raiseChangedEvent(2,e,this,t,i,n,s)}t(e,t,i,n,s){this.raiseChangedEvent(2,e,this,t,i,n,s)}get animationManager(){return this.ps}get undoManager(){return this.Mi.undoManager}get skipsUndoManager(){return this.Io}set skipsUndoManager(e){u.s(e,"boolean",dt,"skipsUndoManager"),this.Io=e,this.Mi.skipsUndoManager=e}get delaysLayout(){return this.Bx}set delaysLayout(e){this.Bx=e}vC(e,t){if(e===null||e.diagram!==this)return;const i=this.ge;try{this.ge=!0;const n=e.change;if(n===2){const s=e.object,r=e.propertyName,A=e.getValue(t);if(e.diagram.model.nt(s,r,A),s instanceof Ye){const o=s.part;o!==null&&o.invalidateAdornments()}this.isModified=!0}else if(n===3){const s=e.object,r=e.newParam,A=e.newValue;if(s instanceof Kt)if(typeof r=="number"&&A instanceof Ye){t?s.se(r):s.insertAt(r,A);const o=s.part;o!==null&&o.invalidateAdornments()}else typeof r=="number"&&A instanceof je&&(A.isRow?s.GL(r,t?void 0:A):s.HL(r,t?void 0:A));else if(s instanceof ki){const o=e.oldParam===!0;typeof r=="number"&&A instanceof Ce&&(t?(o||(A.isSelected=!1,A.isHighlighted=!1,A.invalidateAdornments()),s.se(o?r:-1,A,o)):s.ta(r,A,o))}else s instanceof dt?typeof r=="number"&&A instanceof ki&&(t?this.KL(r):this.$r(A,r)):u.o("unknown ChangeType.Insert object: "+e.toString());this.isModified=!0}else if(n===4){const s=e.object,r=e.oldParam,A=e.oldValue;if(s instanceof Kt)typeof r=="number"&&A instanceof Ye?t?s.insertAt(r,A):s.se(r):typeof r=="number"&&A instanceof je&&(A.isRow?s.GL(r,t?A:void 0):s.HL(r,t?A:void 0));else if(s instanceof ki){const o=e.newParam===!0;typeof r=="number"&&A instanceof Ce&&(t?s.Dt.indexOf(A)<0&&s.ta(r,A,o):(o||(A.isSelected=!1,A.isHighlighted=!1,A.invalidateAdornments()),s.se(o?r:-1,A,o)))}else s instanceof dt?typeof r=="number"&&A instanceof ki&&(t?this.$r(A,r):this.KL(r)):u.o("unknown ChangeType.Remove object: "+e.toString());this.isModified=!0}else n===1||u.o("unknown ChangedEvent: "+e.toString())}finally{this.ge=i}}startTransaction(e){return this.undoManager.startTransaction(e)}commitTransaction(e){return this.undoManager.commitTransaction(e)}rollbackTransaction(){return this.undoManager.rollbackTransaction()}commit(e,t){let i=t;i===void 0&&(i="");const n=this.skipsUndoManager;i===null&&(this.skipsUndoManager=!0,i=""),this.undoManager.startTransaction(i);let s=!1;try{e(this),s=!0}finally{s?this.undoManager.commitTransaction(i):this.undoManager.rollbackTransaction(),this.skipsUndoManager=n}}updateAllTargetBindings(e){this.partManager.updateAllTargetBindings(e)}updateAllThemeBindings(){if(this.partManager.updateAllThemeBindings(),this.ts!==null){const e=this.ts.part;e!==null&&e.Uo()}}setDivBackground(e){this.div&&(this.div.style.backgroundColor=e)}updateAllRelationshipsFromData(){this.partManager.updateAllRelationshipsFromData()}pb(){const e=this.F,t=this.rt,i=this.gt;e.Ii(),t!==1&&e.rt(t),(i.x!==0||i.y!==0)&&e.Os(-i.x,-i.y)}jL(e,t){const i=this.animationManager;if(this.Jt||this.xs){this.rt=t,this.oh(),this.L(),this.da(),i.fL(e,this.rt),this.pb();return}if(this.mt===null){this.rt=t,this.pb();return}this.Jt=!0;const n=this.viewportBounds.copy(),s=this.St,r=this.Mt;let A=this.zoomPoint.x,o=this.zoomPoint.y;const a=this.contentAlignment;isNaN(A)&&(a.isSide()?a.includesSide(q.LeftSide)?A=0:a.includesSide(q.RightSide)&&(A=s-1):a.isSpot()?A=a.x*(s-1):A=s/2),isNaN(o)&&(a.isSide()?a.includesSide(q.TopSide)?o=0:a.includesSide(q.BottomSide)&&(o=r-1):a.isSpot()?o=a.y*(r-1):o=r/2),this.scaleComputation!==null&&!this.animationManager.defaultAnimation.isAnimating&&(t=this.scaleComputation(this,t)),t<this.minScale&&(t=this.minScale),t>this.maxScale&&(t=this.maxScale);const h=T.Y(this.gt.x+A/e-A/t,this.gt.y+o/e-o/t);this.position=h,T.e(h),this.rt=t,this.oh(),this.Jt=!1,this.onViewportBoundsChanged(n,this.viewportBounds,e,!1),this.Ys(!1),i.fL(e,this.rt),this.L()}yR(){const e=this.qt.r;for(let t=0;t<e.length;t++)e[t].wL()}onViewportBoundsChanged(e,t,i,n){if(e.equals(t))return;n===void 0&&(n=!1),n||this.da(),this.rh();const s=this.layout;s!==null&&s.isViewportSized&&this.autoScale===1&&(e.width!==t.width||e.height!==t.height)&&s.invalidateLayout();const r=this.currentTool;this.Xc===!0&&r instanceof ue&&!this.animationManager.isTicking&&(this.lastInput.documentPoint=this.transformViewToDoc(this.lastInput.viewPoint),r.standardMouseActivity(this)),this.Jt||this.invalidateViewport(e,t),this.lh(),this.Xi.scale=i,this.Xi.position.x=e.x,this.Xi.position.y=e.y,this.Xi.bounds.a(e),this.Xi.canvasSize.width=Math.round(e.width*i),this.Xi.canvasSize.height=Math.round(e.height*i),this.Xi.newCanvasSize.width=this.St,this.Xi.newCanvasSize.height=this.Mt,this.Xi.isScroll=n,this.O("ViewportBoundsChanged",this.Xi,e),this.isVirtualized&&this.links.each(A=>{A.isAvoiding&&A.actualBounds.intersectsRect(t)&&A.invalidateRoute()})}lh(e){const t=this.ts;if(t===null||!t.visible||t.layer===null)return;const i=e!==void 0?e:this.Qx;if(!i.isReal())return;const n=i.width,s=i.height;if(t.scale=1,t.angle=0,t.layer.isViewportAligned)t.width=n*this.scale,t.height=s*this.scale,t.part.alignment=q.TopLeft;else{t.bi===null&&(t.bi=new cr);const r=t.bi.jc;if(!r.isReal())return;t.width=n+r.width*2,t.height=s+r.height*2;const A=T.l();V.Og(i.x,i.y,0,0,r.width,r.height,A),A.offset(-r.width,-r.height),t.part.location=A,T.e(A)}}clearSelection(e){e===void 0&&(e=!1);const t=this.selection;if(t.count===0)return;e||this.O("ChangingSelection",t);const i=t.toArray(),n=i.length;for(let s=0;s<n;s++){const r=i[s];r.isSelected=!1}t.Tt(),t.clear(),t.g(),e||this.O("ChangedSelection",t)}select(e){e!==null&&e.diagram===this&&(!e.isSelected||this.selection.count>1)&&(this.O("ChangingSelection",this.selection),this.clearSelection(!0),e.isSelected=!0,this.O("ChangedSelection",this.selection))}selectCollection(e){if(this.O("ChangingSelection",this.selection),this.clearSelection(!0),Array.isArray(e)){const t=e.length;for(let i=0;i<t;i++){const n=e[i];n instanceof Ce||u.o("Diagram.selectCollection given something that is not a Part: "+n),n.isSelected=!0}}else{const t=e.iterator;for(;t.next();){const i=t.value;i instanceof Ce||u.o("Diagram.selectCollection given something that is not a Part: "+i),i.isSelected=!0}}this.O("ChangedSelection",this.selection)}clearHighlighteds(){const e=this.highlighteds;if(e.count>0){const t=e.toArray(),i=t.length;for(let n=0;n<i;n++){const s=t[n];s.isHighlighted=!1}e.Tt(),e.clear(),e.g()}}highlight(e){e!==null&&e.diagram===this&&(!e.isHighlighted||this.highlighteds.count>1)&&(this.clearHighlighteds(),e.isHighlighted=!0)}highlightCollection(e){const t=new X().addAll(e),i=this.highlighteds.copy().removeAll(t).iterator;for(;i.next();){const s=i.value;s.isHighlighted=!1}const n=t.iterator;for(;n.next();){const s=n.value;s instanceof Ce||u.o("Diagram.highlightCollection given something that is not a Part: "+s),s.isHighlighted=!0}}scroll(e,t,i){i===void 0&&(i=1);const n=t==="up"||t==="down";let s=0;const r=T.l();if(e==="pixel")s=i;else if(e==="line")s=i*(n?this.scrollVerticalLineChange:this.scrollHorizontalLineChange);else if(e==="page"){let o=n?this.viewportBounds.height:this.viewportBounds.width;if(o*=this.scale,o!==0){const a=Math.max(o-(n?this.scrollVerticalLineChange:this.scrollHorizontalLineChange),0);s=i*a}}else if(e==="document"){const o=this.documentBounds,a=this.viewportBounds;t==="up"?this.position=r.i(a.x,o.y):t==="left"?this.position=r.i(o.x,a.y):t==="down"?this.position=r.i(a.x,o.bottom-a.height):t==="right"&&(this.position=r.i(o.right-a.width,a.y)),T.e(r);return}else u.o("scrolling unit must be 'pixel', 'line', 'page', or 'document', not: "+e);s/=this.scale;const A=this.position;t==="up"?this.position=r.i(A.x,A.y-s):t==="down"?this.position=r.i(A.x,A.y+s):t==="left"?this.position=r.i(A.x-s,A.y):t==="right"?this.position=r.i(A.x+s,A.y):u.o("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+t),T.e(r)}scrollToRect(e){const t=this.viewportBounds;if(t.containsRect(e))return;const i=e.center;i.x-=t.width/2,i.y-=t.height/2,this.position=i}centerRect(e){const t=this.viewportBounds,i=e.center;i.x-=t.width/2,i.y-=t.height/2,this.position=i}transformDocToView(e){return e.copy().F(this.F)}transformViewToDoc(e){return e.copy().Be(this.F)}KF(e){return e.Be(this.F)}get opacity(){return this.Qt}set opacity(e){const t=this.Qt;t!==e&&(u.s(e,"number",dt,"opacity"),(e<0||e>1)&&u.it(e,"0 <= value <= 1",dt,"opacity"),this.Qt=e,this.t("opacity",t,e),this.L())}get validCycle(){return this.Fx}set validCycle(e){const t=this.Fx;t!==e&&(this.Fx=e,this.t("validCycle",t,e))}get layers(){return this.qt.iterator}get isModelReadOnly(){const e=this.Mi;return e===null?!1:e.isReadOnly}set isModelReadOnly(e){const t=this.Mi;t!==null&&(t.isReadOnly=e)}get isReadOnly(){return this.Eo}set isReadOnly(e){const t=this.Eo;t!==e&&(u.s(e,"boolean",dt,"isReadOnly"),this.Eo=e,this.t("isReadOnly",t,e))}get isEnabled(){return this.Bi}set isEnabled(e){const t=this.Bi;t!==e&&(u.s(e,"boolean",dt,"isEnabled"),this.Bi=e,this.t("isEnabled",t,e))}get allowClipboard(){return this.Ux}set allowClipboard(e){const t=this.Ux;t!==e&&(u.s(e,"boolean",dt,"allowClipboard"),this.Ux=e,this.t("allowClipboard",t,e))}get allowCopy(){return this.Vl}set allowCopy(e){const t=this.Vl;t!==e&&(u.s(e,"boolean",dt,"allowCopy"),this.Vl=e,this.t("allowCopy",t,e))}get allowDelete(){return this.zl}set allowDelete(e){const t=this.zl;t!==e&&(u.s(e,"boolean",dt,"allowDelete"),this.zl=e,this.t("allowDelete",t,e))}get allowDragOut(){return this.Vx}set allowDragOut(e){const t=this.Vx;t!==e&&(u.s(e,"boolean",dt,"allowDragOut"),this.Vx=e,this.t("allowDragOut",t,e))}get allowDrop(){return this.zx}set allowDrop(e){const t=this.zx;t!==e&&(u.s(e,"boolean",dt,"allowDrop"),this.zx=e,this.t("allowDrop",t,e))}get allowTextEdit(){return this.Xl}set allowTextEdit(e){const t=this.Xl;t!==e&&(u.s(e,"boolean",dt,"allowTextEdit"),this.Xl=e,this.t("allowTextEdit",t,e))}get allowGroup(){return this.Yl}set allowGroup(e){const t=this.Yl;t!==e&&(u.s(e,"boolean",dt,"allowGroup"),this.Yl=e,this.t("allowGroup",t,e))}get allowUngroup(){return this.Kl}set allowUngroup(e){const t=this.Kl;t!==e&&(u.s(e,"boolean",dt,"allowUngroup"),this.Kl=e,this.t("allowUngroup",t,e))}get allowInsert(){return this.Xx}set allowInsert(e){const t=this.Xx;t!==e&&(u.s(e,"boolean",dt,"allowInsert"),this.Xx=e,this.t("allowInsert",t,e))}get allowLink(){return this.Gl}set allowLink(e){const t=this.Gl;t!==e&&(u.s(e,"boolean",dt,"allowLink"),this.Gl=e,this.t("allowLink",t,e))}get allowRelink(){return this.Hl}set allowRelink(e){const t=this.Hl;t!==e&&(u.s(e,"boolean",dt,"allowRelink"),this.Hl=e,this.t("allowRelink",t,e))}get allowMove(){return this.jl}set allowMove(e){const t=this.jl;t!==e&&(u.s(e,"boolean",dt,"allowMove"),this.jl=e,this.t("allowMove",t,e))}get allowReshape(){return this.ql}set allowReshape(e){const t=this.ql;t!==e&&(u.s(e,"boolean",dt,"allowReshape"),this.ql=e,this.t("allowReshape",t,e))}get allowResize(){return this.Wl}set allowResize(e){const t=this.Wl;t!==e&&(u.s(e,"boolean",dt,"allowResize"),this.Wl=e,this.t("allowResize",t,e))}get allowRotate(){return this.Jl}set allowRotate(e){const t=this.Jl;t!==e&&(u.s(e,"boolean",dt,"allowRotate"),this.Jl=e,this.t("allowRotate",t,e))}get allowSelect(){return this.$l}set allowSelect(e){const t=this.$l;t!==e&&(u.s(e,"boolean",dt,"allowSelect"),this.$l=e,this.t("allowSelect",t,e))}get allowUndo(){return this.Yx}set allowUndo(e){const t=this.Yx;t!==e&&(u.s(e,"boolean",dt,"allowUndo"),this.Yx=e,this.t("allowUndo",t,e))}get allowZoom(){return this.Kx}set allowZoom(e){const t=this.Kx;t!==e&&(u.s(e,"boolean",dt,"allowZoom"),this.Kx=e,this.t("allowZoom",t,e))}get hasVerticalScrollbar(){return this.Bu}set hasVerticalScrollbar(e){const t=this.Bu;t!==e&&(u.s(e,"boolean",dt,"hasVerticalScrollbar"),this.Bu=e,this.da(),this.L(),this.t("hasVerticalScrollbar",t,e),this.Ys(!1))}get hasHorizontalScrollbar(){return this.Eu}set hasHorizontalScrollbar(e){const t=this.Eu;t!==e&&(u.s(e,"boolean",dt,"hasHorizontalScrollbar"),this.Eu=e,this.da(),this.L(),this.t("hasHorizontalScrollbar",t,e),this.Ys(!1))}get allowHorizontalScroll(){return this.Gx}set allowHorizontalScroll(e){const t=this.Gx;t!==e&&(u.s(e,"boolean",dt,"allowHorizontalScroll"),this.Gx=e,this.t("allowHorizontalScroll",t,e),this.Ys(!1))}get allowVerticalScroll(){return this.Hx}set allowVerticalScroll(e){const t=this.Hx;t!==e&&(u.s(e,"boolean",dt,"allowVerticalScroll"),this.Hx=e,this.t("allowVerticalScroll",t,e),this.Ys(!1))}get scrollHorizontalLineChange(){return this.jx}set scrollHorizontalLineChange(e){const t=this.jx;t!==e&&(u.s(e,"number",dt,"scrollHorizontalLineChange"),e<0&&u.it(e,">= 0",dt,"scrollHorizontalLineChange"),this.jx=e,this.t("scrollHorizontalLineChange",t,e))}get scrollVerticalLineChange(){return this.qx}set scrollVerticalLineChange(e){const t=this.qx;t!==e&&(u.s(e,"number",dt,"scrollVerticalLineChange"),e<0&&u.it(e,">= 0",dt,"scrollVerticalLineChange"),this.qx=e,this.t("scrollVerticalLineChange",t,e))}get lastInput(){return this.sa}set lastInput(e){this.sa=e}get previousInput(){return this.qr}set previousInput(e){this.qr=e}get firstInput(){return this.jm}set firstInput(e){this.jm=e}get currentCursor(){return this.Rx}set currentCursor(e){if(e===""&&(e=this.zm),this.Rx!==e){u.s(e,"string",dt,"currentCursor");const t=this.mt,i=this.Ft;if(t===null||i===null)return;this.Rx=e;const n=t.style.cursor;t.style.cursor=e,i.style.cursor=e,t.style.cursor===n&&(t.style.cursor="-webkit-"+e,i.style.cursor="-webkit-"+e,t.style.cursor===n&&(t.style.cursor="-moz-"+e,i.style.cursor="-moz-"+e,t.style.cursor===n&&(t.style.cursor=e,i.style.cursor=e)))}}get defaultCursor(){return this.zm}set defaultCursor(e){e===""&&(e="auto");const t=this.zm;t!==e&&(u.s(e,"string",dt,"defaultCursor"),this.zm=e,this.t("defaultCursor",t,e))}get click(){return this.Ir}set click(e){const t=this.Ir;t!==e&&(e!==null&&u.C(e,dt,"click"),this.Ir=e,this.t("click",t,e))}get doubleClick(){return this.Er}set doubleClick(e){const t=this.Er;t!==e&&(e!==null&&u.C(e,dt,"doubleClick"),this.Er=e,this.t("doubleClick",t,e))}get contextClick(){return this.Br}set contextClick(e){const t=this.Br;t!==e&&(e!==null&&u.C(e,dt,"contextClick"),this.Br=e,this.t("contextClick",t,e))}get mouseOver(){return this.Ur}set mouseOver(e){const t=this.Ur;t!==e&&(e!==null&&u.C(e,dt,"mouseOver"),this.Ur=e,this.t("mouseOver",t,e))}get mouseHover(){return this.Vr}set mouseHover(e){const t=this.Vr;t!==e&&(e!==null&&u.C(e,dt,"mouseHover"),this.Vr=e,this.t("mouseHover",t,e))}get mouseHold(){return this.zr}set mouseHold(e){const t=this.zr;t!==e&&(e!==null&&u.C(e,dt,"mouseHold"),this.zr=e,this.t("mouseHold",t,e))}get mouseDragOver(){return this.vx}set mouseDragOver(e){const t=this.vx;t!==e&&(e!==null&&u.C(e,dt,"mouseDragOver"),this.vx=e,this.t("mouseDragOver",t,e))}get mouseDrop(){return this.Xr}set mouseDrop(e){const t=this.Xr;t!==e&&(this.Xr=e,this.t("mouseDrop",t,e))}get handlesDragDropForTopLevelParts(){return this.Ox}set handlesDragDropForTopLevelParts(e){const t=this.Ox;t!==e&&(u.s(e,"boolean",dt,"handlesDragDropForTopLevelParts"),this.Ox=e,this.t("handlesDragDropForTopLevelParts",t,e))}get mouseEnter(){return this.Yr}set mouseEnter(e){const t=this.Yr;t!==e&&(e!==null&&u.C(e,dt,"mouseEnter"),this.Yr=e,this.t("mouseEnter",t,e))}get mouseLeave(){return this.Kr}set mouseLeave(e){const t=this.Kr;t!==e&&(e!==null&&u.C(e,dt,"mouseLeave"),this.Kr=e,this.t("mouseLeave",t,e))}get toolTip(){return this.Gr}set toolTip(e){const t=this.Gr;t!==e&&(this.Gr=e,this.t("toolTip",t,e))}get contextMenu(){return this.Hr}set contextMenu(e){const t=this.Hr;t!==e&&(this.Hr=e,this.t("contextMenu",t,e))}get commandHandler(){return this.JS}set commandHandler(e){this.JS!==e&&(this.JS=e,e.Ro(this))}get toolManager(){return this.jS}set toolManager(e){this.jS!==e&&(this.jS=e,e.diagram=this)}get defaultTool(){return this.qS}set defaultTool(e){const t=this.qS;t!==e&&(this.qS=e,e.diagram=this,this.currentTool===t&&(this.currentTool=e))}get currentTool(){return this.WS}set currentTool(e){const t=this.WS;t&&(t.isActive&&t.doDeactivate(),t.cancelWaitAfter(),t.doStop()),e===null&&(e=this.defaultTool),e!==null&&(this.WS=e,e.diagram=this,e.doStart())}get selection(){return this.eM}get maxSelectionCount(){return this.Zx}set maxSelectionCount(e){const t=this.Zx;if(t!==e)if(u.s(e,"number",dt,"maxSelectionCount"),e>=0&&!isNaN(e)){if(this.Zx=e,this.t("maxSelectionCount",t,e),!this.undoManager.isUndoingRedoing){const i=this.selection.count-e;if(i>0){this.O("ChangingSelection",this.selection);const n=this.selection.toArray();for(let s=0;s<i;s++)n[s].isSelected=!1;this.O("ChangedSelection",this.selection)}}}else u.it(e,">= 0",dt,"maxSelectionCount")}get nodeSelectionAdornmentTemplate(){return this.Gm}set nodeSelectionAdornmentTemplate(e){const t=this.Gm;t!==e&&(this.Gm=e.Xt(),this.t("nodeSelectionAdornmentTemplate",t,e))}get groupSelectionAdornmentTemplate(){return this.tb}set groupSelectionAdornmentTemplate(e){const t=this.tb;t!==e&&(this.tb=e.Xt(),this.t("groupSelectionAdornmentTemplate",t,e))}get linkSelectionAdornmentTemplate(){return this.ib}set linkSelectionAdornmentTemplate(e){const t=this.ib;t!==e&&(this.ib=e.Xt(),this.t("linkSelectionAdornmentTemplate",t,e))}get highlighteds(){return this.sM}get isModified(){const e=this.undoManager;return e.isEnabled?e.currentTransaction!==null?!0:this.Xu&&this.Bs!==e.historyIndex:this.Xu}set isModified(e){if(this.Xu!==e){u.s(e,"boolean",dt,"isModified"),this.Xu=e;const t=this.undoManager;!e&&t.isEnabled&&(this.Bs=t.historyIndex),e||this.qL()}}qL(){const e=this.isModified;this.tM!==e&&(this.tM=e,this.O("Modified"))}get model(){return this.Mi}set model(e){const t=this.Mi;if(t!==e){this.currentTool.doCancel(),t&&t.undoManager!==e.undoManager&&t.undoManager.isInTransaction&&u.o("Do not replace a Diagram.model while a transaction is in progress."),this.animationManager.stopAnimation(!0);const i=this.AL(!0);this.to=!1,this.Iu=!0,this.Bs=-2,this.Ar=!1;const n=this.Jt;this.Jt=!0,this.animationManager.Ul("Model"),t&&(this.Qn!==null&&this.Qn.each(s=>t.removeChangedListener(s)),t.removeChangedListener(this._S)),this.Mi=e,this.partManager=this.CR(this.Mi.type),this.initializePartManager(this.partManager);for(let s=0;s<i.length;s++)this.add(i[s]);e.addChangedListener(this.QS),this.partManager.FM(),e.removeChangedListener(this.QS),e.addChangedListener(this._S),this.Qn!==null&&this.Qn.each(s=>e.addChangedListener(s)),this.Jt=n,this.invalidateDocumentBounds(),this.Jt||this.L(),t&&e.undoManager.copyProperties(t.undoManager)}}get themeManager(){return this.db}set themeManager(e){const t=this.db;t!==e&&(t!==null&&t.removeDiagram(this),this.db=e,e!==null&&e.addDiagram(this))}initializePartManager(e){}static yM(e,t){dt.PL.set(e,t)}static get licenseKey(){return dt.RM.last()}static set licenseKey(e){dt.RM.add(e.replace(/\s/g,""))}static get version(){return dt.LR}CR(e){const t=dt.PL.get(e);return t!==null?new t:new zn}get G(){return this.ZS}set G(e){this.ZS=e}get gx(){return this.xL}AR(e){if(e.model!==this.model)return;const t=e.change,i=e.propertyName;if(t===1&&i[0]==="S"){if(i==="StartingFirstTransaction"){const n=this,s=this.toolManager;s.mouseDownTools.each(r=>r.diagram=n),s.mouseMoveTools.each(r=>r.diagram=n),s.mouseUpTools.each(r=>r.diagram=n),this.routers.each(r=>r.diagram=n),!this.xs&&!this.to&&(this.Bc=!0,this.Iu&&(this.Ar=!0))}else if(i==="StartingUndo"||i==="StartingRedo"){const n=this.animationManager;this.skipsUndoManager||(n.defaultAnimation.isAnimating&&n.stopAnimation(),n.getBundleAnimation().isAnimating&&n.getBundleAnimation().stop()),this.O("ChangingSelection",this.selection)}else if(i==="StartedTransaction"){const n=this.animationManager;n.defaultAnimation.isAnimating&&!this.skipsUndoManager&&n.stopAnimation()}return}if(this.G){this.G=!1;try{if(e.modelChange===""&&t===1){(i==="FinishedUndo"||i==="FinishedRedo")&&(this.O("ChangedSelection",this.selection),this.Li());const n=this.animationManager;i==="RolledBackTransaction"&&n.stopAnimation(),this.dL(),this.Bc=!0,this.maybeUpdate(),(this.undoManager.transactionLevel===0||this.undoManager.transactionLevel===1)&&n.CS(),i==="CommittedTransaction"&&this.undoManager.isJustDiscarded&&(this.Bs=Math.min(this.Bs,this.undoManager.historyIndex-1)),(i==="CommittedTransaction"||i==="RolledBackTransaction")&&this.undoManager.Ow&&u.fr(()=>{this.isModified=!1},1);const s=e.isTransactionFinished;if(s&&(this.qL(),this.gx.clear(),this.animationManager.LF()),!this.Ix&&s&&this.lastInput.targetDiagram){this.Ix=!0;const r=this;u.fr(()=>{r.currentTool.standardMouseOver(),r.Ix=!1},10)}}}finally{this.G=!0}}}get ge(){return this.$S}set ge(e){this.$S=e}get wc(){return this.Ex}set wc(e){this.Ex=e}BL(e){const t=e.T.r;for(const i of t)i instanceof pn&&this.vM(i)}vM(e){const t=e.element;if(t===null||!(t instanceof HTMLImageElement)||(t.ss instanceof X&&t.ss.add(this),e.TR(),!t.h0))return;const i=t.getAttribute("src")||"",n=this.eh.get(i);if(n===null){pn.WL(e,t);const s=[];s.push(e),this.eh.set(i,s)}else{for(let s=0;s<n.length;s++)if(n[s]===e)return;n.push(e)}}DR(e){const t=e.T.r,i=t.length;for(let n=0;n<i;n++)this.OM(t[n])}OM(e){if(!(e instanceof pn))return;const t=e.element;if(t===null||!(t instanceof HTMLImageElement)||!t.h0)return;const i=t.getAttribute("src")||"",n=this.eh.get(i);if(n!==null){for(let s=0;s<n.length;s++)if(n[s]===e){n.splice(s,1),n.length===0&&(this.eh.delete(i),pn.FR(t),t.ss instanceof X&&t.ss.delete(this),pn.clearCache(i));return}}}TL(){pn.clearCache(),this.eh.clear()}rebuildParts(){this.partManager.rebuildParts()}Dc(e,t){this.ps.Dc(e,t)}Tc(e,t){this.ps.Tc(e,t)}findPartForKey(e){return this.partManager.findPartForKey(e)}findNodeForKey(e){return this.partManager.findNodeForKey(e)}findLinkForKey(e){return this.partManager.findLinkForKey(e)}findPartForData(e){return this.partManager.findPartForData(e)}findNodeForData(e){return this.partManager.findNodeForData(e)}findLinkForData(e){return this.partManager.findLinkForData(e)}findNodesByExample(...e){return this.partManager.findNodesByExample(...e)}findLinksByExample(...e){return this.partManager.findLinksByExample(...e)}get nodeTemplate(){return this.jr.get("")}set nodeTemplate(e){const t=this.jr.get("");t!==e&&(this.jr.set("",e),this.t("nodeTemplate",t,e),this.undoManager.isUndoingRedoing||this.rebuildParts())}get nodeTemplateMap(){return this.jr}set nodeTemplateMap(e){const t=this.jr;t!==e&&(this.jr=e,this.t("nodeTemplateMap",t,e),this.undoManager.isUndoingRedoing||this.rebuildParts())}get groupTemplate(){return this.ea.get("")}set groupTemplate(e){const t=this.ea.get("");t!==e&&(this.ea.set("",e),this.t("groupTemplate",t,e),this.undoManager.isUndoingRedoing||this.rebuildParts())}get groupTemplateMap(){return this.ea}set groupTemplateMap(e){const t=this.ea;t!==e&&(this.ea=e,this.t("groupTemplateMap",t,e),this.undoManager.isUndoingRedoing||this.rebuildParts())}get linkTemplate(){return this.th.get("")}set linkTemplate(e){const t=this.th.get("");t!==e&&(this.th.set("",e),this.t("linkTemplate",t,e),this.undoManager.isUndoingRedoing||this.rebuildParts())}get linkTemplateMap(){return this.th}set linkTemplateMap(e){const t=this.th;t!==e&&(this.th=e,this.t("linkTemplateMap",t,e),this.undoManager.isUndoingRedoing||this.rebuildParts())}get isMouseCaptured(){return this.iM}set isMouseCaptured(e){const t=this.mt;if(t===null)return;const i=t.Ot;i instanceof SVGElement||(e?(this.lastInput.bubbles=!1,this.Ni(i,"pointermove",this.ha,!1),this.Ni(i,"pointerdown",this.nh,!1),this.Ni(i,"pointerup",this.aa,!1),this.Ni(i,"pointerout",this.ca,!1),this.Ni(i,"pointercancel",this.fa,!1),this.Yt(y,"pointermove",this.ha,!0),this.Yt(y,"pointerdown",this.nh,!0),this.Yt(y,"pointerup",this.aa,!0),this.Yt(y,"pointerout",this.ca,!0),this.Yt(y,"pointercancel",this.fa,!0),this.Ni(i,"wheel",this.la,!1),this.Yt(y,"wheel",this.la,!0),this.Yt(y,"selectstart",this.$h,!1)):(this.Ni(y,"pointermove",this.ha,!0),this.Ni(y,"pointerdown",this.nh,!0),this.Ni(y,"pointerup",this.aa,!0),this.Ni(y,"pointerout",this.ca,!0),this.Ni(y,"pointercancel",this.fa,!0),this.Yt(i,"pointermove",this.ha,!1),this.Yt(i,"pointerdown",this.nh,!1),this.Yt(i,"pointerup",this.aa,!1),this.Yt(i,"pointerout",this.ca,!1),this.Yt(i,"pointercancel",this.fa,!1),this.Ni(y,"wheel",this.la,!0),this.Ni(y,"selectstart",this.$h,!1),this.Yt(i,"wheel",this.la,!1)),this.iM=e)}get position(){return this.gt}set position(e){if(this.gt.equals(e))return;const t=T.l().a(this.gt),i=this.viewportBounds.copy();if(this.gt.a(e),this.animationManager.cL(t,this.gt),!this.Jt&&!(this.mt===null&&!this.Vu.isReal())){this.Jt=!0;const n=this.scale,s=this.St/n,r=this.Mt/n;this.kM(this.Km,s,r,this.Ic,!1),this.Jt=!1}else this.oh(),this.pb();if(!this.Jt){const n=this.viewportBounds;this.onViewportBoundsChanged(i,n,this.rt,!1)}T.e(t)}get initialPosition(){return this.wx}set initialPosition(e){this.wx.equals(e)||(this.wx=e.N())}get initialScale(){return this.xx}set initialScale(e){this.xx!==e&&(u.s(e,"number",dt,"initialScale"),this.xx=e)}get grid(){return this.ts===null&&(this.ts=this.FL()),this.ts}set grid(e){let t=this.ts;if(t!==e){t===null&&(this.ts=this.FL(),t=this.ts),e.type!==Kt.Grid&&u.o("Diagram.grid must be a Panel of type Panel.Grid");const i=t.panel;i!==null&&i.remove(t),this.ts=e,e.name="GRID",i!==null&&i.add(e),this.zu=!1,this.L(),this.t("grid",t,e)}}get viewportBounds(){return this.Qx}oh(){const e=this.Qx,t=this.gt,i=this.rt;e.i(t.x,t.y,Math.max(this.St,0)/i,Math.max(this.Mt,0)/i),this.rh()}get viewSize(){return this.Vu}set viewSize(e){const t=this.viewSize;if(!t.equals(e)){e=e.N(),this.Vu=e;let i=0,n=0;e.isReal()?(i=e.width,n=e.height):this.Ft!==null&&(i=this.Ft.clientWidth||1,n=this.Ft.clientHeight||1),this.St=i,this.Mt=n,this.oh(),this.invalidateDocumentBounds(),this.t("viewSize",t,e),this.L()}}get fixedBounds(){return this.Sx}set fixedBounds(e){const t=this.Sx;t.equals(e)||((e.width===-1/0||e.height===1/0||e.height===-1/0)&&u.o("fixedBounds width/height must not be Infinity"),e=e.N(),this.Sx=e,this.invalidateDocumentBounds(),this.t("fixedBounds",t,e))}get scrollMargin(){return this.Oc}set scrollMargin(e){typeof e=="number"&&(e=new Rt(e));const t=this.Oc;t.equals(e)||(e=e.N(),this.Oc=e,this.t("scrollMargin",t,e),this.xu())}get scrollMode(){return this.Qh}set scrollMode(e){const t=this.Qh;t!==e&&(this.Qh=e,e===1&&this.Ys(!1),this.t("scrollMode",t,e),this.da(),this.L())}get scrollsPageOnFocus(){return this.Mx}set scrollsPageOnFocus(e){const t=this.Mx;t!==e&&(u.s(e,"boolean",dt,"scrollsPageOnFocus"),this.Mx=e,this.t("scrollsPageOnFocus",t,e))}get positionComputation(){return this.Nx}set positionComputation(e){const t=this.Nx;t!==e&&(e!==null&&u.C(e,dt,"positionComputation"),this.Nx=e,this.Ys(!1),this.t("positionComputation",t,e))}get scaleComputation(){return this.Cx}set scaleComputation(e){const t=this.Cx;t!==e&&(e!==null&&u.C(e,dt,"scaleComputation"),this.Cx=e,this.jL(this.scale,this.scale),this.t("scaleComputation",t,e))}get documentBounds(){return this.Km}JL(e){this.na=!1;let t=this.Km;t.equals(e)||(t=t.copy(),this.Km.a(e),this.Ys(!1),this.O("DocumentBoundsChanged",void 0,t),this.da(),this.L())}ensureBounds(){if(this.na){const e=it.l();this.JL(this.computeBounds(e)),it.e(e)}}get isVirtualized(){return this._x}set isVirtualized(e){const t=this._x;t!==e&&(u.s(e,"boolean",dt,"isVirtualized"),this._x=e,this.t("isVirtualized",t,e))}get scale(){return this.rt}set scale(e){const t=this.rt;t!==e&&this.jL(t,e)}get defaultScale(){return this.qm}set defaultScale(e){this.qm=e}get autoScale(){return this.Ql}set autoScale(e){const t=this.Ql;t!==e&&(this.Ql=e,this.t("autoScale",t,e),e!==1&&this.Ys(!1))}get initialAutoScale(){return this.Rr}set initialAutoScale(e){const t=this.Rr;t!==e&&(this.Rr=e,this.t("initialAutoScale",t,e))}get initialViewportSpot(){return this.Ax}set initialViewportSpot(e){const t=this.Ax;t!==e&&(e.isSpot()||u.o("initialViewportSpot must be a specific Spot: "+e),this.Ax=e,this.t("initialViewportSpot",t,e))}get initialDocumentSpot(){return this.Lx}set initialDocumentSpot(e){const t=this.Lx;t!==e&&(e.isSpot()||u.o("initialViewportSpot must be a specific Spot: "+e),this.Lx=e,this.t("initialDocumentSpot",t,e))}get minScale(){return this.bx}set minScale(e){const t=this.bx;t!==e&&(e>0?(this.bx=e,this.t("minScale",t,e),e>this.scale&&(this.scale=e)):u.it(e,"> 0",dt,"minScale"))}get maxScale(){return this.kx}set maxScale(e){const t=this.kx;t!==e&&(e>0?(this.kx=e,this.t("maxScale",t,e),e<this.scale&&(this.scale=e)):u.it(e,"> 0",dt,"maxScale"))}get zoomPoint(){return this.Px}set zoomPoint(e){this.Px.equals(e)||(e=e.N(),this.Px=e)}get contentAlignment(){return this.Ic}set contentAlignment(e){const t=this.Ic;t.equals(e)||(e=e.N(),this.Ic=e,this.t("contentAlignment",t,e),this.Ys(!1))}get initialContentAlignment(){return this.Bm}set initialContentAlignment(e){const t=this.Bm;t.equals(e)||(e=e.N(),this.Bm=e,this.t("initialContentAlignment",t,e))}get padding(){return this._t}set padding(e){typeof e=="number"&&(e=new Rt(e));const t=this._t;t.equals(e)||(e=e.N(),this._t=e,this.invalidateDocumentBounds(),this.t("padding",t,e))}get partManager(){return this.hM}set partManager(e){const t=this.hM;t!==e&&(e.diagram!==null&&u.o("Cannot share PartManagers between Diagrams: "+e.toString()),t&&t.Ro(null),this.hM=e,e.Ro(this))}get nodes(){return this.partManager.nodes.iterator}get links(){return this.partManager.links.iterator}get parts(){return this.partManager.parts.iterator}findTopLevelNodesAndLinks(){const e=new X,t=this.nodes;for(;t.next();){const n=t.value;n.isTopLevel&&e.add(n)}const i=this.links;for(;i.next();){const n=i.value;n.isTopLevel&&e.add(n)}return e.iterator}findTopLevelGroups(){return this.Jr.iterator}get routers(){return this.Kc}doLinkRouting(e){this.Oo=!0;const t=this.Kc.r;for(let i=0;i<t.length;i++)t[i].canRoute(e)&&t[i].routeLinks(this.vr,e);this.Oo=!1}get layout(){return this.ne}set layout(e){const t=this.ne;t!==e&&(this.ne=e,e.diagram=this,e.group=null,this.Wr=!0,this.t("layout",t,e),this.requestUpdate())}layoutDiagram(e){this.Li(),e&&this.kb(!0),this.xs?this.MM(!1,this.Ll||this.Kc.count!==0&&this.Zn.size!==0):(this.Bc=!0,this.Pr())}kb(e){const t=this.Jr.iterator;for(;t.next();)this.$L(t.value,e);this.layout&&(e?this.layout.isValidLayout=!1:this.layout.invalidateLayout())}$L(e,t){if(e===null)return;const i=e.ga.iterator;for(;i.next();){const n=i.value;this.$L(n,t)}e.layout!==null&&(t?e.layout.isValidLayout=!1:e.layout.invalidateLayout())}MM(e,t){if(this.Bx)return;const i=this.G;this.G=!0;const n="Layout",s=this.undoManager.transactionLevel,r=this.layout,A=this.animationManager;try{s===0&&(this.undoManager.Nl=!0,this.startTransaction(n)),s<=1&&!A.defaultAnimation.isAnimating&&!A.xi&&(e||A.Ul(n)),this.Wr=!1;let o=this.Jr.iterator;for(;o.next();)this.ZL(o.value,e,s,t);let a=!1;if(r.isValidLayout||(!e||r.isRealtime||r.isRealtime===null||s===0?(r.doLayout(this),this.s0(this),a=!0,r.isValidLayout=!0):this.Wr=!0),a||this.s0(this),this.doLinkRouting(this),this.vr.clear(),this.ia.size!==0){for(let h=0;h<23&&this.ia.size!==0;h++){for(o=this.Jr.iterator;o.next();)this.QL(o.value);const d=this.vr;this.vr=this.ia,this.ia=d,this.s0(this),this.doLinkRouting(this)}this.vr.clear(),this.ia.clear()}}finally{const o=this.undoManager.Nl;s===0&&(this.commitTransaction(n),this.undoManager.Nl=!1),o&&(s===0||s===1)&&A.CS(),this.Wr&&(this.Wr=!r.isValidLayout),this.G=i}}ZL(e,t,i,n){const s=e.ga.iterator;for(;s.next();)this.ZL(s.value,t,i,n);const r=e.layout;r!==null&&!r.isValidLayout?!t||r.isRealtime||i===0?(e.tl=!e.location.isReal(),r.doLayout(e),e.invalidateLayout(32),this.yb(e),this.s0(e),this.doLinkRouting(e),r.isValidLayout=!0):(this.doLinkRouting(e),this.Wr=!0):n&&this.doLinkRouting(e)}QL(e){const t=e.ga.iterator;for(;t.next();)this.QL(t.value);this.s0(e),this.doLinkRouting(e)}get isTreePathToChildren(){return this.Tx}set isTreePathToChildren(e){const t=this.Tx;if(t!==e&&(u.s(e,"boolean",dt,"isTreePathToChildren"),this.Tx=e,this.t("isTreePathToChildren",t,e),!this.undoManager.isUndoingRedoing)){const i=this.nodes;for(;i.next();)i.value.a0()}}findTreeRoots(){const e=new H,t=this.nodes;for(;t.next();){const i=t.value;i.isTopLevel&&i.findTreeParentLink()===null&&e.add(i)}return e.iterator}get treeCollapsePolicy(){return this.Dx}set treeCollapsePolicy(e){const t=this.Dx;t!==e&&(e!==1&&e!==2&&e!==3&&u.o("Unknown Diagram.treeCollapsePolicy: "+e),this.Dx=e,this.t("treeCollapsePolicy",t,e))}get isCollapsingExpanding(){return this.HS}set isCollapsingExpanding(e){this.HS=e}_F(){const e=new xt,t=new xt;function i(n){const s=n.toLowerCase(),r=new H;e.set(n,r),e.set(s,r),t.set(n,n),t.set(s,n)}i("InitialAnimationStarting"),i("AnimationStarting"),i("AnimationFinished"),i("BackgroundSingleClicked"),i("BackgroundDoubleClicked"),i("BackgroundContextClicked"),i("ClipboardChanged"),i("ClipboardPasted"),i("DocumentBoundsChanged"),i("ExternalObjectsDropped"),i("GainedFocus"),i("InitialLayoutCompleted"),i("LayoutCompleted"),i("LinkDrawn"),i("LinkRelinked"),i("LinkReshaped"),i("LostFocus"),i("Modified"),i("ObjectSingleClicked"),i("ObjectDoubleClicked"),i("ObjectContextClicked"),i("PartCreated"),i("PartResized"),i("PartRotated"),i("SelectionMoved"),i("SelectionCopied"),i("SelectionDeleting"),i("SelectionDeleted"),i("SelectionGrouped"),i("SelectionUngrouped"),i("ChangingSelection"),i("ChangedSelection"),i("SubGraphCollapsed"),i("SubGraphExpanded"),i("TextEdited"),i("ThemeChanged"),i("TreeCollapsed"),i("TreeExpanded"),i("ViewportBoundsChanged"),i("InvalidateDraw"),this.KS=e,this.GS=t}EL(e){const t=this.GS.get(e);return t!==null?t:this.GS.get(e.toLowerCase())}IM(e){let t=this.KS.get(e);if(t!==null)return t;const i=e.toLowerCase();if(t=this.KS.get(i),t!==null)return t;u.o("Unknown DiagramEvent name: "+e)}addDiagramListener(e,t){u.s(e,"string",dt,"addDiagramListener:name"),u.C(t,dt,"addDiagramListener:listener");const i=this.IM(e);return i!==null&&i.add(t),this}removeDiagramListener(e,t){u.s(e,"string",dt,"removeDiagramListener:name"),u.C(t,dt,"addDiagramListener:listener");const i=this.IM(e);i!==null&&i.delete(t)}raiseDiagramEvent(e,t,i){this.O(e,t,i)}O(e,t,i){const n=this.IM(e),s=new pi;s.diagram=this;const r=this.EL(e);r!==null&&(s.name=r),t!==void 0&&(s.subject=t),i!==void 0&&(s.parameter=i);const A=n.length;if(A===1)n.elt(0)(s);else if(A!==0){const o=n.toArray();for(let a=0;a<A;a++){const h=o[a];h(s)}}}isUnoccupied(e,t){return this.getPositions(!1,null,t||null).isUnoccupied(e.x,e.y,e.width,e.height)}computeOccupiedArea(e){return this.isVirtualized?this.viewportBounds.copy():this.na?this.vL(e):e.a(this.documentBounds)}getPositions(e,t,i){let n=this._l;n===null&&(this._l=n=new Mn(this.avoidanceCellSize));let s=t;if(n.Vo||n.ma!==s||n.EM!==i){if(n.BM=Math.max(n.qc+1,Math.floor(this.avoidanceLimit/this.avoidanceCellSize.width)),n.UM=Math.max(n.qc+1,Math.floor(this.avoidanceLimit/this.avoidanceCellSize.height)),s!==null&&(s=this._L(s)),s===null){const r=it.l();this.computeOccupiedArea(r),r.inflate(100,100),n.Pb(r);const A=this.nodes;for(;A.next();){const o=A.value,a=o.layer;a===null||!a.visible||a.isTemporary||this.VM(o,i,r)}it.e(r)}else{if(s.memberParts.count>0){const o=this.computePartsBounds(s.memberParts,!1);o.inflate(20,20),n.Pb(o)}const r=it.l(),A=s.memberParts;for(;A.next();){const o=A.value;o instanceof Et&&this.VM(o,i,r)}it.e(r)}n.ma=s,n.EM=i,n.Vo=!1}else e&&n.tA();return n}get avoidanceCellSize(){return this.nM}set avoidanceCellSize(e){this._l=null,this.nM=new ct(Math.max(1,e.width),Math.max(1,e.height))}get avoidanceLimit(){return this.oM}set avoidanceLimit(e){this.oM=Math.max(1,e)}_L(e){return e.canAvoid()?e:e.containingGroup!==null?this._L(e.containingGroup):null}VM(e,t,i){if(e===t||!e.isVisible())return;const n=e.canAvoid();if(n){const s=e.getAvoidableRect(i);this._l.RR(s.x,s.y,s.width,s.height)}if(e instanceof Vt&&(!n||e.avoidableMembers)){const s=e.memberParts;for(;s.next();){const r=s.value;r instanceof Et&&this.VM(r,t,i)}}}zM(e){this._l!==null&&!this._l.Vo&&(e===void 0||e.canAvoid())&&(this._l.Vo=!0)}get autoScrollInterval(){return this.Um}set autoScrollInterval(e){const t=this.Um;t!==e&&(this.Um=e,this.t("autoScrollInterval",t,e))}get autoScrollRegion(){return this.Vm}set autoScrollRegion(e){typeof e=="number"&&(e=new Rt(e));const t=this.Vm;t.equals(e)||(e=e.N(),this.Vm=e,this.invalidateDocumentBounds(),this.t("autoScrollRegion",t,e))}doAutoScroll(e){this.Hm.a(e),this.computeAutoScrollPosition(this.Hm).equalsApprox(this.position)?this.stopAutoScroll():this.iA()}iA(){if(this.Ec!==-1)return;const e=this.Um,t=this;this.Ec=u.fr(()=>{if(t.Ec===-1||(t.stopAutoScroll(),t.lastInput.event===null))return;const i=t.computeAutoScrollPosition(t.Hm);if(i.equalsApprox(t.position))return;t.position=i,t.lastInput.documentPoint=t.transformViewToDoc(t.Hm),t.doMouseMove(),t.na=!0;const n=it.l();t.computeBounds(n),n.unionRect(t.documentBounds),t.JL(n),it.e(n),t.ze=!0,t.maybeUpdate(),t.iA()},e)}stopAutoScroll(){this.Ec!==-1&&(u.vg(this.Ec),this.Ec=-1)}computeAutoScrollPosition(e){let t=this.position;const i=this.Vm;if(i.top<=0&&i.left<=0&&i.right<=0&&i.bottom<=0)return t;const n=this.viewportBounds,s=this.scale,r=it.Y(0,0,n.width*s,n.height*s),A=T.Y(0,0);if(e.x>=r.x&&e.x<r.x+i.left&&this.allowHorizontalScroll){let o=Math.max(this.scrollHorizontalLineChange,1);o=o|0,A.x-=o,e.x<r.x+i.left/2&&(A.x-=o),e.x<r.x+i.left/4&&(A.x-=4*o)}else if(e.x<=r.x+r.width&&e.x>r.x+r.width-i.right&&this.allowHorizontalScroll){let o=Math.max(this.scrollHorizontalLineChange,1);o=o|0,A.x+=o,e.x>r.x+r.width-i.right/2&&(A.x+=o),e.x>r.x+r.width-i.right/4&&(A.x+=4*o)}if(e.y>=r.y&&e.y<r.y+i.top&&this.allowVerticalScroll){let o=Math.max(this.scrollVerticalLineChange,1);o=o|0,A.y-=o,e.y<r.y+i.top/2&&(A.y-=o),e.y<r.y+i.top/4&&(A.y-=4*o)}else if(e.y<=r.y+r.height&&e.y>r.y+r.height-i.bottom&&this.allowVerticalScroll){let o=Math.max(this.scrollVerticalLineChange,1);o=o|0,A.y+=o,e.y>r.y+r.height-i.bottom/2&&(A.y+=o),e.y>r.y+r.height-i.bottom/4&&(A.y+=4*o)}return A.equalsApprox(T.Lo)||(t=new T(t.x+A.x/s,t.y+A.y/s)),it.e(r),T.e(A),t}makeSvg(e){this.ih.has("SVG")||this.addRenderer("SVG",new gs(this,y.document));const t=new gs(this,y.document,!0);e===void 0&&(e={});const i=this;function n(s,r){const A=i.eA(s,"SVG",t),o=A!==null?A.svg:null;return u.lt(r)?(r(o),null):o}return this.sA(n,e)}makeSVG(e){return this.makeSvg(e)}addRenderer(e,t){this.ih.set(e,t)}removeRenderer(e){this.ih.delete(e)}cacheGroupExternalLinks(e){this.pM=e,e||this.nodes.each(t=>{t instanceof Vt&&(t.c0=null)})}sA(e,t){const i=t.callback;let n=!0;const s=this.eh.iterator;for(;s.next();)if(!s.value[0].yn){n=!1;break}if(!u.lt(i)||n)return e(t,i,this);const r=this;function A(){const h=+new Date;for(n=!0,s.reset();s.next();)if(!s.value[0].yn){n=!1;break}if(n||h-a>o){e(t,i,r);return}y.requestAnimationFrame(A)}const o=t.callbackTimeout||300,a=+new Date;return y.requestAnimationFrame(()=>A()),null}makeImage(e){return dt.isUsingDOM()?(e===void 0&&(e={}),e.returnType="Image",this.makeImageData(e)):null}makeImageData(e){return e===void 0&&(e={}),this.sA(this.vR,e)}vR(e,t,i){const n=i.eA(e,"canvas",null);if(n===null)return null;const s=n.V.canvas;let r=null;if(s!==null){let A=e.returnType;switch(A===void 0?A="string":A=A.toLowerCase(),A){case dt.img+"data":r=n.getImageData(0,0,s.width,s.height);break;case dt.img:const o=(e.document||document).createElement("img");o.src=s.toDataURL(e.type,e.details),r=o;break;case"blob":{const a=s;return u.lt(t)||(r="",u.o('Error: Diagram.makeImageData called with "returnType: toBlob", but no required "callback" function property defined.')),u.lt(a.toBlob)?(a.toBlob(t,e.type,e.details),"toBlob"):(t(null),null)}case"string":default:r=s.toDataURL(e.type,e.details)}}return u.lt(t)?(t(r),null):r}eA(e,t,i){if(this.animationManager.stopAnimation(),this.maybeUpdate(),this.mt===null)return null;u.j(e)||u.o("properties argument must be an Object.");let n=!1,s=e.size||null,r=e.scale||null;e.scale!==void 0&&isNaN(e.scale)&&(r="NaN");let A=e.maxSize;e.maxSize===void 0&&(n=!0,t==="SVG"?A=new ct(1/0,1/0):A=new ct(2e3,2e3));const o=e.position||null;let a=e.parts||null;Array.isArray(a)&&(a=new H(a));let h=e.padding===void 0?1:e.padding;const d=e.background||null;let f=e.omitTemporary;f===void 0&&(f=!0);const g=e.document||document,x=e.elementFinished||null;let B=e.showTemporary;B===void 0&&(B=!f);let C=e.showGrid;C===void 0&&(C=B),s!==null&&isNaN(s.width)&&isNaN(s.height)&&(s=null),typeof h=="number"?h=new Rt(h):h instanceof Rt||u.o("MakeImage padding must be a Margin or a number."),h.left=Math.max(h.left,0),h.right=Math.max(h.right,0),h.top=Math.max(h.top,0),h.bottom=Math.max(h.bottom,0),this.ti.clearContextCache(!0);const F=new kn(null,g,void 0,!0),b=F.ai;if(!(s||r||a||o))return F.width=this.St+Math.ceil(h.left+h.right),F.height=this.Mt+Math.ceil(h.top+h.bottom),t==="SVG"?i===null?null:(i.resize(F.width,F.height,F.width,F.height),i.pa=g,i.qu=x,this.wb(i.ai,h,new ct(F.width,F.height),this.rt,this.gt,a,d,B,C),i.ai):(this.Yu=!1,this.wb(b,h,new ct(F.width,F.height),this.rt,this.gt,a,d,B,C),this.Yu=!0,F.ai);const L=this.qm,Q=this.documentBounds.copy();if(Q.subtractMargin(this._t),B){const W=this.qt.r,Y=W.length;for(let Z=0;Z<Y;Z++){const et=W[Z];if(!et.visible||!et.isTemporary)continue;const At=et.Dt.r,ht=At.length;for(let nt=0;nt<ht;nt++){const gt=At[nt];if(!gt.isInDocumentBounds||!gt.isVisible())continue;const Ct=gt.actualBounds;Ct.isReal()&&Q.unionRect(Ct)}}}let M=new T(Q.x,Q.y);if(a!==null){const W=new it(0,0,0,0);let Y=!0;const Z=a.iterator;for(Z.reset();Z.next();){const et=Z.value;if(!(et instanceof Ce))continue;const At=et.layer;if(At!==null&&!At.visible||At!==null&&!B&&At.isTemporary||!et.isVisible())continue;const ht=et.actualBounds;ht.isReal()&&(Y?(Y=!1,W.a(ht)):W.unionRect(ht))}Q.width=W.width,Q.height=W.height,M.x=W.x,M.y=W.y}o!==null&&o.isReal()&&(M=o,r||(r=L));let O=0,D=0;h!==null&&(O=h.left+h.right,D=h.top+h.bottom);let K=0,J=0;s!==null&&(K=s.width,J=s.height,isFinite(K)&&(K=Math.max(0,K-O)),isFinite(J)&&(J=Math.max(0,J-D)));let R=0,G=0;if(s!==null&&r!==null?(r==="NaN"&&(r=L),s.isReal()?(R=K,G=J):isNaN(J)?(R=K,G=Q.height*r):(R=Q.width*r,G=J)):s!==null?s.isReal()?(r=Math.min(K/Q.width,J/Q.height),R=K,G=J):isNaN(J)?(r=K/Q.width,R=K,G=Q.height*r):(r=J/Q.height,R=Q.width*r,G=J):r!==null?r==="NaN"&&A.isReal()?(r=Math.min((A.width-O)/Q.width,(A.height-D)/Q.height),r>L?(r=L,R=Q.width,G=Q.height):(R=A.width,G=A.height)):(R=Q.width*r,G=Q.height*r):(r=L,R=Q.width,G=Q.height),h!==null?(R+=O,G+=D):h=new Rt(0),A!==null){let W=A.width,Y=A.height;t!=="SVG"&&n&&dt.OR,isNaN(W)&&(W=2e3),isNaN(Y)&&(Y=2e3),isFinite(W)&&(R=Math.min(R,W)),isFinite(Y)&&(G=Math.min(G,Y))}return F.width=Math.ceil(R),F.height=Math.ceil(G),t==="SVG"?i===null?null:(i.resize(F.width,F.height,F.width,F.height),i.pa=g,i.qu=x,this.wb(i.ai,h,new ct(Math.ceil(R),Math.ceil(G)),r,M,a,d,B,C),i.ai):(this.Yu=!1,this.wb(b,h,new ct(Math.ceil(R),Math.ceil(G)),r,M,a,d,B,C),this.Yu=!0,F.ai)}};p(dt,"lb",null),p(dt,"PL",new xt),p(dt,"dM"),p(dt,"gM",null),p(dt,"CL",y.document!==void 0),p(dt,"is",new WeakMap),p(dt,"t0",null),p(dt,"gb",""),p(dt,"None",1),p(dt,"Uniform",2),p(dt,"UniformToFill",3),p(dt,"CycleAll",1),p(dt,"CycleNotDirected",2),p(dt,"CycleNotDirectedFast",3),p(dt,"CycleNotUndirected",4),p(dt,"CycleDestinationTree",5),p(dt,"CycleSourceTree",6),p(dt,"DocumentScroll",1),p(dt,"InfiniteScroll",2),p(dt,"TreeParentCollapsed",1),p(dt,"AllParentsCollapsed",2),p(dt,"AnyParentsCollapsed",3),p(dt,"RM",new H),p(dt,"LR","3.0.18"),p(dt,"img","image"),p(dt,"OR",!1),p(dt,"Hu",null),p(dt,"nA","5da73c80a36555d4038e4972187c3cae51fd22"),p(dt,"fw",!1),p(dt,"Ek",()=>{if(dt.nA[5]===void 0&&(Bt.prototype._e=Bt.prototype.ww),!dt.isUsingDOM())return;const e=u.fs("canvas"),t=e.getContext("2d"),i=u.Ds("7ca11abfd022028846");t[i]=u.Ds("398c3597c01238");const n="7ca11abfd7330390",s=[dt.nA,u.fw+"4ae6247590da4bb21c324ba3a84e385776",Bt.Ek+"fb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387",V.za],r=10,A=0;for(let o=1;o<5;o++)t[u.Ds(n)](u.Ds(s[o-1]),r,o*15+A);t[i]=u.Ds("39f046ebb36e4b");for(let o=1;o<5;o++)t[u.Ds(n)](u.Ds(s[o-1]),r,o*15+A);(s.length!==4||s[0][0]!=="5"||s[3][0]!=="7")&&(Bt.prototype._e=Bt.prototype.ww),dt.Hu=e});let ge=dt;class Po{constructor(e){p(this,"oA");p(this,"rA");p(this,"XM");p(this,"Ae");if(this.oA=null,this.rA="63ad05bbe23a1786468a4c741b6d2",this.XM="@onz",this.rA===this._tk){this.XM=!0,this.Ae=this.XM;return}this.Ae=null}IR(e,t){let i="f";const n=y[u.Ds("76a715b2f73f148a")][u.Ds("72ba13b5")]||"",s=u.Ds;if(this.Ae=!0,!ge.isUsingDOM())return;let r=ge[s("76a115b6ed251eaf4692")];if(!r){const o=n[s("76ad18b4f73e")];for(let h=n[s("73a612b6fb191d")](s("35e7"))+2;h<o;h++)i+=n[h];const a=i[s("73a612b6fb191d")](s("7da71ca0ad381e90"));this.Ae=!(a>=0&&a<i[s("73a612b6fb191d")](s("35")));return}const A=ge.RM.iterator;for(;A.next();){r=A.value;const o=s(r).split(s("39e9"));if(o.length<6)return;const a=s(o[1]).split(".");if(o[4]!=="7da71ca0")return;const h=s(u[s("6cae19")]).split(".");if(!(a[0]>h[0]||a[0]===h[0]&&a[1]>=h[1]))continue;const d="73a612b6fb191d",f=y[s("74a900bae4370f8b51")][s("6fbb13a1c2311e8a57")].toLowerCase(),g=f[s(d)](s("3aad1ab6e022098b4dc4")),x=s(o[2]);if(g>-1){const R=f[s(d)](x.toLowerCase()+"/");if(this.Ae=!(R>-1&&R<g),!this.Ae)return}const B=n[s("76ad18b4f73e")];for(let R=n[s(d)](s("35e7"))+2;R<B;R++)i+=n[R];let C=i[s(d)](x);if(C<0&&x!==s("7da71ca0ad381e90")&&(C=i[s(d)](s("76a715b2ef3e149757"))),C<0&&(C=i[s(d)](s("76a715b2ef3e149757"))),C<0&&(C=i[s(d)](s("2bfa41fdb3784bca12"))),C<0&&(C=n[s(d)](s("7baa19a6f76c1988428554"))),this.Ae=!(C>=0&&C<i[s(d)](s("35"))||i[s(d)](s("35"))===-1),!this.Ae||n[s(d)](s("7fb002b6ed25128b4da25b2e"))&&(this.Ae=!(n[s(d)](x)>-1),!this.Ae))return;const F=y[u.Ds("76a715b2f73f148a")][u.Ds("69ad17a1e03e")],b=F[s(d)](s("7fb002b6ed25128b4da25b2e"));if(b>-1&&(this.Ae=!(F[s(d)](x)>b),!this.Ae))return;const L=x;if(L[0]!=="#")continue;const Q=u.fs("div");let M=o[0].replace(/[A-Za-z]/g,"");for(;M.length<4;)M+="9";const O=M;M=M.substring(M.length-4);let D="";const K=["gsh","gsf"],J=["Header","Background","Display","Feedback"];if(D+=K[parseInt(M.substring(0,1),10)%2],D+=J[parseInt(M.substring(0,1),10)%4],Q[s("79a417a0f0181a8946")]=D,y.document[s("78a712aa")]){y.document[s("78a712aa")][s("7bb806b6ed32388c4a875b")](Q);const R=y.getComputedStyle(Q).getPropertyValue(s("78a704b7e62456904c9b12701b6532a8")),G=y.getComputedStyle(Q).getPropertyValue(s("75b817b0ea2202"));if(y.document[s("78a712aa")][s("68ad1bbcf533388c4a875b")](Q),!R)continue;const W=y[s("77a902b0eb1b1e804a8a")],Y="0."+parseInt(O,10)%100;if(G===Y||R.indexOf(parseInt(L[1]+L[2],16))!==-1&&R.indexOf(parseInt(L[3]+L[4],16))!==-1){this.Ae=!1;return}else if(W&&W(s("32ae19a1e0331fc94084537c067a67fa59f1386b89d006")).matches){D="."+D;for(let Z=0;Z<document.styleSheets.length;Z++){const et=document.styleSheets[Z].rules||document.styleSheets[Z].cssRules;for(const At in et)if(D===et[At].selectorText){this.Ae=!1;return}}}}else this.Ae=null,t&&(this.Ae=!1)}}Hu(e){return e.ti.setTransform(e.Yi,0,0,e.Yi,0,0),e.ti.commitTransform(),this.Ae===null&&this.IR(e,!0),0<this.Ae&&this!==this.oA}}class ds{constructor(e){p(this,"YM");p(this,"KM");this.YM=e===void 0?new T:e,this.KM=new T}get point(){return this.YM}set point(e){this.YM=e}get shifted(){return this.KM}set shifted(e){this.KM=e}}class Qo{constructor(e,t,i){p(this,"pe");p(this,"XL");p(this,"bb");this.pe=e,this.XL=t,this.bb=i}}class lr{constructor(e){p(this,"isGridSnapEnabled");p(this,"isGridSnapRealtime");p(this,"gridSnapCellSize");p(this,"gridSnapCellSpot");p(this,"gridSnapOrigin");p(this,"dragsLink");p(this,"dragsTree");p(this,"groupsSnapMembers");p(this,"groupsAlwaysMove");p(this,"dragsMembers");this.Ii(),e&&Object.assign(this,e)}Ii(){this.isGridSnapEnabled=!1,this.isGridSnapRealtime=!0,this.gridSnapCellSize=new ct(NaN,NaN).g(),this.gridSnapCellSpot=q.TopLeft,this.gridSnapOrigin=new T(NaN,NaN).g(),this.dragsLink=!1,this.dragsTree=!1,this.groupsSnapMembers=!1,this.groupsAlwaysMove=!0,this.dragsMembers=!0}}class hr extends ge{constructor(e,t){let i;return e===void 0||typeof e=="string"||y.Element&&e instanceof Element?i=e:u.j(e)&&(t=e),super(i),this.lA(),t&&this.setProperties(t),this}lA(){this.allowDragOut=!0,this.allowMove=!1,this.isReadOnly=!0,this.contentAlignment=q.TopCenter,this.layout=new OA}setupRouters(){}reset(){super.reset(),this.lA()}}class fs extends ge{constructor(t,i){let n;t===void 0||typeof t=="string"||y.Element&&t instanceof Element?n=t:u.j(t)&&(i=t);super(n);p(this,"Sb");p(this,"Mb");p(this,"Nb");p(this,"Cb");p(this,"f0");p(this,"Wc");p(this,"Il");p(this,"GM");p(this,"HM");p(this,"Lb");p(this,"jM");return this.animationManager.isEnabled=!1,this.Jt=!0,this.Sb=null,this.Eu=!1,this.Bu=!1,this.Mb=!0,this.Nb=!0,this.Cb=0,this.f0=!1,this.Wc=null,this.setRenderingHint("drawShadows",!1),this.Il=new Ce({selectable:!0,selectionAdorned:!1,selectionObjectName:"BOXSHAPE",locationObjectName:"BOXSHAPE",resizeObjectName:"BOXSHAPE",cursor:"move"}).add(new Zt({name:"BOXSHAPE",fill:"transparent",stroke:"magenta",strokeWidth:2}).theme("stroke","overviewBox")).Xt(),this.allowCopy=!1,this.allowDelete=!1,this.allowDrop=!1,this.allowSelect=!0,this.autoScrollRegion=new Rt(0,0,0,0),this.gt.i(0,0),this.toolManager.Zt("Dragging",new Ua,this.toolManager.mouseMoveTools),this.click=()=>{const s=this.observed;if(s===null)return;const r=s.viewportBounds,A=this.lastInput.documentPoint;s.position=new T(A.x-r.width/2,A.y-r.height/2)},this.GM=s=>{this.invalidateDocumentBounds(),this.u0()},this.HM=s=>{this.observed!==null&&(this.invalidateDocumentBounds(),this.L())},this.Lb=s=>{this.updateDelay<1?this.L():this.f0||(this.f0=!0,u.fr(()=>this.redraw(),this.updateDelay))},this.jM=s=>{this.observed!==null&&this.u0()},this.autoScale=2,this.Jt=!1,i&&Object.assign(this,i),this}setupRouters(){}computePixelRatio(){return 1}redraw(){this.f0&&this.updateDelay>=1&&(this.f0=!1,this.ER()),super.redraw()}zi(){if(this.Ft===null&&u.o("No div specified"),this.mt===null&&u.o("No canvas specified"),this.mt instanceof gs||(this.box.XS(),!this.ze))return;const t=this.observed;if(t===null||t.animationManager.defaultAnimation.isAnimating||!t.Gh)return;this.o0();const i=this.mt,n=this.ti;if(n.clearContextCache(!0),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,i.width,i.height),this.updateDelay<1)this.hA();else if(this.Wc!==null){n.drawImage(this.Wc.Ot,0,0);const A=this.F;n.scale(this.Yi,this.Yi),n.transform(A.m11,A.m12,A.m21,A.m22,A.dx,A.dy),n.commitTransform()}const s=this.qt.r,r=s.length;for(let A=0;A<r;A++)s[A].zi(n,this);this.Vc=!1,this.ze=!1}ER(){const t=this.mt,i=this.ti;if(!(t===null||i===null)){if(this.o0(),this.Wc===null){const n=new kn(null);n.width=t.width,n.height=t.height,this.Wc=n}try{this.mt=this.Wc,this.ti=this.mt.ai,this.ti.clearContextCache(!0),this.ti.setTransform(1,0,0,1,0,0),this.ti.clearRect(0,0,this.mt.width,this.mt.height),this.hA()}finally{this.mt=t,this.ti=i}}}hA(){const t=this.observed;if(t===null)return;const i=this.drawsTemporaryLayers,n=this.drawsGrid&&i,s=t.grid;if(n&&s!==null&&s.visible&&!(isNaN(s.width)||isNaN(s.height))){const d=it.l().a(this.viewportBounds).unionRect(t.viewportBounds);t.lh(d),it.e(d),t.Li()}const r=this.F,A=this.ti;A.scale(this.Yi,this.Yi),A.transform(r.m11,r.m12,r.m21,r.m22,r.dx,r.dy),A.commitTransform();const o=this.viewportBounds,a=t.qt.r,h=a.length;for(let d=0;d<h;d++)a[d].BF(A,o,this,i,n)}get observed(){return this.Sb}set observed(t){const i=this.Sb;if(t instanceof fs&&u.o("Overview.observed Diagram may not be an Overview itself: "+t),i!==t){if(this.BR(i),this.Sb=t,this.UR(t),this.invalidateDocumentBounds(),t===null){this.Wc=null;const n=this.mt,s=this.ti;n&&s&&(s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,n.width,n.height))}else this.Lb(null),this.u0(),this.L();this.t("observed",i,t)}}get box(){return this.Il}set box(t){const i=this.Il;i!==t&&(t.Xt(),this.Il=t,this.remove(i),this.add(this.Il),this.u0(),this.t("box",i,t))}get drawsTemporaryLayers(){return this.Mb}set drawsTemporaryLayers(t){this.Mb!==t&&(this.Mb=t,this.redraw())}get drawsGrid(){return this.Nb}set drawsGrid(t){this.Nb!==t&&(this.Nb=t,this.redraw())}get updateDelay(){return this.Cb}set updateDelay(t){t<0&&(t=0),this.Cb!==t&&(this.Cb=t)}UR(t){t!==null&&(t.addDiagramListener("ViewportBoundsChanged",this.GM),t.addDiagramListener("DocumentBoundsChanged",this.HM),t.addDiagramListener("InvalidateDraw",this.Lb),t.addDiagramListener("AnimationFinished",this.jM),this.add(this.box))}BR(t){t!==null&&(this.remove(this.box),t.removeDiagramListener("ViewportBoundsChanged",this.GM),t.removeDiagramListener("DocumentBoundsChanged",this.HM),t.removeDiagramListener("InvalidateDraw",this.Lb),t.removeDiagramListener("AnimationFinished",this.jM))}u0(){const t=this.box;if(t===null)return;const i=this.observed;if(i===null)return;this.ze=!0;const n=i.viewportBounds,s=t.selectionObject,r=ct.l();r.i(n.width,n.height),s.desiredSize=r,ct.e(r);const A=2/this.scale;s instanceof Zt&&(s.strokeWidth=A),t.location=new T(n.x-A/2,n.y-A/2),t.isSelected=!0}computeBounds(){const t=this.observed;if(t===null)return it.pw;const i=t.documentBounds.copy();return i.unionRect(t.viewportBounds),i}invalidateViewport(t,i){this.ze!==!0&&(this.ze=!0,this.requestUpdate())}onViewportBoundsChanged(t,i,n,s){this.Jt||(this.rh(),this.L(),this.da(),this.invalidateDocumentBounds(),this.u0(),this.Xi.scale=n,this.Xi.position.x=t.x,this.Xi.position.y=t.y,this.Xi.bounds.a(t),this.Xi.isScroll=s,this.O("ViewportBoundsChanged",this.Xi,t))}}class Ua extends ye{constructor(){super();p(this,"ah");this.ah=null}canStart(){if(!this.isEnabled)return!1;const t=this.diagram;if(t===null||!t.allowMove||!t.allowSelect)return!1;const i=t.observed;if(i===null)return!1;const n=t.lastInput;if(!n.left||t.currentTool!==this&&(!this.isBeyondDragSize()||n.isTouchEvent&&n.timestamp-t.firstInput.timestamp<this.delay))return!1;if(this.findDraggablePart()===null){const s=i.viewportBounds;this.ah=new T(s.width/2,s.height/2);const r=t.firstInput.documentPoint;i.position=new T(r.x-this.ah.x,r.y-this.ah.y)}return!0}doActivate(){this.ah=null,super.doActivate()}doUpdateCursor(t){const i=this.diagram,n=i.box;n!==null&&n.cursor&&(i.currentCursor=n.cursor)}moveParts(t,i,n){const s=this.diagram,r=s.observed;if(r===null)return;const A=s.box;if(A===null)return;if(this.ah===null){const a=s.firstInput.documentPoint,h=A.location;this.ah=new T(a.x-h.x,a.y-h.y)}const o=s.lastInput.documentPoint;r.position=new T(o.x-this.ah.x,o.y-this.ah.y)}}class sn{constructor(e){p(this,"k");p(this,"qM");p(this,"WM");p(this,"JM");p(this,"$M");p(this,"ZM");p(this,"QM");p(this,"_M");p(this,"t2");p(this,"ch");p(this,"i2");p(this,"Ab");p(this,"e2");p(this,"Tb");p(this,"Db");p(this,"s2");p(this,"zo");p(this,"o2");X.qi(this),this.k=ge.mm(),this.qM=!0,this.WM=!0,this.JM=!0,this.$M=!1,this.ZM=!1,this.QM=!1,this._M=!1,this.t2=null,this.ch=null,this.i2=1.05,this.Ab=NaN,this.e2=null,this.Tb=NaN,this.Db=it.pw,this.s2=!1,this.zo=null,this.o2=200,e&&Object.assign(this,e)}toString(){return"CommandHandler"}get diagram(){return this.k}Ro(e){this.k=e}doKeyDown(){const e=this.diagram,t=e.lastInput,i=u.cr?t.meta:t.control,n=t.shift,s=t.alt,r=t.commandKey;i&&(r==="Insert"||r==="c")?this.canCopySelection()&&this.copySelection():i&&r==="x"||n&&r==="Delete"?this.canCutSelection()&&this.cutSelection():i&&r==="v"||n&&r==="Insert"?this.canPasteSelection()&&this.pasteSelection():i&&r==="y"||i&&n&&r==="z"||s&&n&&r==="Backspace"?this.canRedo()&&this.redo():i&&r==="z"||s&&r==="Backspace"?this.canUndo()&&this.undo():r==="Delete"||r==="Backspace"?this.canDeleteSelection()&&this.deleteSelection():i&&r==="a"?this.canSelectAll()&&this.selectAll():r==="Escape"?this.canStopCommand()&&this.stopCommand():r==="ArrowUp"?e.allowVerticalScroll&&(i?e.scroll("pixel","up"):e.scroll("line","up")):r==="ArrowDown"?e.allowVerticalScroll&&(i?e.scroll("pixel","down"):e.scroll("line","down")):r==="ArrowLeft"?e.allowHorizontalScroll&&(i?e.scroll("pixel","left"):e.scroll("line","left")):r==="ArrowRight"?e.allowHorizontalScroll&&(i?e.scroll("pixel","right"):e.scroll("line","right")):r==="PageUp"?n&&e.allowHorizontalScroll?e.scroll("page","left"):e.allowVerticalScroll&&e.scroll("page","up"):r==="PageDown"?n&&e.allowHorizontalScroll?e.scroll("page","right"):e.allowVerticalScroll&&e.scroll("page","down"):r==="Home"?i&&e.allowVerticalScroll?e.scroll("document","up"):!i&&e.allowHorizontalScroll&&e.scroll("document","left"):r==="End"?i&&e.allowVerticalScroll?e.scroll("document","down"):!i&&e.allowHorizontalScroll&&e.scroll("document","right"):r==="Space"?this.canScrollToPart()&&this.scrollToPart():r==="Minus"||r==="NumpadSubtract"?this.canDecreaseZoom()&&this.decreaseZoom():r==="Equal"||r==="NumpadAdd"?this.canIncreaseZoom()&&this.increaseZoom():i&&r==="Digit0"?this.canResetZoom()&&this.resetZoom():n&&r==="z"?this.canZoomToFit()&&this.zoomToFit():i&&!n&&r==="g"?this.canGroupSelection()&&this.groupSelection():i&&n&&r==="g"?this.canUngroupSelection()&&this.ungroupSelection():r==="F2"?this.canEditTextBlock()&&this.editTextBlock():r==="ContextMenu"||n&&r==="F10"||i&&n&&r==="Backslash"?this.canShowContextMenu()&&this.showContextMenu():t.bubbles=!0}doKeyUp(){const e=this.diagram.lastInput;e.bubbles=!0}stopCommand(){const e=this.diagram,t=e.currentTool;t instanceof ue&&e.allowSelect&&e.clearSelection(),t!==null&&t.doCancel()}canStopCommand(){return!0}selectAll(){const e=this.diagram;e.L();try{e.currentCursor="wait",e.O("ChangingSelection",e.selection);const t=e.parts;for(;t.next();){const s=t.value;s.canSelect()&&!s.layer.isTemporary&&(s.isSelected=!0)}const i=e.nodes;for(;i.next();){const s=i.value;s.canSelect()&&!s.layer.isTemporary&&(s.isSelected=!0)}const n=e.links;for(;n.next();){const s=n.value;s.canSelect()&&!s.layer.isTemporary&&(s.isSelected=!0)}}finally{e.O("ChangedSelection",e.selection),e.currentCursor=""}}canSelectAll(){return this.diagram.allowSelect}deleteSelection(){const e=this.diagram;try{e.currentCursor="wait",e.O("ChangingSelection",e.selection),e.startTransaction("Delete"),e.O("SelectionDeleting",e.selection);const t=new X,i=e.selection.iterator;for(;i.next();){const n=i.value;Ce.fh(t,n,!0,this.deletesTree?1/0:0,this.deletesConnectedLinks?null:!1,s=>s.canDelete())}e.removeParts(t,!0),e.O("SelectionDeleted",t)}finally{e.commitTransaction("Delete"),e.O("ChangedSelection",e.selection),e.currentCursor=""}}canDeleteSelection(){const e=this.diagram;return!(e.isReadOnly||e.isModelReadOnly||!e.allowDelete||e.selection.count===0)}copySelection(){const e=this.diagram;try{const t=new X,i=e.selection.iterator;for(;i.next();){const n=i.value;Ce.fh(t,n,!0,this.copiesTree?1/0:0,this.copiesConnectedLinks,s=>s.canCopy())}this.copyToClipboard(t)}finally{}}canCopySelection(){const e=this.diagram;return!(!e.allowCopy||!e.allowClipboard||e.selection.count===0)}cutSelection(){this.copySelection(),this.deleteSelection()}canCutSelection(){const e=this.diagram;return!(e.isReadOnly||e.isModelReadOnly||!e.allowCopy||!e.allowDelete||!e.allowClipboard||e.selection.count===0)}copyToClipboard(e){const t=this.diagram;let i=null;if(e===null)ge.LL();else{let n=null;try{n=t.copyParts(e,null,!0)}finally{i=new H,i.addAll(n.iteratorValues),ge.t0=i,ge.gb=t.model.dataFormat}}t.O("ClipboardChanged",i)}pasteFromClipboard(){const e=new X,t=ge.t0;if(t===null)return e;const i=this.diagram;if(ge.gb!==i.model.dataFormat)return e;let n=null;try{n=i.copyParts(t,i,!1)}finally{const s=n.iterator;for(;s.next();){const r=s.value,A=s.key;r.location.isReal()||(A.location.isReal()?r.location=A.location:!r.position.isReal()&&A.position.isReal()&&(r.position=A.position)),e.add(r)}}return e}pasteSelection(e){e===void 0&&(e=null);const t=this.diagram;try{t.currentCursor="wait",t.O("ChangingSelection",t.selection),t.startTransaction("Paste");const i=this.pasteFromClipboard();i.count>0&&t.clearSelection(!0);const n=i.iterator;for(;n.next();){const s=n.value;s.isSelected=!0}if(e!==null){const s=t.computePartsBounds(t.selection);if(s.isReal()){const r=this.computeEffectiveCollection(t.selection,t.cb);t.PP(r,new T(e.x-s.centerX,e.y-s.centerY),t.cb,!1)}}t.O("ClipboardPasted",i)}finally{t.commitTransaction("Paste"),t.O("ChangedSelection",t.selection),t.currentCursor=""}}canPasteSelection(e){const t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowClipboard||ge.t0===null||ge.t0.count===0||ge.gb!==t.model.dataFormat)}undo(){this.diagram.undoManager.undo()}canUndo(){const e=this.diagram;return e.isReadOnly||e.isModelReadOnly?!1:e.allowUndo&&e.undoManager.canUndo()}redo(){this.diagram.undoManager.redo()}canRedo(){const e=this.diagram;return e.isReadOnly||e.isModelReadOnly?!1:e.allowUndo&&e.undoManager.canRedo()}decreaseZoom(e){e===void 0&&(e=1/this.zoomFactor);const t=this.diagram;if(t.autoScale!==1)return;const i=t.scale*e;i<t.minScale||i>t.maxScale||(t.scale=i)}canDecreaseZoom(e){e===void 0&&(e=1/this.zoomFactor);const t=this.diagram;if(t.autoScale!==1)return!1;const i=t.scale*e;return i<t.minScale||i>t.maxScale?!1:t.allowZoom}increaseZoom(e){e===void 0&&(e=this.zoomFactor);const t=this.diagram;if(t.autoScale!==1)return;const i=t.scale*e;i<t.minScale||i>t.maxScale||(t.scale=i)}canIncreaseZoom(e){e===void 0&&(e=this.zoomFactor);const t=this.diagram;if(t.autoScale!==1)return!1;const i=t.scale*e;return i<t.minScale||i>t.maxScale?!1:t.allowZoom}resetZoom(e){e===void 0&&(e=this.defaultScale);const t=this.diagram;e<t.minScale||e>t.maxScale||(t.scale=e)}canResetZoom(e){e===void 0&&(e=this.defaultScale);const t=this.diagram;return e<t.minScale||e>t.maxScale?!1:t.allowZoom}zoomToFit(){const e=this.diagram,t=e.animationManager;t.stopAnimation(),e.redraw();const i=e.position,n=e.scale;t.Ul("Zoom To Fit"),this.isZoomToFitRestoreEnabled&&n===this.Tb&&!isNaN(this.Ab)&&e.documentBounds.equals(this.Db)?(e.scale=this.Ab,e.position=this.e2,this.Tb=NaN,this.Db=it.pw):(this.Ab=n,this.e2=i.copy(),e.zoomToFit(),this.Tb=e.scale,this.Db=e.documentBounds.copy()),t.CS()}canZoomToFit(){return this.diagram.allowZoom}scrollToPart(e){e===void 0&&(e=null);const t=this.diagram;if(t.ensureBounds(),e===null){try{this.zo!==null&&(this.zo.next()?e=this.zo.value:this.zo=null)}catch{this.zo=null}e===null&&(t.highlighteds.count>0?this.zo=t.highlighteds.iterator:t.selection.count>0&&(this.zo=t.selection.iterator),this.zo!==null&&this.zo.next()&&(e=this.zo.value))}if(e!==null){const i=t.animationManager;i.Ul("Scroll To Part");const n=this.scrollToPartPause;if(n>0){const s=this.Jc(e,[e]);if(s.length===1)t.startTransaction(),t.centerRect(e.actualBounds),t.commitTransaction("Scroll To Part");else{const r=()=>{t.startTransaction();let o=s.pop();for(;s.length>0&&o instanceof Et&&o.isTreeExpanded&&(!(o instanceof Vt)||o.isSubGraphExpanded);)o=s.pop();s.length>0?(o instanceof Ce&&t.scrollToRect(o.actualBounds),o instanceof Et&&!o.isTreeExpanded&&(o.isTreeExpanded=!0),o instanceof Vt&&!o.isSubGraphExpanded&&(o.isSubGraphExpanded=!0)):(o instanceof Ce&&t.centerRect(o.actualBounds),t.removeDiagramListener("LayoutCompleted",A)),t.commitTransaction("Scroll To Part")},A=()=>{u.fr(r,(i.isEnabled?i.duration:0)+n)};t.addDiagramListener("LayoutCompleted",A),r()}}else{const s=t.position.copy();t.centerRect(e.actualBounds),s.equalsApprox(t.position)&&i.stopAnimation()}}}Jc(e,t){if(e.isVisible())return t;if(e instanceof se)this.Jc(e.adornedPart,t);else if(e instanceof Xt){const i=e.fromNode;i!==null&&this.Jc(i,t);const n=e.toNode;n!==null&&this.Jc(n,t)}else{if(e instanceof Et){const n=e.labeledLink;n!==null&&this.Jc(n,t);const s=e.findTreeParentNode();s!==null&&(!s.isTreeExpanded&&!s.wasTreeExpanded&&t.push(s),this.Jc(s,t))}const i=e.containingGroup;i!==null&&(!i.isSubGraphExpanded&&!i.wasSubGraphExpanded&&t.push(i),this.Jc(i,t))}return t}canScrollToPart(e){if(e===void 0&&(e=null),e!==null&&!(e instanceof Ce))return!1;const t=this.diagram;return t.selection.count===0&&t.highlighteds.count===0?!1:t.allowHorizontalScroll&&t.allowVerticalScroll}collapseTree(e){e===void 0&&(e=null);const t=this.diagram,i="Collapse Tree";try{t.startTransaction(i),t.animationManager.Ul(i);const n=new H;if(e!==null&&e.isTreeExpanded)e.collapseTree(),n.add(e);else if(e===null){const s=t.selection.iterator;for(;s.next();){const r=s.value;r instanceof Et&&r.isTreeExpanded&&(r.collapseTree(),n.add(r))}}t.O("TreeCollapsed",n)}finally{t.commitTransaction(i)}}canCollapseTree(e){e===void 0&&(e=null);const t=this.diagram;if(t.isReadOnly)return!1;if(e!==null){if(!(e instanceof Et)||!e.isTreeExpanded)return!1;if(e.findTreeChildrenLinks().count>0)return!0}else{const i=t.selection.iterator;for(;i.next();){const n=i.value;if(n instanceof Et){if(!n.isTreeExpanded)continue;if(n.findTreeChildrenLinks().count>0)return!0}}}return!1}expandTree(e){e===void 0&&(e=null);const t=this.diagram,i="Expand Tree";try{t.startTransaction(i),t.animationManager.Ul(i);const n=new H;if(e!==null&&!e.isTreeExpanded)e.expandTree(),n.add(e);else if(e===null){const s=t.selection.iterator;for(;s.next();){const r=s.value;r instanceof Et&&(r.isTreeExpanded||(r.expandTree(),n.add(r)))}}t.O("TreeExpanded",n)}finally{t.commitTransaction(i)}}canExpandTree(e){e===void 0&&(e=null);const t=this.diagram;if(t.isReadOnly)return!1;if(e!==null){if(!(e instanceof Et)||e.isTreeExpanded)return!1;if(e.findTreeChildrenLinks().count>0)return!0}else{const i=t.selection.iterator;for(;i.next();){const n=i.value;if(n instanceof Et){if(n.isTreeExpanded)continue;if(n.findTreeChildrenLinks().count>0)return!0}}}return!1}groupSelection(){const e=this.diagram,t=e.model;if(!t.$c())return;const i=this.archetypeGroupData;if(i===null)return;let n=null;try{e.currentCursor="wait",e.O("ChangingSelection",e.selection),e.startTransaction("Group");const s=new H,r=e.selection.iterator;for(;r.next();){const a=r.value;a.Ne()&&a.canGroup()&&s.add(a)}const A=new H,o=s.iterator;for(;o.next();){const a=o.value;let h=!1;const d=s.iterator;for(;d.next();){const f=d.value;if(a.isMemberOf(f)){h=!0;break}}h||A.add(a)}if(A.count>0){let a=A.first().containingGroup;if(a!==null)for(;a!==null;){let h=!1;const d=A.iterator;for(;d.next();)if(!d.value.isMemberOf(a)){h=!0;break}if(h)a=a.containingGroup;else break}if(i instanceof Vt)i.Xt(),n=i.copy(),n!==null&&e.add(n);else if(t.isGroupForData(i)){const h=t.copyNodeData(i);u.j(h)&&(t.addNodeData(h),n=e.findNodeForData(h))}if(n!==null){a!==null&&this.isValidMember(a,n)&&(n.containingGroup=a);const h=A.iterator;for(;h.next();){const d=h.value;this.isValidMember(n,d)&&(d.containingGroup=n)}e.clearSelection(!0),n.isSelected=!0}}e.O("SelectionGrouped",n)}finally{e.commitTransaction("Group"),e.O("ChangedSelection",e.selection),e.currentCursor=""}}canGroupSelection(){const e=this.diagram;if(e.isReadOnly||e.isModelReadOnly||!e.allowInsert||!e.allowGroup||!e.model.$c()||this.archetypeGroupData===null)return!1;const t=e.selection.iterator;for(;t.next();){const i=t.value;if(i.Ne()&&i.canGroup())return!0}return!1}l2(e){const t=u.ht();if(Array.isArray(e))e.forEach(s=>{s instanceof Xt||s instanceof Ce&&t.push(s)});else{const s=e.iterator;for(;s.next();){const r=s.value;r instanceof Xt||r instanceof Ce&&t.push(r)}}const i=new X,n=t.length;for(let s=0;s<n;s++){const r=t[s];let A=!0;for(let o=0;o<n;o++)if(r.isMemberOf(t[o])){A=!1;break}A&&i.add(r)}return u.et(t),i}isValidMember(e,t){if(t===null||e===t||t instanceof Xt)return!1;let i;return e!==null&&(e===t||e.isMemberOf(t)||(i=e.memberValidation,i!==null&&!i(e,t))||e.data===null&&t.data!==null||e.data!==null&&t.data===null)?!1:(i=this.memberValidation,i!==null?i(e,t):!0)}ungroupSelection(e){e===void 0&&(e=null);const t=this.diagram,i=t.model;if(i.$c())try{t.currentCursor="wait",t.O("ChangingSelection",t.selection),t.startTransaction("Ungroup");const n=new H;if(e!==null)n.add(e);else{const r=t.selection.iterator;for(;r.next();){const A=r.value;A instanceof Vt&&A.canUngroup()&&n.add(A)}}const s=new H;if(n.count>0){t.clearSelection(!0);const r=n.iterator;for(;r.next();){const A=r.value;A.expandSubGraph();const o=A.containingGroup,a=o!==null&&o.data!==null?i.getKeyForNodeData(o.data):void 0;s.addAll(A.memberParts);const h=s.iterator;for(;h.next();){const d=h.value;if(d.isSelected=!0,d instanceof Xt)continue;const f=d.data;f!==null?i.setGroupForData(f,a):d.containingGroup=o}t.remove(A)}}t.O("SelectionUngrouped",n,s)}finally{t.commitTransaction("Ungroup"),t.O("ChangedSelection",t.selection),t.currentCursor=""}}canUngroupSelection(e){e===void 0&&(e=null);const t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowDelete||!t.allowUngroup||!t.model.$c())return!1;if(e!==null){if(!(e instanceof Vt))return!1;if(e.canUngroup())return!0}else{const i=t.selection.iterator;for(;i.next();){const n=i.value;if(n instanceof Vt&&n.canUngroup())return!0}}return!1}addTopLevelParts(e,t){const i=this.l2(e);let n=!0;const s=i.iterator;for(;s.next();){const r=s.value;r.containingGroup!==null&&(!t||this.isValidMember(null,r)?r.containingGroup=null:n=!1)}return n}collapseSubGraph(e){e===void 0&&(e=null);const t=this.diagram,i="Collapse SubGraph";try{t.startTransaction(i),t.animationManager.Ul(i);const n=new H;if(e!==null&&e.isSubGraphExpanded)e.collapseSubGraph(),n.add(e);else if(e===null){const s=t.selection.iterator;for(;s.next();){const r=s.value;r instanceof Vt&&r.isSubGraphExpanded&&(r.collapseSubGraph(),n.add(r))}}t.O("SubGraphCollapsed",n)}finally{t.commitTransaction(i)}}canCollapseSubGraph(e){e===void 0&&(e=null);const t=this.diagram;if(t.isReadOnly)return!1;if(e!==null)return!(!(e instanceof Vt)||!e.isSubGraphExpanded);{const i=t.selection.iterator;for(;i.next();){const n=i.value;if(n instanceof Vt&&n.isSubGraphExpanded)return!0}}return!1}expandSubGraph(e){e===void 0&&(e=null);const t=this.diagram,i="Expand SubGraph",n=new H;try{if(t.startTransaction(i),t.animationManager.Ul(i),e!==null&&!e.isSubGraphExpanded)e.expandSubGraph(),n.add(e);else if(e===null){const s=t.selection.iterator;for(;s.next();){const r=s.value;r instanceof Vt&&(r.isSubGraphExpanded||(r.expandSubGraph(),n.add(r)))}}t.O("SubGraphExpanded",n)}finally{for(const s of n)this.aA(t,s);e&&this.aA(t,e),t.commitTransaction(i)}}aA(e,t){for(const i of t.memberParts)i instanceof Et&&e.Tc(i,t)}canExpandSubGraph(e){e===void 0&&(e=null);const t=this.diagram;if(t.isReadOnly)return!1;if(e!==null)return!(!(e instanceof Vt)||e.isSubGraphExpanded);{const i=t.selection.iterator;for(;i.next();){const n=i.value;if(n instanceof Vt&&!n.isSubGraphExpanded)return!0}}return!1}editTextBlock(e){e===void 0&&(e=null);const t=this.diagram,i=t.toolManager.findTool("TextEditing");if(i!==null){if(e===null){let n=null;const s=t.selection.iterator;for(;s.next();){const r=s.value;if(r.canEdit()){n=r;break}}if(n===null)return;e=n.findInVisualTree(r=>r instanceof We&&r.editable)}e!==null&&(t.currentTool=null,i.textBlock=e,t.currentTool=i)}}canEditTextBlock(e){e===void 0&&(e=null);const t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowTextEdit||t.toolManager.findTool("TextEditing")===null)return!1;if(e!==null){if(!(e instanceof We))return!1;const i=e.part;if(i!==null&&i.canEdit())return!0}else{const i=t.selection.iterator;for(;i.next();){const n=i.value;if(n.canEdit()&&(e=n.findInVisualTree(s=>s instanceof We&&s.editable),e!==null))return!0}}return!1}showContextMenu(e){const t=this.diagram,i=t.toolManager.findTool("ContextMenu");if(i===null)return;e===void 0&&(t.selection.count>0?e=t.selection.first():e=t);const n=i.findObjectWithContextMenu(e);if(n!==null){const s=t.lastInput;let r=null;if(n instanceof Ye)r=n.getDocumentPoint(q.Center);else if(!t.viewportBounds.containsPoint(s.documentPoint)){const A=t.viewportBounds;r=new T(A.x+A.width/2,A.y+A.height/2)}if(r!==null){const A=new Le;A.diagram=t,A.viewPoint=t.transformDocToView(r),A.documentPoint=r,A.button=2,A.up=!0,t.lastInput=A}t.currentTool=i,i.openMenu(!1,n)}}canShowContextMenu(e){const t=this.diagram,i=t.toolManager.findTool("ContextMenu");return!(i===null||(e===void 0&&(t.selection.count>0?e=t.selection.first():e=t),i.findObjectWithContextMenu(e)===null))}get copiesClipboardData(){return this.qM}set copiesClipboardData(e){u.s(e,"boolean",sn,"copiesClipboardData"),this.qM=e}get copiesConnectedLinks(){return this.WM}set copiesConnectedLinks(e){u.s(e,"boolean",sn,"copiesConnectedLinks"),this.WM=e}get deletesConnectedLinks(){return this.JM}set deletesConnectedLinks(e){u.s(e,"boolean",sn,"deletesConnectedLinks"),this.JM=e}get copiesTree(){return this.$M}set copiesTree(e){u.s(e,"boolean",sn,"copiesTree"),this.$M=e}get deletesTree(){return this.ZM}set deletesTree(e){u.s(e,"boolean",sn,"deletesTree"),this.ZM=e}get copiesParentKey(){return this.QM}set copiesParentKey(e){u.s(e,"boolean",sn,"copiesParentKey"),this.QM=e}get copiesGroupKey(){return this._M}set copiesGroupKey(e){u.s(e,"boolean",sn,"copiesGroupKey"),this._M=e}get archetypeGroupData(){return this.t2}set archetypeGroupData(e){e!==null&&u.oc(e,sn,"archetypeGroupData"),this.diagram,this.t2=e}get memberValidation(){return this.ch}set memberValidation(e){e!==null&&u.C(e,sn,"memberValidation"),this.ch=e}get defaultScale(){return this.diagram.defaultScale}set defaultScale(e){this.diagram.defaultScale=e}get zoomFactor(){return this.i2}set zoomFactor(e){e>1||u.o("zoomFactor must be larger than 1.0, not: "+e),this.i2=e}get isZoomToFitRestoreEnabled(){return this.s2}set isZoomToFitRestoreEnabled(e){u.s(e,"boolean",sn,"isZoomToFitRestoreEnabled"),this.s2=e}get scrollToPartPause(){return this.o2}set scrollToPartPause(e){this.o2=e}computeEffectiveCollection(e,t){const i=this.diagram,n=i.toolManager.findTool("Dragging"),s=i.currentTool===n;t===void 0&&(t=i.l0());const r=new xt;if(e===null)return r;let A=e.iterator;for(;A.next();){const o=A.value;i._r(r,o,s,t)}if(i.draggedLink!==null&&t.dragsLink)return r;for(A=e.iterator;A.next();){const o=A.value;if(o instanceof Xt){const a=o.fromNode;if(a!==null&&!r.has(a))r.delete(o);else{const h=o.toNode;h!==null&&!r.has(h)&&r.delete(o)}}}return r}}var MA=(k=>(k[k.None=0]="None",k[k.Default=1]="Default",k[k.Vertical=4]="Vertical",k[k.Horizontal=5]="Horizontal",k[k.Fill=2]="Fill",k))(MA||{}),PA=(k=>(k[k.None=0]="None",k[k.Along=21]="Along",k[k.Plus90=22]="Plus90",k[k.Minus90=23]="Minus90",k[k.Opposite=24]="Opposite",k[k.Upright=25]="Upright",k[k.Plus90Upright=26]="Plus90Upright",k[k.Minus90Upright=27]="Minus90Upright",k[k.Upright45=28]="Upright45",k))(PA||{}),Uo=(k=>(k[k.None=0]="None",k[k.Vertical=1]="Vertical",k[k.Horizontal=2]="Horizontal",k[k.Both=3]="Both",k))(Uo||{});const qt=class qt{constructor(){p(this,"n");p(this,"d0");p(this,"g0");p(this,"il");p(this,"f");p(this,"uh");p(this,"J");p(this,"gt");p(this,"re");p(this,"Qt");p(this,"m0");p(this,"Ks");p(this,"Rt");p(this,"ns");p(this,"el");p(this,"dh");p(this,"ki");p(this,"ya");p(this,"rt");p(this,"Ht");p(this,"sl");p(this,"Ai");p(this,"Ki");p(this,"Wu");p(this,"ci");p(this,"Ju");p(this,"Vt");p(this,"oi");p(this,"nl");p(this,"Fb");p(this,"gh");p(this,"$u");X.qi(this),this.n=30723,this.Qt=1,this.m0="",this.Ks=null,this.Rt=null,this.gt=new T(NaN,NaN).g(),this.ns=ct.gw,this.el=new Bt,this.dh=new Bt,this.ki=null,this.ya=1,this.rt=1,this.Ht=0,this.sl=Rt.Ig,this.re=new it(NaN,NaN,NaN,NaN).g(),this.Ai=new it(NaN,NaN,NaN,NaN).g(),this.Ki=new it(0,0,NaN,NaN).g(),this.Wu=null,this.d0=null,this.J=null,this.ci=q.Default,this.Ju=q.Default,this.g0=0,this.il=0,this.Vt=null,this.f=null,this.uh=null,this.oi=null,this.Fb=null,this.gh=null,this.nl=null,this.$u=null}cloneProtected(e){e.n=(this.n|2048|4096)&-32769,e.Qt=this.Qt,e.m0=this.m0,e.Rt=this.Rt,e.gt.a(this.gt),e.ns=this.ns.N(),this.ki!==null?e.ki=this.ki.copy():e.ki=null,e.rt=this.rt,e.Ht=this.Ht,e.sl=this.sl.N(),e.re.a(this.re),e.Ai.a(this.Ai),e.Ki.a(this.Ki),e.d0=this.d0,this.J!==null&&(e.J=this.J.copy()),e.ci=this.ci.N(),e.Ju=this.Ju.N(),e.g0=this.g0,e.il=this.il,this.Vt!==null&&(e.Vt=this.Vt.copy()),this.f!==null&&(this.f.gi?e.f=this.f:e.f=this.f.copy()),this.uh!==null&&(e.uh=this.uh.slice()),this.oi!==null&&(e.oi=this.oi.copy())}addCopyProperty(e){let t=this.uh;if(!Array.isArray(t))t=[],this.uh=t;else for(let i=0;i<t.length;i++)if(t[i]===e)return;t.push(e)}Xo(e){e.Wu=null,e.nl=null,e.c()}clone(){const e=new this.constructor;if(this.cloneProtected(e),this.uh!==null)for(let t=0;t<this.uh.length;t++){const i=this.uh[t];e[i]=this[i]}return e}copy(){return this.clone()}_P(){const e=this.Ti;if(e!==null){this.Ti=null;for(const t of e)t.Zu()&&(t.isToData?this.themeData(t.targetProperty,t.sourceProperty,t.themeSource,t.converter,t.themeConverter):t.isToObject?this.themeObject(t.targetProperty,t.sourceProperty,t.themeSource,t.converter,t.themeConverter,t.sourceName):t.isToModel?this.themeModel(t.targetProperty,t.sourceProperty,t.themeSource,t.converter,t.themeConverter):this.theme(t.targetProperty,t.sourceProperty,t.themeSource,t.converter,t.themeConverter))}return this}li(e){e in PA?this.segmentOrientation=e:e in MA?this.stretch=e:u.ur(this,e)}toString(){return u.Vn(this.constructor)+"#"+X.us(this)}mh(){this.f!==null&&(this.f.gi=!0)}Wt(){this.f===null?this.f=new Qs:this.f.gi&&(this.f=this.f.copy())}Xe(){if(this.J===null){const e=new Xn;e.wa=q.None,e.xa=q.None,e.ba=10,e.ka=10,e.Pa=0,e.Sa=0,this.J=e}}raiseChangedEvent(e,t,i,n,s,r,A){const o=this.part;if(o!==null){o.Zc(e,t,i,n,s,r,A),i===this&&e===2&&this.Qc()&&this.Ma(o,t);const a=this.diagram;if(this.bs!==null&&a!==null&&a.Gh&&!a.undoManager.isUndoingRedoing&&!a.animationManager.bu){const h=this.bs.get(t);if(h!==null&&a.animationManager.isEnabled&&!a.animationManager.isTicking){this.$u===null&&(this.$u=new xt);let d=a.undoManager.transactionLevel===0;if(h.startCondition===2?d=!0:h.startCondition===3&&(d=!1),d){const f=new Ps;h.OF(f);const g=this.$u.get(h);g!==null&&g.stop(),this.$u.set(h,f),f.ax=this,f.vS=h,f.add(this,t,n,s),f.start()}else a.animationManager.getBundleAnimation().add(this,t,n,s)}}if(this instanceof Kt&&i===o&&o.h2()&&o.data!==null){const h=this.T.r,d=h.length;for(let f=0;f<d;f++){const g=h[f];g instanceof Kt&&g.Qr(x=>{x.data!==null&&x.h2()&&x.updateTargetBindings(t)})}}}}DF(e){this.$u.delete(e)}Uo(){if(this.diagram!==null&&this.findBindingPanel()===null&&this.Ti!==null){const e=this.diagram.model,t=this.Ti.iterator;for(;t.next();){const i=t.value;if(!i.isToTheme)continue;let n=null;const s=i.sourceName;i.isToObject&&(n=this.cA(s));let r=this;const A=i.targetId;A!==-1&&(r=this.p0(A),r===null)||(s==="/"?n=r.part:s==="."?n=r:s===".."&&(n=r.panel),i.updateTarget(r,n,void 0,e))}}}Ma(e,t){const i=this.findBindingPanel();if(i!==null){const n=e.diagram,s=this.Ti.iterator;for(;s.next();){const r=s.value;let A=null;if(r.isToObject){if(A=r.fA(i,this),A===null)continue;r.updateSource(this,A,t,null)}else if(r.isToModel)n!==null&&!n.ge&&r.updateSource(this,n.model.modelData,t,i);else if(!r.isToTheme){const o=i.data;if(o===null)continue;n!==null&&!n.ge&&r.updateSource(this,o,t,i)}if(A===this){const o=r.targetId,a=i.p0(o);a!==null&&r.updateTarget(a,A,t,n==null?void 0:n.model)}}}}p0(e){return this.io===e?this:null}cA(e){let t;return e===""?t=this:e==="/"?t=this:e==="."?t=this:e===".."?t=this:t=this.part.findObject(e),t}get io(){return this.f!==null?this.f.io:-1}set io(e){this.io!==e&&(this.f===null&&(this.f=new Qs),this.f.io=e)}get Ti(){return this.f!==null?this.f.Ti:null}set Ti(e){this.Ti!==e&&(this.f===null&&(this.f=new Qs),this.f.Ti=e)}get eo(){return this.f!==null?this.f.eo:null}set eo(e){this.eo!==e&&(this.f===null&&(this.f=new Qs),this.f.eo=e)}raiseChanged(e,t,i){this.raiseChangedEvent(2,e,this,t,i)}t(e,t,i){this.raiseChangedEvent(2,e,this,t,i)}so(e,t,i,n){const s=this.re;if(s.i(e,t,i,n),this.rt!==1||this.Ht!==0){this.ki===null&&(this.ki=new Bt);const r=this.ki;r.Ii(),this.y0(r,e,t,i,n),r.Eg(s)}}uA(e,t,i){return this.pickable===!1?!1:(i.rc(this.F),t?this.intersectsRect(e,i):this.containedInRect(e,i))}dA(e,t,i){if(this.pickable===!1)return!1;const n=this.naturalBounds,s=e.distanceSquaredPoint(t);return i?T.distanceLineSegmentSquared(e.x,e.y,0,0,0,n.height)<=s||T.distanceLineSegmentSquared(e.x,e.y,0,n.height,n.width,n.height)<=s||T.distanceLineSegmentSquared(e.x,e.y,n.width,n.height,n.width,0)<=s||T.distanceLineSegmentSquared(e.x,e.y,n.width,0,0,0)<=s:e.distanceSquared(0,0)<=s&&e.distanceSquared(0,n.height)<=s&&e.distanceSquared(n.width,0)<=s&&e.distanceSquared(n.width,n.height)<=s}wn(){return!0}containsPoint(e){const t=T.l();t.a(e),this.F.bt(t);const i=this.actualBounds;if(!i.isReal())return T.e(t),!1;const n=this.diagram;if(n!==null&&n.Jm){const r=n.getInputOption("extraTouchThreshold"),A=n.getInputOption("extraTouchArea"),o=A/2,a=this.naturalBounds,h=this.getDocumentScale()*n.scale,d=1/h;if(a.width*h<r&&a.height*h<r){const f=it.contains(i.x-o*d,i.y-o*d,i.width+A*d,i.height+A*d,t.x,t.y);return T.e(t),f}}let s=!1;return(this instanceof se||this instanceof Zt?it.contains(i.x-5,i.y-5,i.width+10,i.height+10,t.x,t.y):i.containsPoint(t))&&(this.oi&&!this.oi.containsPoint(t)?s=!1:this.Rt!==null&&this.Ki.containsPoint(e)?s=!0:s=this.ph(e)),T.e(t),s}ph(e){const t=this.naturalBounds;return it.contains(0,0,t.width,t.height,e.x,e.y)}containsRect(e){if(this.angle===0)return this.actualBounds.containsRect(e);const t=this.naturalBounds,i=it.Y(0,0,t.width,t.height),n=this.F;let s=!1;const r=T.Y(e.x,e.y);return i.containsPoint(n._e(r))&&(r.i(e.x,e.bottom),i.containsPoint(n._e(r))&&(r.i(e.right,e.bottom),i.containsPoint(n._e(r))&&(r.i(e.right,e.y),i.containsPoint(n._e(r))&&(s=!0)))),T.e(r),it.e(i),s}containedInRect(e,t){if(t===void 0)return e.containsRect(this.actualBounds);const i=this.naturalBounds,n=t;let s=!1;const r=T.Y(0,0);return e.containsPoint(n.bt(r))&&(r.i(0,i.height),e.containsPoint(n.bt(r))&&(r.i(i.width,i.height),e.containsPoint(n.bt(r))&&(r.i(i.width,0),e.containsPoint(n.bt(r))&&(s=!0)))),T.e(r),s}intersectsRect(e,t){if(t===void 0&&(t=this.F,this.angle===0))return e.intersectsRect(this.actualBounds);const i=this.naturalBounds,n=t,s=T.Y(0,0),r=T.Y(0,i.height),A=T.Y(i.width,i.height),o=T.Y(i.width,0);let a=!1;if(e.containsPoint(n.bt(s))||e.containsPoint(n.bt(r))||e.containsPoint(n.bt(A))||e.containsPoint(n.bt(o)))a=!0;else{const h=it.Y(0,0,i.width,i.height),d=T.Y(e.x,e.y);h.containsPoint(n._e(d))?a=!0:(d.i(e.x,e.bottom),h.containsPoint(n._e(d))?a=!0:(d.i(e.right,e.bottom),h.containsPoint(n._e(d))?a=!0:(d.i(e.right,e.y),h.containsPoint(n._e(d))&&(a=!0)))),T.e(d),it.e(h),a||(V.kw(e,s,r)||V.kw(e,r,A)||V.kw(e,A,o)||V.kw(e,o,s))&&(a=!0)}return T.e(s),T.e(r),T.e(A),T.e(o),a}getDocumentPoint(e,t){if(t===void 0&&(t=new T),e instanceof q){const i=e,n=this.naturalBounds;return t.i(i.x*n.width+i.offsetX,i.y*n.height+i.offsetY),this.zs.bt(t),t}else return t.set(e),this.zs.bt(t),t}getDocumentBounds(e){e===void 0&&(e=new it);const t=this.naturalBounds,i=this.zs,n=T.Y(0,0).F(i);return e.i(n.x,n.y,0,0),n.i(t.width,0).F(i),e.unionNoCheck(n.x,n.y,0,0),n.i(t.width,t.height).F(i),e.unionNoCheck(n.x,n.y,0,0),n.i(0,t.height).F(i),e.unionNoCheck(n.x,n.y,0,0),T.e(n),e}getDocumentAngle(){return this.zs.GD()}getDocumentScale(){if(this.w0()===!1)return this.ya;const e=this.rt;return this.panel!==null?e*this.panel.getDocumentScale():e}getLocalPoint(e,t){return t===void 0&&(t=new T),t.a(e),this.zs._e(t),t}getNearestIntersectionPoint(e,t,i){return this._c(e.x,e.y,t.x,t.y,i)}_c(e,t,i,n,s){const r=this.F,A=1/(r.m11*r.m22-r.m12*r.m21),o=r.m22*A,a=-r.m12*A,h=-r.m21*A,d=r.m11*A,f=A*(r.m21*r.dy-r.m22*r.dx),g=A*(r.m12*r.dx-r.m11*r.dy),x=e*o+t*h+f,B=e*a+t*d+g,C=i*o+n*h+f,F=i*a+n*d+g;s.i(0,0);const b=this.naturalBounds,L=V.Pl(0,0,b.width,b.height,x,B,C,F,s);return s.F(r),L}dt(e,t,i,n){if(this.Bo()===!1)return;const s=this.sl,r=s.right+s.left,A=s.top+s.bottom;e=Math.max(e-r,0),t=Math.max(t-A,0),i=i||0,n=n||0,i=Math.max(i-r,0),n=Math.max(n-A,0);const o=this.angle;let a=0;const h=this.desiredSize,d=this.x0();o===90||o===270?(e=isFinite(h.height)?h.height+d:e,t=isFinite(h.width)?h.width+d:t):(e=isFinite(h.width)?h.width+d:e,t=isFinite(h.height)?h.height+d:t);let f=i||0,g=n||0;const x=this instanceof Kt;switch(this.Gs(!0)){case 0:f=0,g=0,x&&(e=1/0,t=1/0);break;case 2:isFinite(e)&&e>i&&(f=e),isFinite(t)&&t>n&&(g=t);break;case 5:isFinite(e)&&e>i&&(f=e),g=0,x&&(t=1/0);break;case 4:isFinite(t)&&t>n&&(g=t),f=0,x&&(e=1/0);break}const B=this.maxSize,C=this.minSize;f>B.width&&C.width<B.width&&(f=B.width),g>B.height&&C.height<B.height&&(g=B.height),i=Math.max(f,C.width),n=Math.max(g,C.height),B.width<i&&(i=Math.min(C.width,i)),B.height<n&&(n=Math.min(C.height,n)),e=Math.min(B.width,e),t=Math.min(B.height,t),e=Math.max(i,e),t=Math.max(n,t),(o===90||o===270)&&(a=e,e=t,t=a,a=i,i=n,n=a),this.re.Tt(),this.Qu(e,t,i,n),this.re.g(),this.re.isReal()||u.o("Non-real measuredBounds has been set. Object "+this+", measuredBounds: "+this.re.toString()),this.me(!1)}Qu(e,t,i,n){}Hs(){return!1}Kt(e,t,i,n,s){this.tf();const r=it.l();r.a(this.Ai),this.Ai.Tt(),this.es()===!1?this.Ai.i(e,t,i,n):this.yh(e,t,i,n),this.Ai.g(),s===void 0?this.oi=null:this.oi=s;let A=!1;if(s!==void 0)A=!0;else{let o=this.panel;if(o!==null&&o.ol()&&(o=o.panel),o!==null){const a=o.Ki,h=this.measuredBounds,d=t+h.height,f=e+h.width;if(A=!(0<=e+.05&&f<=a.width+.05&&0<=t+.05&&d<=a.height+.05),this instanceof We){const g=this.naturalBounds;(this.b0>g.height||this.mi>g.width)&&(A=!0)}}}A?this.n|=256:this.n&=-257,this.Ai.isReal()||u.o("Non-real actualBounds has been set. Object "+this+", actualBounds: "+this.Ai.toString()),this._u(r,this.Ai),this.no(!1),it.e(r)}yh(e,t,i,n){}commonArrange(e,t,i,n){if(this.Ai.i(e,t,i,n),this.desiredSize.isReal())return;const s=this.re,r=this.sl,A=r.right+r.left,o=r.top+r.bottom,a=s.width+A,h=s.height+o;i+=A,n+=o;let d=this.Gs(!0);switch(a===i&&h===n&&(d=0),d){case 0:(a>i||h>n)&&(this.me(!0),this.dt(a>i?i:a,h>n?n:h,0,0));break;case 2:this.me(!0),this.dt(i,n,0,0);break;case 5:this.me(!0),this.dt(i,h,0,0);break;case 4:this.me(!0),this.dt(a,n,0,0);break}}_u(e,t){const i=this.part;i!==null&&i.diagram!==null&&((i.selectionObject===this||i.resizeObject===this||i.rotateObject===this)&&i.a2(!0),this.L(),!e.equalsApproxClose(t)&&(i.wh(),this.k0(i)))}k0(e){this.portId!==null&&(e.a2(!0),e instanceof Et&&e.gA(this))}get shadowVisible(){return this.f!==null?this.f.P0:null}set shadowVisible(e){const t=this.shadowVisible;t!==e&&(this.Wt(),this.f.P0=e,this.Ye(!0),this.L(),this.t("shadowVisible",t,e))}VR(e,t){const i=this.naturalBounds,n=this.dh,s=n.m11,r=n.m21,A=n.dx,o=n.m12,a=n.m22,h=n.dy;let d=0,f=0,g=d,x=f;d=g*s+x*r+A,f=g*o+x*a+h;let B=d,C=f,F=0,b=0;g=i.width+t,x=0,d=g*s+x*r+A,f=g*o+x*a+h;let L=Math.min(B,d),Q=Math.min(C,f);F=Math.max(B+F,d)-L,b=Math.max(C+b,f)-Q,B=L,C=Q,g=i.width+t,x=i.height+t,d=g*s+x*r+A,f=g*o+x*a+h,L=Math.min(B,d),Q=Math.min(C,f),F=Math.max(B+F,d)-L,b=Math.max(C+b,f)-Q,B=L,C=Q,g=0,x=i.height+t,d=g*s+x*r+A,f=g*o+x*a+h,L=Math.min(B,d),Q=Math.min(C,f),F=Math.max(B+F,d)-L,b=Math.max(C+b,f)-Q,B=L,C=Q;const M=e.viewportBounds,O=M.x,D=M.y,K=M.width,J=M.height;return B>K+O||O>F+B||C>J+D||D>b+C}zi(e,t){if(this.zR(e,t)||!this.visible)return;const i=this.opacity;if(i===0)return;let n=1;i!==1&&(n=e.globalAlpha,e.globalAlpha=n*i);let s="";this.filter!==""&&(s=e.filter,e.filter=this.filter);const r=this.F,A=this.panel;this.w0()===!0&&this.Rb();const o=this.part;let a=!1,h=0;if(o&&t.getRenderingHint("drawShadows")&&(a=o.isShadowed,a)){const C=o.shadowOffset;h=Math.max(C.y,C.x)*t.scale*t.Yi}const d=this instanceof Kt&&this.ol(),f=this.Ai;if(d&&(this.mA(a,e,!1,A),this.XR(e,t),this.pA(a,e,!1,A),this.yA(a,e,!1)),d||!d&&(f.width===0||f.height===0||isNaN(f.x)||isNaN(f.y))){i!==1&&(e.globalAlpha=n),this.filter!==""&&(e.filter=s);return}const g=this.Hs();if(!t.oa&&g&&this.VR(t,h)){i!==1&&(e.globalAlpha=n),this.filter!==""&&(e.filter=s);return}let x=(this.n&256)!==0;if(e.clipInsteadOfFill&&(x=!1),this instanceof We&&(e.font=this.font),x){const C=A.wn()?A.naturalBounds:A.actualBounds;let F=Math.max(f.x,C.x),b=Math.max(f.y,C.y),L=Math.min(f.right,C.right)-F,Q=Math.min(f.bottom,C.bottom)-b;const M=this.oi;if(M!==null&&(F=M.x,b=M.y,L=M.width,Q=M.height),F>f.width+f.x||f.x>C.width+C.x){i!==1&&(e.globalAlpha=n),this.filter!==""&&(e.filter=s);return}e.save(),e.beginPath(),e.rect(F,b,L,Q),e.clip()}if(g){if(!o.isVisible()){i!==1&&(e.globalAlpha=n),this.filter!==""&&(e.filter=s);return}if(a){const C=o.shadowOffset;e.shadowsSet(C.x*t.scale*this.scale*t.Yi,C.y*t.scale*this.scale*t.Yi,o.shadowBlur),e.shadowsOn(),e.shadowColor=o.shadowColor}}const B=this.naturalBounds;if(e.transform(r.m11,r.m12,r.m21,r.m22,r.dx,r.dy),this.mA(a,e,g,A),this.Rt!==null&&(e.commitTransform(),this.vb(e,B,f)),this.pA(a,e,g,A),this.xh(e,t),this.yA(a,e,g),x&&(e.restore(),e.clearContextCache(this instanceof Kt)),!r.Ik()){const C=1/(r.m11*r.m22-r.m12*r.m21);e.transform(r.m22*C,-r.m12*C,-r.m21*C,r.m11*C,C*(r.m21*r.dy-r.m22*r.dx),C*(r.m12*r.dx-r.m11*r.dy))}i!==1&&(e.globalAlpha=n),this.filter!==""&&(e.filter=s)}mA(e,t,i,n){e&&this.shadowVisible===!0?t.shadowsOn():e&&this.shadowVisible===!1&&t.shadowsOff(),e&&this.Ob(n)&&this.shadowVisible===null&&t.shadowsOff()}pA(e,t,i,n){e&&(this.Rt!==null||this.Ob(n))?(this.Ib(!0),this.shadowVisible===null&&t.shadowsOff()):this.Ib(!1)}yA(e,t,i){e&&this.c2()===!0&&t.shadowsOn(),i&&e&&t.shadowsOff()}YR(e,t,i){const n=this.part;let s=!1;n&&e.getRenderingHint("drawShadows")&&(s=n.isShadowed),t.clipInsteadOfFill&&(s=!1),this.Hs()&&s&&t.shadowsOn(),s&&this.shadowVisible===!0?t.shadowsOn():s&&this.shadowVisible===!1&&t.shadowsOff();const r=this.panel;if(s&&this.Ob(r)&&this.shadowVisible===null&&t.shadowsOff(),t.rl){const A=e.computePixelRatio(),o=`drop-shadow(${t.shadowOffsetX/A}px ${t.shadowOffsetY/A}px ${t.shadowBlur/A/2}px ${t.shadowColor})`;this.background!==null&&i.Rt.setAttributeNS(null,"filter",o)}return s&&(this.Rt!==null||this.Ob(r))?(this.Ib(!0),this.shadowVisible===null&&t.shadowsOff()):this.Ib(!1),s}KR(e,t,i,n){if(i.rl){const s=t.computePixelRatio(),r=`drop-shadow(${i.shadowOffsetX/s}px ${i.shadowOffsetY/s}px ${i.shadowBlur/s/2}px ${i.shadowColor})`;this.f2(e,r)}n&&this.c2()===!0&&i.shadowsOn(),this.Hs()&&i.shadowsOff()}Ob(e){return e===null?!1:(e.ol()&&(e=e.panel),e.c2()||(e.type===Kt.Auto||e.type===Kt.Spot)&&e.findMainElement()!==this)}f2(e,t){}vb(e,t,i){const n=this.x0(),s=t.x,r=t.y,A=t.width+n,o=t.height+n;this.mn(e,this.Rt,!0,!1,t,i),this.Rt instanceof Qe&&this.Rt.type===3?(e.beginPath(),e.rect(s-n/2,r-n/2,A,o),e.fillContext(this.Rt,!1,null)):e.fillRect(s-n/2,r-n/2,A,o)}wA(e,t){let i=e.GR(this);const n=e.gh!==null?e.gh:e.svg;if(i!==-1)if(i===0)if(n.Rt)n.Rt.after(t);else if(e.type===Kt.Table){const s=n.getElementsByClassName("gojs-ts"),r=s.length!==0?s[0]:null;r!==null&&r.after(t)}else n.prepend(t);else{for(;i!==0&&!e.elt(i-1).isVisibleObject();)i--;if(i===0)n.prepend(t);else{const s=e.elt(i-1).svg;s!==null?s.after(t):n.appendChild(t)}}}zR(e,t){if(!(e instanceof qi))return!1;if(!this.visible||this.opacity===0)return this.svg!==null&&this.svg.parentNode!==null&&this.svg.remove(),!0;const i=this.Ai;if(this.Hs()&&(!this.isVisible()||i.width===0||i.height===0||isNaN(i.x)||isNaN(i.y)))return this.svg!==null&&this.svg.parentNode!==null&&this.svg.remove(),!0;const n=this.panel,s=this.td(e);if(this.ef(e,t,s))return this.xA(this.svg),this.svg.parentElement!==null?(this.Hs()&&(e.lastDrawnPart=this.svg),!0):(this.Hs()?(e.lastDrawnPart!==null?e.lastDrawnPart.after(this.svg):e.diagramGroup.prepend(this.svg),e.lastDrawnPart=this.svg):n&&this.wA(n,this.svg),!0);if(this.Ye(!1),this.Hs()&&this.isShadowed){const B=this.shadowOffset;e.shadowsSet(B.x*t.scale*this.scale*t.Yi,B.y*t.scale*this.scale*t.Yi,this.shadowBlur),e.shadowsOn(),e.shadowColor=this.shadowColor}this instanceof We&&(e.font=this.font),e.currentElement=null;const r=this.F,A=this instanceof Kt,o=this instanceof Kt?this.ol():!1,a=this.svg;if(this.w0()===!0&&this.Rb(),e.setCurrentTransform(1,0,0,1,0,0),e.outerGroup=!1,s)if(e.outerGroup=!0,A&&o)e.newGroup(1,0,0,1,0,0),this.svg=e.lastCreatedElement;else if(A&&this.isClipping){const B=this.findMainElement();let C=0,F=0;B!==null&&(C=B.actualBounds.x,F=B.actualBounds.y),e.newGroup(r.m11,r.m12,r.m21,r.m22,r.dx+C,r.dy+F),this.svg=e.lastCreatedElement,B!==null&&e.createOrUpdateClipGroup(this,B.actualBounds),e.currentElement=e.lastCreatedElement}else A?(e.newGroup(r.m11,r.m12,r.m21,r.m22,r.dx,r.dy),this.svg=e.lastCreatedElement):e.newGroup(1,0,0,1,0,0);const h=this.naturalBounds;A||e.setCurrentTransform(r.m11,r.m12,r.m21,r.m22,r.dx,r.dy),this.background!==null&&(A?(o&&e.setCurrentTransform(r.m11,r.m12,r.m21,r.m22,r.dx,r.dy),this.vb(e,h,i),o&&e.setCurrentTransform(1,0,0,1,0,0)):(e.setCurrentTransform(r.m11,r.m12,r.m21,r.m22,r.dx,r.dy),this.vb(e,h,i)),e.currentElement.Rt=e.lastCreatedElement,e.currentElement.prepend(e.lastCreatedElement));const d=this.YR(t,e,e.currentElement);this.xh(e,t),A&&e.endGroup(),e.outerGroup&&e.endGroup();const f=e.surface.qu,g=A?this.svg:e.currentElement;if(a!==null&&g!==a&&a.parentNode===this.panel.svg){const B=this.svg.getAttribute("filter");return B!==null&&g.setAttribute("filter",B),a.replaceWith(g),this.svg=g,g!==null&&this.S0(e,n,i,g),!0}if(this.svg=g,f!==null&&g===null&&e.dummyGroup(),g===null)return!0;this.S0(e,n,i,g),this.KR(g,t,e,d);const x=this.Hs()?this.opacity*e.globalAlpha:this.opacity;if(x!==1&&g.setAttributeNS(null,"opacity",x.toString()),this.filter!==""&&g.setAttributeNS(null,"filter",this.filter),this.Hs()){if(a!==null&&g!==a&&a.parentNode===e.diagramGroup){const B=a.getAttribute("filter");B!==null&&g.setAttribute("filter",B),a.replaceWith(g)}else e.lastDrawnPart?e.lastDrawnPart.after(g):e.diagramGroup.prepend(g);e.lastDrawnPart=g}else n!==null&&this.wA(n,g);return f!==null&&f(this,g),this.xA(g),!0}xA(e){const t=this,i=e.dataset;t instanceof qt&&(t.portId!==null&&(i.portId=t.portId),t instanceof Kt&&(isNaN(t.itemIndex)||(i.itemIndex=t.itemIndex.toString()),t instanceof Ce&&(i.className=u.Vn(t),t.key!==void 0&&(i.key=t.key.toString()),t.containingGroup!==null&&(i.group=t.containingGroup.key.toString()),t instanceof Xt&&(t.fromNode!==null&&t.fromNode.key!==void 0&&(i.fromKey=t.fromNode.key.toString()),t.fromPortId!==""&&(i.fromPortId=t.fromPortId),t.toNode!==null&&t.toNode.key!==void 0&&(i.toKey=t.toNode.key.toString()),t.toPortId!==""&&(i.toPortId=t.toPortId)))))}S0(e,t,i,n){let s=(this.n&256)!==0;if(e.clipInsteadOfFill&&(s=!1),!s){n.removeAttributeNS(null,"clip-path");return}const r=t.wn()?t.naturalBounds:t.actualBounds;let A=Math.max(i.x,r.x),o=Math.max(i.y,r.y),a=Math.min(i.right,r.right)-A,h=Math.min(i.bottom,r.bottom)-o;const d=this.oi;d!==null&&(A=d.x,o=d.y,a=d.width,h=d.height);const f=new it(A,o,Math.max(a,0),Math.max(h,0));this instanceof Kt&&this.F.copy().yw().Eg(f),n.setAttributeNS(null,"clip-path",`path('      M ${f.x},${f.y}       L ${f.width+f.x} ${f.y}       L ${f.width+f.x} ${f.height+f.y}       L ${f.x} ${f.height+f.y} z') view-box`)}HR(){if(this.svg===null)return;const e=this.svg.innerHTML.match(/url\(#((CLIP|GRAD).+?)\)/g),t=this.svg.ownerDocument;if(e!==null)for(const i of e){const n=t.getElementById(i.split("#")[1].slice(0,-1));n!==null&&n.remove()}this.svg.remove()}XR(e,t){const i=this.Ai,n=this.Ki,s=this.Rt;s!==null&&e.commitTransform(),s!==null&&(this.mn(e,s,!0,!1,n,i),s instanceof Qe&&s.type===3?(e.beginPath(),e.rect(i.x,i.y,i.width,i.height),e.fillContext(s,!1,null)):e.fillRect(i.x,i.y,i.width,i.height)),this.xh(e,t)}xh(e,t){}sf(){this.Ye(!0)}ef(e,t,i){const n=this.svg;if(this.jR()){if(this.sf(),this.Ye(!1),n===null)return!1;const d=n.getAttribute("clip-path");if(d!==null&&d.includes("url")){const f=e.svg.getElementById(d.split("#")[1].slice(0,-1));f!==null&&f.remove()}return n.getAttribute("filter")&&n.removeAttribute("filter"),!1}if(n===null)return!1;if(!this.visible)return n.remove(),!1;if(n.nodeName!=="g"&&i||n.nodeName==="g"&&!i)return!1;const s=this.F,r="matrix("+s.m11+", "+s.m12+", "+s.m21+", "+s.m22+", "+s.dx+", "+s.dy+")",A=this instanceof Kt,o=A?this.ol():!1;if(!(A&&o))if(this instanceof pn){const d=this.Eb;e.setCurrentTransform(s.m11,s.m12,s.m21,s.m22,s.dx,s.dy),d!==null&&e.amendImageTransform(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7]),i?n.lastElementChild.setAttributeNS(null,"transform",e.getCurrentTransform()):n.setAttributeNS(null,"transform",e.getCurrentTransform())}else if(i&&!A)if(this instanceof Zt){const d=n.getElementsByTagName("path");for(let f=0;f<d.length;f++)d[f].setAttributeNS(null,"transform",r)}else if(this instanceof We){const d=n.getElementsByTagName("text"),f=typeof this.stroke=="string"?this.stroke:null;for(let g=0;g<d.length;g++)d[g].setAttributeNS(null,"transform",r),f&&d[g].setAttributeNS(null,"fill",f)}else(n.lastElementChild||n).setAttributeNS(null,"transform",r);else if(A&&this.isClipping&&this.gh){const d=this.findMainElement(),f=d!==null?d.actualBounds.x:0,g=d!==null?d.actualBounds.y:0;this.gh.setAttributeNS(null,"transform","matrix(1,0,0,1,"+-f+", "+-g+")"),n.setAttributeNS(null,"transform","matrix("+s.m11+", "+s.m12+", "+s.m21+", "+s.m22+", "+(s.dx+f)+", "+(s.dy+g)+")")}else n.setAttributeNS(null,"transform",r);const a=this.Hs()?this.opacity*e.globalAlpha:this.opacity;a===1?n.removeAttribute("opacity"):n.setAttributeNS(null,"opacity",a.toString()),e.setCurrentTransform(1,0,0,1,0,0);const h=this.gh?this.gh:this.Fb;if(this.background!==null||h.Rt!==void 0){const d=h.Rt;if(this.background===null)e.removeOldGradient(this,h.Rt,"fill"),h.Rt.remove(),h.Rt=void 0;else{if((o||i&&!(this instanceof Kt))&&e.setCurrentTransform(s.m11,s.m12,s.m21,s.m22,s.dx,s.dy),this.vb(e,this.naturalBounds,this.actualBounds),h.Rt){e.removeOldGradient(this,h.Rt,"fill");const f=h.Rt.getAttribute("filter");f!==null&&e.lastCreatedElement.setAttribute("filter",f),h.Rt.replaceWith(e.lastCreatedElement)}else h.prepend(e.lastCreatedElement);h.Rt=e.lastCreatedElement}d&&e.removeOldGradient(this,d,"fill")}return this.S0(e,this.panel,this.actualBounds,n),!0}td(e){if(this.background!==null)return!0;let t=(this.n&256)!==0;return e.clipInsteadOfFill&&(t=!1),!!t}static SE(e,t,i,n,s,r,A){let o=.001;const a=r.length;e.moveTo(t,i);let h=n-t;const d=s-i;h===0&&(h=.001);const f=d/h;let g=Math.sqrt(h*h+d*d),x=0,B=!0;o=r[x%a];let C=A!==0;for(;g>=.1;){if(C){for(o=r[x++%a],o-=A;o<0;)o+=r[x++%a],B=!B;C=!1}else o=r[x++%a];o>g&&(o=g);let F=Math.sqrt(o*o/(1+f*f));h<0&&(F=-F),t+=F,i+=f*F,B?e.lineTo(t,i):e.moveTo(t,i),g-=o,B=!B}}mn(e,t,i,n,s,r){let A=1,o=1;if(typeof t=="string"){i?e.fillStyle=t:e.strokeStyle=t;return}else if(t.type===1){i?e.fillStyle=t.color:e.strokeStyle=t.color;return}let a;const h=this.x0();A=s.width,o=s.height,n?(A=r.width,o=r.height):i||(A+=h,o+=h);const d=e instanceof Ls;if(d&&t.xn&&(t.type===4||t.nf===A&&t.Bb===o))a=t.xn;else{let f=0,g=0,x=0,B=0,C=0,F=0,b=0,L=0;if(n?(b=r.x,L=r.y):i||(b-=h/2,L-=h/2),f=t.start.x*A+t.start.offsetX+b,g=t.start.y*o+t.start.offsetY+L,x=t.end.x*A+t.end.offsetX+b,B=t.end.y*o+t.end.offsetY+L,t.type===2)a=e.createLinearGradient(f,g,x,B);else if(t.type===3)F=isNaN(t.endRadius)?Math.max(A,o)/2:t.endRadius,isNaN(t.startRadius)?(C=0,F=Math.max(A,o)/2):C=t.startRadius,a=e.createRadialGradient(f,g,C,x,B,F);else if(t.type===4)try{a=e.createPattern(t.pattern,"repeat")}catch{a=null}else u.te(t.type,"Brush type");if(t.type!==4){const Q=t.colorStops;if(Q!==null){const M=Q.iterator;for(;M.next();)a.addColorStop(M.key,M.value)}}if(d&&(t.xn=a,a!==null&&(t.nf=A,t.Bb=o),a===null&&t.type===4&&t.nf!==-1)){t.nf=-1;const Q=this.diagram;Q!==null&&t.nf===-1&&u.fr(()=>{Q.redraw()},600)}}i?e.fillStyle=a:e.strokeStyle=a}isContainedBy(e){return e instanceof Kt?this.qR(this,e):!1}qR(e,t){if(e===t||t===null)return!1;let i=e.panel;for(;i!==null;){if(i===t)return!0;i=i.panel}return!1}isVisibleObject(){if(!this.visible)return!1;const e=this.panel;return e!==null?e.isVisibleObject():!0}isEnabledObject(){let e=this instanceof Kt?this:this.panel;for(;e!==null&&e.isEnabled;)e=e.panel;return e===null}get enabledChanged(){return this.f!==null?this.f.M0:null}set enabledChanged(e){const t=this.enabledChanged;t!==e&&(e!==null&&u.C(e,qt,"enabledChanged"),this.Wt(),this.f.M0=e,this.t("enabledChanged",t,e))}Rb(){if(this.Ub()===!0){const e=this.el;if(e.Ii(),!this.Ai.isReal()||!this.re.isReal()){this.ed(!1);return}if(e.Os(this.Ai.x-this.re.x,this.Ai.y-this.re.y),this.scale!==1||this.angle!==0){const t=this.naturalBounds;this.y0(e,t.x,t.y,t.width,t.height)}this.ed(!1),this.Na(!0)}if(this.w0()===!0){const e=this.panel;if(e===null)this.dh.set(this.el),this.ya=this.scale;else if(e.zs!==null){const t=this.dh;t.Ii(),e.wn()?t.rc(e.dh):e.panel!==null&&t.rc(e.panel.dh),t.rc(this.el),this.ya=this.scale*e.ya}this.Na(!1)}}y0(e,t,i,n,s){if(this.rt!==1&&e.rt(this.rt),this.Ht===0)return;const r=T.l();r.setSpot(t,i,n,s,q.Center),e.ds(this.Ht,r.x,r.y),T.e(r)}c(e){if(this.Bo())return;e===void 0&&(e=!1),this.me(!0),this.no(!0);const t=this.panel;t!==null&&!e&&t.c()}of(){this.Bo()||(this.me(!0),this.no(!0))}rf(e){if(this.es())return;const t=this.panel;!e&&t!==null&&t.c(),this.no(!0)}tf(){this.Ub()===!1&&(this.ed(!0),this.Na(!0))}u2(){this.Na(!0)}L(){const e=this.part;e!==null&&e.L()}Gs(e){const t=this.stretch,i=this.panel;if(i===null)return this.Yo(t===1?0:t,e);if(i.type===Kt.Table)return this.N0(i.getRowDefinition(this.row),i.getColumnDefinition(this.column),e);if(i.type===Kt.Auto&&i.findMainElement()===this)return this.Yo(2,e);if(t===1){if(i.type===Kt.Spot&&i.findMainElement()===this)return this.Yo(2,e);const n=i.defaultStretch;return n===1?this.Yo(0,e):this.Yo(n,e)}return this.Yo(t,e)}N0(e,t,i){const n=this.stretch;if(n!==1)return this.Yo(n,i);let s=null,r=null;switch(e.stretch){case 1:case 5:break;case 4:r=!0;break;case 2:r=!0;break}switch(t.stretch){case 1:case 4:break;case 5:s=!0;break;case 2:s=!0;break}const A=this.panel.defaultStretch;return s===null&&(s=A===5||A===2),r===null&&(r=A===4||A===2),s===!0&&r===!0?this.Yo(2,i):s===!0?this.Yo(5,i):r===!0?this.Yo(4,i):this.Yo(0,i)}Yo(e,t){if(t)return e;if(e===0)return 0;const i=this.desiredSize;if(i.isReal())return 0;const n=!isNaN(i.width),s=!isNaN(i.height),r=this.angle;if(n)if(r!==90&&r!==270){if(e===5)return 0;if(e===2)return 4}else{if(e===4)return 0;if(e===2)return 5}if(s)if(r!==90&&r!==270){if(e===4)return 0;if(e===2)return 5}else{if(e===5)return 0;if(e===2)return 4}return e}get segmentOrientation(){return this.Vt!==null?this.Vt.C0:0}set segmentOrientation(e){const t=this.segmentOrientation;t!==e&&(this.Vt===null&&(this.Vt=new Pn),this.Vt.C0=e,this.c(),this.t("segmentOrientation",t,e),e===0&&(this.angle=0))}WR(){this.segmentOrientation=21}get segmentIndex(){return this.Vt!==null?this.Vt.L0:-1/0}set segmentIndex(e){e=Math.round(e);const t=this.segmentIndex;t!==e&&(this.Vt===null&&(this.Vt=new Pn),this.Vt.L0=e,this.c(),this.t("segmentIndex",t,e))}get segmentFraction(){return this.Vt!==null?this.Vt.A0:0}set segmentFraction(e){e<0?e=0:e>1&&(e=1);const t=this.segmentFraction;t!==e&&(this.Vt===null&&(this.Vt=new Pn),this.Vt.A0=e,this.c(),this.t("segmentFraction",t,e))}get segmentOffset(){return this.Vt!==null?this.Vt.T0:T.Lo}set segmentOffset(e){const t=this.segmentOffset;t.equals(e)||(e=e.N(),this.Vt===null&&(this.Vt=new Pn),this.Vt.T0=e,this.c(),this.t("segmentOffset",t,e))}get stretch(){return this.f!==null?this.f.oo:1}set stretch(e){const t=this.stretch;t!==e&&(this.Wt(),this.f.oo=e,this.c(),this.t("stretch",t,e))}get name(){return this.f!==null?this.f.Ct:""}set name(e){const t=this.name;t!==e&&(this.Wt(),this.f.Ct=e,this.part!==null&&this.part.D0(),this.t("name",t,e))}get opacity(){return this.Qt}set opacity(e){e<0?e=0:e>1&&(e=1);const t=this.opacity;if(t!==e){this.Qt=e,this.t("opacity",t,e);const i=this.diagram,n=this.part;i!==null&&n!==null&&i.L(n._h(n.actualBounds))}}get filter(){return this.m0}set filter(e){const t=this.filter;if(t!==e){this.m0=e,this.Ye(!0),this.t("filter",t,e);const i=this.diagram,n=this.part;i!==null&&n!==null&&i.L(n._h(n.actualBounds))}}get visible(){return(this.n&1)!==0}set visible(e){const t=(this.n&1)!==0;if(t!==e){this.n=this.n^1,this.sf(),this.t("visible",t,e);const i=this.panel;i!==null?i.c():this.Hs()&&this.Vi(e),this.L(),this.bA()}}get pickable(){return(this.n&2)!==0}set pickable(e){const t=(this.n&2)!==0;t!==e&&(this.n=this.n^2,this.t("pickable",t,e))}get fromLinkableDuplicates(){return(this.n&4)!==0}set fromLinkableDuplicates(e){const t=(this.n&4)!==0;t!==e&&(this.n=this.n^4,this.t("fromLinkableDuplicates",t,e))}get fromLinkableSelfNode(){return(this.n&8)!==0}set fromLinkableSelfNode(e){const t=(this.n&8)!==0;t!==e&&(this.n=this.n^8,this.t("fromLinkableSelfNode",t,e))}get toLinkableDuplicates(){return(this.n&16)!==0}set toLinkableDuplicates(e){const t=(this.n&16)!==0;t!==e&&(this.n=this.n^16,this.t("toLinkableDuplicates",t,e))}get toLinkableSelfNode(){return(this.n&32)!==0}set toLinkableSelfNode(e){const t=(this.n&32)!==0;t!==e&&(this.n=this.n^32,this.t("toLinkableSelfNode",t,e))}get isPanelMain(){return(this.n&64)!==0}set isPanelMain(e){const t=(this.n&64)!==0;t!==e&&(this.n=this.n^64,this.c(),this.t("isPanelMain",t,e))}get isActionable(){return(this.n&128)!==0}set isActionable(e){const t=(this.n&128)!==0;t!==e&&(this.n=this.n^128,this.t("isActionable",t,e))}get background(){return this.Rt}set background(e){const t=this.background;t!==e&&(e!==null&&Qe.sd(e,"GraphObject.background"),e instanceof Qe&&e.g(),this.Rt=e,this.L(),this.t("background",t,e))}c2(){return(this.n&512)!==0}Ib(e){e?this.n|=512:this.n&=-513}Qc(){return(this.n&1024)!==0}d2(e){e?this.n|=1024:this.n&=-1025}Ub(){return(this.n&2048)!==0}ed(e){e?this.n|=2048:this.n&=-2049}w0(){return(this.n&4096)!==0}Na(e){e?this.n|=4096:this.n&=-4097}Bo(){return(this.n&8192)!==0}me(e){e?this.n|=8192:this.n&=-8193}es(){return(this.n&16384)!==0}no(e){e?this.n|=16384:this.n&=-16385}jR(){return(this.n&32768)!==0}Ye(e){e?this.n|=32768:this.n&=-32769}get part(){if(this.Hs())return this;if(this.nl!==null)return this.nl;let e=this;for(e=e.panel;e;){if(e instanceof Ce)return this.nl=e,e;e=e.panel}return null}get svg(){return this.Fb}set svg(e){this.Fb=e}Ru(){this.svg=null}get panel(){return this.Ks}Ca(e){this.Ks=e,this.svg!==null&&this.svg.remove()}get layer(){const e=this.part;return e!==null?e.layer:null}get diagram(){const e=this.part;return e!==null?e.diagram:null}get position(){return this.gt}set position(e){const t=e.x,i=e.y,n=this.position,s=n.x,r=n.y;s!==t&&(!isNaN(s)||!isNaN(t))||r!==i&&(!isNaN(r)||!isNaN(i))?(e=e.copy(),this.g2(e,s,r)&&this.t("position",new T(s,r),e.copy())):this.m2()}m2(){}g2(e,t,i){return this.gt=e,this.rf(),!0}Sc(e,t,i){this.gt.x===e&&this.gt.y===t||(this.gt.i(e,t),this.tf())}get actualBounds(){return this.Ai}get scale(){return this.rt}set scale(e){const t=this.scale;t!==e&&(e<=0&&u.o("GraphObject.scale for "+this+" must be greater than zero, not: "+e),this.rt=e,this.c(),this.t("scale",t,e))}get angle(){return this.Ht}set angle(e){const t=this.angle;if(t!==e){if(e=e%360,e<0&&(e+=360),t===e)return;this.Ht=e,this.bA(),this.c(),this.t("angle",t,e)}}get desiredSize(){return this.ns}set desiredSize(e){const t=e.width,i=e.height,n=this.desiredSize,s=n.width,r=n.height;if((s!==t&&(!isNaN(s)||!isNaN(t))||r!==i&&(!isNaN(r)||!isNaN(i)))&&(e=e.N(),this.ns=e,this.c(),this instanceof Zt&&this.oe(),this.t("desiredSize",n,e),this.Qc())){const A=this.part;A!==null&&(this.Ma(A,"width"),this.Ma(A,"height"))}}get width(){return this.ns.width}set width(e){const t=this.ns.width;if(t!==e&&(!isNaN(t)||!isNaN(e))){const i=this.ns,n=new ct(e,this.ns.height).g();if(this.ns=n,this.c(),this instanceof Zt&&this.oe(),this.t("desiredSize",i,n),this.Qc()){const s=this.part;s!==null&&this.Ma(s,"width")}}}get height(){return this.ns.height}set height(e){const t=this.ns.height;if(t!==e&&(!isNaN(t)||!isNaN(e))){const i=this.ns,n=new ct(this.ns.width,e).g();if(this.ns=n,this.c(),this instanceof Zt&&this.oe(),this.t("desiredSize",i,n),this.Qc()){const s=this.part;s!==null&&this.Ma(s,"height")}}}get minSize(){return this.f!==null?this.f.Nr:ct.hu}set minSize(e){const t=this.minSize;t.equals(e)||(e=e.copy(),isNaN(e.width)&&(e.width=0),isNaN(e.height)&&(e.height=0),e.g(),this.Wt(),this.f.Nr=e,this.c(),this.t("minSize",t,e))}get maxSize(){return this.f!==null?this.f.Cr:ct.uC}set maxSize(e){const t=this.maxSize;t.equals(e)||(e=e.copy(),isNaN(e.width)&&(e.width=1/0),isNaN(e.height)&&(e.height=1/0),e.g(),this.Wt(),this.f.Cr=e,this.c(),this.t("maxSize",t,e))}get measuredBounds(){return this.re}get naturalBounds(){return this.Ki}x0(){return 0}get margin(){return this.sl}set margin(e){typeof e=="number"&&(e=new Rt(e));const t=this.sl;t.equals(e)||(e=e.N(),this.sl=e,this.c(),this.t("margin",t,e))}get F(){return this.Ub()===!0&&this.Rb(),this.el}get zs(){return this.w0()===!0&&this.Rb(),this.dh}trigger(e,t,i){let n=null;return typeof e=="string"?n=new cs(e,t,i):n=e,n.Me=this,this.bs===null&&(this.bs=new xt),this.bs.set(n.propertyName,n),this}get bs(){return this.f!==null?this.f.bs:null}set bs(e){this.bs!==e&&(this.Wt(),this.f.bs=e)}get Mr(){return this.f!==null?this.f.Mr:0}set Mr(e){this.Mr!==e&&(this.Wt(),this.f.Mr=e)}get alignment(){return this.ci}set alignment(e){const t=this.alignment;t.equals(e)||(e.isNoSpot()&&!e.isDefault()&&u.o("GraphObject.alignment for "+this+" must be a real Spot or Spot.Default, not: "+e),e=e.N(),this.ci=e,this.rf(),this.t("alignment",t,e))}get column(){return this.il}set column(e){e=Math.round(e);const t=this.column;t!==e&&(e<0&&u.it(e,">= 0",qt,"column"),this.il=e,this.c(),this.t("column",t,e),this.svg!==null&&this.svg.remove())}get columnSpan(){return this.f!==null?this.f.F0:1}set columnSpan(e){e=Math.round(e);const t=this.columnSpan;t!==e&&(e<1&&u.it(e,">= 1",qt,"columnSpan"),this.Wt(),this.f.F0=e,this.c(),this.t("columnSpan",t,e))}get row(){return this.g0}set row(e){e=Math.round(e);const t=this.row;t!==e&&(e<0&&u.it(e,">= 0",qt,"row"),this.g0=e,this.c(),this.t("row",t,e),this.svg!==null&&this.svg.remove())}get rowSpan(){return this.f!==null?this.f.R0:1}set rowSpan(e){e=Math.round(e);const t=this.rowSpan;t!==e&&(e<1&&u.it(e,">= 1",qt,"rowSpan"),this.Wt(),this.f.R0=e,this.c(),this.t("rowSpan",t,e))}get spanAllocation(){return this.f!==null?this.f.v0:null}set spanAllocation(e){const t=this.spanAllocation;t!==e&&(e!==null&&u.C(e,qt,"spanAllocation"),this.Wt(),this.f.v0=e,this.c(),this.t("spanAllocation",t,e))}get alignmentFocus(){return this.Ju}set alignmentFocus(e){const t=this.alignmentFocus;t.equals(e)||(e=e.N(),this.Ju=e,this.c(),this.t("alignmentFocus",t,e))}get portId(){return this.d0}set portId(e){const t=this.portId;if(t!==e){const i=this.part;i!==null&&!(i instanceof Et)&&u.o("Cannot set portID on a Link: "+e);const n=i;t!==null&&n!==null&&n.p2(this),this.d0=e,e!==null&&n!==null&&(n.bn=!0,n.kA(this)),this.t("portId",t,e)}}La(){const e=this.part;if(e instanceof Et&&(this.portId!==null||this===e.port)){const t=e.diagram;t!==null&&!t.undoManager.isUndoingRedoing&&e.gA(this)}}bA(){const e=this.diagram;e===null||e.undoManager.isUndoingRedoing||(this instanceof Kt?this instanceof Et?this.invalidateConnectedLinks():this.walkVisualTreeFrom(this,t=>{t.La()}):this.La())}get toSpot(){return this.J!==null?this.J.xa:q.None}set toSpot(e){const t=this.toSpot;t.equals(e)||(e=e.N(),this.Xe(),this.J.xa=e,this.t("toSpot",t,e),this.La())}get toEndSegmentLength(){return this.J!==null?this.J.ka:10}set toEndSegmentLength(e){const t=this.toEndSegmentLength;t!==e&&(e<0&&u.it(e,">= 0",qt,"toEndSegmentLength"),this.Xe(),this.J.ka=e,this.t("toEndSegmentLength",t,e),this.La())}get toShortLength(){return this.J!==null?this.J.Sa:0}set toShortLength(e){const t=this.toShortLength;t!==e&&(this.Xe(),this.J.Sa=e,this.t("toShortLength",t,e),this.La())}get toLinkable(){return this.J!==null?this.J.O0:null}set toLinkable(e){const t=this.toLinkable;t!==e&&(this.Xe(),this.J.O0=e,this.t("toLinkable",t,e))}get toMaxLinks(){return this.J!==null?this.J.I0:1/0}set toMaxLinks(e){const t=this.toMaxLinks;t!==e&&(e<0&&u.it(e,">= 0",qt,"toMaxLinks"),this.Xe(),this.J.I0=e,this.t("toMaxLinks",t,e))}get fromSpot(){return this.J!==null?this.J.wa:q.None}set fromSpot(e){const t=this.fromSpot;t.equals(e)||(e=e.N(),this.Xe(),this.J.wa=e,this.t("fromSpot",t,e),this.La())}get fromEndSegmentLength(){return this.J!==null?this.J.ba:10}set fromEndSegmentLength(e){const t=this.fromEndSegmentLength;t!==e&&(e<0&&u.it(e,">= 0",qt,"fromEndSegmentLength"),this.Xe(),this.J.ba=e,this.t("fromEndSegmentLength",t,e),this.La())}get fromShortLength(){return this.J!==null?this.J.Pa:0}set fromShortLength(e){const t=this.fromShortLength;t!==e&&(this.Xe(),this.J.Pa=e,this.t("fromShortLength",t,e),this.La())}get fromLinkable(){return this.J!==null?this.J.E0:null}set fromLinkable(e){const t=this.fromLinkable;t!==e&&(this.Xe(),this.J.E0=e,this.t("fromLinkable",t,e))}get fromMaxLinks(){return this.J!==null?this.J.B0:1/0}set fromMaxLinks(e){const t=this.fromMaxLinks;t!==e&&(e<0&&u.it(e,">= 0",qt,"fromMaxLinks"),this.Xe(),this.J.B0=e,this.t("fromMaxLinks",t,e))}get cursor(){return this.f!==null?this.f.Dl:""}set cursor(e){const t=this.cursor;t!==e&&(u.s(e,"string",qt,"cursor"),this.Wt(),this.f.Dl=e,this.t("cursor",t,e))}get click(){return this.f!==null?this.f.Ir:null}set click(e){const t=this.click;t!==e&&(e!==null&&u.C(e,qt,"click"),this.Wt(),this.f.Ir=e,this.t("click",t,e))}get doubleClick(){return this.f!==null?this.f.Er:null}set doubleClick(e){const t=this.doubleClick;t!==e&&(e!==null&&u.C(e,qt,"doubleClick"),this.Wt(),this.f.Er=e,this.t("doubleClick",t,e))}get contextClick(){return this.f!==null?this.f.Br:null}set contextClick(e){const t=this.contextClick;t!==e&&(e!==null&&u.C(e,qt,"contextClick"),this.Wt(),this.f.Br=e,this.t("contextClick",t,e))}get mouseEnter(){return this.f!==null?this.f.Yr:null}set mouseEnter(e){const t=this.mouseEnter;t!==e&&(e!==null&&u.C(e,qt,"mouseEnter"),this.Wt(),this.f.Yr=e,this.t("mouseEnter",t,e))}get mouseLeave(){return this.f!==null?this.f.Kr:null}set mouseLeave(e){const t=this.mouseLeave;t!==e&&(e!==null&&u.C(e,qt,"mouseLeave"),this.Wt(),this.f.Kr=e,this.t("mouseLeave",t,e))}get mouseOver(){return this.f!==null?this.f.Ur:null}set mouseOver(e){const t=this.mouseOver;t!==e&&(e!==null&&u.C(e,qt,"mouseOver"),this.Wt(),this.f.Ur=e,this.t("mouseOver",t,e))}get mouseHover(){return this.f!==null?this.f.Vr:null}set mouseHover(e){const t=this.mouseHover;t!==e&&(e!==null&&u.C(e,qt,"mouseHover"),this.Wt(),this.f.Vr=e,this.t("mouseHover",t,e))}get mouseHold(){return this.f!==null?this.f.zr:null}set mouseHold(e){const t=this.mouseHold;t!==e&&(e!==null&&u.C(e,qt,"mouseHold"),this.Wt(),this.f.zr=e,this.t("mouseHold",t,e))}get mouseDragEnter(){return this.f!==null?this.f.U0:null}set mouseDragEnter(e){const t=this.mouseDragEnter;t!==e&&(e!==null&&u.C(e,qt,"mouseDragEnter"),this.Wt(),this.f.U0=e,this.t("mouseDragEnter",t,e))}get mouseDragLeave(){return this.f!==null?this.f.V0:null}set mouseDragLeave(e){const t=this.mouseDragLeave;t!==e&&(e!==null&&u.C(e,qt,"mouseDragLeave"),this.Wt(),this.f.V0=e,this.t("mouseDragLeave",t,e))}get mouseDrop(){return this.f!==null?this.f.Xr:null}set mouseDrop(e){const t=this.mouseDrop;t!==e&&(e!==null&&u.C(e,qt,"mouseDrop"),this.Wt(),this.f.Xr=e,this.t("mouseDrop",t,e))}get actionDown(){return this.f!==null?this.f.z0:null}set actionDown(e){const t=this.actionDown;t!==e&&(e!==null&&u.C(e,qt,"actionDown"),this.Wt(),this.f.z0=e,this.t("actionDown",t,e))}get actionMove(){return this.f!==null?this.f.X0:null}set actionMove(e){const t=this.actionMove;t!==e&&(e!==null&&u.C(e,qt,"actionMove"),this.Wt(),this.f.X0=e,this.t("actionMove",t,e))}get actionUp(){return this.f!==null?this.f.Y0:null}set actionUp(e){const t=this.actionUp;t!==e&&(e!==null&&u.C(e,qt,"actionUp"),this.Wt(),this.f.Y0=e,this.t("actionUp",t,e))}get actionCancel(){return this.f!==null?this.f.K0:null}set actionCancel(e){const t=this.actionCancel;t!==e&&(e!==null&&u.C(e,qt,"actionCancel"),this.Wt(),this.f.K0=e,this.t("actionCancel",t,e))}get toolTip(){return this.f!==null?this.f.Gr:null}set toolTip(e){const t=this.toolTip;t!==e&&(this.Wt(),this.f.Gr=e,this.t("toolTip",t,e))}get contextMenu(){return this.f!==null?this.f.Hr:null}set contextMenu(e){const t=this.contextMenu;t!==e&&(this.Wt(),this.f.Hr=e,this.t("contextMenu",t,e))}findBindingPanel(){let e=this instanceof Kt?this:this.panel;for(;e!==null;){if(e.w2())return e;e=e.panel}return null}bind(e,t,i,n){return this.lf(e,t,i,n),this}bindTwoWay(e,t,i,n){return this.lf(e,t,i,n).makeTwoWay(),this}bindModel(e,t,i,n){return this.lf(e,t,i,n).ofModel(),this}bindObject(e,t,i,n,s){return this.lf(e,t,i,n).ofObject(s),this}theme(e,t,i,n,s){return this.bh(e,t,i,n,s),this}themeData(e,t,i,n,s){return this.bh(e,t,i,n,s).ofData(),this}themeObject(e,t,i,n,s,r){return this.bh(e,t,i,n,s).ofObject(r),this}themeModel(e,t,i,n,s){return this.bh(e,t,i,n,s).ofModel(),this}lf(e,t,i,n){let s=null;return typeof e=="string"?s=new ms(e,t,i,n):s=e,this.G0(s),s}bh(e,t,i,n,s){let r=null;return typeof e=="string"?r=new wr(e,t,i,n,s):r=e,this.G0(r),r}G0(e){e.Me=this;const t=this.findBindingPanel();t!==null&&t.PA()&&u.o("Cannot add a Binding to a template that has already been copied: "+e),this.Ti===null&&(this.Ti=new H),this.Ti.add(e)}set(e){return Object.assign(this,e),this}attach(e){return qt.b2(this,e),this}apply(e){return e(this),this}setProperties(e){return ge.r0(this,e),this}static make(e,...t){let i=arguments,n=null,s=null;if(u.lt(e))s=e;else if(typeof e=="string"){const A=qt.Vb.get(e);u.lt(A)?(i=Array.prototype.slice.call(i),n=A(i),u.j(n)||u.o('GraphObject.make invoked object builder "'+e+'", but it did not return an Object')):s=y.go[e]}n===null&&((s==null||!s.constructor)&&u.o("GraphObject.make requires a class function or GoJS class name or name of an object builder, not: "+e),n=new s);let r=1;if(n instanceof ge&&i.length>1){const A=n,o=i[1];(typeof o=="string"||o instanceof HTMLDivElement)&&(A.xM(o),r++)}for(let A=r;A<i.length;A++){const o=i[A];o===void 0?u.o("Undefined value at argument "+A+" for object being constructed by GraphObject.make: "+n):qt.b2(n,o)}return n}static b2(e,t){if(typeof t=="number")qt.JR(e,t);else if(typeof t=="string")qt.$R(e,t);else if(t instanceof qt)e instanceof Kt||u.o("A GraphObject can only be added to a Panel, not to: "+e),e.add(t);else if(t instanceof je){let i;t.isRow&&u.lt(e.getRowDefinition)?i=e.getRowDefinition(t.index):!t.isRow&&u.lt(e.getColumnDefinition)&&(i=e.getColumnDefinition(t.index)),i instanceof je?i.zb(t):u.o("A RowColumnDefinition can only be added to an object that implements getRowDefinition/getColumnDefinition, not to: "+e)}else if(t instanceof xe){const i=e;i.type=t}else if(t instanceof ms)e instanceof qt||e instanceof je?e.bind(t):u.o("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+e);else if(t instanceof cs)e instanceof qt?e.trigger(t):u.o("An AnimationTrigger can only be applied to a GraphObject, not to: "+e);else if(t instanceof ve)e instanceof Jt&&e.type===4?e.figures.add(t):u.o("A PathFigure can only be added to a Path Geometry, not to: "+e);else if(t instanceof Nt)e instanceof ve?e.segments.add(t):u.o("A PathSegment can only be added to a PathFigure, not to: "+e);else if(t instanceof Ni)e instanceof ge||e instanceof Vt?e.layout=t:u.o("A Layout can only be assigned to a Diagram or a Group, not to: "+e);else if(Array.isArray(t))for(let i=0;i<t.length;i++){const n=t[i];qt.b2(e,n)}else u.j(t)?qt.ZR(e,t):u.o('Unknown initializer "'+t+'" for object being constructed by GraphObject.make: '+e)}static $R(e,t){if(e instanceof We)e.text=t;else if(e instanceof Zt)e.figure=t;else if(e instanceof pn)e.source=t;else if(e instanceof Kt){const i=xe.os.get(t);i!==null&&(e.type=i)}else if(e instanceof Qe){const i=u.Yh(Zn,t);i!==null?e.type=i:u.o("Unknown Brush type as an argument to GraphObject.make: "+t)}else if(e instanceof Jt){const i=u.Yh(me,t);i!==null&&(e.type=i)}else if(e instanceof Nt){const i=u.Yh($e,t);i!==null&&(e.type=i)}}static JR(e,t){u.lt(e.li)?e.li(t):u.ur(e,t)}static ZR(e,t){if(e instanceof Qe){const i=new v;for(const n in t){const s=parseFloat(n);isNaN(s)?i[n]=t[n]:e.addColorStop(s,t[n])}ge.r0(e,i)}else if(e instanceof je){if(t.row!==void 0){const n=t.row;(n==null||n===1/0||isNaN(n)||n<0)&&u.o("Must specify non-negative integer row for RowColumnDefinition "+t+", not: "+n),e.isRow=!0,e.index=n}else if(t.column!==void 0){const n=t.column;(n==null||n===1/0||isNaN(n)||n<0)&&u.o("Must specify non-negative integer column for RowColumnDefinition "+t+", not: "+n),e.isRow=!1,e.index=n}const i=new v;for(const n in t)n==="row"||n==="column"||(i[n]=t[n]);ge.r0(e,i)}else ge.r0(e,t)}static build(e,t,...i){const n=qt.Vb.get(e);if(u.lt(n)){const s=n([e].concat(i));if(s instanceof qt)return t&&s.setProperties(t),s}u.o('GraphObject.build invoked object builder "'+e+'", but it did not return an Object')}static defineBuilder(e,t){u.s(e,"string",qt,"defineBuilder:name"),u.C(t,qt,"defineBuilder:func"),e.toLowerCase(),qt.Vb.set(e,t)}static isBuilderDefined(e){return qt.Vb.has(e)}static takeBuilderArgument(e,t,i){i===void 0&&(i=null);const n=e[1];return(u.lt(i)?i(n):typeof n=="string")?(e.splice(1,1),n):(t===void 0&&u.o("no "+(u.lt(i)?"satisfactory":"string")+" argument for GraphObject builder "+e[0]),t)}};p(qt,"None",0),p(qt,"Default",1),p(qt,"Fill",2),p(qt,"Vertical"),p(qt,"Horizontal"),p(qt,"Uniform",6),p(qt,"UniformToFill",7),p(qt,"FlipVertical",1),p(qt,"FlipHorizontal",2),p(qt,"FlipBoth",3),p(qt,"Vb",new xt),qt.Vertical=4,qt.Horizontal=5,qt.defineBuilder("Button",e=>{const t="#f5f5f5",i="#737373",n="#d4d4d4",s="#737373",r="#a3a3a3",A=2.76142374915397,o=2.761423749153969,a=new Kt(Kt.Auto,{isActionable:!0,enabledChanged:(h,d)=>{if(h instanceof Kt){const f=h.findObject("ButtonBorder");if(f!==null)if(h._buttonFillNormal===void 0&&(h._buttonFillNormal=f.fill),d){let g=null;h.layer!==null&&h.diagram!==null&&h.isVisibleObject()&&(g=h.layer.findObjectAt(h.diagram.lastInput.documentPoint)),g===h||g!==null&&g.isContainedBy(h)?f.fill=h._buttonFillOver:f.fill=h._buttonFillNormal}else f.fill=h._buttonFillDisabled}},cursor:"pointer"}).attach({_buttonFillNormal:void 0,_buttonStrokeNormal:void 0,_buttonFillOver:n,_buttonStrokeOver:s,_buttonFillDisabled:r}).add(new Zt("RoundedRectangle",{name:"ButtonBorder",spot1:new q(0,0,A,o),spot2:new q(1,1,-2.76142374915397,-2.761423749153969),parameter1:2,fill:t,stroke:i}));return a.mouseEnter=(h,d,f)=>{if(!d.isEnabledObject()||!(d instanceof Kt))return;const g=d.findObject("ButtonBorder");g instanceof Zt&&(d._buttonFillNormal===void 0&&(d._buttonFillNormal=g.fill),g.fill=d._buttonFillOver,d._buttonStrokeNormal===void 0&&(d._buttonStrokeNormal=g.stroke),g.stroke=d._buttonStrokeOver)},a.mouseLeave=(h,d,f)=>{if(!d.isEnabledObject()||!(d instanceof Kt))return;const g=d.findObject("ButtonBorder");g instanceof Zt&&(d._buttonFillNormal!==void 0&&(g.fill=d._buttonFillNormal),d._buttonStrokeNormal!==void 0&&(g.stroke=d._buttonStrokeNormal))},a}),qt.defineBuilder("TreeExpanderButton",e=>{const t=qt.build("Button");return t.attach({_treeExpandedFigure:"MinusLine",_treeCollapsedFigure:"PlusLine",visible:!1}),t.add(new Zt("MinusLine",{name:"ButtonIcon",stroke:"#0a0a0a",strokeWidth:2,desiredSize:ct.au}).bindObject("figure","isTreeExpanded",(i,n)=>{const s=n.panel;return i?s._treeExpandedFigure:s._treeCollapsedFigure})),t.bindObject("visible","isTreeLeaf",i=>!i),t.click=(i,n)=>{let s=n.part;if(s instanceof se&&(s=s.adornedPart),!(s instanceof Et))return;const r=s.diagram;if(r===null)return;const A=r.commandHandler;if(s.isTreeExpanded){if(!A.canCollapseTree(s))return}else if(!A.canExpandTree(s))return;i.handled=!0,s.isTreeExpanded?A.collapseTree(s):A.expandTree(s)},t}),qt.defineBuilder("SubGraphExpanderButton",e=>{const t=qt.build("Button");return t.attach({_subGraphExpandedFigure:"MinusLine",_subGraphCollapsedFigure:"PlusLine"}),t.add(new Zt("MinusLine",{name:"ButtonIcon",stroke:"#0a0a0a",strokeWidth:2,desiredSize:ct.au}).bindObject("figure","isSubGraphExpanded",(i,n)=>{const s=n.panel;return i?s._subGraphExpandedFigure:s._subGraphCollapsedFigure})),t.click=(i,n)=>{let s=n.part;if(s instanceof se&&(s=s.adornedPart),!(s instanceof Vt))return;const r=s.diagram;if(r===null)return;const A=r.commandHandler;if(s.isSubGraphExpanded){if(!A.canCollapseSubGraph(s))return}else if(!A.canExpandSubGraph(s))return;i.handled=!0,s.isSubGraphExpanded?A.collapseSubGraph(s):A.expandSubGraph(s)},t}),qt.defineBuilder("ToolTip",e=>new se(Kt.Auto,{isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new T(0,2)}).add(new Zt("RoundedRectangle",{name:"Border",parameter1:1,fill:"#f5f5f5",strokeWidth:0,spot1:new q(0,0,4,6),spot2:new q(1,1,-4,-4)}))),qt.defineBuilder("ContextMenu",e=>new se(Kt.Vertical,{background:"#f5f5f5",isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new T(0,2)}).bindObject("background","",t=>t.adornedPart!==null&&t.hasPlaceholder()?null:"#f5f5f5")),qt.defineBuilder("ContextMenuButton",e=>{const t=qt.build("Button");t.stretch=5;const i=t.findObject("ButtonBorder");return i instanceof Zt&&(i.figure="Rectangle",i.strokeWidth=0,i.spot1=new q(0,0,4,6),i.spot2=new q(1,1,-4,-4)),t}),qt.defineBuilder("PanelExpanderButton",e=>{const t=qt.takeBuilderArgument(e,"COLLAPSIBLE"),i=qt.build("Button");i.attach({_buttonExpandedFigure:"M0 0 M0 6 L4 2 8 6 M8 8",_buttonCollapsedFigure:"M0 0 M0 2 L4 6 8 2 M8 8","ButtonBorder.fill":"rgba(0, 0, 0, 0)",_buttonFillNormal:"rgba(0, 0, 0, 0)","ButtonBorder.stroke":null,_buttonStrokeNormal:null,_buttonFillOver:"rgba(0, 0, 0, .2)",_buttonStrokeOver:null}),i.add(new Zt({name:"ButtonIcon",strokeWidth:2}).bindObject("geometryString","visible",s=>s?i._buttonExpandedFigure:i._buttonCollapsedFigure,void 0,t));const n=i.findObject("ButtonBorder");return n instanceof Zt&&(n.stroke=null,n.fill="rgba(0, 0, 0, 0)"),i.click=(s,r)=>{if(!(r instanceof Kt))return;const A=r.diagram;if(A===null||A.isReadOnly)return;let o=r.findBindingPanel();if(o===null&&(o=r.part),o!==null){const a=o.findObject(t);a!==null&&(s.handled=!0,A.startTransaction("Collapse/Expand Panel"),a.visible=!a.visible,A.commitTransaction("Collapse/Expand Panel"))}},i}),qt.defineBuilder("CheckBoxButton",e=>{const t=qt.takeBuilderArgument(e),i=qt.build("Button",{desiredSize:new ct(14,14)});i.attach({"ButtonBorder.spot1":new q(0,0,1,1),"ButtonBorder.spot2":new q(1,1,-1,-1)});const n=new Zt({name:"ButtonIcon",geometryString:"M0 0 M0 8.85 L4.9 13.75 16.2 2.45 M16.2 16.2",strokeWidth:2,stretch:2,geometryStretch:6,visible:!1});return t!==""&&n.bindTwoWay("visible",t),i.add(n),i.click=(s,r)=>{if(!(r instanceof Kt))return;const A=s.diagram;if(A===null||A.isReadOnly||t!==""&&A.model.isReadOnly)return;s.handled=!0;const o=r.findObject("ButtonIcon");A.startTransaction("checkbox"),o!==null&&(o.visible=!o.visible),u.lt(r._doClick)&&r._doClick(s,r),A.commitTransaction("checkbox")},i}),qt.defineBuilder("CheckBox",e=>{const t=qt.takeBuilderArgument(e),i=qt.build("CheckBoxButton",{name:"Button",isActionable:!1,margin:new Rt(0,1,0,0)},t),n=new Kt("Horizontal",{isActionable:!0,cursor:i.cursor,margin:new Rt(1),mouseEnter:i.mouseEnter,mouseLeave:i.mouseLeave,click:i.click}).attach({_buttonFillNormal:i._buttonFillNormal,_buttonStrokeNormal:i._buttonStrokeNormal,_buttonFillOver:i._buttonFillOver,_buttonStrokeOver:i._buttonStrokeOver,_buttonFillDisabled:i._buttonFillDisabled,_buttonClick:i.click});return n.add(i),i.mouseEnter=null,i.mouseLeave=null,i.click=null,n});let Ye=qt;class Qs{constructor(){p(this,"gi");p(this,"Ct");p(this,"io");p(this,"Ti");p(this,"eo");p(this,"js");p(this,"Dl");p(this,"Ir");p(this,"Er");p(this,"Br");p(this,"Yr");p(this,"Kr");p(this,"Ur");p(this,"Vr");p(this,"zr");p(this,"U0");p(this,"V0");p(this,"Xr");p(this,"z0");p(this,"X0");p(this,"Y0");p(this,"K0");p(this,"Gr");p(this,"Hr");p(this,"M0");p(this,"v0");p(this,"bs");p(this,"Nr");p(this,"Cr");p(this,"oo");p(this,"R0");p(this,"F0");p(this,"Mr");p(this,"P0");p(this,"H0");p(this,"j0");this.gi=!1,this.Ct="",this.io=-1,this.Ti=null,this.eo=null,this.js=null,this.Dl="",this.Ir=null,this.Er=null,this.Br=null,this.Yr=null,this.Kr=null,this.Ur=null,this.Vr=null,this.zr=null,this.U0=null,this.V0=null,this.Xr=null,this.z0=null,this.X0=null,this.Y0=null,this.K0=null,this.Gr=null,this.Hr=null,this.M0=null,this.v0=null,this.bs=null,this.Nr=ct.hu,this.Cr=ct.uC,this.oo=1,this.R0=1,this.F0=1,this.Mr=0,this.P0=null,this.H0=null,this.j0="category"}copy(){const e=new Qs;return e.Ct=this.Ct,e.io=this.io,e.Ti=this.Ti,e.js=this.js,e.Dl=this.Dl,e.Ir=this.Ir,e.Er=this.Er,e.Br=this.Br,e.Yr=this.Yr,e.Kr=this.Kr,e.Ur=this.Ur,e.Vr=this.Vr,e.zr=this.zr,e.U0=this.U0,e.V0=this.V0,e.Xr=this.Xr,e.z0=this.z0,e.X0=this.X0,e.Y0=this.Y0,e.K0=this.K0,e.Gr=this.Gr,e.Hr=this.Hr,e.M0=this.M0,e.v0=this.v0,e.bs=this.bs,e.Nr=this.Nr.N(),e.Cr=this.Cr.N(),e.oo=this.oo,e.R0=this.R0,e.F0=this.F0,e.Mr=this.Mr,e.P0=this.P0,e.H0=this.H0,e.j0=this.j0,e}}class Us{constructor(){p(this,"m");this.m=[1,0,0,1,0,0]}copy(){const e=new Us;return e.m[0]=this.m[0],e.m[1]=this.m[1],e.m[2]=this.m[2],e.m[3]=this.m[3],e.m[4]=this.m[4],e.m[5]=this.m[5],e}translate(e,t){this.m[4]+=this.m[0]*e+this.m[2]*t,this.m[5]+=this.m[1]*e+this.m[3]*t}scale(e,t){this.m[0]*=e,this.m[1]*=e,this.m[2]*=t,this.m[3]*=t}rotate(e,t,i){if(e>=360?e-=360:e<0&&(e+=360),e===0)return;this.translate(t,i);let n=0,s=0;if(e===90)n=0,s=1;else if(e===180)n=-1,s=0;else if(e===270)n=0,s=-1;else{const h=e*Math.PI/180;n=Math.cos(h),s=Math.sin(h)}const r=this.m[0]*n+this.m[2]*s,A=this.m[1]*n+this.m[3]*s,o=this.m[0]*-s+this.m[2]*n,a=this.m[1]*-s+this.m[3]*n;this.m[0]=r,this.m[1]=A,this.m[2]=o,this.m[3]=a,this.translate(-t,-i)}}class Gs{constructor(e){p(this,"type");p(this,"x1");p(this,"y1");p(this,"r1");p(this,"x2");p(this,"y2");p(this,"r2");p(this,"colors");p(this,"pattern");this.type=e,this.x1=0,this.y1=0,this.r1=0,this.x2=0,this.y2=0,this.r2=0,this.colors=[],this.pattern=null}addColorStop(e,t){this.colors.push({offset:e,color:t})}}class gs{constructor(e,t,i){p(this,"Ot");p(this,"ai");p(this,"pa");p(this,"qu");p(this,"k2");const n=t===void 0?y.document:t;this.pa=n,this.k2="http://www.w3.org/2000/svg";const s="http://www.w3.org/2000/xmlns/";n!==void 0&&(this.Ot=this.makeElement("svg",{width:"1px",height:"1px",viewBox:"0 0 1 1"}),this.style.display="block",this.style.letterSpacing="normal",this.style.wordSpacing="normal",i||(this.style.position="absolute"),this.Ot.setAttributeNS(s,"xmlns",this.k2),this.Ot.setAttributeNS(s,"xmlns:xlink","http://www.w3.org/1999/xlink")),this.qu=null,this.ai=new qi(this,i)}resize(e,t,i,n){return this.width!==e||this.height!==t?(this.width=e,this.height=t,this.style.width=i+"px",this.style.height=n+"px",this.Ot.setAttributeNS(null,"width",i+"px"),this.Ot.setAttributeNS(null,"height",n+"px"),this.Ot.setAttributeNS(null,"viewBox","0 0 "+i+" "+n),this.ai.P2.firstElementChild.setAttributeNS(null,"width",i+"px"),this.ai.P2.firstElementChild.setAttributeNS(null,"height",n+"px"),!0):!1}makeElement(e,t,i){const n=this.pa.createElementNS(this.k2,e);if(u.j(t))for(const s in t)n.setAttributeNS(s==="href"?"http://www.w3.org/1999/xlink":"",s,t[s]);return i!==void 0&&(n.textContent=i),n}getBoundingClientRect(){return this.Ot.getBoundingClientRect()}focus(){this.Ot.focus()}get width(){return this.Ot.width.baseVal.value}set width(e){this.Ot.setAttribute("width",e+"px")}get height(){return this.Ot.height.baseVal.value}set height(e){this.Ot.setAttribute("height",e+"px")}dispose(){this.pa=null}get style(){return this.Ot.style}}class qi{constructor(e,t){p(this,"hf");p(this,"af");p(this,"kn");p(this,"Di");p(this,"Ke");p(this,"fillStyle");p(this,"font");p(this,"globalAlpha");p(this,"lineCap");p(this,"lineDashOffset");p(this,"lineJoin");p(this,"lineWidth");p(this,"miterLimit");p(this,"shadowBlur");p(this,"shadowColor");p(this,"shadowOffsetX");p(this,"shadowOffsetY");p(this,"strokeStyle");p(this,"textAlign");p(this,"imageSmoothingEnabled");p(this,"clipInsteadOfFill");p(this,"lastCreatedElement");p(this,"cf");p(this,"ff");p(this,"surface");p(this,"svg");p(this,"P2");p(this,"SA");p(this,"Xb");p(this,"Ko");p(this,"kh");p(this,"Aa");p(this,"currentElement");p(this,"clipPathGroup");p(this,"diagramGroup");p(this,"lastDrawnPart");p(this,"currentPath");p(this,"outerGroup");p(this,"pathAttributes");p(this,"rl");p(this,"Dr");p(this,"filter");p(this,"partClipRect");this.surface=e,this.svg=e.Ot,this.cf=[],this.ff=[],this.fillStyle="#000000",this.font="10px sans-serif",this.globalAlpha=1,this.lineCap="butt",this.lineDashOffset=0,this.lineJoin="miter",this.lineWidth=1,this.miterLimit=10,this.shadowBlur=0,this.shadowColor="rgba(0, 0, 0, 0)",this.shadowOffsetX=0,this.shadowOffsetY=0,this.rl=!1,this.strokeStyle="#000000",this.textAlign="start",this.clipInsteadOfFill=!1,this.hf=0,this.af=0,this.kn=0,this.lastCreatedElement=null,this.currentElement=null,this.Di=[],this.pathAttributes={},this.Xb=!1,this.Ko=null,this.kh=0,this.Ke=new Us,this.clipPathGroup=this.newGroup2(),this.diagramGroup=this.newGroup2("gojs-diagram"),this.lastDrawnPart=null,this.currentPath=null;const i=X.uw++,n=this.makeElement("clipPath",{id:"mainClip"+i}),s={x:0,y:0,width:e.width,height:e.height};n.appendChild(this.makeElement("rect",s)),this.P2=n,this.svg.appendChild(this.clipPathGroup),this.clipPathGroup.appendChild(this.diagramGroup),this.svg.appendChild(n),this.clipPathGroup.setAttributeNS(null,"clip-path","url(#mainClip"+i+")"),this.SA={},this.Dr=!!t,this.filter="",this.partClipRect=null}setDiagramPosScale(e,t,i,n,s,r){this.diagramGroup===void 0?this.newGroup(e,t,i,n,s,r):this.diagramGroup.setAttribute("transform","matrix("+e+", "+t+", "+i+", "+n+", "+s+", "+r+")")}resetInnerSVG(){this.diagramGroup!==null&&(this.diagramGroup.innerHTML="")}arc(e,t,i,n,s,r,A,o){const a=2*Math.PI,h=1e-6,d=a-h,f=i*Math.cos(n),g=i*Math.sin(n),x=e+f,B=t+g,C=r?0:1;let F=r?n-s:s-n;(Math.abs(A-x)>h||Math.abs(o-B)>h)&&this.Di.push(["L",x,+B]),F<0&&(F=F%a+a),F>d?(this.Di.push(["A",i,i,0,1,C,e-f,t-g]),this.Di.push(["A",i,i,0,1,C,x,B])):F>h&&this.Di.push(["A",i,i,0,+(F>=Math.PI),C,e+i*Math.cos(s),t+i*Math.sin(s)])}beginPath(){this.Di=[],this.pathAttributes={stroke:"none",fill:"none"}}endPath(e){this.QR(this.Di,this.Ke,e||0)}bezierCurveTo(e,t,i,n,s,r){this.Di.push(["C",e,t,i,n,s,r])}clearRect(e,t,i,n){}clip(){this.pathAttributes.clipPath=!0}closePath(){this.Di.push(["z"])}createLinearGradient(e,t,i,n){const s=new Gs("linear");return s.x1=e,s.y1=t,s.x2=i,s.y2=n,s}createPattern(e,t){let i="";e instanceof HTMLCanvasElement&&(i=e.toDataURL()),e instanceof HTMLImageElement&&(i=e.getAttribute("src"));const n=this.SA;if(n[i])return"url(#"+n[i]+")";const s="PATTERN"+X.uw++,r={width:e.width,height:e.height,id:s,patternUnits:"userSpaceOnUse"},A={x:0,y:0,width:e.width,height:e.height,href:i},o=this.makeElement("pattern",r);return o.appendChild(this.makeElement(ge.img,A)),this.svg.appendChild(o),n[i]=s,"url(#"+s+")"}createRadialGradient(e,t,i,n,s,r){const A=new Gs("radial");return A.x1=e,A.y1=t,A.r1=i,A.x2=n,A.y2=s,A.r2=r,A}amendImageTransform(e,t,i,n,s,r,A,o){const a=A/i,h=o/n;(s!==0||r!==0)&&this.Ke.translate(s,r),(a!==1||h!==1)&&this.Ke.scale(a,h),(e!==0||t!==0)&&this.Ke.translate(-e,-t)}drawImage(e,t,i,n,s,r,A,o,a){let h="";e instanceof HTMLCanvasElement&&(h=e.toDataURL()),e instanceof HTMLImageElement&&(h=e.getAttribute("src"));const d=e instanceof HTMLImageElement?e.naturalWidth:e.width,f=e instanceof HTMLImageElement?e.naturalHeight:e.height;n===void 0&&(r=t,A=i,o=n=d,a=s=f),n=n||0,s=s||0,r=r||0,A=A||0,o=o||0,a=a||0,this.amendImageTransform(t,i,n,s,r,A,o,a);const g={x:0,y:0,width:d||n,height:f||s,href:h};!V.K(n,o)||!V.K(s,a)?g.preserveAspectRatio="none":h.toLowerCase().indexOf(".svg")===-1&&h.toLowerCase().indexOf("data:image/svg")===-1&&(g.preserveAspectRatio="xMidYMid slice"),(t!==0||i!==0||n!==d||s!==f)&&(n+=t,s+=i,g["clip-path"]=`path('M ${t},${i} L ${n} ${i} L ${n} ${s} L ${t} ${s} z')`),this.processCommon(ge.img,g,this.Ke),this.nd(ge.img,g)}fill(e,t){e&&(this.pathAttributes["fill-rule"]="evenodd"),this.setFill(this.pathAttributes)}fillContext(e,t,i){this.clipInsteadOfFill?this.clip():this.fill(t,i)}createOrUpdateClipGroup(e,t){const i=this.newGroup(1,0,0,1,-t.x,-t.y);i.setAttributeNS(null,"class","spotClip"),e.gh=i}fillRect(e,t,i,n){this.addRect("fill",[e,t,i,n],this.Ke)}fillBackground(e,t,i,n){const s={x:e,y:t,width:i,height:n};this.processCommon("fill",s,this.Ke),this.setFill(s),this.svg.prepend(this.makeElement("rect",s))}fillText(e,t,i){this.addText("fill",[e,t,i],this.Ke)}lineTo(e,t){this.Di.push(["L",e,t])}moveTo(e,t){this.Di.push(["M",e,t])}quadraticCurveTo(e,t,i,n){this.Di.push(["Q",e,t,i,n])}rect(e,t,i,n){this.Di.push(["M",e,t],["L",e+i,t],["L",e+i,t+n],["L",e,t+n],["z"])}restore(){this.Ke=this.cf.pop(),this.Di=this.cf.pop();const e=this.cf.pop();this.fillStyle=e.fillStyle,this.font=e.font,this.globalAlpha=e.globalAlpha,this.lineCap=e.lineCap,this.lineDashOffset=e.lineDashOffset,this.lineJoin=e.lineJoin,this.lineWidth=e.lineWidth,this.miterLimit=e.miterLimit,this.shadowBlur=e.shadowBlur,this.shadowColor=e.shadowColor,this.shadowOffsetX=e.shadowOffsetX,this.shadowOffsetY=e.shadowOffsetY,this.strokeStyle=e.strokeStyle,this.textAlign=e.textAlign,this.partClipRect=e.partClipRect}save(){const e={fillStyle:this.fillStyle,font:this.font,globalAlpha:this.globalAlpha,lineCap:this.lineCap,lineDashOffset:this.lineDashOffset,lineJoin:this.lineJoin,lineWidth:this.lineWidth,miterLimit:this.miterLimit,shadowBlur:this.shadowBlur,shadowColor:this.shadowColor,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,strokeStyle:this.strokeStyle,textAlign:this.textAlign,partClipRect:this.partClipRect};this.cf.push(e);const t=[];for(let i=0;i<this.Di.length;i++)t.push(this.Di[i]);this.cf.push(t),this.cf.push(this.Ke.copy())}setTransform(e,t,i,n,s,r){e===1&&t===0&&i===0&&n===1&&s===0&&r===0||this.newGroup(e,t,i,n,s,r)}setCurrentTransform(e,t,i,n,s,r){this.Ke.m=[e,t,i,n,s,r]}getCurrentTransform(){const e=this.Ke.m;return"matrix("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}scale(e,t){this.Ke.scale(e,t)}translate(e,t){this.Ke.translate(e,t)}transform(e,t,i,n,s,r){}commitTransform(){}stroke(){this.setStroke(this.pathAttributes)}strokeContext(){this.clipInsteadOfFill||this.stroke()}strokeRect(e,t,i,n){this.addRect("stroke",[e,t,i,n],this.Ke)}makeElement(e,t,i){return this.surface.makeElement(e,t,i)}nd(e,t,i){const n=this.makeElement(e,t,i);return this.currentElement!==null?this.currentElement.appendChild(n):this.currentElement=n,this.lastCreatedElement=n,n}processCommon(e,t,i){if(e==="fill"?this.setFill(t):e==="stroke"&&this.setStroke(t),i!==null){const n=i.m;t.transform="matrix("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+")"}}setFill(e){if(this.fillStyle instanceof Gs){e.fill=this.addGradient(this.fillStyle,!0);return}if(/^rgba\(/.test(this.fillStyle)){const t=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(this.fillStyle);e.fill="rgb("+t[1]+","+t[2]+","+t[3]+")",e["fill-opacity"]=t[4]}else e.fill=this.fillStyle}setFillOrStrokeInPlace(e,t){const i=t?"fill":"stroke";if(this.fillStyle instanceof Gs){e.setAttributeNS(null,"fill",this.addGradient(this.fillStyle,!0));return}if(/^rgba\(/.test(this.fillStyle)){const n=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(this.fillStyle);e.setAttributeNS(null,i,"rgb("+n[1]+","+n[2]+","+n[3]+")"),e.setAttributeNS(null,i+"-opacity",n[4])}else e.setAttributeNS(null,i,this.fillStyle)}setStroke(e){if(this.strokeStyle instanceof Gs)e.stroke=this.addGradient(this.strokeStyle,!1);else if(/^rgba\(/.test(this.strokeStyle)){const t=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(this.strokeStyle);e.stroke="rgb("+t[1]+","+t[2]+","+t[3]+")",e["stroke-opacity"]=t[4]}else e.stroke=this.strokeStyle;e["stroke-width"]=this.lineWidth,e["stroke-linecap"]=this.lineCap,e["stroke-linejoin"]=this.lineJoin,e["stroke-miterlimit"]=this.miterLimit,this.Xb&&(e["stroke-dasharray"]=this.Ko.toString(),e["stroke-dashoffset"]=this.kh)}addGradient(e,t){let i="";const n=this.currentPath!==null?this.currentPath.getAttribute(t?"fill":"stroke"):null;if(n!==null&&n.indexOf("GRAD")!==-1){i=n.split("#")[1].slice(0,-1);const a=this.svg.getElementById(i);a!==null&&a.remove()}else i="GRAD"+X.uw++;let s;if(e.type==="linear"){const a={x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,id:i,gradientUnits:"userSpaceOnUse"};s=this.makeElement("linearGradient",a)}else if(e.type==="radial"){const a={x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,r1:e.r1,r2:e.r2,id:i};s=this.makeElement("radialGradient",a)}else u.o("invalid gradient");const r=e.colors,A=r.length,o=[];for(let a=0;a<A;a++){const h=r[a],d=h.color,f={offset:h.offset,"stop-color":d};if(/^rgba\(/.test(d)){const g=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(d);f["stop-color"]="rgb("+g[1]+","+g[2]+","+g[3]+")",f["stop-opacity"]=g[4]}o.push(f)}o.sort((a,h)=>a.offset>h.offset?1:-1);for(let a=0;a<A;a++)s.appendChild(this.makeElement("stop",o[a]));return this.svg.appendChild(s),"url(#"+i+")"}addRect(e,t,i){const n={x:t[0],y:t[1],width:t[2],height:t[3]};this.processCommon(e,n,i),this.nd("rect",n)}addText(e,t,i){let n=this.textAlign;n==="left"?n="start":n==="right"?n="end":n==="center"&&(n="middle");const s={x:t[1],y:t[2],style:"font: "+this.font,"text-anchor":n};this.processCommon(e,s,i),this.nd("text",s,t[0])}QR(e,t,i){const n=this._R(e),s=this.pathAttributes;if(s.clipPath){this.ff.length>1&&this.ff[this.ff.length-2].setAttributeNS(null,"clip-path",'path("'+n+'") view-box');return}if(s.d=n,this.processCommon("",s,t),this.currentPath!==null){const r=this.currentPath;if(r.nodeName!=="g")for(const A in s)A!=="transform"&&r.setAttributeNS(null,A,s[A]);else{const A=r.getElementsByTagName("path");for(const o in s)o!=="transform"&&A[i].setAttributeNS(null,o,s[o])}}else this.nd("path",s)}_R(e){const t=[];for(let i=0;i<e.length;i++){const n=e[i].slice(),s=[n.shift()];if(s[0]==="A")s.push(n.shift()+","+n.shift(),n.shift(),n.shift()+","+n.shift(),n.shift()+","+n.shift());else for(;n.length;)s.push(n.shift()+","+n.shift());t.push(s.join(" "))}return t.join(" ")}newGroup(e,t,i,n,s,r){const A=new Us;A.m=[e,t,i,n,s,r];const o={};this.processCommon("g",o,A);const a=this.nd("g",o);return this.ff.push(a),a}newGroup2(e){const t={};e&&(t.class=e);const i=this.nd("g",t);return this.ff.push(i),i}endGroup(){return this.ff.pop()}dummyGroup(){return this.newGroup2(),this.endGroup()}shadowsSet(e,t,i){this.hf=e,this.af=t,this.kn=i}shadowsOff(){this.rl=!1,this.shadowOffsetX=0,this.shadowOffsetY=0,this.shadowBlur=0}shadowsOn(){this.rl=!0,this.shadowOffsetX=this.hf,this.shadowOffsetY=this.af,this.shadowBlur=this.kn}enableDash(e,t){this.Xb=!0,this.Ko=e,this.kh=t}disableDash(){this.Xb=!1}clearContextCache(e){}setImageSmoothingEnabled(e){}rotate(e){this.Ke.rotate(e*57.2958,0,0)}getImageData(e,t,i,n){return null}measureText(e){return null}removeOldGradient(e,t,i){const n=t.getAttribute(i);if(n===null)return;const s=n.split("#");if(s.length===1)return;const r=this.svg.getElementById(s[1].slice(0,-1));if(r!==null){const A=new RegExp(r.id,"g");this.svg.innerHTML.match(A).length===1&&r.remove()}}removePartFromView(e){e.svg!==null&&e.svg.parentNode===this.diagramGroup&&e.svg.remove()}}class kn{constructor(e,t,i,n){p(this,"Ot");p(this,"ai");p(this,"pa");p(this,"qu");const s=t===void 0?y.document:t;this.pa=s,this.qu=null;const r=s.createElement("canvas");r.tabIndex=0,this.Ot=r,this.ai=new Ls(r,i,n),ge.is.set(r,e)}resize(e,t,i,n){return this.width!==e||this.height!==t?(this.width=e,this.height=t,this.style.width=i+"px",this.style.height=n+"px",!0):!1}toDataURL(e,t){return this.Ot.toDataURL(e,t)}getBoundingClientRect(){return this.Ot.getBoundingClientRect()}focus(){this.Ot.focus()}get width(){return this.Ot.width}set width(e){this.Ot.width=e}get height(){return this.Ot.height}set height(e){this.Ot.height=e}dispose(){ge.is.delete(this.Ot),this.pa=null}get style(){return this.Ot.style}}const jA=class jA{constructor(e,t,i){p(this,"V");p(this,"Yb");p(this,"Kb");p(this,"Gb");p(this,"clipInsteadOfFill");p(this,"hf");p(this,"af");p(this,"kn");p(this,"Aa");p(this,"rl");p(this,"Dr");this.V=e.getContext?e.getContext("2d",t):null,this.V===null&&u.o("Browser does not support HTML Canvas Element"),this.Yb="",this.Kb="",this.Gb="",this.clipInsteadOfFill=!1,this.hf=0,this.af=0,this.kn=0,this.rl=!1,this.Aa=new Bt,this.Dr=!!i}createOrUpdateClipGroup(e,t){}setImageSmoothingEnabled(e){this.V.imageSmoothingEnabled=e}get fillStyle(){return this.V.fillStyle}set fillStyle(e){this.Gb!==e&&(this.V.fillStyle=e,this.Gb=e)}get font(){return this.V.font}set font(e){this.Yb!==e&&(this.V.font=e,this.Yb=e)}get globalAlpha(){return this.V.globalAlpha}set globalAlpha(e){this.V.globalAlpha=e}get lineCap(){return this.V.lineCap}set lineCap(e){this.V.lineCap=e}get lineDashOffset(){return this.V.lineDashOffset}set lineDashOffset(e){this.V.lineDashOffset=e}get lineJoin(){return this.V.lineJoin}set lineJoin(e){this.V.lineJoin=e}get lineWidth(){return this.V.lineWidth}set lineWidth(e){this.V.lineWidth=e}get miterLimit(){return this.V.miterLimit}set miterLimit(e){this.V.miterLimit=e}get shadowBlur(){return this.V.shadowBlur}set shadowBlur(e){this.V.shadowBlur=e}get shadowColor(){return this.V.shadowColor}set shadowColor(e){this.V.shadowColor=e}get shadowOffsetX(){return this.V.shadowOffsetX}set shadowOffsetX(e){this.V.shadowOffsetX=e}get shadowOffsetY(){return this.V.shadowOffsetY}set shadowOffsetY(e){this.V.shadowOffsetY=e}get strokeStyle(){return this.V.strokeStyle}set strokeStyle(e){this.Kb!==e&&(this.V.strokeStyle=e,this.Kb=e)}get textAlign(){return this.V.textAlign}set textAlign(e){this.V.textAlign=e}get imageSmoothingEnabled(){return this.V.imageSmoothingEnabled}set imageSmoothingEnabled(e){this.V.imageSmoothingEnabled=e}get filter(){return this.V.filter}set filter(e){e===""?this.V.filter="none":this.V.filter=e}arc(e,t,i,n,s,r,A,o){this.V.arc(e,t,i,n,s,r)}beginPath(){this.V.beginPath()}endPath(){}bezierCurveTo(e,t,i,n,s,r){this.V.bezierCurveTo(e,t,i,n,s,r)}clearRect(e,t,i,n){this.commitTransform(),this.V.clearRect(e,t,i,n)}clip(e){e?this.V.clip(e):this.V.clip()}closePath(){this.V.closePath()}createLinearGradient(e,t,i,n){return this.V.createLinearGradient(e,t,i,n)}createPattern(e,t){return this.V.createPattern(e,t)}createRadialGradient(e,t,i,n,s,r){return this.V.createRadialGradient(e,t,i,n,s,r)}drawImage(e,t,i,n,s,r,A,o,a){n===void 0?this.V.drawImage(e,t,i):this.V.drawImage(e,t,i,n,s,r,A,o,a)}fill(e,t){t?this.V.fill(t,e?"evenodd":"nonzero"):this.V.fill(e?"evenodd":"nonzero")}fillRect(e,t,i,n){this.V.fillRect(e,t,i,n)}fillBackground(e,t,i,n){this.V.fillRect(e,t,i,n)}fillText(e,t,i){this.V.fillText(e,t,i)}getImageData(e,t,i,n){return this.V.getImageData(e,t,i,n)}lineTo(e,t){this.V.lineTo(e,t)}measureText(e){return this.V.measureText(e)}moveTo(e,t){this.V.moveTo(e,t)}quadraticCurveTo(e,t,i,n){this.V.quadraticCurveTo(e,t,i,n)}rect(e,t,i,n){this.V.rect(e,t,i,n)}restore(){this.V.restore()}save(){this.commitTransform(),this.V.save()}rotate(e){this.Aa.ds(e*57.2958,0,0)}setTransform(e,t,i,n,s,r){this.Aa.setTo(e,t,i,n,s,r)}scale(e,t){this.Aa.rt(e,t)}translate(e,t){this.Aa.Os(e,t)}stroke(e){e?this.V.stroke(e):this.V.stroke()}transform(e,t,i,n,s,r){if(e===1&&t===0&&i===0&&n===1&&s===0&&r===0)return;const A=this.Aa,o=A.m11*e+A.m21*t,a=A.m12*e+A.m22*t,h=A.m11*i+A.m21*n,d=A.m12*i+A.m22*n;A.dx=A.m11*s+A.m21*r+A.dx,A.dy=A.m12*s+A.m22*r+A.dy,A.m11=o,A.m12=a,A.m21=h,A.m22=d}commitTransform(){const e=this.Aa;this.V.setTransform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy)}fillContext(e,t,i){this.radialFill(e,t,i)||this.fillOrClip(t,i)}radialFill(e,t,i){if(!(e instanceof Qe)||e.type!==3)return!1;const n=e.nf,s=e.Bb;return s>n?(this.scale(n/s,1),this.translate((s-n)/2,0)):n>s&&(this.scale(1,s/n),this.translate(0,(n-s)/2)),this.fillOrClip(t,i),s>n?(this.translate(-(s-n)/2,0),this.scale(1/(n/s),1)):n>s&&(this.translate(0,-(n-s)/2),this.scale(1,1/(s/n))),!0}strokeContext(){this.clipInsteadOfFill||this.stroke()}fillOrClip(e,t){this.clipInsteadOfFill?this.clip(t):this.fill(e,t)}shadowsSet(e,t,i){this.hf=e,this.af=t,this.kn=i}shadowsOff(){this.rl=!1,this.shadowOffsetX=0,this.shadowOffsetY=0,this.shadowBlur=0}shadowsOn(){this.rl=!0,this.shadowOffsetX=this.hf,this.shadowOffsetY=this.af,this.shadowBlur=this.kn}enableDash(e,t){const i=this.V;i.setLineDash!==void 0&&(i.setLineDash(e),i.lineDashOffset=t)}disableDash(){const e=this.V;e.setLineDash!==void 0&&(e.setLineDash(jA.EmptyArray),e.lineDashOffset=0)}clearContextCache(e){e&&(this.Yb=""),this.Kb="",this.Gb=""}removePartFromView(e){}};p(jA,"EmptyArray",Object.freeze([]));let Ls=jA;var Zn=(k=>(k[k.Solid=1]="Solid",k[k.Linear=2]="Linear",k[k.Radial=3]="Radial",k[k.Pattern=4]="Pattern",k))(Zn||{}),QA=(k=>(k[k.Lab=1]="Lab",k[k.HSL=2]="HSL",k[k.Oklch=3]="Oklch",k))(QA||{});class ur{constructor(){p(this,"n0");p(this,"n1");p(this,"n2");p(this,"n3");this.n0=0,this.n1=0,this.n2=0,this.n3=0}}const $=class ${constructor(e,t){p(this,"h");p(this,"_");p(this,"Ta");p(this,"ni");p(this,"ys");p(this,"q0");p(this,"W0");p(this,"Go");p(this,"J0");p(this,"xn");p(this,"nf");p(this,"Bb");if(X.qi(this),this.h=!1,e===void 0)this._=1,this.Ta="black";else if(typeof e=="string"){const n=u.Yh(Zn,e);n!==null?(this._=n,this.Ta="black"):(this._=1,this.Ta=e)}else this._=e,this.Ta="black";const i=this._;if(i===2?(this.ni=q.TopCenter,this.ys=q.BottomCenter):i===3?(this.ni=q.Center,this.ys=q.Center):(this.ni=q.None,this.ys=q.None),this.q0=0,this.W0=NaN,this.Go=null,this.J0=null,this.xn=null,this.nf=0,this.Bb=0,t){const n={};for(const s in t)isFinite(parseFloat(s))?this.addColorStop(parseFloat(s),t[s]):n[s]=t[s];Object.assign(this,n)}}copy(){const e=new $;return e._=this._,e.Ta=this.Ta,e.ni=this.ni.N(),e.ys=this.ys.N(),e.q0=this.q0,e.W0=this.W0,this.Go!==null&&(e.Go=this.Go.copy()),e.J0=this.J0,e}g(){return this.h=!0,this.Go!==null&&this.Go.g(),this}li(e){e in Zn?this.type=e:u.ur(this,e)}toString(){let e="Brush(";if(this.type===1)e+=this.color;else if(this.type===2?e+="Linear ":this.type===3?e+="Radial ":this.type===4?e+="Pattern ":e+="(unknown) ",e+=this.start+" "+this.end,this.colorStops!==null){const t=this.colorStops.iterator;for(;t.next();){const i=t.key,n=t.value;e+=" "+i+":"+n}}return e+=")",e}addColorStop(e,t){return this.h&&u.D(this),(typeof e!="number"||!isFinite(e)||e>1||e<0)&&u.it(e,"0 <= loc <= 1",$,"addColorStop:loc"),u.s(t,"string",$,"addColorStop:color"),this.Go===null&&(this.Go=new xt),this.Go.set(e,t),this._===1&&(this.type=2),this.xn=null,this}get type(){return this._}set type(e){this.h&&u.D(this,e),this._=e,this.start.isNoSpot()&&(e===2?this.start=q.TopCenter:e===3&&(this.start=q.Center)),this.end.isNoSpot()&&(e===2?this.end=q.BottomCenter:e===3&&(this.end=q.Center)),this.xn=null}get color(){return this.Ta}set color(e){this.h&&u.D(this,e),this.Ta=e,this.xn=null}get start(){return this.ni}set start(e){this.h&&u.D(this,e),this.ni=e.N(),this.xn=null}get end(){return this.ys}set end(e){this.h&&u.D(this,e),this.ys=e.N(),this.xn=null}get startRadius(){return this.q0}set startRadius(e){this.h&&u.D(this,e),e<0&&u.it(e,">= zero",$,"startRadius"),this.q0=e,this.xn=null}get endRadius(){return this.W0}set endRadius(e){this.h&&u.D(this,e),e<0&&u.it(e,">= zero",$,"endRadius"),this.W0=e,this.xn=null}get colorStops(){return this.Go}set colorStops(e){this.h&&u.D(this,e),this.Go=e,this.xn=null}get pattern(){return this.J0}set pattern(e){this.h&&u.D(this,e),this.J0=e,this.xn=null}static randomColor(e,t){e===void 0&&(e=128),t===void 0&&(t=Math.max(e,255));const i=Math.abs(t-e);let n=Math.floor(e+Math.random()*i).toString(16),s=Math.floor(e+Math.random()*i).toString(16),r=Math.floor(e+Math.random()*i).toString(16);return n.length<2&&(n="0"+n),s.length<2&&(s="0"+s),r.length<2&&(r="0"+r),"#"+n+s+r}static isValidColor(e){return y.CSS?y.CSS.supports("color",e):!0}static lighten(e){return $.lightenBy(e)}lightenBy(e,t){this.h&&u.D(this);const i=e===void 0||typeof e!="number"?.2:e,n=t===void 0?3:t;if(this.type===1)$.vo(this.color),this.color=$.od(i,n);else if((this.type===2||this.type===3)&&this.colorStops!==null){const s=this.colorStops.iterator;for(;s.next();)$.vo(s.value),this.addColorStop(s.key,$.od(i,n))}return this}static lightenBy(e,t,i){const n=t===void 0||typeof t!="number"?.2:t,s=i===void 0?3:i;return $.vo(e),$.od(n,s)}static darken(e){return $.darkenBy(e)}darkenBy(e,t){this.h&&u.D(this);const i=e===void 0||typeof e!="number"?.2:e,n=t===void 0?3:t;if(this.type===1)$.vo(this.color),this.color=$.od(-i,n);else if((this.type===2||this.type===3)&&this.colorStops!==null){const s=this.colorStops.iterator;for(;s.next();)$.vo(s.value),this.addColorStop(s.key,$.od(-i,n))}return this}static darkenBy(e,t,i){const n=t===void 0||typeof t!="number"?.2:t,s=i===void 0?3:i;return $.vo(e),$.od(-n,s)}static mix(e,t,i){$.vo(e);const n=$.H.n0,s=$.H.n1,r=$.H.n2,A=$.H.n3;$.vo(t),i===void 0&&(i=.5);const o=Math.round(($.H.n0-n)*i+n),a=Math.round(($.H.n1-s)*i+s),h=Math.round(($.H.n2-r)*i+r),d=Math.round(($.H.n3-A)*i+A);return`rgba(${o}, ${a}, ${h}, ${d})`}isDark(){if(this.type===1)return $.isDark(this.color);if((this.type===2||this.type===3)&&this.colorStops!==null){const e=this.colorStops;if(this.type===3)return $.isDark(e.first().value);if(e.get(.5)!==null)return $.isDark(e.get(.5));if(e.count===2){const o=e.toArray();return $.isDark($.mix(o[0].value,o[1].value))}const t=e.iterator;let i=-1,n=-1,s=1,r=1;for(;t.next();){const o=t.key,a=Math.abs(.5-t.key);s>r&&a<s?(i=o,s=a):r>=s&&a<r&&(n=o,r=a)}if(i>n){let o=i;i=n,n=o,o=s,s=r,r=o}const A=n-i;return $.isDark($.mix(e.get(i),e.get(n),1-r/A))}return!1}static isDark(e){return e?e instanceof $?e.isDark():($.vo(e),(299*$.H.n0+587*$.H.n1+114*$.H.n2)/1e3<128):!1}static od(e,t){switch(t){case 1:return $.tv(),$.ro.n0=Math.min(100,Math.max(0,$.ro.n0+100*e)),$.iv(),"rgba("+$.H.n0+", "+$.H.n1+", "+$.H.n2+", "+$.H.n3+")";case 2:return $.BS(),$.Ui.n2=Math.min(100,Math.max(0,$.Ui.n2+100*e)),"hsla("+$.Ui.n0+", "+$.Ui.n1+"%, "+$.Ui.n2+"%, "+$.Ui.n3+")";case 3:return $.ev(),$.lo.n0=Math.min(100,Math.max(0,$.lo.n0+100*e)),$.sv(),"rgba("+$.H.n0+", "+$.H.n1+", "+$.H.n2+", "+$.H.n3+")";default:u.o("Unknown color space: "+t)}}static vo(e){const t=$.ll;if(t===null)return;t.clearRect(0,0,1,1),t.fillStyle="#000000";const i=t.fillStyle;if(t.fillStyle=e,t.fillStyle!==i){t.fillRect(0,0,1,1);const n=t.getImageData(0,0,1,1).data;$.H.n0=n[0],$.H.n1=n[1],$.H.n2=n[2],$.H.n3=n[3]/255}else t.fillStyle="#FFFFFF",t.fillStyle,t.fillStyle=e,t.fillStyle,$.H.n0=0,$.H.n1=0,$.H.n2=0,$.H.n3=1}static BS(){const e=$.H.n0/255,t=$.H.n1/255,i=$.H.n2/255,n=Math.max(e,t,i),s=Math.min(e,t,i),r=n-s;let A,o;const a=(n+s)/2;if(r===0)A=o=0;else{switch(n){case e:A=(t-i)/r%6;break;case t:A=(i-e)/r+2;break;case i:A=(e-t)/r+4;break}A*=60,A<0&&(A+=360),o=r/(1-Math.abs(2*a-1))}$.Ui.n0=Math.round(A),$.Ui.n1=Math.round(o*100),$.Ui.n2=Math.round(a*100),$.Ui.n3=$.H.n3}static ME(){const e=$.Ui.n0,t=$.Ui.n1/100,i=$.Ui.n2/100;let n,s,r;const A=(1-Math.abs(2*i-1))*t,o=e/60,a=A*(1-Math.abs(o%2-1));o>=0&&o<1?(n=A,s=a,r=0):o>=1&&o<2?(n=a,s=A,r=0):o>=2&&o<3?(n=0,s=A,r=a):o>=3&&o<4?(n=0,s=a,r=A):o>=4&&o<5?(n=a,s=0,r=A):o>=5&&o<6&&(n=A,s=0,r=a);const h=i-.5*A;n+=h,s+=h,r+=h,$.H.n0=Math.round(n*255),$.H.n1=Math.round(s*255),$.H.n2=Math.round(r*255),$.H.n3=$.Ui.n3}static tv(){$.MA(),$.nv()}static iv(){$.ov(),$.NA()}static S2(e){return e/=255,e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}static M2(e){return e<=.0031308?e*12.92:1.055*Math.pow(e,1/2.4)-.055}static MA(){const e=$.S2($.H.n0),t=$.S2($.H.n1),i=$.S2($.H.n2);$.It.n0=.4124564*e+.3575761*t+.1804375*i,$.It.n1=.2126729*e+.7151522*t+.072175*i,$.It.n2=.0193339*e+.119192*t+.9503041*i,$.It.n3=$.H.n3}static NA(){const e=3.2404542*$.It.n0+-1.5371385*$.It.n1+-.4985314*$.It.n2,t=-.969266*$.It.n0+1.8760108*$.It.n1+.041556*$.It.n2,i=.0556434*$.It.n0+-.2040259*$.It.n1+1.0572252*$.It.n2;$.H.n0=$.M2(e)*255,$.H.n1=$.M2(t)*255,$.H.n2=$.M2(i)*255,$.H.n3=$.It.n3,$.H.n0=Math.round($.H.n0),$.H.n0>255?$.H.n0=255:$.H.n0<0&&($.H.n0=0),$.H.n1=Math.round($.H.n1),$.H.n1>255?$.H.n1=255:$.H.n1<0&&($.H.n1=0),$.H.n2=Math.round($.H.n2),$.H.n2>255?$.H.n2=255:$.H.n2<0&&($.H.n2=0)}static C2(e){return e>$.N2?Math.pow(e,1/3):($.Hb*e+16)/116}static nv(){const e=$.C2($.It.n0*100/$.rd[0]),t=$.C2($.It.n1*100/$.rd[1]),i=$.C2($.It.n2*100/$.rd[2]);$.ro.n0=116*t-16,$.ro.n1=500*(e-t),$.ro.n2=200*(t-i),$.ro.n3=$.It.n3}static CA(e){const t=e*e*e;return t>$.N2?t:(116*e-16)/$.Hb}static ov(){const e=($.ro.n0+16)/116,t=$.ro.n1/500+e,i=e-$.ro.n2/200;$.It.n0=$.rd[0]/100*$.CA(t),$.It.n1=$.rd[1]/100*($.ro.n0>$.Hb*$.N2?Math.pow(e,3):$.ro.n0/$.Hb),$.It.n2=$.rd[2]/100*$.CA(i),$.It.n3=$.ro.n3}static rv(){let e=.8190224*$.It.n0+.3619062*$.It.n1+-.1288737*$.It.n2,t=.03298366*$.It.n0+.9292868*$.It.n1+.03614466*$.It.n2,i=.04817719*$.It.n0+.2642395*$.It.n1+.6335478*$.It.n2;e=Math.cbrt(e),t=Math.cbrt(t),i=Math.cbrt(i),$.fi.n0=.2104542*e+.7936177*t+-.004072046*i,$.fi.n1=1.977998*e+-2.428592*t+.4505937*i,$.fi.n2=.02590403*e+.7827717*t+-.8086757*i,$.fi.n3=$.It.n3,$.fi.n0*=100}static lv(){$.fi.n0/=100;let e=.9999999*$.fi.n0+.3963377*$.fi.n1+.2158037*$.fi.n2,t=1.000000009*$.fi.n0+-.1055613*$.fi.n1+-.06385417*$.fi.n2,i=1.00000005*$.fi.n0+-.08948418*$.fi.n1+-1.291485*$.fi.n2;e=e**3,t=t**3,i=i**3,$.It.n0=1.2268798*e+-.5578149*t+.281391*i,$.It.n1=-.04057576*e+1.112286*t+-.07171106*i,$.It.n2=-.07637294*e+-.4214933*t+1.586924*i,$.It.n3=$.fi.n3}static hv(){const e=Math.atan2($.fi.n2,$.fi.n1)*180/Math.PI;$.lo.n0=$.fi.n0,$.lo.n1=Math.sqrt($.fi.n1**2+$.fi.n2**2),$.lo.n2=e>=0?e:e+360,$.lo.n3=$.fi.n3}static av(){$.fi.n0=$.lo.n0,$.fi.n1=$.lo.n1*Math.cos($.lo.n2*Math.PI/180),$.fi.n2=$.lo.n1*Math.sin($.lo.n2*Math.PI/180),$.fi.n3=$.lo.n3}static ev(){$.MA(),$.rv(),$.hv()}static sv(){$.av(),$.lv(),$.NA()}static sd(e,t){typeof e=="string"||e instanceof $||u.o("Value for "+t+" must be a color string or a Brush, not "+e)}};p($,"N2",216/24389),p($,"Hb",24389/27),p($,"rd",[95.047,100,108.883]),p($,"Solid",1),p($,"Linear",2),p($,"Radial",3),p($,"Pattern",4),p($,"Lab",1),p($,"HSL",2),p($,"ll",ge.isUsingDOM()?new kn(null,void 0,{willReadFrequently:!0}).ai:null),p($,"H",new ur),p($,"Ui",new ur),p($,"It",new ur),p($,"ro",new ur),p($,"fi",new ur),p($,"lo",new ur);let Qe=$;const Sr=class Sr{constructor(){p(this,"Ct","Base")}static Pn(e,t){t.name=e,Sr.os.set(e,t)}get name(){return this.Ct}set name(e){this.Ct=e}get classType(){return Kt}measure(e,t,i,n,s,r,A){}measureElement(e,t,i,n,s){e.dt(t,i,n,s)}arrange(e,t,i){}arrangeElement(e,t,i,n,s,r){e.Kt(t,i,n,s,r)}remeasureObject(e){e.of()}zi(e,t,i){}};p(Sr,"os",new xt);let xe=Sr;class Xs extends xe{constructor(){super()}measure(e,t,i,n,s,r,A){const o=n.length,a=e.Ho();for(let h=0;h<o;h++){const d=n[h];if(!d.visible&&d!==a)continue;const f=d.margin,g=f.right+f.left,x=f.top+f.bottom;d.dt(t,i,r,A);const B=d.measuredBounds,C=Math.max(B.width+g,0),F=Math.max(B.height+x,0);let b=d.position.x,L=d.position.y;if(isFinite(b)||(b=0),isFinite(L)||(L=0),d instanceof Zt&&d.isGeometryPositioned){const Q=d.strokeWidth/2;b-=Q,L-=Q}s.unionNoCheck(b,L,C,F)}}arrange(e,t,i){const n=t.length,s=e.padding,r=i.x-s.left,A=i.y-s.top;for(let o=0;o<n;o++){const a=t[o],h=a.measuredBounds,d=a.margin,f=a.position.x,g=a.position.y;let x=isNaN(f)?-r:f-r,B=isNaN(g)?-A:g-A;if(a instanceof Zt&&a.isGeometryPositioned){const C=a.strokeWidth/2;x-=C,B-=C}a.visible&&a.Kt(x+d.left,B+d.top,h.width,h.height)}}}xe.Pn("Position",new Xs);class La extends xe{constructor(){super()}measure(e,t,i,n,s,r,A){const o=n.length,a=u.ht(),h=e.Ho();for(let f=0;f<o;f++){const g=n[f];if(!g.visible&&g!==h)continue;const x=g.Gs(!1);if(x!==0&&x!==5){a.push(g);continue}g.dt(1/0,i,0,A);const B=g.margin,C=g.measuredBounds,F=Math.max(C.width+B.right+B.left,0),b=Math.max(C.height+B.top+B.bottom,0);s.zn(s.width+F,Math.max(s.height,b))}const d=a.length;e.desiredSize.height?i=Math.min(e.desiredSize.height,e.maxSize.height):s.height!==0&&(i=Math.min(s.height,e.maxSize.height));for(let f=0;f<d;f++){const g=a[f];if(!g.visible&&g!==h)continue;const x=g.margin,B=x.right+x.left,C=x.top+x.bottom;g.dt(1/0,i,0,A);const F=g.measuredBounds,b=Math.max(F.width+B,0),L=Math.max(F.height+C,0);s.width+=b,s.height=Math.max(s.height,L)}u.et(a)}arrange(e,t,i){const n=t.length,s=e.padding,r=s.top,A=e.isOpposite;let o=A?i.width:s.left;for(let a=0;a<n;a++){const h=r,d=t[a];if(!d.visible)continue;const f=d.measuredBounds,g=d.margin,x=g.top+g.bottom,B=r+s.bottom;let C=f.height;const F=d.Gs(!1);(isNaN(d.desiredSize.height)&&F===2||F===4)&&(C=Math.max(i.height-x-B,0));const b=C+x+B;let L=d.alignment;L.isDefault()&&(L=e.defaultAlignment),L.isSpot()||(L=q.Center),A&&(o-=f.width+g.left+g.right),d.Kt(o+L.offsetX+g.left,h+L.offsetY+g.top+(i.height*L.y-b*L.y),f.width,C),A||(o+=f.width+g.left+g.right)}}}xe.Pn("Horizontal",new La);class Na extends xe{constructor(){super()}measure(e,t,i,n,s,r,A){const o=n.length,a=u.ht(),h=e.Ho();for(let f=0;f<o;f++){const g=n[f];if(!g.visible&&g!==h)continue;const x=g.Gs(!1);if(x!==0&&x!==4){a.push(g);continue}g.dt(t,1/0,r,0);const B=g.margin,C=g.measuredBounds,F=Math.max(C.width+B.right+B.left,0),b=Math.max(C.height+B.top+B.bottom,0);s.zn(Math.max(s.width,F),s.height+b)}const d=a.length;e.desiredSize.width?t=Math.min(e.desiredSize.width,e.maxSize.width):s.width!==0&&(t=Math.min(s.width,e.maxSize.width));for(let f=0;f<d;f++){const g=a[f];if(!g.visible&&g!==h)continue;const x=g.margin,B=x.right+x.left,C=x.top+x.bottom;g.dt(t,1/0,r,0);const F=g.measuredBounds,b=Math.max(F.width+B,0),L=Math.max(F.height+C,0);s.width=Math.max(s.width,b),s.height+=L}u.et(a)}arrange(e,t,i){const n=t.length,s=e.padding,r=s.left,A=e.isOpposite;let o=A?i.height:s.top;for(let a=0;a<n;a++){const h=r,d=t[a];if(!d.visible)continue;const f=d.measuredBounds,g=d.margin,x=g.left+g.right,B=r+s.right;let C=f.width;const F=d.Gs(!1);(isNaN(d.desiredSize.width)&&F===2||F===5)&&(C=Math.max(i.width-x-B,0));const b=C+x+B;let L=d.alignment;L.isDefault()&&(L=e.defaultAlignment),L.isSpot()||(L=q.Center),A&&(o-=f.height+g.bottom+g.top),d.Kt(h+L.offsetX+g.left+(i.width*L.x-b*L.x),o+L.offsetY+g.top,C,f.height),A||(o+=f.height+g.bottom+g.top)}}}xe.Pn("Vertical",new Na);const Js=class Js extends xe{constructor(){super()}measure(e,t,i,n,s,r,A){const o=n.length;if(o===0)return;const a=e.findMainElement();let h=a.margin,d=0,f=0;const g=h.right+h.left,x=h.top+h.bottom;a.dt(t,i,r,A);let B=a.measuredBounds,C=B.width,F=B.height,b=Math.max(C+g,0),L=Math.max(F+x,0);const Q=e.isClipping;Q&&a.x0()!==0&&!Js.LA&&(Js.LA=!0,u.ri("Main Shape for Spot Panel with isClipping = true must have a zero strokeWidth: "+e.toString()));const M=it.Y(-h.left,-h.top,b,L);let O=it.Y(0,0,C,F);this.L2(a,O,!0),C=O.width,F=O.height;let D=!0;const K=e.Ho();let J;for(let R=0;R<o;R++){const G=n[R];let W=t,Y=i;if(G===a||!G.visible&&G!==K)continue;h=G.margin;let Z=h.left,et=h.top;switch(d=h.right+h.left,f=h.top+h.bottom,J=G.Gs(!1),J){case 2:W=C,Y=F,d=0,f=0,Z=0,et=0;break;case 5:W=C,d=0,Z=0;break;case 4:Y=F,f=0,et=0;break}G.dt(W,Y,0,0),B=G.measuredBounds,b=Math.max(B.width+d,0),L=Math.max(B.height+f,0);let At=G.alignment;At.isDefault()&&(At=e.defaultAlignment),At.isSpot()||(At=q.Center);let ht=G.alignmentFocus;ht.isDefault()&&(ht=q.Center);let nt=null;G instanceof Kt&&G.ho!==""&&(nt=G.findObject(G.ho),nt===G&&(nt=null));let gt=O.x-Z,Ct=O.y-et;if(nt!==null){G.Kt(0,0,B.width,B.height);const Wt=nt.actualBounds,St=T.Y(Wt.x+(ht.x*Wt.width-ht.offsetX),Wt.y+(ht.y*Wt.height-ht.offsetY));for(nt=nt.panel;nt!==G;)nt.F.bt(St),nt=nt.panel;gt+=At.x*C+At.offsetX-St.x,Ct+=At.y*F+At.offsetY-St.y,T.e(St)}else gt+=At.x*C+At.offsetX-(ht.x*B.width+ht.offsetX),Ct+=At.y*F+At.offsetY-(ht.y*B.height+ht.offsetY);D?(D=!1,s.i(gt,Ct,b,L)):s.unionNoCheck(gt,Ct,b,L)}switch(D?s.a(M):Q?s.intersect(O.x,O.y,O.width,O.height):s.unionNoCheck(M.x,M.y,M.width,M.height),it.e(M),it.e(O),J=a.stretch,J===1&&(J=a.Gs(!1)),J){case 0:return;case 2:if(!isFinite(t)&&!isFinite(i))return;break;case 5:if(!isFinite(t))return;break;case 4:if(!isFinite(i))return;break}B=a.measuredBounds,C=B.width,F=B.height,b=Math.max(C+g,0),L=Math.max(F+x,0),h=a.margin,O=it.Y(-h.left,-h.top,b,L),this.L2(a,O,!0),C=O.width,F=O.height;for(let R=0;R<o;R++){const G=n[R];if(G===a||!G.visible&&G!==K)continue;h=G.margin,d=h.right+h.left,f=h.top+h.bottom,B=G.measuredBounds,b=Math.max(B.width+d,0),L=Math.max(B.height+f,0);let W=G.alignment;W.isDefault()&&(W=e.defaultAlignment),W.isSpot()||(W=q.Center);let Y=G.alignmentFocus;Y.isDefault()&&(Y=q.Center),D?(D=!1,s.i(W.x*C+W.offsetX-(Y.x*B.width+Y.offsetX)-h.left,W.y*F+W.offsetY-(Y.y*B.height+Y.offsetY)-h.top,b,L)):s.unionNoCheck(W.x*C+W.offsetX-(Y.x*B.width+Y.offsetX)-h.left,W.y*F+W.offsetY-(Y.y*B.height+Y.offsetY)-h.top,b,L)}D?s.a(M):Q?s.intersect(O.x,O.y,O.width,O.height):s.unionNoCheck(M.x,M.y,M.width,M.height),it.e(O)}arrange(e,t,i){const n=t.length;if(n===0)return;const s=e.findMainElement(),r=s.measuredBounds,A=r.width,o=r.height,a=e.padding,h=a.left,d=a.top;let f=h-i.x,g=d-i.y;s.Kt(f,g,A,o);const x=it.Y(0,0,A,o);this.L2(s,x,!1);for(let B=0;B<n;B++){const C=t[B];if(C===s)continue;const F=C.measuredBounds,b=F.width,L=F.height;let Q=C.alignment;Q.isDefault()&&(Q=e.defaultAlignment),Q.isSpot()||(Q=q.Center);let M=C.alignmentFocus;M.isDefault()&&(M=q.Center);let O=null;if(C instanceof Kt&&C.ho!==""&&(O=C.findObject(C.ho),O===C&&(O=null)),O!==null){const D=O.actualBounds,K=T.Y(D.x+(M.x*D.width-M.offsetX),D.y+(M.y*D.height-M.offsetY));for(O=O.panel;O!==C;)O.F.bt(K),O=O.panel;f=Q.x*x.width+Q.offsetX-K.x,g=Q.y*x.height+Q.offsetY-K.y,T.e(K)}else f=Q.x*x.width+Q.offsetX-(M.x*b+M.offsetX),g=Q.y*x.height+Q.offsetY-(M.y*L+M.offsetY);f+=x.x-i.x,g+=x.y-i.y,C.visible&&C.Kt(h+f,d+g,b,L)}it.e(x)}L2(e,t,i){let n=null;if(e instanceof Kt&&e.ho!==""&&(n=e.findObject(e.ho),n===e&&(n=null)),n!==null)for(i&&e.Kt(0,0,t.width,t.height),t.a(n.actualBounds),n=n.panel;n!==e;)n.F.Eg(t),n=n.panel}};p(Js,"LA",!1);let Lo=Js;xe.Pn("Spot",new Lo);class Ea extends xe{constructor(){super()}measure(e,t,i,n,s,r,A){const o=n.length;if(o===0)return;const a=e.findMainElement();let h=a.margin,d=t,f=i;const g=h.right+h.left,x=h.top+h.bottom;a.dt(t,i,r,A);let B=a.measuredBounds,C=0,F=null;a instanceof Zt&&(F=a,C=F.strokeWidth*F.scale);let b=Math.max(B.width+g,0),L=Math.max(B.height+x,0),Q=e.A2(a);const M=Q.x*b+Q.offsetX,O=Q.y*L+Q.offsetY;let D=e.T2(a);const K=D.x*b+D.offsetX,J=D.y*L+D.offsetY;isFinite(t)&&(d=Math.max(Math.abs(M-K)-C,0)),isFinite(i)&&(f=Math.max(Math.abs(O-J)-C,0));let R=0,G=0;r>0&&(R=Math.max(Math.abs(Q.x*r+Q.offsetX-(D.x*r+D.offsetX))-C,0)),A>0&&(G=Math.max(Math.abs(Q.y*A+Q.offsetY-(D.y*A+D.offsetY))-C,0));const W=ct.l();W.i(0,0);const Y=e.Ho();for(let ht=0;ht<o;ht++){const nt=n[ht];if(nt===a||!nt.visible&&nt!==Y)continue;h=nt.margin;const gt=h.right+h.left,Ct=h.top+h.bottom;nt.dt(d,f,R,G),B=nt.measuredBounds,b=Math.max(B.width+gt,0),L=Math.max(B.height+Ct,0),W.i(Math.max(b,W.width),Math.max(L,W.height))}if(o===1){B=a.measuredBounds,s.width=b,s.height=L,ct.e(W);return}Q=e.A2(a),D=e.T2(a);let Z=0,et=0;D.x!==Q.x&&D.y!==Q.y&&(Z=W.width/Math.abs(D.x-Q.x),et=W.height/Math.abs(D.y-Q.y)),ct.e(W),C=0,F!==null&&(C=F.strokeWidth*F.scale,F.eS()===6&&(Z=et=Math.max(Z,et))),Z+=Math.abs(Q.offsetX)+Math.abs(D.offsetX)+C,et+=Math.abs(Q.offsetY)+Math.abs(D.offsetY)+C;let At=a.stretch;switch(At===1&&(At=a.Gs(!1)),At){case 0:r=0,A=0;break;case 2:isFinite(t)&&(Z=t),isFinite(i)&&(et=i);break;case 5:isFinite(t)&&(Z=t),A=0;break;case 4:r=0,isFinite(i)&&(et=i);break}a.of(),a.dt(Z,et,r,A),s.width=a.measuredBounds.width+g,s.height=a.measuredBounds.height+x}arrange(e,t,i){const n=t.length;if(n===0)return;const s=e.findMainElement(),r=s.measuredBounds,A=it.l();A.i(0,0,1,1);let o=s.margin;const a=o.left,h=o.top,d=e.padding,f=d.left,g=d.top;let x=a,B=h,C=r.width,F=r.height;s.Kt(f+x,g+B,C,F);const b=e.A2(s),L=e.T2(s),Q=0+b.x*r.width+b.offsetX,M=0+b.y*r.height+b.offsetY,O=0+L.x*r.width+L.offsetX,D=0+L.y*r.height+L.offsetY;A.x=Q,A.y=M,A.unionNoCheck(O,D,0,0),A.x+=a+f,A.y+=h+g;for(let K=0;K<n;K++){const J=t[K];if(J===s)continue;const R=J.measuredBounds;o=J.margin;const G=Math.max(R.width+o.right+o.left,0),W=Math.max(R.height+o.top+o.bottom,0);let Y=J.alignment;Y.isDefault()&&(Y=e.defaultAlignment),Y.isSpot()||(Y=q.Center),x=A.width*Y.x+Y.offsetX-G*Y.x+o.left+A.x,B=A.height*Y.y+Y.offsetY-W*Y.y+o.top+A.y,C=A.width,F=A.height,J.visible&&(it.contains(A.x,A.y,A.width,A.height,x,B,R.width,R.height)?J.Kt(x,B,R.width,R.height):J.Kt(x,B,R.width,R.height,new it(A.x,A.y,A.width,A.height)))}it.e(A)}}xe.Pn("Auto",new Ea);class Ta extends xe{constructor(){super(),this.name="Table"}measure(e,t,i,n,s,r,A){let o=n.length;const a=u.ht(),h=u.ht();for(let Pt=0;Pt<o;Pt++){const wt=n[Pt],Ht=wt instanceof Kt?wt:null;if(Ht!==null&&Ht.ol()&&wt.visible){h.push(Ht);const pe=Ht.T.r,Re=pe.length;for(let Ie=0;Ie<Re;Ie++){const ei=pe[Ie];Ht.type===Kt.TableRow?ei.row=wt.row:Ht.type===Kt.TableColumn&&(ei.column=wt.column),a.push(ei)}}else a.push(wt)}o=a.length,o===0&&(e.getRowDefinition(0),e.getColumnDefinition(0));const d=[];for(let Pt=0;Pt<o;Pt++){const wt=a[Pt];wt.visible&&(wt.me(!0),wt.no(!0),d[wt.row]||(d[wt.row]=[]),d[wt.row][wt.column]||(d[wt.row][wt.column]=[]),d[wt.row][wt.column].push(wt))}u.et(a);const f=u.ht(),g=u.ht(),x=u.ht(),B={count:0},C={count:0};let F=t,b=i;const L=e.Ge,Q=e.He;let M=null;o=L.length;for(let Pt=0;Pt<o;Pt++)M=L[Pt],M!==void 0&&(M.actual=0,M.Fi=0);o=Q.length;for(let Pt=0;Pt<o;Pt++)M=Q[Pt],M!==void 0&&(M.actual=0,M.Fi=0);let O=d.length,D=0;for(let Pt=0;Pt<O;Pt++)d[Pt]&&(D=Math.max(D,d[Pt].length));const K=Math.min(e.topIndex,O-1),J=Math.min(e.leftIndex,D-1);let R=0,G;O=d.length;const W=e.Ho();for(let Pt=0;Pt<O;Pt++){if(!d[Pt])continue;D=d[Pt].length;const wt=e.getRowDefinition(Pt);wt.actual=0,wt.Fi=0;for(let Ht=0;Ht<D;Ht++){if(!d[Pt][Ht])continue;const pe=e.getColumnDefinition(Ht);f[Ht]===void 0&&(pe.actual=0,pe.Fi=0,f[Ht]=!0);const Re=d[Pt][Ht],Ie=Re.length;for(let ei=0;ei<Ie;ei++){const Xe=Re[ei];if(!Xe.visible&&Xe!==W)continue;const xn=Xe.rowSpan>1,An=Xe.columnSpan>1;(xn||An)&&!(Pt<K)&&!(Ht<J)&&g.push(Xe);const Cn=Xe.margin,ii=Cn.right+Cn.left,gi=Cn.top+Cn.bottom;G=Xe.N0(wt,pe,!1);const Ki=Xe.desiredSize,Fe=!isNaN(Ki.width),Tn=!isNaN(Ki.height);if(G!==0&&!(Fe&&Tn)&&!(Pt<K)&&!(Ht<J)&&(!An&&B[Ht]===void 0&&(G===2||G===5)&&(B[Ht]=-1,B.count++),!xn&&C[Pt]===void 0&&(G===2||G===4)&&(C[Pt]=-1,C.count++),!xn&&!An&&x.push(Xe)),Xe.dt(1/0,1/0,0,0),Pt<K||Ht<J)continue;const Bi=Xe.measuredBounds,Di=Math.max(Bi.width+ii,0),Ke=Math.max(Bi.height+gi,0);if(Xe.rowSpan===1&&(G===0||G===5)){M=e.getRowDefinition(Pt);const Ne=M.computeEffectiveSpacing(),Dn=M.ot===0;R=Math.max(Ke-M.actual,0),R+(Dn?Ne:0)>b&&(R=Math.max(b-Ne,0)),M.Fi=M.Fi+R,M.actual=M.ot+R,b=Math.max(b-(R+(Dn?Ne:0)),0)}if(Xe.columnSpan===1&&(G===0||G===4)){M=e.getColumnDefinition(Ht);const Ne=M.computeEffectiveSpacing(),Dn=M.ot===0;R=Math.max(Di-M.actual,0),R+(Dn?Ne:0)>F&&(R=Math.max(F-Ne,0)),M.Fi=M.Fi+R,M.actual=M.ot+R,F=Math.max(F-(R+(Dn?Ne:0)),0)}(xn||An)&&Xe.of()}}}u.et(f);let Y=0,Z=0;o=e.columnCount;for(let Pt=0;Pt<o;Pt++){const wt=Q[Pt];wt!==void 0&&(Y+=isNaN(wt.ye)?wt.Fi:wt.ye,wt.Fi!==0&&(Y+=wt.computeEffectiveSpacing()))}o=e.rowCount;for(let Pt=0;Pt<o;Pt++){const wt=L[Pt];wt!==void 0&&(Z+=isNaN(wt.ye)?wt.Fi:wt.ye,wt.Fi!==0&&(Z+=wt.computeEffectiveSpacing()))}F=Math.max(t-Y,0),b=Math.max(i-Z,0);let et=b,At=F;o=x.length;for(let Pt=0;Pt<o;Pt++){const wt=x[Pt],Ht=e.getRowDefinition(wt.row),pe=e.getColumnDefinition(wt.column),Re=wt.measuredBounds,Ie=wt.margin,ei=Ie.right+Ie.left,Xe=Ie.top+Ie.bottom;pe.Fi===0&&B[wt.column]!==void 0?B[wt.column]=Math.max(Re.width+ei,B[wt.column]):B[wt.column]=null,Ht.Fi===0&&C[wt.row]!==void 0?C[wt.row]=Math.max(Re.height+Xe,C[wt.row]):C[wt.row]=null}let ht=0,nt=0,gt;for(gt in C)gt!=="count"&&(ht+=C[gt]);for(gt in B)gt!=="count"&&(nt+=B[gt]);const Ct=ct.l();for(let Pt=0;Pt<o;Pt++){const wt=x[Pt];if(!wt.visible&&wt!==W)continue;const Ht=e.getRowDefinition(wt.row),pe=e.getColumnDefinition(wt.column);let Re=0;isFinite(pe.width)?Re=pe.width:(isFinite(F)&&B[wt.column]!==null?nt===0?Re=pe.actual+F:Re=B[wt.column]/nt*At:B[wt.column]!==null?Re=F:Re=pe.actual||F,Re=Math.max(0,Re-pe.computeEffectiveSpacing()));let Ie=0;switch(isFinite(Ht.height)?Ie=Ht.height:(isFinite(b)&&C[wt.row]!==null?ht===0?Ie=Ht.actual+b:Ie=C[wt.row]/ht*et:C[wt.row]!==null?Ie=b:Ie=Ht.actual||b,Ie=Math.max(0,Ie-Ht.computeEffectiveSpacing())),Ct.i(Math.max(pe.minimum,Math.min(Re,pe.maximum)),Math.max(Ht.minimum,Math.min(Ie,Ht.maximum))),G=wt.N0(Ht,pe,!1),G){case 5:Ct.height=Math.max(Ct.height,Ht.actual+b);break;case 4:Ct.width=Math.max(Ct.width,pe.actual+F);break}const ei=wt.margin,Xe=ei.right+ei.left,xn=ei.top+ei.bottom;wt.of();let An=pe.minimum,Cn=Ht.minimum;const ii=wt.measuredBounds;ii.width===0&&B[wt.column]!==null&&(An=Math.max(An,B[wt.column])),ii.height===0&&C[wt.row]!==null&&(Cn=Math.max(An,C[wt.row])),wt.dt(Ct.width,Ct.height,An,Cn);const gi=wt.measuredBounds;let Ki=Math.max(gi.width+Xe,0),Fe=Math.max(gi.height+xn,0);isFinite(F)&&(Ki=Math.min(Ki,Ct.width)),isFinite(b)&&(Fe=Math.min(Fe,Ct.height));let Tn=0;Tn=Ht.actual,Ht.actual=Math.max(Ht.actual,Fe),Ht.Fi=Math.max(Ht.Fi,Fe),R=Ht.actual-Tn,b=Math.max(b-R,0),C[wt.row]===null&&(et=Math.max(et-R,0)),Tn=pe.actual,pe.actual=Math.max(pe.actual,Ki),pe.Fi=Math.max(pe.Fi,Ki),R=pe.actual-Tn,F=Math.max(F-R,0),B[wt.column]===null&&(At=Math.max(At-R,0))}u.et(x);const Wt=ct.l(),St=u.ht(),Qt=u.ht();if(o=g.length,o!==0)for(let Pt=0;Pt<O;Pt++){if(!d[Pt])continue;D=d[Pt].length;const wt=e.getRowDefinition(Pt);St[Pt]=wt.actual;for(let Ht=0;Ht<D;Ht++){if(!d[Pt][Ht])continue;const pe=e.getColumnDefinition(Ht);Qt[Ht]=pe.actual}}for(let Pt=0;Pt<o;Pt++){const wt=g[Pt];if(!wt.visible&&wt!==W)continue;const Ht=e.getRowDefinition(wt.row),pe=e.getColumnDefinition(wt.column);switch(Ct.i(Math.max(pe.minimum,Math.min(t,pe.maximum)),Math.max(Ht.minimum,Math.min(i,Ht.maximum))),G=wt.N0(Ht,pe,!1),G){case 2:Qt[pe.index]!==0&&(Ct.width=Math.min(Ct.width,Qt[pe.index])),St[Ht.index]!==0&&(Ct.height=Math.min(Ct.height,St[Ht.index]));break;case 5:Qt[pe.index]!==0&&(Ct.width=Math.min(Ct.width,Qt[pe.index]));break;case 4:St[Ht.index]!==0&&(Ct.height=Math.min(Ct.height,St[Ht.index]));break}isFinite(pe.width)&&(Ct.width=pe.width),isFinite(Ht.height)&&(Ct.height=Ht.height),Wt.i(0,0);let Re=pe.minimum,Ie=Ht.minimum;for(let Fe=1;Fe<wt.rowSpan&&!(wt.row+Fe>=e.rowCount);Fe++)M=e.getRowDefinition(wt.row+Fe),R=0,G===2||G===4?R=Math.max(M.minimum,St[wt.row+Fe]===0?M.maximum:Math.min(St[wt.row+Fe],M.maximum)):R=Math.max(M.minimum,isNaN(M.ye)?M.maximum:Math.min(M.ye,M.maximum)),Wt.height+=R,Ie+=M.minimum;for(let Fe=1;Fe<wt.columnSpan&&!(wt.column+Fe>=e.columnCount);Fe++)M=e.getColumnDefinition(wt.column+Fe),R=0,G===2||G===5?R=Math.max(M.minimum,Qt[wt.column+Fe]===0?M.maximum:Math.min(Qt[wt.column+Fe],M.maximum)):R=Math.max(M.minimum,isNaN(M.ye)?M.maximum:Math.min(M.ye,M.maximum)),Wt.width+=R,Re+=M.minimum;Ct.width+=Wt.width,Ct.height+=Wt.height;const ei=wt.margin,Xe=ei.right+ei.left,xn=ei.top+ei.bottom;wt.dt(Ct.width,Ct.height,Re,Ie);const An=wt.measuredBounds,Cn=Math.max(An.width+Xe,0),ii=Math.max(An.height+xn,0);let gi=0;for(let Fe=0;Fe<wt.rowSpan&&!(wt.row+Fe>=e.rowCount);Fe++)M=e.getRowDefinition(wt.row+Fe),gi+=M.total||0;if(gi<ii){let Fe=ii-gi;const Tn=ii-gi;if(wt.spanAllocation!==null){const Bi=wt.spanAllocation;for(let Di=0;Di<wt.rowSpan&&!(Fe<=0||wt.row+Di>=e.rowCount);Di++){M=e.getRowDefinition(wt.row+Di);const Ke=M.ot||0,Ne=Bi(wt,M,Tn);M.actual=Math.min(M.maximum,Ke+Ne),M.ot!==Ke&&(Fe-=M.ot-Ke)}}for(;Fe>0;){const Bi=M.ot||0;if(isNaN(M.height)&&M.maximum>Bi&&(M.actual=Math.min(M.maximum,Bi+Fe),M.ot!==Bi&&(Fe-=M.ot-Bi)),M.index===0)break;M=e.getRowDefinition(M.index-1)}}let Ki=0;for(let Fe=0;Fe<wt.columnSpan&&!(wt.column+Fe>=e.columnCount);Fe++)M=e.getColumnDefinition(wt.column+Fe),Ki+=M.total||0;if(Ki<Cn){let Fe=Cn-Ki;const Tn=Cn-Ki;if(wt.spanAllocation!==null){const Bi=wt.spanAllocation;for(let Di=0;Di<wt.columnSpan&&!(Fe<=0||wt.column+Di>=e.columnCount);Di++){M=e.getColumnDefinition(wt.column+Di);const Ke=M.ot||0,Ne=Bi(wt,M,Tn);M.actual=Math.min(M.maximum,Ke+Ne),M.ot!==Ke&&(Fe-=M.ot-Ke)}}for(;Fe>0;){const Bi=M.ot||0;if(isNaN(M.width)&&M.maximum>Bi&&(M.actual=Math.min(M.maximum,Bi+Fe),M.ot!==Bi&&(Fe-=M.ot-Bi)),M.index===0)break;M=e.getColumnDefinition(M.index-1)}}}u.et(g),ct.e(Wt),ct.e(Ct),St!==void 0&&u.et(St),Qt!==void 0&&u.et(Qt);let Mt=0,Ut=0;const ne=e.desiredSize,te=e.maxSize;G=e.Gs(!0),Y=0,Z=0;let Ft=0,zt=0;o=e.columnCount;for(let Pt=0;Pt<o;Pt++)if(Q[Pt]!==void 0){if(M=e.getColumnDefinition(Pt),isFinite(M.width)){Ft+=M.width,Ft+=M.computeEffectiveSpacing();continue}else if(M.jb()===2){Ft+=M.ot,Ft+=M.computeEffectiveSpacing();continue}M.ot!==0&&(Y+=M.ot,Y+=M.computeEffectiveSpacing())}isFinite(ne.width)?Mt=Math.min(ne.width,te.width):G!==0&&isFinite(t)?Mt=t:Mt=Y,Mt=Math.max(Mt,isFinite(t)?Math.min(r,t):r),Mt=Math.max(Mt-Ft,0);const He=Y===0?1:Math.max(Mt/Y,1);for(let Pt=0;Pt<o;Pt++)Q[Pt]!==void 0&&(M=e.getColumnDefinition(Pt),!isFinite(M.width)&&M.jb()!==2&&(M.actual=M.ot*He),M.position=s.width,M.ot!==0&&(s.width+=M.ot,s.width+=M.computeEffectiveSpacing()));o=e.rowCount;for(let Pt=0;Pt<o;Pt++)if(L[Pt]!==void 0){if(M=e.getRowDefinition(Pt),isFinite(M.height)){zt+=M.height,zt+=M.computeEffectiveSpacing();continue}else if(M.jb()===2){zt+=M.ot,zt+=M.computeEffectiveSpacing();continue}M.ot!==0&&(Z+=M.ot,Z+=M.computeEffectiveSpacing())}isFinite(ne.height)?Ut=Math.min(ne.height,te.height):G!==0&&isFinite(i)?Ut=i:Ut=Z,Ut=Math.max(Ut,isFinite(i)?Math.min(A,i):A),Ut=Math.max(Ut-zt,0);const ae=Z===0?1:Math.max(Ut/Z,1);for(let Pt=0;Pt<o;Pt++)L[Pt]!==void 0&&(M=e.getRowDefinition(Pt),!isFinite(M.height)&&M.jb()!==2&&(M.actual=M.ot*ae),M.position=s.height,M.ot!==0&&(s.height+=M.ot,s.height+=M.computeEffectiveSpacing()));o=h.length;for(let Pt=0;Pt<o;Pt++){const wt=h[Pt];let Ht=0,pe=0;wt.type===Kt.TableRow?(Ht=s.width,M=e.getRowDefinition(wt.row),pe=M.actual):(M=e.getColumnDefinition(wt.column),Ht=M.actual,pe=s.height),wt.measuredBounds.i(0,0,Ht,pe),wt.me(!1)}u.et(h),e.Ph=d}arrange(e,t,i){const n=t.length,s=e.padding,r=s.left,A=s.top,o=e.Ph;if(o===null)return;let a=0,h=0;const d=o.length;let f=0;for(let J=0;J<d;J++)o[J]&&(f=Math.max(f,o[J].length));const g=e.Ge,x=e.He;let B=0,C=0,F=Math.min(e.topIndex,d-1);if(g.length>0){for(;F!==d&&(g[F]===void 0||g[F].ot===0);)F++;F=Math.max(Math.min(F,d-1),0),B=-g[F].position}let b=Math.min(e.leftIndex,f-1);if(x.length>0){for(;b!==f&&(x[b]===void 0||x[b].ot===0);)b++;b=Math.max(Math.min(b,f-1),0),C=-x[b].position}let L=0,Q=0;for(;L!==d&&g[L]===void 0;)L++;for(;Q!==d&&x[Q]===void 0;)Q++;const M=e.part;let O=e.getRowDefinition(L),D=e.getColumnDefinition(Q);for(let J=0;J<t.length;J++){const R=t[J];if(!(R instanceof Kt&&R.visible&&R.ol()))continue;R.type===Kt.TableRow?(O=e.getRowDefinition(R.row),D=e.getColumnDefinition(Q)):(O=e.getRowDefinition(L),D=e.getColumnDefinition(R.column)),h=O.position+B+A,O.ot!==0&&(h+=O.computeEffectiveSpacingTop(Math.max(L,F))),a=D.position+C+r,D.ot!==0&&(a+=D.computeEffectiveSpacingTop(Math.max(Q,b)));const G=R.measuredBounds;R.tf(),R.actualBounds.Tt();const W=R.actualBounds,Y=it.Y(W.x,W.y,W.width,W.height);if(W.x=R.type===Kt.TableRow?r:a,W.y=R.type===Kt.TableColumn?A:h,W.width=G.width,W.height=G.height,R.actualBounds.g(),R.no(!1),Y.equalsApproxClose(W)){it.e(Y);continue}M!==null&&(M.wh(),R.k0(M)),it.e(Y)}const K=ct.l();for(let J=0;J<d;J++){if(!o[J])continue;f=o[J].length;const R=e.getRowDefinition(J);h=R.position+B+A,R.ot!==0&&(h+=R.computeEffectiveSpacingTop(Math.max(L,F)));for(let G=0;G<f;G++){if(!o[J][G])continue;const W=e.getColumnDefinition(G);a=W.position+C+r,W.ot!==0&&(a+=W.computeEffectiveSpacingTop(Math.max(Q,b)));const Y=o[J][G],Z=Y.length;for(let et=0;et<Z;et++){const At=Y[et],ht=At.measuredBounds;K.i(0,0);for(let ii=1;ii<At.rowSpan&&!(J+ii>=e.rowCount);ii++){const gi=e.getRowDefinition(J+ii);gi.ot!==0&&(K.height+=gi.total)}for(let ii=1;ii<At.columnSpan&&!(G+ii>=e.columnCount);ii++){const gi=e.getColumnDefinition(G+ii);gi.ot!==0&&(K.width+=gi.total)}const nt=W.ot+K.width,gt=R.ot+K.height;let Ct=a,Wt=h;const St=nt,Qt=gt,Mt=a,Ut=h;let ne=nt,te=gt;a+nt>i.width&&(ne=Math.max(i.width-a,0)),h+gt>i.height&&(te=Math.max(i.height-h,0));let Ft=At.alignment,zt=0,He=0,ae=0,Pt=0;if(Ft.isDefault()){Ft=e.defaultAlignment,Ft.isSpot()||(Ft=q.Center),zt=Ft.x,He=Ft.y,ae=Ft.offsetX,Pt=Ft.offsetY;const ii=W.alignment,gi=R.alignment;ii.isSpot()&&(zt=ii.x,ae=ii.offsetX),gi.isSpot()&&(He=gi.y,Pt=gi.offsetY)}else zt=Ft.x,He=Ft.y,ae=Ft.offsetX,Pt=Ft.offsetY;(isNaN(zt)||isNaN(He))&&(zt=.5,He=.5,ae=0,Pt=0);let wt=ht.width,Ht=ht.height;const pe=At.margin,Re=pe.left+pe.right,Ie=pe.top+pe.bottom,ei=At.N0(R,W,!1);isNaN(At.desiredSize.width)&&(ei===2||ei===5)&&(wt=Math.max(nt-Re,0)),isNaN(At.desiredSize.height)&&(ei===2||ei===4)&&(Ht=Math.max(gt-Ie,0));const Xe=At.maxSize,xn=At.minSize;wt=Math.min(Xe.width,wt),Ht=Math.min(Xe.height,Ht),wt=Math.max(xn.width,wt),Ht=Math.max(xn.height,Ht);const An=wt+Re,Cn=Ht+Ie;Ct+=St*zt-An*zt+ae+pe.left,Wt+=Qt*He-Cn*He+Pt+pe.top,At.visible&&(it.contains(Mt,Ut,ne,te,Ct,Wt,ht.width,ht.height)?At.Kt(Ct,Wt,wt,Ht):At.Kt(Ct,Wt,wt,Ht,new it(Mt,Ut,ne,te)))}}}ct.e(K);for(let J=0;J<n;J++){const R=t[J],G=R instanceof Kt?R:null;if(G!==null&&G.ol()){const W=R.actualBounds;R.naturalBounds.Tt(),R.naturalBounds.i(0,0,W.width,W.height),R.naturalBounds.g()}}}}xe.Pn("Table",new Ta);class Da extends xe{constructor(){super()}measure(e,t,i,n,s,r,A){}arrange(e,t,i){}}xe.Pn("TableRow",new Da);class Ia extends xe{constructor(){super()}measure(e,t,i,n,s,r,A){}arrange(e,t,i){}}xe.Pn("TableColumn",new Ia);class Mh extends xe{constructor(){super()}measure(e,t,i,n,s,r,A){n.length!==1&&u.o("Viewbox Panel must contain exactly one GraphObject.");const o=n[0];o.rt=1,o.of(),o.dt(1/0,1/0,r,A);let a=o.measuredBounds;const h=o.margin,d=h.right+h.left,f=h.top+h.bottom;if(isFinite(t)||isFinite(i)){const g=o.scale,x=a.width,B=a.height,C=Math.max(t-d,0),F=Math.max(i-f,0);let b=1;e.viewboxStretch===6?(x!==0&&B!==0&&(b=Math.min(C/x,F/B)),b===0&&(b=1e-4),o.rt*=b):(x!==0&&B!==0&&(b=Math.max(C/x,F/B)),b===0&&(b=1e-4),o.rt*=b),g!==o.scale&&(o.me(!0),o.dt(1/0,1/0,r,A))}a=o.measuredBounds,s.width=isFinite(t)?t:Math.max(a.width+d,0),s.height=isFinite(i)?i:Math.max(a.height+f,0)}arrange(e,t,i){const n=t[0],s=n.measuredBounds,r=n.margin,A=r.right+r.left,o=r.top+r.bottom,a=Math.max(s.width+A,0),h=Math.max(s.height+o,0);let d=n.alignment;d.isDefault()&&(d=e.defaultAlignment),d.isSpot()||(d=q.Center),n.Kt(i.width*d.x-a*d.x+d.offsetX,i.height*d.y-h*d.y+d.offsetY,s.width,s.height)}}xe.Pn("Viewbox",new Mh);class Ph extends xe{constructor(){super()}measure(e,t,i,n,s,r,A){e.bi===null&&(e.bi=new cr),this.cv(e),this.fv(e)}arrange(e,t,i){}zi(e,t,i){const n=e.naturalBounds,s=n.width,r=n.height;t.save(),t.beginPath(),t.rect(0,0,s,r),t.clip(),t.endPath(),this.uv(e,t,i),t.restore(),t.clearContextCache(!1)}uv(e,t,i){let n=e.getDocumentScale()*i.scale;n<=0&&(n=1);const s=e.gridCellSize,r=s.width,A=s.height,o=e.naturalBounds,a=e.actualBounds,h=o.width,d=o.height,f=Math.ceil(h/r),g=Math.ceil(d/A),x=e.gridOrigin,B=x.x,C=x.y,F=e.bi.$0,b=e.T.r,L=b.length;for(let Q=0;Q<L;Q++){const M=b[Q];if(!M.visible)continue;const O=M.interval||1,D=Math.abs(O);if(r*D*n<2)continue;let K=M.segmentIndex;(!isFinite(K)||isNaN(K))&&(K=0),K<0&&(K=D-Math.min(-K,D)),K=Math.round(K%D);const J=M.opacity;let R=1;if(J!==1){if(J===0)continue;R=t.globalAlpha,t.globalAlpha=R*J}const G=F[Q];let W=!1;const Y=M.strokeDashArray;if(Y!==null&&(W=!0,t.enableDash(Y,M.strokeDashOffset)),M.stroke!==null&&M.strokeWidth>0&&(M.figure==="LineV"||M.figure==="LineH")){if(t.lineWidth=M.strokeWidth,e.mn(t,M.stroke,!1,!1,o,a),t.beginPath(),M.figure==="LineV"){const Z=Math.floor((B-r)/r);for(let et=Z;et<=Z+f;et++){const At=et*r+B;0<=At&&At<=h&&this.qb(et,O,K,G)&&(t.moveTo(At,0),t.lineTo(At,d))}}else if(M.figure==="LineH"){const Z=Math.floor((C-A)/A);for(let et=Z;et<=Z+g;et++){const At=et*A+C;0<=At&&At<=d&&this.qb(et,O,K,G)&&(t.moveTo(0,At),t.lineTo(h,At))}}t.stroke(),t.endPath()}else if(M.fill!==null){if(e.mn(t,M.fill,!0,!1,o,a),M.figure==="BarV"){let Z=M.width;isNaN(Z)&&(Z=r);const et=Math.floor((B-r)/r);for(let At=et;At<=et+f;At++){const ht=At*r+B;0<=ht+Z&&ht<=h&&this.qb(At,O,K,G)&&t.fillRect(ht,0,Z,d)}}else if(M.figure==="BarH"){let Z=M.height;isNaN(Z)&&(Z=A);const et=Math.floor((C-A)/A);for(let At=et;At<=et+g;At++){const ht=At*A+C;0<=ht+Z&&ht<=d&&this.qb(At,O,K,G)&&t.fillRect(0,ht,h,Z)}}}W&&t.disableDash(),J!==1&&(t.globalAlpha=R)}}qb(e,t,i,n){if(t<0)return e%t===i;if(e%t!==i)return!1;const s=n.length;for(let r=0;r<s;r++){const A=n[r];if(e%A===i)return!1}return!0}fv(e){const t=[],i=e.T.r,n=i.length;for(let s=0;s<n;s++){const r=i[s],A=[];if(t.push(A),!r.visible)continue;const o=r.interval;if(o<0)continue;const a=r.figure,h=this.D2(a);for(let d=0;d<n;d++){if(d===s)continue;const f=i[d];if(!f.visible)continue;const g=f.figure;if(this.D2(g)!==h)continue;const x=f.interval;x>o&&A.push(x)}}e.bi.$0=t}D2(e){return e==="LineV"||e==="BarV"}cv(e){let t=1,i=1;const n=e.T.r,s=n.length;for(let o=0;o<s;o++){const a=n[o],h=Math.abs(a.interval);h<2||(this.D2(a.figure)?i=i*h/V.MC(i,h):t=t*h/V.MC(t,h))}const r=e.gridCellSize,A=e.bi;A.jc.isReal()?A.jc.i(i*r.width,t*r.height):A.jc=new ct(i*r.width,t*r.height)}}xe.Pn("Grid",new Ph);class wi extends xe{constructor(){super()}measure(e,t,i,n,s,r,A){const o=n.length;if(!(e instanceof se||e instanceof Xt))return;let a=null,h=null;if(e instanceof Xt&&(a=e),e instanceof se&&(h=e,a=h.adornedPart,e.uf===null&&(e.uf=[])),!(a instanceof Xt))return;const d=a;if(o===0){e.naturalBounds.zn(0,0),e.measuredBounds.i(0,0,0,0);return}const f=e instanceof se?null:a.path,g=a.routeBounds,x=e.jo;x.i(0,0,g.width,g.height);const B=d.points,C=a.pointsCount;h!==null?h.ld(!1):a!==null&&a.ld(!1);const F=g.width,b=g.height,L=e.uf;if(L.length=0,f!==null){this.measureLinkPath(e,F,b,f);const D=f.measuredBounds;x.unionRect(D),L.push(D)}const Q=Bt.l(),M=T.l(),O=T.l();for(let D=0;D<o;D++){const K=n[D];if(K===f)continue;let J=K.measuredBounds;if(K.isPanelMain&&K instanceof Zt){this.measureLinkPath(e,F,b,K),J=K.measuredBounds,x.unionRect(J),L.push(J);continue}if(C<2){K.dt(1/0,1/0,0,0),J=K.measuredBounds,x.unionRect(J),L.push(J);continue}const R=K.segmentIndex,G=K.segmentFraction;let W=K.alignmentFocus;W.isNoSpot()&&(W=q.Center);const Y=K.segmentOrientation,Z=K.segmentOffset;let et=0,At=0,ht=0,nt=0;if(isNaN(R)){const Ft=d.ft,zt=u.ht();Ft.getPointAndAngleAlongPath(G,zt);const He=T.Y(zt[0],zt[1]);nt=zt[2],Y!==0&&(ht=d.computeAngle(K,Y,nt),K.Ht=ht,K.me(!0),K.no(!0)),et=He.x,At=He.y,T.e(He),u.et(zt)}else if(R<-C||R>=C){const Ft=T.l();d.AA(Ft),nt=d.midAngle,Y!==0&&(ht=d.computeAngle(K,Y,nt),K.Ht=ht,K.me(!0),K.no(!0)),et=Ft.x-g.x,At=Ft.y-g.y,T.e(Ft)}else{let Ft,zt,He=0;if(R>=0?(Ft=B.elt(R),zt=R<C-1?B.elt(R+1):Ft):(He=C+R,Ft=B.elt(He),zt=He>0?B.elt(He-1):Ft),nt=0,Ft.equalsApprox(zt)){let ae,Pt;R>=0?(ae=R>0?B.elt(R-1):Ft,Pt=R<C-2?B.elt(R+2):zt):(ae=He<C-1?B.elt(He+1):Ft,Pt=He>1?B.elt(He-2):zt);const wt=ae.distanceSquaredPoint(Ft),Ht=zt.distanceSquaredPoint(Pt);wt>Ht+10?nt=R>=0?ae.directionPoint(Ft):Ft.directionPoint(ae):Ht>wt+10?nt=R>=0?zt.directionPoint(Pt):Pt.directionPoint(zt):nt=R>=0?ae.directionPoint(Pt):Pt.directionPoint(ae)}else nt=R>=0?Ft.directionPoint(zt):zt.directionPoint(Ft);Y!==0&&(ht=d.computeAngle(K,Y,nt),K.Ht=ht,K.me(!0),K.no(!0)),et=Ft.x+(zt.x-Ft.x)*G-g.x,At=Ft.y+(zt.y-Ft.y)*G-g.y}K.dt(1/0,1/0,0,0),J=K.measuredBounds;const gt=K.naturalBounds;let Ct=0;K instanceof Zt&&(Ct=K.strokeWidth);const Wt=gt.width+Ct,St=gt.height+Ct;Q.Ii(),Q.Os(-J.x,-J.y),Q.rt(K.scale,K.scale),Q.ds(Y===0?K.angle:nt,Wt/2,St/2),(Y===22||Y===26)&&Q.ds(90,Wt/2,St/2),(Y===23||Y===27)&&Q.ds(-90,Wt/2,St/2),Y===28&&(nt>45&&nt<135||nt>225&&nt<315)&&Q.ds(-nt,Wt/2,St/2);const Qt=new it(0,0,Wt,St);M.setRectSpot(Qt,W),Q.bt(M);const Mt=-M.x+Ct/2*K.scale,Ut=-M.y+Ct/2*K.scale;O.a(Z);const ne=isNaN(Z.x),te=isNaN(Z.y);if(ne||te){const Ft=Wt/2+3,zt=St/2+3,He=nt>=45&&nt<=135,ae=nt>=225&&nt<=315;Y===0&&(He||ae)?(O.x=te?Ft:Z.y,O.y=ne?zt:Z.x,He?R>=0||isNaN(R)&&G<.5||ne&&(O.y=-zt):ae&&((R>=0||isNaN(R)&&G<.5)&&ne&&(O.y=-zt),te&&(O.x=-Ft))):(ne&&(R>=0||isNaN(R)&&G<.5?O.x=Ft:O.x=-Ft),te&&(O.y=-zt),O.rotate(nt))}else O.rotate(nt);et+=O.x,At+=O.y,Qt.i(et+Mt,At+Ut,J.width,J.height),L.push(Qt),x.unionRect(Qt)}if(a!==null){const D=a.labelNodes;for(;D.next();)D.value.dt(1/0,1/0)}e.jo=x,e.position.i(g.x+x.x,g.y+x.y),s.zn(x.width||0,x.height||0),Bt.e(Q),T.e(M),T.e(O)}arrange(e,t,i){const n=t.length;if(!(e instanceof se||e instanceof Xt))return;let s=e,r=null;e instanceof se&&(r=e,s=r.adornedPart);const A=e,o=e instanceof se?null:s.path,a=e.uf;if(a.length!==0){let g=0;if(o!==null&&g<a.length){const x=a[g];g++,o.Kt(x.x-A.jo.x,x.y-A.jo.y,x.width,x.height)}for(let x=0;x<n;x++){const B=t[x];if(B!==o&&g<a.length){const C=a[g];g++,B.Kt(C.x-A.jo.x,C.y-A.jo.y,C.width,C.height)}}}const h=s.points,d=h.count;if(d>=2&&A instanceof Xt){const g=A.labelNodes;for(;g.next();){const x=g.value;A.dv(x,d,h)}}r!==null?r.ld(!1):s.ld(!1);const f=e.TA(T.l());e.location.i(e.position.x+f.x,e.position.y+f.y),T.e(f)}measureLinkPath(e,t,i,n){if(n.Bo()===!1)return;let s=n.strokeWidth;if(s===0&&e instanceof se&&e.type===Kt.Link&&e.adornedObject instanceof Zt&&(s=e.adornedObject.strokeWidth),s=s*n.rt,e instanceof Xt&&e.ft!==null){const r=e.geometry.bounds;n.so(r.x-s/2,r.y-s/2,r.width+s,r.height+s)}else if(e instanceof se&&e.adornedPart.ft!==null){const r=e.adornedPart.ft.bounds;n.so(r.x-s/2,r.y-s/2,r.width+s,r.height+s)}else n.so(-(s/2),-(s/2),t+s,i+s);n.gv(),n.me(!1)}}xe.Pn("Link",new wi);class Qh extends xe{constructor(){super()}measure(e,t,i,n,s,r,A){const o=e.findMainElement();e.je=[];const a=o.margin,h=a.right+a.left,d=a.top+a.bottom;o.dt(t,i,r,A);const f=o.measuredBounds,g=f.width,x=f.height,B=Math.max(g+h,0),C=Math.max(x+d,0),F=new it(-a.left,-a.top,B,C);e.je.push(F),s.a(F),this.determineGraduatedMarks(e,o);const b=e.ks;if(b===null)return;const L=n.length;for(let Q=0;Q<L;Q++){const M=n[Q],O=b[Q];!M.visible||M===o||O.length===0||(M instanceof Zt?this.measureGraduatedTicks(e,M,O,s):M instanceof We&&this.measureGraduatedLabels(e,M,O,s),M.me(!1))}}arrange(e,t,i){if(e.je===null)return;const n=e.findMainElement(),s=e.ks;if(s===null)return;const r=e.je;let A=0,o=r[A];A++,n!==null&&n.Kt(o.x-i.x,o.y-i.y,o.width,o.height);const a=t.length;for(let h=0;h<a;h++){const d=t[h],f=s[h];!d.visible||d===n||f.length===0||(o=r[A],A++,d.Kt(o.x-i.x,o.y-i.y,o.width,o.height))}e.je=null}measureGraduatedTicks(e,t,i,n){let s=t.alignmentFocus;s.isNoSpot()&&(s=q.TopCenter);const r=t.angle;t.Ht=0,t.dt(1/0,1/0,0,0),t.Ht=r;const A=t.measuredBounds,o=A.width,a=A.height,h=it.Y(0,0,o,a),d=T.l();d.setRectSpot(h,s),it.e(h);const f=-d.x,g=-d.y,x=new it,B=i.length;for(let C=0;C<B;C++){const F=i[C],b=F.pt.x,L=F.pt.y,Q=F.angle;for(let M=0;M<4;M++){switch(M){case 0:d.i(f,g);break;case 1:d.i(f+o,g);break;case 2:d.i(f,g+a);break;case 3:d.i(f+o,g+a);break}d.rotate(Q+t.angle),d.offset(b,L),C===0&&M===0?x.i(d.x,d.y,0,0):x.unionPoint(d),d.offset(-b,-L),d.rotate(-Q-t.angle)}}T.e(d),e.je!==null&&e.je.push(x),n.unionNoCheck(x.x,x.y,x.width,x.height)}measureGraduatedLabels(e,t,i,n){e.Ce===null&&(e.Ce=new We);const s=e.Ce;this.DA(t,s);let r=t.alignmentFocus;r.isNoSpot()&&(r=q.TopCenter);const A=t.segmentOrientation,o=t.segmentOffset,a=new it;let h=0,d=0,f=0,g=0,x=0;const B=i.length;for(let C=0;C<B;C++){const F=i[C];h=F.pt.x,d=F.pt.y,f=F.angle,g=t.angle,x=t.angle,A!==0&&(A===21||A===25?x=f+t.angle:x=f,g=Xt.computeAngle(A,x)),s.Ht=g,s.text=F.text||"",s.dt(1/0,1/0,0,0);const b=s.measuredBounds,L=s.naturalBounds,Q=L.width,M=L.height,O=Bt.l();O.Ii(),O.Os(-b.x,-b.y),O.rt(s.scale,s.scale),O.ds(x,Q/2,M/2),(A===22||A===26)&&O.ds(90,Q/2,M/2),(A===23||A===27)&&O.ds(-90,Q/2,M/2),A===28&&(f>45&&f<135||f>225&&f<315)&&O.ds(-f,Q/2,M/2);const D=it.Y(0,0,Q,M),K=T.l();K.setRectSpot(D,r),O.bt(K);const J=-K.x,R=-K.y,G=T.l();G.a(o),isNaN(G.x)&&(G.x=Q/2+3),isNaN(G.y)&&(G.y=-(M/2+3)),G.rotate(f),h+=G.x+J,d+=G.y+R;const W=new it(h,d,b.width,b.height),Y=new it(b.x,b.y,b.width,b.height),Z=new it(L.x,L.y,L.width,L.height);F.labelAngle=g,F.lineCount=s.lineCount,F.lines=s.getMetrics(),F.actualBounds=W,F.measuredBounds=Y,F.naturalBounds=Z,C===0?a.a(W):a.unionRect(W),T.e(G),T.e(K),it.e(D),Bt.e(O)}e.je!==null&&e.je.push(a),n.unionNoCheck(a.x,a.y,a.width,a.height)}determineGraduatedMarks(e,t){const i=t.geometry,n=t.strokeWidth,s=i.flattenedSegments,r=i.flattenedLengths,A=i.flattenedTotalLength,o=s.length;let a=0,h=0;const d=u.ht();for(let L=0;L<o;L++){const Q=s[L],M=[];a=0,h=0;const O=Q.length;for(let D=0;D<O;D+=2){const K=Q[D],J=Q[D+1];if(D===0){a=K,h=J;continue}let R=Math.atan2(J-h,K-a)*180/Math.PI;R<0&&(R+=360),M.push(R),a=K,h=J}d.push(M)}const f=this.mv(e),g=e.T.r,x=g.length;let B=0,C=0,F=A;e.ks=[];let b;for(let L=0;L<x;L++){const Q=g[L];if(b=[],!Q.visible||Q===t){e.ks.push(b);continue}const M=Math.abs(Q.interval),O=e.graduatedTickUnit;if(O*M*A/e.graduatedRange<2&&Q.graduatedSkip===null){e.ks.push(b);continue}let D=r[0][0],K=0,J=0;C=A*Q.graduatedStart-1e-4,F=A*Q.graduatedEnd+1e-4;const R=O*M;let G=e.graduatedTickBase;if(G<e.graduatedMin){let et=(e.graduatedMin-G)/R;et=et%1===0?et:Math.floor(et+1),G+=et*R}else if(G>e.graduatedMin+R){const et=Math.floor((G-e.graduatedMin)/R);G-=et*R}const W=f[L],Y=G,Z=e.graduatedMax*1e-6;for(let et=1;G<=e.graduatedMax+Z;et++){if(this.pv(e,G-e.graduatedTickBase,W)&&(G>e.graduatedMax&&(G=e.graduatedMax),(Q.graduatedSkip===null||Q instanceof We&&!Q.graduatedSkip(G,Q)||Q instanceof Zt&&!Q.graduatedSkip(G,Q))&&(B=(G-e.graduatedMin)*A/e.graduatedRange,B>A&&(B=A),C<=B&&B<=F))){let At=d[K][J],ht=r[K][J];for(;K<r.length;){for(;B>D&&J<r[K].length-1;)J++,At=d[K][J],ht=r[K][J],D+=ht;if(B<=D)break;K++,J=0,At=d[K][J],ht=r[K][J],D+=ht}const nt=s[K],gt=nt[J*2],Ct=nt[J*2+1],Wt=nt[J*2+2],St=nt[J*2+3],Qt=(B-(D-ht))/ht,Mt=new T(gt+(Wt-gt)*Qt+n/2-i.bounds.x,Ct+(St-Ct)*Qt+n/2-i.bounds.y);if(Mt.scale(t.scale,t.scale),At=this.yv(At,Qt,nt,d[K],J),Q instanceof We){let Ut="";Q.graduatedFunction!==null?(Ut=Q.graduatedFunction(G,Q),Ut=Ut!=null?Ut.toString():""):Ut=(+G.toFixed(2)).toString(),Ut!==""&&b.push({pt:Mt,angle:At,text:Ut})}else b.push({pt:Mt,angle:At})}G=Y+et*R}e.ks.push(b)}u.et(d)}yv(e,t,i,n,s){if(t<.5005&&t>.4995)return e;let r=e;if(t<.5?s>0?r=n[s-1]:V.K(i[0],i[i.length-2])&&V.K(i[1],i[i.length-1])&&(r=n[n.length-1]):t>.5&&(s+1<n.length?r=n[s+1]:V.K(i[0],i[i.length-2])&&V.K(i[1],i[i.length-1])&&(r=n[0])),e!==r){let A=Math.abs(e-r);if(A>180&&(e<r?e+=360:r+=360,A=Math.abs(e-r)),t<5e-4||t>.9995)return(e+r)/2%360;if(A<10){const o=1-Math.abs(.5-t);return(e*o+r*(1-o))%360}}return e}mv(e){if(e.rs===null){const t=[],i=e.T.r,n=i.length;for(let s=0;s<n;s++){const r=i[s],A=[];if(t.push(A),!r.visible)continue;const o=r.interval;if(!(o<0))for(let a=0;a<n;a++){if(a===s)continue;const h=i[a];if(!h.visible||r.constructor!==h.constructor)continue;const d=h.interval;d>o&&A.push(d)}}e.rs=t}return e.rs}pv(e,t,i){const n=i.length;for(let s=0;s<n;s++){const r=i[s]*e.graduatedTickUnit,A=t%r,o=e.graduatedTickUnit*1e-6;if(A<o&&A>-o)return!1}return!0}zi(e,t,i){const n=i.oa;i.oa=!0;const s=e.naturalBounds,r=s.width,A=s.height,o=t instanceof qi;t.save(),t.beginPath(),t.rect(-1,-1,r+1,A+1),t.clip(),t.endPath();const a=e.findMainElement();a.zi(t,i);let h=e.getDocumentScale()*i.scale;h<=0&&(h=1);const d=a.actualBounds,f=e.T.r,g=e.ks,x=f.length;for(let B=0;B<x;B++){const C=f[B],F=g[B],b=F.length;if(!(!C.visible||C===a||F.length===0)){if(C instanceof Zt){if(e.graduatedTickUnit*C.interval*a.geometry.flattenedTotalLength/e.graduatedRange*h<2&&C.graduatedSkip===null)continue;const L=C.measuredBounds,Q=C.strokeWidth*C.scale;let M=C.alignmentFocus;M.isNoSpot()&&(M=q.TopCenter);for(let O=0;O<b;O++){const D=F[O].pt,K=F[O].angle;this.wv(C,D,d,K,L,Q,M),C.zi(t,i),o&&(e.svg.appendChild(C.svg),C.svg=null),C.el.Ii()}}else if(C instanceof We){e.Ce===null&&(e.Ce=new We);const L=e.Ce;this.DA(C,L),L.F2=!0;for(let Q=0;Q<b;Q++){const M=F[Q];if(M.actualBounds&&M.measuredBounds&&M.naturalBounds){L.xv(M);const O=M.actualBounds;L.Kt(O.x,O.y,O.width,O.height),this.bv(L,d,O,M.measuredBounds,M.naturalBounds),L.nl=C.part,L.Ks=C.panel,L.zi(t,i),L.Ks=null,L.nl=null,o&&(e.svg.appendChild(L.svg),L.svg=null)}}}}}i.oa=n,t.restore(),t.clearContextCache(!0)}wv(e,t,i,n,s,r,A){const o=e.el;o.Ii(),o.Os(t.x+i.x,t.y+i.y),o.ds(n+e.angle,0,0),o.Os(-s.width*A.x+A.offsetX+r/2,-s.height*A.y+A.offsetY+r/2),o.rt(e.scale,e.scale),e.ed(!1),e.dh.set(e.el),e.ya=e.scale,e.Na(!1)}bv(e,t,i,n,s){const r=e.el;r.Ii(),r.Os(i.x+t.x,i.y+t.y),r.Os(-n.x,-n.y),e.y0(r,s.x,s.y,s.width,s.height),e.ed(!1),e.dh.set(e.el),e.ya=e.scale,e.Na(!1)}DA(e,t){t.kv(e)}}xe.Pn("Graduated",new Qh);var UA=(k=>(k[k.Uniform=6]="Uniform",k[k.UniformToFill=7]="UniformToFill",k))(UA||{});const It=class It extends Ye{constructor(t,i){super();p(this,"_");p(this,"T");p(this,"_t");p(this,"hd");p(this,"qn");p(this,"hl");p(this,"ho");p(this,"jo");p(this,"R2");p(this,"E");p(this,"ad");p(this,"at");p(this,"bi");p(this,"ii");p(this,"cd");p(this,"Sh");p(this,"qs");if(this._=null,t===void 0)this._=It.Position;else if(typeof t=="string"){const n=xe.os.get(t);n!==null&&(this._=n)}else t instanceof xe?this._=t:t&&(this._=It.Position,i=t);this._===null&&u.o("Panel type not specified or PanelLayout not loaded: "+t),this.n|=4194304|(this._===It.Grid?1048576:0),this.T=new H,this._t=Rt.Ig,this.hd=q.Default,this.qn=1,this.hl=null,this.ho="",this.jo=new it(NaN,NaN,NaN,NaN),this.R2=null,this.E=null,this.ad=6,this.bi=null,this.at=null,this.ii=null,this.cd=NaN,this.Sh=null,this.qs=null,i&&Object.assign(this,i)}cloneProtected(t){super.cloneProtected(t),t._=this._,t._t=this._t.N(),t.hd=this.hd.N(),t.qn=this.qn,t.ho=this.ho,t.jo.a(this.jo),this.E!==null&&(t.E=this.E.copy(t)),t.ad=this.ad,this.at!==null&&(t.at=this.at.copy()),this.bi!==null&&(t.bi=this.bi.copy()),t.ii=this.ii,t.cd=this.cd,t.Sh=this.Sh}Xo(t){super.Xo(t),t.T=this.T;const i=t.T.r,n=i.length;for(let s=0;s<n;s++){const r=i[s];r.Ks=t}t.hl=null}copy(){const t=super.copy();if(t!==null){const i=this.T.r,n=i.length;for(let s=0;s<n;s++){const r=i[s].copy();t.Pv(r)}return t}else return null}toString(){return"Panel("+this.type.name+")#"+X.us(this)}get type(){return this._}set type(t){const i=this._;i!==t&&(this._=t,this.df=this._===It.Grid,this.c(),this.t("type",i,t))}get elements(){return this.T.iterator}get naturalBounds(){return this.Ki}get padding(){return this._t}set padding(t){typeof t=="number"?(t<0&&u.it(t,">= 0",It,"padding"),t=new Rt(t)):(t.left<0&&u.it(t.left,">= 0",It,"padding:value.left"),t.right<0&&u.it(t.right,">= 0",It,"padding:value.right"),t.top<0&&u.it(t.top,">= 0",It,"padding:value.top"),t.bottom<0&&u.it(t.bottom,">= 0",It,"padding:value.bottom"));const i=this._t;i.equals(t)||(t=t.N(),this._t=t,this.c(),this.t("padding",i,t))}get defaultAlignment(){return this.hd}set defaultAlignment(t){const i=this.hd;i.equals(t)||(t=t.N(),this.hd=t,this.c(),this.t("defaultAlignment",i,t))}get defaultStretch(){return this.qn}set defaultStretch(t){const i=this.qn;i!==t&&(this.qn=t,this.c(),this.t("defaultStretch",i,t))}get defaultSeparatorPadding(){return this.E!==null?this.E.Z0:Rt.Ig}set defaultSeparatorPadding(t){typeof t=="number"&&(t=new Rt(t));const i=this.defaultSeparatorPadding;i.equals(t)||(t=t.N(),this.E===null&&(this.E=new Hi),this.E.Z0=t,this.c(),this.t("defaultSeparatorPadding",i,t))}get defaultRowSeparatorStroke(){return this.E!==null?this.E.Q0:null}set defaultRowSeparatorStroke(t){const i=this.defaultRowSeparatorStroke;i!==t&&(t===null||typeof t=="string"||t instanceof Qe)&&(t instanceof Qe&&t.g(),this.E===null&&(this.E=new Hi),this.E.Q0=t,this.L(),this.t("defaultRowSeparatorStroke",i,t))}get defaultRowSeparatorStrokeWidth(){return this.E!==null?this.E._0:1}set defaultRowSeparatorStrokeWidth(t){const i=this.defaultRowSeparatorStrokeWidth;i!==t&&isFinite(t)&&t>=0&&(this.E===null&&(this.E=new Hi),this.E._0=t,this.c(),this.t("defaultRowSeparatorStrokeWidth",i,t))}get defaultRowSeparatorDashArray(){return this.E!==null?this.E.tp:null}set defaultRowSeparatorDashArray(t){const i=this.defaultRowSeparatorDashArray;if(i!==t){if(t!==null&&!Array.isArray(t)&&u.te(t,"Array",It,"defaultRowSeparatorDashArray:value"),t!==null){const n=t.length;let s=0;for(let r=0;r<n;r++){const A=t[r];(typeof A!="number"||!(A>=0)||!isFinite(A))&&u.o("defaultRowSeparatorDashArray value "+A+" at index "+r+" must be a positive number or zero."),s+=A}if(s===0){if(i===null)return;t=null}}this.E===null&&(this.E=new Hi),this.E.tp=t,this.L(),this.t("defaultRowSeparatorDashArray",i,t)}}get defaultColumnSeparatorStroke(){return this.E!==null?this.E.ip:null}set defaultColumnSeparatorStroke(t){const i=this.defaultColumnSeparatorStroke;i!==t&&(t===null||typeof t=="string"||t instanceof Qe)&&(t instanceof Qe&&t.g(),this.E===null&&(this.E=new Hi),this.E.ip=t,this.L(),this.t("defaultColumnSeparatorStroke",i,t))}get defaultColumnSeparatorStrokeWidth(){return this.E!==null?this.E.ep:1}set defaultColumnSeparatorStrokeWidth(t){const i=this.defaultColumnSeparatorStrokeWidth;i!==t&&isFinite(t)&&t>=0&&(this.E===null&&(this.E=new Hi),this.E.ep=t,this.c(),this.t("defaultColumnSeparatorStrokeWidth",i,t))}get defaultColumnSeparatorDashArray(){return this.E!==null?this.E.sp:null}set defaultColumnSeparatorDashArray(t){const i=this.defaultColumnSeparatorDashArray;if(i!==t){if(t!==null&&!Array.isArray(t)&&u.te(t,"Array",It,"defaultColumnSeparatorDashArray:value"),t!==null){const n=t.length;let s=0;for(let r=0;r<n;r++){const A=t[r];(typeof A!="number"||!(A>=0)||!isFinite(A))&&u.o("defaultColumnSeparatorDashArray value "+A+" at index "+r+" must be a positive number or zero."),s+=A}if(s===0){if(i===null)return;t=null}}this.E===null&&(this.E=new Hi),this.E.sp=t,this.L(),this.t("defaultColumnSeparatorDashArray",i,t)}}get Ph(){return this.E!==null?this.E.Ph:null}set Ph(t){this.E===null&&(this.E=new Hi),this.E.Ph=t}get viewboxStretch(){return this.ad}set viewboxStretch(t){const i=this.ad;i!==t&&(this.ad=t,this.c(),this.t("viewboxStretch",i,t))}get gridCellSize(){return this.bi!==null?this.bi.fd:ct.fC}set gridCellSize(t){this.bi===null&&(this.bi=new cr);const i=this.bi.fd;if(!i.equals(t)){(!t.isReal()||t.width===0||t.height===0)&&u.o("Invalid Panel.gridCellSize: "+t),this.bi.fd=t.N();const n=this.diagram;n!==null&&this===n.grid&&n.lh(),this.L(),this.t("gridCellSize",i,t)}}get gridOrigin(){return this.bi!==null?this.bi.ud:T.Lo}set gridOrigin(t){this.bi===null&&(this.bi=new cr);const i=this.bi.ud;if(!i.equals(t)){t.isReal()||u.o("Invalid Panel.gridOrigin: "+t),this.bi.ud=t.N();const n=this.diagram;n!==null&&this===n.grid&&n.lh(),this.L(),this.t("gridOrigin",i,t)}}get graduatedMin(){return this.at!==null?this.at.np:0}set graduatedMin(t){const i=this.graduatedMin;if(i!==t&&(this.at===null&&(this.at=new fn),this.at.np=t,this.c(),this.t("graduatedMin",i,t),this.Qc())){const n=this.part;n!==null&&this.Ma(n,"graduatedRange")}}get graduatedMax(){return this.at!==null?this.at.op:100}set graduatedMax(t){const i=this.graduatedMax;if(i!==t&&(this.at===null&&(this.at=new fn),this.at.op=t,this.c(),this.t("graduatedMax",i,t),this.Qc())){const n=this.part;n!==null&&this.Ma(n,"graduatedRange")}}get graduatedRange(){return this.graduatedMax-this.graduatedMin}get graduatedTickUnit(){return this.at!==null?this.at.rp:10}set graduatedTickUnit(t){const i=this.graduatedTickUnit;i!==t&&t>0&&(this.at===null&&(this.at=new fn),this.at.rp=t,this.c(),this.t("graduatedTickUnit",i,t))}get graduatedTickBase(){return this.at!==null?this.at.lp:0}set graduatedTickBase(t){const i=this.graduatedTickBase;i!==t&&(this.at===null&&(this.at=new fn),this.at.lp=t,this.c(),this.t("graduatedTickBase",i,t))}get ks(){return this.at!==null?this.at.ks:null}set ks(t){this.at!==null?this.at.ks=t:t!==null&&(this.at=new fn,this.at.ks=t)}get je(){return this.at!==null?this.at.je:null}set je(t){this.at!==null?this.at.je=t:t!==null&&(this.at=new fn,this.at.je=t)}get rs(){return this.at!==null?this.at.rs:null}set rs(t){this.at!==null?this.at.rs=t:t!==null&&(this.at=new fn,this.at.rs=t)}get Ce(){return this.at!==null?this.at.Ce:null}set Ce(t){this.at!==null?this.at.Ce=t:t!==null&&(this.at=new fn,this.at.Ce=t)}k0(t){super.k0(t);const i=this.T.r,n=i.length;for(let s=0;s<n;s++)i[s].k0(t)}xh(t,i){if(this._===It.Grid){t.commitTransform(),this._.zi(this,t,i);return}if(this._===It.Graduated){t.commitTransform(),this._.zi(this,t,i);return}if(this._===It.Table)if(t.commitTransform(),t instanceof qi){const o=t.currentElement;t.currentElement=t.newGroup2("gojs-ts"),this.v2(t,i),t.endGroup(),t.currentElement=o}else this.v2(t,i);const n=this.isClipping&&this._===It.Spot;n&&t.save();const s=this.findMainElement(),r=this.T.r,A=r.length;for(let o=0;o<A;o++){const a=r[o];n&&a===s&&(t.clipInsteadOfFill=!0),a.zi(t,i),n&&a===s&&(t.clipInsteadOfFill=!1)}n&&(t.restore(),t.clearContextCache(!0))}v2(t,i){t.lineCap="butt";const n=this.rowCount>0?this.Ge:null,s=this.columnCount>0?this.He:null;n!==null&&this.Wb(t,i,!0,n,!0),s!==null&&this.Wb(t,i,!1,s,!0),n!==null&&this.FA(t,!0,n),s!==null&&this.FA(t,!1,s),n!==null&&this.Wb(t,i,!0,n,!1),s!==null&&this.Wb(t,i,!1,s,!1)}FA(t,i,n){const s=n.length,r=this.actualBounds,A=this.naturalBounds;let o=!0;for(let a=0;a<s;a++){const h=n[a];if(h===void 0||h.actual===0)continue;if(o){o=!1;continue}if(i){if(h.position>A.height)continue}else if(h.position>A.width)continue;let d=h.separatorStrokeWidth;isNaN(d)&&(d=i?this.defaultRowSeparatorStrokeWidth:this.defaultColumnSeparatorStrokeWidth);let f=h.separatorStroke;if(f===null&&(f=i?this.defaultRowSeparatorStroke:this.defaultColumnSeparatorStroke),d===0||f===null)continue;this.mn(t,f,!1,!1,A,r);let g=!1,x=h.separatorDashArray;x===null&&(x=i?this.defaultRowSeparatorDashArray:this.defaultColumnSeparatorDashArray),x!==null&&(g=!0,t.enableDash(x,0)),t.beginPath();const B=h.position+d;i?B>A.height&&(d-=B-A.height):B>A.width&&(d-=B-A.width);let C=h.position+d/2;t.lineWidth=d;const F=this._t;if(i){C+=F.top;const b=F.left,L=A.width-F.right;t.moveTo(b,C),t.lineTo(L,C)}else{C+=F.left;const b=F.top,L=A.height-F.bottom;t.moveTo(C,b),t.lineTo(C,L)}t.stroke(),t.endPath(),g&&t.disableDash()}}Wb(t,i,n,s,r){const A=s.length,o=this.actualBounds,a=this.naturalBounds,h=this.RA(!0),d=this.RA(!1);for(let f=0;f<A;f++){const g=s[f];if(g===void 0||g.background===null||g.coversSeparators===r||g.actual===0)continue;const x=n?o.height:o.width;if(g.position>x)continue;let B=g.computeEffectiveSpacing(),C=g.separatorStrokeWidth;isNaN(C)&&(C=n?this.defaultRowSeparatorStrokeWidth:this.defaultColumnSeparatorStrokeWidth);let F=g.separatorStroke;F===null&&(F=n?this.defaultRowSeparatorStroke:this.defaultColumnSeparatorStroke),(F===null||g.index===(n?h:d))&&(C=0),B-=C;const b=g.position+C;let L=B+g.actual;if(b+L>x&&(L=x-b),L<=0)continue;const Q=this._t;this.mn(t,g.background,!0,!1,a,o),n?t.fillRect(Q.left,b+Q.top,o.width-(Q.left+Q.right),L):t.fillRect(b+Q.left,Q.top,L,o.height-(Q.top+Q.bottom))}}RA(t){const i=t?this.rowCount:this.columnCount;for(let n=0;n<i;n++){const s=t?this.Ge[n]:this.He[n];if(s!==void 0)return s.index}return 0}sf(){const t=this.T.r,i=t.length;for(let n=0;n<i;n++)t[n].sf();this.Ye(!0)}ef(t,i,n){const s=this.svg;if(s===null)return!1;if(this.type===It.Table){const o=s.getElementsByClassName("gojs-ts"),a=o.length!==0?o[0]:null;a!==null&&(a.innerHTML=""),t.currentElement=a,this.v2(t,i),t.currentElement=null}else{if(this._===It.Grid||this._===It.Graduated)return s.innerHTML="",s.remove(),!1;if(this._===It.Spot&&this.isClipping)return s.innerHTML="",s.remove(),this.gh=null,this.sf(),!1}if(!super.ef(t,i,n))return!1;const r=this.T.r,A=r.length;for(let o=0;o<A;o++)r[o].zi(t,i);return!0}td(t){return!0}S0(t,i,n,s){if(!this.isClipping){if(this.Hs()&&t.partClipRect!==null){const r=t.partClipRect,A=this.T.r;let o=0,a=0;for(let h=0;h<A.length;h++){if(!A[h].isVisibleObject())continue;const d=A[h].actualBounds;o=h===0?d.x:Math.min(d.x,o),a=h===0?d.y:Math.min(d.y,a)}s.setAttributeNS(null,"clip-path",`path('M ${r.x-n.x-o},${r.y-n.y-a} l ${r.width} 0 l 0 ${r.height} l -${r.width} 0 z')`);return}super.S0(t,i,n,s)}}_c(t,i,n,s,r){const A=this.wn(),o=this.F,a=1/(o.m11*o.m22-o.m12*o.m21);let h=o.m22*a,d=-o.m12*a,f=-o.m21*a,g=o.m11*a,x=a*(o.m21*o.dy-o.m22*o.dx),B=a*(o.m12*o.dx-o.m11*o.dy);if(this.background!==null){const C=t*h+i*f+x,F=t*d+i*g+B,b=n*h+s*f+x,L=n*d+s*g+B;r.i(0,0);const Q=this.naturalBounds,M=V.Pl(0,0,Q.width,Q.height,C,F,b,L,r);return r.F(o),M}else{A||(h=1,d=0,f=0,g=1,x=0,B=0);const C=t*h+i*f+x,F=t*d+i*g+B,b=n*h+s*f+x,L=n*d+s*g+B;r.i(b,L);let Q=(b-C)*(b-C)+(L-F)*(L-F),M=!1;const O=this.T.r,D=O.length,K=T.l();let J=null,R=1/0,G=null;const W=this.isClipping&&this._===It.Spot;W&&(G=T.l(),J=this.findMainElement(),M=J._c(C,F,b,L,G),M&&(R=(C-G.x)*(C-G.x)+(F-G.y)*(F-G.y)));for(let Y=0;Y<D;Y++){const Z=O[Y];if(!Z.visible||Z===J||!Z._c(C,F,b,L,K))continue;M=!0;const et=(C-K.x)*(C-K.x)+(F-K.y)*(F-K.y);et<Q&&(Q=et,r.set(K))}return W&&(R>Q&&r.set(G),T.e(G)),T.e(K),A&&r.F(o),M}}Ru(){const t=this.T.r,i=t.length;for(let n=0;n<i;n++)t[n].Ru();super.Ru()}c(t){if(this.Bo())return;super.c(t);let i=null;(this._===It.Auto||this._===It.Link)&&(i=this.findMainElement());const n=this.T.r,s=n.length;for(let r=0;r<s;r++){const A=n[r];if((A===i||A.isPanelMain)&&A.c(!0),A.desiredSize.isReal())continue;const o=A.Gs(!1);!(A instanceof Fi)&&!(A instanceof It)&&!(A instanceof We)&&o===0||A.c(!0)}}of(){if(this.Bo())return;this.me(!0),this.no(!0);const t=this.T.r,i=t.length;for(let n=0;n<i;n++)t[n].of()}tf(){if(this.Ub()===!1){this.ed(!0),this.Na(!0);const t=this.T.r,i=t.length;for(let n=0;n<i;n++)t[n].u2()}}u2(){this.Na(!0);const t=this.T.r,i=t.length;for(let n=0;n<i;n++)t[n].u2()}Qu(t,i,n,s){const r=this.jo;r.i(0,0,0,0);const A=this.desiredSize,o=this.minSize;n===void 0&&(n=o.width,s=o.height),n=Math.max(n,o.width),s=Math.max(s,o.height);const a=this.maxSize;isNaN(A.width)||(t=Math.min(A.width,a.width)),isNaN(A.height)||(i=Math.min(A.height,a.height)),t=Math.max(n,t),i=Math.max(s,i);const h=this._t;t=Math.max(t-h.left-h.right,0),i=Math.max(i-h.top-h.bottom,0);const d=this.T.r;this._.measure(this,t,i,d,r,n,s);let f=r.width+h.left+h.right,g=r.height+h.top+h.bottom;isFinite(A.width)&&(f=A.width),isFinite(A.height)&&(g=A.height),f=Math.min(a.width,f),g=Math.min(a.height,g),f=Math.max(o.width,f),g=Math.max(o.height,g),f=Math.max(n,f),g=Math.max(s,g),r.zn(f,g),this.naturalBounds.zn(f,g),this.so(0,0,f,g)}findMainElement(){if(this.hl===null){const t=this.T.r,i=t.length;if(i===0)return null;for(let n=0;n<i;n++){const s=t[n];if(s.isPanelMain===!0)return this.hl=s,s}this.hl=t[0]}return this.hl}Ho(){return this.part!==null?this.part.locationObject:null}get panelLayoutState(){return this.R2}set panelLayoutState(t){this.R2=t}yh(t,i,n,s){const r=this.T.r;if(this.actualBounds.i(t,i,n,s),!this.desiredSize.isReal()){let A=this.Gs(!0);const o=this.measuredBounds,a=o.width,h=o.height,d=this.sl,f=d.left+d.right,g=d.top+d.bottom;switch(a===n&&h===s&&(A=0),A){case 0:(a>n||h>s)&&(this.c(),this.dt(a>n?n:a,h>s?s:h,0,0));break;case 2:this.c(!0),this.dt(n+f,s+g,0,0);break;case 5:this.c(!0),this.dt(n+f,h+g,0,0);break;case 4:this.c(!0),this.dt(a+f,s+g,0,0);break}}this._.arrange(this,r,this.jo)}ph(t){const i=this.naturalBounds,n=this.Ho();if(it.contains(0,0,i.width,i.height,t.x,t.y)){const s=this.T.r,r=s.length,A=T.Y(0,0);for(let o=r;o--;){const a=s[o];if(!(!a.visible&&a!==n)&&(A.set(t).Be(a.F),a.containsPoint(A)))return T.e(A),!0}return T.e(A),this.Rt!==null}return!1}p0(t){if(this.io===t)return this;const i=this.T.r,n=i.length;for(let s=0;s<n;s++){const r=i[s].p0(t);if(r!==null)return r}return null}walkVisualTreeFrom(t,i){if(i(this,t),t instanceof It){const n=t.T.r,s=n.length;for(let r=0;r<s;r++)this.walkVisualTreeFrom(n[r],i)}}Qr(t){this.vA(this,t)}vA(t,i){i(t);const n=t.T.r,s=n.length;for(let r=0;r<s;r++){const A=n[r];A instanceof It&&this.vA(A,i)}}Sv(t){this.OA(this,t)}OA(t,i){if(i(t),t instanceof It){const n=t.T.r,s=n.length;for(let r=0;r<s;r++)this.OA(n[r],i)}}findInVisualTree(t){return this.IA(this,t)}IA(t,i){if(i(t))return t;if(t instanceof It){const n=t.T.r,s=n.length;for(let r=0;r<s;r++){const A=this.IA(n[r],i);if(A!==null)return A}}return null}findObject(t){if(this.name===t)return this;const i=this.T.r;let n=i.length;this.Mv()&&(n=this.hp());for(let s=0;s<n;s++){const r=i[s];if(r instanceof It){const A=r.findObject(t);if(A!==null)return A}if(r.name===t)return r}return null}EA(){const t=this.T.r,i=t.length;let n=0;for(let s=0;s<i;s++){const r=t[s];r instanceof It?n=Math.max(n,r.EA()):r instanceof Zt&&(n=Math.max(n,r.Nv()))}return n}wn(){return!(this.type===It.TableRow||this.type===It.TableColumn)}ol(){return this.type===It.TableRow||this.type===It.TableColumn}gL(t,i,n){if(this.pickable===!1||(i===void 0&&(i=null),n===void 0&&(n=null),this.es()))return null;const s=this.naturalBounds,r=1/this.getDocumentScale(),A=this.wn(),o=A?t:T.Y(t.x,t.y).Be(this.F),a=this.diagram;let h=10,d=5;if(a!==null&&(h=a.getInputOption("extraTouchArea"),d=h/2),it.contains(-(d*r),-(d*r),s.width+h*r,s.height+h*r,o.x,o.y)){if(!this.df){const g=this.T.r,x=g.length,B=T.l(),C=this.isClipping&&this._===It.Spot,F=C?this.findMainElement():null;if(C&&(F.wn()?B.set(t).Be(F.F):B.set(t),!F.containsPoint(B)))return T.e(B),A||T.e(o),null;const b=this.Ho();for(let L=x;L--;){const Q=g[L];if(!Q.visible&&Q!==b||(Q.wn()?B.set(t).Be(Q.F):B.set(t),C&&Q===F))continue;let M=null;if(Q instanceof It?M=Q.gL(B,i,n):Q.pickable===!0&&Q.containsPoint(B)&&(M=Q),M!==null&&(i!==null&&(M=i(M)),M!==null&&(n===null||n(M))))return T.e(B),A||T.e(o),M}T.e(B)}if(this.background===null)return A||T.e(o),null;const f=it.contains(0,0,s.width,s.height,o.x,o.y)?this:null;return A||T.e(o),f}return A||T.e(o),null}mL(t,i,n,s){if(this.pickable===!1)return!1;i===void 0&&(i=null),n===void 0&&(n=null);const r=this.naturalBounds,A=this.wn(),o=A?t:T.Y(t.x,t.y).Be(this.F),a=this.ol(),h=it.contains(0,0,r.width,r.height,o.x,o.y);if(a||h){if(!this.df){const d=this.T.r,f=d.length,g=T.l(),x=this.Ho();for(let B=f;B--;){const C=d[B];if(!C.visible&&C!==x)continue;C.wn()?g.set(t).Be(C.F):g.set(t);let F=C;const b=C instanceof It?C:null;if(b!==null?b.mL(g,i,n,s):F.containsPoint(g)){if(F.pickable===!1)continue;i!==null&&(F=i(F)),F!==null&&(n===null||n(F))&&s.add(F)}}T.e(g)}return A||T.e(o),h&&this.background!==null}return A||T.e(o),!1}Rm(t,i,n,s,r,A){if(this.pickable===!1)return!1;i===void 0&&(i=null),n===void 0&&(n=null);let o=A;if(A===void 0&&(o=Bt.l(),o.Ii()),o.rc(this.F),this.containedInRect(t,o))return this.O2(i,n,r),A===void 0&&Bt.e(o),!0;if(this.intersectsRect(t,o)){if(!this.df){const a=this.Ho(),h=this.T.r,d=h.length;for(let f=d;f--;){const g=h[f];if(!g.visible&&g!==a)continue;const x=g.actualBounds,B=this.naturalBounds;if(x.x>B.width||x.y>B.height||x.x+x.width<0||x.y+x.height<0)continue;let C=g;const F=g instanceof It?g:null,b=Bt.l();b.set(o),(F!==null?F.Rm(t,i,n,s,r,b):C.uA(t,s,b))&&(i!==null&&(C=i(C)),C!==null&&(n===null||n(C))&&r.add(C)),Bt.e(b)}}return A===void 0&&Bt.e(o),s}return A===void 0&&Bt.e(o),!1}O2(t,i,n){const s=this.T.r,r=s.length;for(let A=r;A--;){const o=s[A];if(!o.visible)continue;const a=o.actualBounds,h=this.naturalBounds;if(a.x>h.width||a.y>h.height||a.x+a.width<0||a.y+a.height<0)continue;o instanceof It&&o.O2(t,i,n);let d=o;t!==null&&(d=t(d)),d!==null&&(i===null||i(d))&&n.add(d)}}pL(t,i,n,s,r,A){if(this.pickable===!1)return!1;n===void 0&&(n=null),s===void 0&&(s=null);const o=this.naturalBounds,a=this.wn(),h=a?t:T.Y(t.x,t.y).Be(this.F),d=a?i:T.Y(i.x,i.y).Be(this.F),f=h.distanceSquaredPoint(d),g=h.x>0&&h.x<o.width&&h.y>0&&h.y<o.height||T.distanceLineSegmentSquared(h.x,h.y,0,0,0,o.height)<=f||T.distanceLineSegmentSquared(h.x,h.y,0,o.height,o.width,o.height)<=f||T.distanceLineSegmentSquared(h.x,h.y,o.width,o.height,o.width,0)<=f||T.distanceLineSegmentSquared(h.x,h.y,o.width,0,0,0)<=f,x=h.distanceSquared(0,0)<=f&&h.distanceSquared(0,o.height)<=f&&h.distanceSquared(o.width,0)<=f&&h.distanceSquared(o.width,o.height)<=f;if(a||(T.e(h),T.e(d)),g){if(!this.df){const B=T.l(),C=T.l(),F=this.Ho(),b=this.T.r,L=b.length;for(let Q=L;Q--;){const M=b[Q];if(!M.visible&&M!==F)continue;const O=M.actualBounds,D=this.naturalBounds;if(a&&(O.x>D.width||O.y>D.height||O.x+O.width<0||O.y+O.height<0))continue;if(M.wn()){const R=M.F;B.set(t).Be(R),C.set(i).Be(R)}else B.set(t),C.set(i);let K=M;const J=M instanceof It?M:null;(J!==null?J.pL(B,C,n,s,r,A):K.dA(B,C,r))&&(n!==null&&(K=n(K)),K!==null&&(s===null||s(K))&&A.add(K))}T.e(B),T.e(C)}return r?g:x}return!1}A2(t){let i=null;if(t instanceof Zt){i=t.spot1,i===q.Default&&(i=null);const n=t.geometry;n!==null&&i===null&&(i=n.spot1)}return i===null&&(i=q.TopLeft),i}T2(t){let i=null;if(t instanceof Zt){i=t.spot2,i===q.Default&&(i=null);const n=t.geometry;n!==null&&i===null&&(i=n.spot2)}return i===null&&(i=q.BottomRight),i}add(...t){for(let i=0;i<t.length;i++)this.insertAt(this.T.count,t[i]);return this}elt(t){return this.T.elt(t)}insertAt(t,i){i instanceof Ce&&u.o("Cannot add a Part to a Panel: "+i+"; use a Panel instead"),(this===i||this.isContainedBy(i))&&(this===i&&u.o("Cannot make a Panel contain itself: "+this.toString()),u.o("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+i.toString()));const n=i.panel;if(n!==null&&n!==this&&u.o("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+i.toString()+", already contained by "+n.toString()+", cannot be shared by this Panel: "+this.toString()),this._===It.Grid&&!(i instanceof Zt)&&u.o("Can only add Shapes to a Grid Panel, not: "+i),this._===It.Graduated&&!(i instanceof Zt||i instanceof We)&&u.o("Can only add Shapes or TextBlocks to a Graduated Panel, not: "+i),i.Ca(this),i.nl=null,this.itemArray!==null){const o=i.data;u.j(o)&&(this.qs===null&&(this.qs=new xt),this.qs.set(o,i))}const s=this.T;let r=-1;if(n===this){let o=-1;const a=this.T.r,h=a.length;for(let d=0;d<h;d++)if(a[d]===i){o=d;break}if(o!==-1){if(o===t||o+1>=s.count&&t>=s.count)return;s.removeAt(o),r=o}else u.o("element "+i.toString()+" has panel "+n.toString()+" but is not contained by it.")}(t<0||t>s.count)&&(t=s.count),s.insertAt(t,i),(t===0||i.isPanelMain)&&(this.hl=null),this.Bo()||this.c(),i.c(!1),i.portId!==null?this.bn=!0:i instanceof It&&i.bn===!0&&(this.bn=!0),this.rs=null,this.isEnabledObject()||this.Jb(i,!1);const A=this.part;if(A!==null){A.D0(),A.gf(),this.bn&&A instanceof Et&&(A.bn=!0),A.bn&&A instanceof Et&&(A.le=null);const o=this.diagram;if(o!==null&&o.undoManager.isUndoingRedoing)return;r!==-1&&A.raiseChangedEvent(4,"elements",this,i,null,r,null),A.raiseChangedEvent(3,"elements",this,null,i,null,t)}}get bn(){return(this.n&8388608)!==0}set bn(t){(this.n&8388608)!==0!==t&&(this.n=this.n^8388608)}h2(){return(this.n&16777216)!==0}I2(t){t?this.n|=16777216:this.n&=-16777217}Pv(t){t.Ca(this),t.nl=null;const i=this.T,n=i.count;i.insertAt(n,t);const s=this.part;if(s!==null){s.D0(),t.portId!==null&&s instanceof Et&&(s.bn=!0);const r=this.diagram;if(r!==null&&r.undoManager.isUndoingRedoing)return;s.raiseChangedEvent(3,"elements",this,null,t,null,n)}}GR(t){const i=this.T.r,n=i.length;let s=-1;for(let r=0;r<n;r++)if(i[r]===t){s=r;break}return s}remove(t){const i=this.T.r,n=i.length;let s=-1;for(let r=0;r<n;r++)if(i[r]===t){s=r;break}s!==-1&&this.se(s,!0)}removeAt(t){t>=0&&this.se(t,!0)}se(t,i){const n=this.T,s=n.elt(t);if(s.nl=null,s.Ca(null),this.qs!==null){const A=s.data;u.j(A)&&this.qs.delete(A)}n.removeAt(t),this.me(!1),this.c(),this.hl===s&&(this.hl=null),this.rs=null;const r=this.part;if(r!==null){r.D0(),r.gf(),r.invalidateAdornments(),r instanceof Et&&(s instanceof It?s.walkVisualTreeFrom(s,(o,a)=>r.p2(a,i)):r.p2(s,i));const A=this.diagram;if(A!==null&&A.undoManager.isUndoingRedoing)return;r.raiseChangedEvent(4,"elements",this,s,null,t,null)}}get Ge(){return this.E===null&&(this.E=new Hi),this.E.Ge}get rowCount(){return this.E===null?0:this.Ge.length}getRowDefinition(t){t<0&&u.it(t,">= 0",It,"getRowDefinition:idx"),t=Math.round(t);const i=this.Ge;if(i[t]===void 0){const n=new je;n.Ca(this),n.isRow=!0,n.index=t,i[t]=n,this.raiseChangedEvent(3,"rowdefs",this,null,n,null,t)}return i[t]}removeRowDefinition(t){if(t<0&&u.it(t,">= 0",It,"removeRowDefinition:idx"),this.rowCount===0)return;t=Math.round(t);const i=this.Ge,n=i[t];if(n){i[t]=void 0;let s=i.length-1;for(;s>=0&&i[s--]===void 0;)i.length--;this.raiseChangedEvent(4,"rowdefs",this,n,null,t,null),this.c()}}GL(t,i){const n=this.Ge;if(!(t<0)){if(n[t]=i instanceof je?i:void 0,!i){let s=n.length-1;for(;s>=0&&n[s--]===void 0;)n.length--}this.c()}}get He(){return this.E===null&&(this.E=new Hi),this.E.He}get columnCount(){return this.E===null?0:this.He.length}getColumnDefinition(t){t<0&&u.it(t,">= 0",It,"getColumnDefinition:idx"),t=Math.round(t);const i=this.He;if(i[t]===void 0){const n=new je;n.Ca(this),n.isRow=!1,n.index=t,i[t]=n,this.raiseChangedEvent(3,"coldefs",this,null,n,null,t)}return i[t]}removeColumnDefinition(t){if(t<0&&u.it(t,">= 0",It,"removeColumnDefinition:idx"),this.columnCount===0)return;t=Math.round(t);const i=this.He,n=i[t];if(n){i[t]=void 0;let s=i.length-1;for(;s>=0&&i[s--]===void 0;)i.length--;this.raiseChangedEvent(4,"coldefs",this,n,null,t,null),this.c()}}HL(t,i){const n=this.He;if(!(t<0)){if(n[t]=i instanceof je?i:void 0,!i){let s=n.length-1;for(;s>=0&&n[s--]===void 0;)n.length--}this.c()}}addRowColumnDefinition(t){let i=null;return t.isRow?i=this.getRowDefinition(t.index):t.isRow||(i=this.getColumnDefinition(t.index)),i&&i.zb(t),this}addRowDefinition(t,i){const n=this.getRowDefinition(t);return n&&n.zb(new je(i)),this}addColumnDefinition(t,i){const n=this.getColumnDefinition(t);return n&&n.zb(new je(i)),this}get rowSizing(){return this.E!==null?this.E.ap:3}set rowSizing(t){const i=this.rowSizing;i!==t&&(this.E===null&&(this.E=new Hi),this.E.ap=t,this.c(),this.t("rowSizing",i,t))}get columnSizing(){return this.E!==null?this.E.cp:3}set columnSizing(t){const i=this.columnSizing;i!==t&&(this.E===null&&(this.E=new Hi),this.E.cp=t,this.c(),this.t("columnSizing",i,t))}get topIndex(){return this.E!==null?this.E.fp:0}set topIndex(t){const i=this.topIndex;i!==t&&((!isFinite(t)||t<0)&&u.o("Panel.topIndex must be greater than zero and a real number, not: "+t),this.E===null&&(this.E=new Hi),this.E.fp=t,this.c(),this.t("topIndex",i,t))}get leftIndex(){return this.E!==null?this.E.dp:0}set leftIndex(t){const i=this.leftIndex;i!==t&&((!isFinite(t)||t<0)&&u.o("Panel.leftIndex must be greater than zero and a real number, not: "+t),this.E===null&&(this.E=new Hi),this.E.dp=t,this.c(),this.t("leftIndex",i,t))}findRowForLocalY(t){if(t<0||this.type!==It.Table||this.rowCount===0)return-1;let i=0;const n=this.Ge,s=n.length;let r=this.topIndex;for(;r<s;r++){const A=n[r];if(A!==void 0&&(i+=A.total,t<i))return r}return r}findColumnForLocalX(t){if(t<0||this.type!==It.Table||this.columnCount===0)return-1;let i=0;const n=this.He,s=n.length;let r=this.leftIndex;for(;r<s;r++){const A=n[r];if(A!==void 0&&(i+=A.total,t<i))return r}return r}graduatedPointForValue(t,i){if(i===void 0&&(i=new T(NaN,NaN)),this.type!==It.Graduated)return i.i(NaN,NaN),i;t=Math.min(Math.max(t,this.graduatedMin),this.graduatedMax);const n=this.findMainElement();return n.geometry.getPointAlongPath((t-this.graduatedMin)/this.graduatedRange,i),n.F.bt(i)}graduatedValueForPoint(t){if(this.type!==It.Graduated)return NaN;const i=this.findMainElement();return i.F._e(t),i.geometry.getFractionForPoint(t)*this.graduatedRange+this.graduatedMin}get data(){return this.ii}set data(t){const i=this.ii;if(i!==t){const n=this instanceof Ce&&!(this instanceof se);n&&u.s(t,"object",It,"data"),this.Xt(),this.ii=t;const s=this.diagram;if(s!==null)if(n)s.partManager.Cv(this,i,t);else{const r=this.panel;r!==null&&r.qs!==null&&(i!==null&&r.qs.delete(i),t!==null&&r.qs.set(t,this))}if(this.t("data",i,t),s!==null&&s.undoManager.isUndoingRedoing)return;t!==null&&this.updateTargetBindings()}}get itemIndex(){return this.cd}set itemIndex(t){const i=this.cd;i!==t&&(this.cd=t,this.t("itemIndex",i,t))}get js(){return this.f!==null?this.f.js:null}set js(t){this.Ti!==t&&(this.f===null&&(this.f=new Qs),this.f.js=t)}w2(){return this.js!==null}PA(){const t=this.js;return t!==null&&t.h}freezeBindings(){return this.Xt()}Xt(){let t=this.js;if(t===null)this.data!==null&&u.o("Template cannot have .data be non-null: "+this),this.js=t=new H;else if(t.h)return this;const i=new H;this.I2(!1),this.walkVisualTreeFrom(this,(r,A)=>{A.mh();const o=A.Ti;if(o!==null){A.d2(!1);const a=o.iterator;for(;a.next();){const h=a.value;h.mode===2&&A.d2(!0);const d=h.sourceName;if(h.isToObject){d==="/"&&r.I2(!0);const f=h.fA(r,A);f!==null&&(i.add(f),f.eo===null&&(f.eo=new H),f.eo.add(h))}t.add(h)}}if(A instanceof It&&A.type===It.Table){if(A.rowCount>0){const a=A.Ge,h=a.length;for(let d=0;d<h;d++){const f=a[d];if(f!==void 0&&f.Ws!==null){const g=f.Ws.iterator;for(;g.next();){const x=g.value;x.Me=f,x.dd=2,x.mf=f.index,t.add(x)}}}}if(A.columnCount>0){const a=A.He,h=a.length;for(let d=0;d<h;d++){const f=a[d];if(f!==void 0&&f.Ws!==null){const g=f.Ws.iterator;for(;g.next();){const x=g.value;x.Me=f,x.dd=1,x.mf=f.index,t.add(x)}}}}}});const n=i.iterator;for(;n.next();){const r=n.value;if(r.eo!==null){r.d2(!0);const A=r.eo.iterator;for(;A.next();){const o=A.value;r.Ti===null&&(r.Ti=new H),r.Ti.add(o)}}r.eo=null}let s=t.iterator;for(;s.next();){const r=s.value;let A=r.Me;if(A!==null){r.Me=null;const o=r.targetProperty,a=o.indexOf(".");if(a>0&&A instanceof It){const h=o.substring(0,a),d=o.substring(a+1),f=A.findObject(h);f!==null?(A=f,r.targetProperty=d):(u.ri('Warning: unable to find GraphObject named "'+h+'" for Binding: '+r.toString()),A=null)}if(A instanceof je){const h=X.us(A.panel);r.targetId=h===void 0?-1:h,A.panel.io=r.targetId}else if(A instanceof Ye){const h=X.us(A);r.targetId=h===void 0?-1:h,A.io=r.targetId}else u.o("Unknown type of binding target: "+A);r.check(A)}}return t.g(),this instanceof Ce&&this.Ne()&&this.ensureBounds(),this}copyTemplate(t){t===void 0&&(t=!1);const i=this.copy();return i.Sv(n=>{n instanceof It&&(n.js=null,n.ii=null);const s=n.Ti;s!==null&&(n.Ti=null,s.each(A=>n.bind(A.copy())));const r=n.bs;r!==null&&(n.bs=null,r.each(A=>n.trigger(A.value.copy())))}),t&&i.Xt(),i}updateTargetBindings(t){var r;const i=this.js;if(i===null)return;t===void 0&&(t="");const n=(r=this.diagram)==null?void 0:r.model,s=i.iterator;for(;s.next();){const A=s.value,o=this.BA(A,t);if(o===null)continue;const{data:a,elt:h}=o;A.isToTheme&&this.diagram===null||h!==void 0&&A.updateTarget(h,a,void 0,n)}}Uo(){if(this.diagram!==null)if(this.w2()){const t=this.diagram.model,i=this.js.iterator;for(;i.next();){const n=i.value;if(!n.isToTheme)continue;const s=this.BA(n);if(s===null)continue;const{data:r,elt:A}=s;A!==void 0&&n.updateTarget(A,r,void 0,t)}}else{const t=this.T.r,i=t.length;for(let n=0;n<i;n++)t[n].Uo()}}BA(t,i=""){const n=t.sourceProperty;if(i!==""&&n!==""&&n!==i)return null;const s=t.targetProperty;if(t.converter===null&&s==="")return null;let r=this.data;const A=t.sourceName;if(t.isToObject){if(r=this.cA(A),r===null)return null}else if(t.isToModel){const d=this.diagram;if(d===null)return null;r=d.model.modelData}let o=this;const a=t.targetId;if(a!==-1){if(o=this.p0(a),o===null)return null}else t.Me!==null&&(o=t.Me);A==="/"?r=o.part:A==="."?r=o:A===".."&&(r=o.panel);const h=t.dd;if(h!==0){if(!(o instanceof It))return null;h===1?o=o.getColumnDefinition(t.mf):h===2&&(o=o.getRowDefinition(t.mf))}return{data:r,elt:o}}get itemArray(){return this.Sh}set itemArray(t){const i=this.Sh;if(i!==t||t!==null&&this.Lv(t)){const n=this.diagram;if(i!==t&&(n!==null&&i!==null&&n.partManager.LM(this,n),this.Sh=t,n!==null&&t!==null&&n.partManager.CM(this,n)),this.t("itemArray",i,t),n!==null&&n.undoManager.isUndoingRedoing)return;this.UA(i,t)}}findItemPanelForData(t){return t==null||this.qs===null?null:(u.oc(t,It,"findItemPanelForData"),this.qs.get(t))}Lv(t){const i=this.T.r,n=i.length,s=t.length;let r=0,A=null;for(;r<n&&(A=i[r],!(A instanceof It)||A.data===null);)r++,A=i[r];if(n-r!==s)return!0;if(A===null)return s>0;let o=0;for(;r<n&&o<s;){if(A=i[r],!(A instanceof It)||A.data!==t[o])return!0;r++,o++}return!1}hp(){if(this.type===It.Spot||this.type===It.Auto)return Math.min(this.T.length,1);if(this.type===It.Link){const t=this.T,i=t.length;let n=0;for(;n<i;n++){const s=t.elt(n);if(!(s instanceof Zt)||!s.isPanelMain)return n}return n}if(this.type===It.Table&&this.T.length>0){const t=this.T.elt(0);if(t.isPanelMain&&t instanceof It&&t.ol())return 1}return 0}rebuildItemElements(){const t=this.hp();for(;this.T.length>t;)this.se(this.T.length-1,!1);this.UA(null,this.itemArray)}UA(t,i){const n=this.hp(),s=i;if(s===null||s.length===0){for(;this.T.length>n;)this.se(this.T.length-1,!1);return}if(this.T.length<=n){const r=s.length;for(let A=0;A<r;A++)this.$b(s[A],A,!0)}else{let r=n;for(let o=0;o<s.length;o++,r++){const a=s[o],h=r<this.T.length?this.T.elt(r):null;if(h instanceof It){if(h.data!==a){const d=this.E2(h.data,o),f=this.E2(a,o);let g=f!==d;if(!g){const x=this.B2(h.data,o,d);g=this.B2(a,o,f)!==x}g?(this.se(r,!1),this.$b(a,o,!1)):h.data=a}}else this.$b(a,o,!1)}for(;r<this.T.length;)this.se(r,!1);this.hl=null,this.U2(n,0),this.Bo()||this.c(),this.rs=null,this.isEnabledObject()||this.Jb(this,!1);const A=this.part;A!==null&&(A.D0(),A.gf(),this.bn&&A instanceof Et&&(A.bn=!0),A.bn&&A instanceof Et&&(A.le=null))}}$b(t,i,n){if(t==null||i<0)return null;const s=this.E2(t,i),r=this.B2(t,i,s);if(r!==null){r.Xt();const A=r.copy();if(A.h2()){const a=this.findBindingPanel();a!==null&&a.I2(!0)}u.j(t)&&(this.qs===null&&(this.qs=new xt),this.qs.set(t,A));const o=i+this.hp();return this.insertAt(o,A),n&&(A.ii=t,this.U2(o,i),A.ii=null),A.data=t,A}return null}Av(t){if(t<0)return;const i=t+this.hp();this.se(i,!0),this.U2(i,t)}U2(t,i){const n=this.T;let s=t,r=i;for(;s<n.length;){const A=n.elt(s);A instanceof It&&A.Tv(s,r),s++,r++}}Tv(t,i){this.type===It.TableRow?this.row=t:this.type===It.TableColumn&&(this.column=t),this.itemIndex=i}Mv(){return this.Sh!==null||this.itemTemplateMap!==null}get itemTemplate(){return this.itemTemplateMap===null?null:this.itemTemplateMap.get("")}set itemTemplate(t){if(this.itemTemplateMap===null){if(t===null)return;this.itemTemplateMap=new xt}const i=this.itemTemplateMap.get("");if(i!==t){(t instanceof Ce||t.isPanelMain)&&u.o("Panel.itemTemplate must not be a Part or be Panel.isPanelMain: "+t),this.itemTemplateMap.set("",t),this.t("itemTemplate",i,t);const n=this.diagram;if(n!==null&&n.undoManager.isUndoingRedoing)return;this.rebuildItemElements()}}get itemTemplateMap(){return this.f!==null?this.f.H0:null}set itemTemplateMap(t){const i=this.itemTemplateMap;if(i!==t){const n=t.iterator;for(;n.next();)n.value;this.Wt(),this.f.H0=t,this.t("itemTemplateMap",i,t);const s=this.diagram;if(s!==null&&s.undoManager.isUndoingRedoing)return;this.rebuildItemElements()}}get itemCategoryProperty(){return this.f!==null?this.f.j0:"category"}set itemCategoryProperty(t){const i=this.itemCategoryProperty;i!==t&&(typeof t!="string"&&!u.lt(t)&&u.te(t,"string or function",It,"itemCategoryProperty"),this.Wt(),this.f.j0=t,this.t("itemCategoryProperty",i,t))}E2(t,i){if(t===null)return"";const n=this.itemCategoryProperty;let s="";if(u.lt(n))s=n(t);else if(typeof n=="string"&&u.j(t)){if(n==="")return"";const r=this.diagram,A=r!==null?r.model:null;A?s=A.kt(t,n):s=hi.kt(t,n)}else return"";if(s===void 0)return"";if(typeof s=="string")return s;u.o("Panel.getCategoryForItemData found a non-string category for "+t+": "+s)}B2(t,i,n){const s=this.itemTemplateMap;let r=null;return s!==null&&(r=s.get(n)),r===null&&(s!==null&&(r=s.get("")),r===null&&(It.VA||(It.VA=!0,u.ri('No item template Panel found for category "'+n+'" on '+this),u.ri("  Using default item template."),It.zA=new It().add(new We().bind("text","",u.toString).theme("stroke","text"))),r=It.zA)),r}get df(){return(this.n&1048576)!==0}set df(t){const i=(this.n&1048576)!==0;i!==t&&(u.s(t,"boolean",It,"isAtomic"),this.n=this.n^1048576,this.t("isAtomic",i,t))}get isClipping(){return(this.n&2097152)!==0}set isClipping(t){const i=(this.n&2097152)!==0;i!==t&&(this.sf(),this.n=this.n^2097152,this instanceof Vt&&(this.oi=null),this.c(),this.t("isClipping",i,t))}get isOpposite(){return(this.n&33554432)!==0}set isOpposite(t){const i=(this.n&33554432)!==0;i!==t&&(this.n=this.n^33554432,this.c(),this.t("isOpposite",i,t))}get isEnabled(){return(this.n&4194304)!==0}set isEnabled(t){const i=(this.n&4194304)!==0;if(i!==t){const n=this.panel===null||this.panel.isEnabledObject();this.n=this.n^4194304,this.t("isEnabled",i,t);const s=this.diagram;if(s!==null&&s.undoManager.isUndoingRedoing)return;n&&this.Jb(this,t)}}Jb(t,i){const n=t.enabledChanged;if(n!==null&&n(t,i),t instanceof It){const s=t.T.r,r=s.length;for(let A=0;A<r;A++){const o=s[A];i&&o instanceof It&&!o.isEnabled||this.Jb(o,i)}}}get alignmentFocusName(){return this.ho}set alignmentFocusName(t){const i=this.ho;i!==t&&(this.ho=t,this.c(),this.t("alignmentFocusName",i,t))}static definePanelLayout(t,i){xe.Pn(t,i)}static isBuilderDefined(t){return xe.os.has(t)}};p(It,"NE",!1),p(It,"VA",!1),p(It,"zA",null),p(It,"Position",xe.os.get("Position")),p(It,"Horizontal",xe.os.get("Horizontal")),p(It,"Vertical",xe.os.get("Vertical")),p(It,"Spot",xe.os.get("Spot")),p(It,"Auto",xe.os.get("Auto")),p(It,"Table",xe.os.get("Table")),p(It,"Viewbox",xe.os.get("Viewbox")),p(It,"TableRow",xe.os.get("TableRow")),p(It,"TableColumn",xe.os.get("TableColumn")),p(It,"Link",xe.os.get("Link")),p(It,"Grid",xe.os.get("Grid")),p(It,"Graduated",xe.os.get("Graduated"));let Kt=It;Kt.definePanelLayout=Kt.definePanelLayout;class fn{constructor(){p(this,"np");p(this,"op");p(this,"rp");p(this,"lp");p(this,"ks");p(this,"je");p(this,"rs");p(this,"Ce");this.np=0,this.op=100,this.rp=10,this.lp=0,this.ks=null,this.je=null,this.rs=null,this.Ce=null}copy(){const e=new fn;return e.np=this.np,e.op=this.op,e.rp=this.rp,e.lp=this.lp,e.ks=this.ks,e.je=this.je,e.rs=this.rs,e.Ce=this.Ce,e}}class cr{constructor(){p(this,"fd");p(this,"ud");p(this,"jc");p(this,"$0");this.fd=ct.fC,this.ud=T.Lo,this.jc=ct.gw,this.$0=[]}copy(){const e=new cr;return e.fd=this.fd.copy(),e.ud=this.ud.copy(),e.jc=this.jc.copy(),e.$0=this.$0,e}}class Hi{constructor(){p(this,"Ge");p(this,"He");p(this,"ap");p(this,"cp");p(this,"fp");p(this,"dp");p(this,"Z0");p(this,"_0");p(this,"Q0");p(this,"tp");p(this,"ep");p(this,"ip");p(this,"sp");p(this,"Ph");this.Ge=[],this.He=[],this.ap=3,this.cp=3,this.fp=0,this.dp=0,this.Z0=Rt.Ig,this._0=1,this.Q0=null,this.tp=null,this.ep=1,this.ip=null,this.sp=null,this.Ph=null}copy(e){const t=new Hi,i=this.Ge,n=i.length,s=t.Ge;for(let a=0;a<n;a++){if(i[a]===void 0)continue;const h=i[a].copy();h.Ca(e),s[a]=h}const r=this.He,A=r.length,o=t.He;for(let a=0;a<A;a++){if(r[a]===void 0)continue;const h=r[a].copy();h.Ca(e),o[a]=h}return t.ap=this.ap,t.cp=this.cp,t.fp=this.fp,t.dp=this.dp,t.Z0=this.Z0.N(),t._0=this._0,t.Q0=this.Q0,t.tp=this.tp,t.ep=this.ep,t.ip=this.ip,t.sp=this.sp,t.Ph=this.Ph,t}}var dr=(k=>(k[k.Default=1]="Default",k[k.None=2]="None",k[k.ProportionalExtra=3]="ProportionalExtra",k))(dr||{});const Bn=class Bn{constructor(e){p(this,"Ks");p(this,"gp");p(this,"vt");p(this,"Da");p(this,"Fa");p(this,"ci");p(this,"gt");p(this,"gd");p(this,"oo");p(this,"qo");p(this,"md");p(this,"pd");p(this,"Ra");p(this,"Rt");p(this,"yd");p(this,"Ws");p(this,"ot");p(this,"Fi");p(this,"ye");X.qi(this),this.Ks=null,this.gp=!0,this.vt=0,this.ye=NaN,this.Da=0,this.Fa=1/0,this.ci=q.Default,this.ot=0,this.Fi=0,this.gt=0,this.Ws=null,this.gd=1,this.oo=1,this.qo=null,this.md=null,this.pd=NaN,this.Ra=null,this.Rt=null,this.yd=!1,e&&(Object.assign(this,e),e.column!==void 0?(this.isRow=!1,this.index=e.column):e.row!==void 0&&(this.isRow=!0,this.index=e.row))}copy(){const e=new Bn;return e.gp=this.gp,e.vt=this.vt,e.ye=this.ye,e.Da=this.Da,e.Fa=this.Fa,e.ci=this.ci,e.ot=this.ot,e.Fi=this.Fi,e.gt=this.gt,e.oo=this.oo,e.gd=this.gd,this.qo===null?e.qo=null:e.qo=this.qo.N(),e.md=this.md,e.pd=this.pd,e.Ra=null,this.Ra!==null&&(e.separatorDashArray=this.separatorDashArray.slice()),e.Rt=this.Rt,e.yd=this.yd,e.Ws=this.Ws,e}zb(e){e.isRow?this.height=e.height:this.width=e.width,this.minimum=e.minimum,this.maximum=e.maximum,this.alignment=e.alignment,this.stretch=e.stretch,this.sizing=e.sizing,this.qo=e.separatorPadding===null?null:e.separatorPadding.N(),this.separatorStroke=e.separatorStroke,this.separatorStrokeWidth=e.separatorStrokeWidth,this.Ra=null,e.separatorDashArray&&(this.Ra=e.separatorDashArray.slice()),this.background=e.background,this.coversSeparators=e.coversSeparators,this.Ws=e.Ws}li(e){e in dr?this.sizing=e:u.ur(this,e)}toString(){return"RowColumnDefinition "+(this.isRow?"(Row ":"(Column ")+this.index+") #"+X.us(this)}Ca(e){this.Ks=e}computeEffectiveSpacingTop(e){let t=0;const i=this.Ks;if(this.index!==e){let s=this.separatorStroke;s===null&&i!==null&&(s=this.isRow?i.defaultRowSeparatorStroke:i.defaultColumnSeparatorStroke),s!==null&&(t=this.separatorStrokeWidth,isNaN(t)&&(i!==null?t=this.isRow?i.defaultRowSeparatorStrokeWidth:i.defaultColumnSeparatorStrokeWidth:t=0))}let n=this.qo;if(n===null)if(i!==null)n=i.defaultSeparatorPadding;else return t;return t+(this.isRow?n.top:n.left)}computeEffectiveSpacing(){let e=0;const t=this.Ks;let i=0;const n=this.isRow;if(t!==null&&t.type===Kt.Table){const r=n?t.Ge.length:t.He.length;for(let A=0;A<r;A++){const o=n?t.Ge[A]:t.He[A];if(o!==void 0&&o.ot!==0){i=o.index;break}}}if(this.index!==i){let r=this.separatorStroke;r===null&&t!==null&&(r=n?t.defaultRowSeparatorStroke:t.defaultColumnSeparatorStroke),r!==null&&(e=this.separatorStrokeWidth,isNaN(e)&&(t!==null?e=n?t.defaultRowSeparatorStrokeWidth:t.defaultColumnSeparatorStrokeWidth:e=0))}let s=this.qo;if(s===null)if(t!==null)s=t.defaultSeparatorPadding;else return e;return e+(this.isRow?s.top+s.bottom:s.left+s.right)}t(e,t,i,n,s){const r=this.Ks;if(r!==null&&(r.raiseChangedEvent(2,e,this,t,i,n,s),this.Ws!==null)){const A=r.diagram;if(A!==null&&!A.ge){const o=r.findBindingPanel();if(o!==null){const a=o.data;if(a!==null){const h=this.Ws.iterator;for(;h.next();)h.value.updateSource(this,a,e,o)}}}}}get panel(){return this.Ks}get isRow(){return this.gp}set isRow(e){this.gp=e}get index(){return this.vt}set index(e){this.vt=e}get height(){return this.ye}set height(e){const t=this.ye;t!==e&&(e<0&&u.it(e,">= 0",Bn,"height"),this.ye=e,this.actual=this.ot,this.panel!==null&&this.panel.c(),this.t("height",t,e))}get width(){return this.ye}set width(e){const t=this.ye;t!==e&&(e<0&&u.it(e,">= 0",Bn,"width"),this.ye=e,this.actual=this.ot,this.panel!==null&&this.panel.c(),this.t("width",t,e))}get minimum(){return this.Da}set minimum(e){const t=this.Da;t!==e&&((e<0||!isFinite(e))&&u.it(e,">= 0",Bn,"minimum"),this.Da=e,this.actual=this.ot,this.panel!==null&&this.panel.c(),this.t("minimum",t,e))}get maximum(){return this.Fa}set maximum(e){const t=this.Fa;t!==e&&(e<0&&u.it(e,">= 0",Bn,"maximum"),this.Fa=e,this.actual=this.ot,this.panel!==null&&this.panel.c(),this.t("maximum",t,e))}get alignment(){return this.ci}set alignment(e){const t=this.ci;t.equals(e)||(this.ci=e.N(),this.panel!==null&&this.panel.c(),this.t("alignment",t,e))}get stretch(){return this.oo}set stretch(e){const t=this.oo;t!==e&&(this.oo=e,this.panel!==null&&this.panel.c(),this.t("stretch",t,e))}get separatorPadding(){return this.qo}set separatorPadding(e){typeof e=="number"&&(e=new Rt(e));const t=this.qo;(e===null||t===null||!t.equals(e))&&(e!==null&&(e=e.N()),this.qo=e,this.panel!==null&&this.panel.c(),this.t("separatorPadding",t,e))}get separatorStroke(){return this.md}set separatorStroke(e){const t=this.md;t!==e&&(e!==null&&Qe.sd(e,"RowColumnDefinition.separatorStroke"),e instanceof Qe&&e.g(),this.md=e,this.panel!==null&&this.panel.c(),this.t("separatorStroke",t,e))}get separatorStrokeWidth(){return this.pd}set separatorStrokeWidth(e){const t=this.pd;t!==e&&(this.pd=e,this.panel!==null&&this.panel.c(),this.t("separatorStrokeWidth",t,e))}get separatorDashArray(){return this.Ra}set separatorDashArray(e){const t=this.Ra;if(t!==e){if(e!==null&&!Array.isArray(e)&&u.te(e,"Array",Bn,"separatorDashArray:value"),e!==null){const i=e.length;let n=0;for(let s=0;s<i;s++){const r=e[s];(typeof r!="number"||!(r>=0)||!isFinite(r))&&u.o("separatorDashArray value "+r+" at index "+s+" must be a positive number or zero."),n+=r}if(n===0){if(t===null)return;e=null}}this.Ra=e,this.panel!==null&&this.panel.L(),this.t("separatorDashArray",t,e)}}get background(){return this.Rt}set background(e){const t=this.Rt;t!==e&&(e!==null&&Qe.sd(e,"RowColumnDefinition.background"),e instanceof Qe&&e.g(),this.Rt=e,this.panel!==null&&this.panel.L(),this.t("background",t,e))}get coversSeparators(){return this.yd}set coversSeparators(e){const t=this.yd;t!==e&&(u.s(e,"boolean",Bn,"coversSeparators"),this.yd=e,this.panel!==null&&this.panel.L(),this.t("coversSeparators",t,e))}get sizing(){return this.gd}set sizing(e){const t=this.gd;t!==e&&(this.gd=e,this.panel!==null&&this.panel.c(),this.t("sizing",t,e))}jb(){if(this.sizing===1){const e=this.Ks;return this.isRow?e.rowSizing:e.columnSizing}return this.sizing}get actual(){return this.ot}set actual(e){isNaN(this.ye)?this.ot=Math.max(Math.min(this.Fa,e),this.Da):this.ot=Math.max(Math.min(this.Fa,this.ye),this.Da)}get measured(){return this.Fi}set measured(e){this.Fi=e}get total(){return this.ot+this.computeEffectiveSpacing()}get position(){return this.gt}set position(e){this.gt=e}bind(e,t,i,n){return this.lf(e,t,i,n),this}bindTwoWay(e,t,i,n){const s=this.lf(e,t,i,n);return n===void 0&&s.makeTwoWay(),this}theme(e,t,i,n,s){return this.bh(e,t,i,n,s),this}themeData(e,t,i,n,s){return this.bh(e,t,i,n,s).ofData(),this}themeObject(e,t,i,n,s,r){return this.bh(e,t,i,n,s).ofObject(r),this}themeModel(e,t,i,n,s){return this.bh(e,t,i,n,s).ofModel(),this}lf(e,t,i,n){let s=null;return typeof e=="string"?s=new ms(e,t,i,n):s=e,this.G0(s),s}bh(e,t,i,n,s){let r=null;return typeof e=="string"?r=new wr(e,t,i,n,s):r=e,this.G0(r),r}G0(e){e.Me=this;const t=this.panel;if(t!==null){const i=t.findBindingPanel();i!==null&&i.PA()&&u.o("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+e+" on "+t)}this.Ws===null&&(this.Ws=new H),this.Ws.add(e)}};p(Bn,"Default",1),p(Bn,"None",2),p(Bn,"ProportionalExtra",3);let je=Bn;const De=class De extends Ye{constructor(t,i){super();p(this,"ft");p(this,"Ps");p(this,"wd");p(this,"va");p(this,"Wi");p(this,"Wo");p(this,"Ko");p(this,"At");p(this,"xd");p(this,"bd");p(this,"Z");this.ft=null,this.Ps=null,this.wd="None",this.va="black",this.Wi="black",this.Wo=1,this.Ko=null,this.At=null,this.xd=NaN,this.bd=NaN,this.Z=null,typeof t=="string"?this.figure=t:t&&Object.assign(this,t),i&&Object.assign(this,i)}cloneProtected(t){super.cloneProtected(t),t.ft=this.ft,t.Ps=this.Ps,t.wd=this.wd,t.va=this.va,t.Wi=this.Wi,t.Wo=this.Wo,this.Ko!==null&&(t.Ko=this.Ko.slice()),this.At!==null&&(this.At.gi?t.At=this.At:t.At=this.At.copy()),t.xd=this.xd,t.bd=this.bd,this.Z!==null&&(t.Z=this.Z.copy())}Oa(){this.At===null?this.At=new gn:this.At.gi&&(this.At=this.At.copy())}mh(){super.mh(),this.At!==null&&(this.At.gi=!0)}li(t){t in fe?this.geometryStretch=t:super.li(t)}toString(){return"Shape("+(this.figure!=="None"?this.figure:this.toArrow!=="None"?this.toArrow:this.fromArrow)+")#"+X.us(this)}Dv(t,i){const n=this.pathPattern;n.dt(1/0,1/0);const s=n.measuredBounds;n.Kt(0,0,s.width,s.height);const r=this.geometry;t.save(),t.beginPath();const A=u.ht();if(r.type===1)A.push(r.startX),A.push(r.startY),A.push(r.endX),A.push(r.endY),this.kd(t,i,A,n);else if(r.type===4){const o=r.figures.iterator;for(;o.next();){const a=o.value;A.length=0,A.push(a.startX),A.push(a.startY);let h=a.startX,d=a.startY,f=h,g=d;const x=a.segments.r,B=x.length;for(let C=0;C<B;C++){const F=x[C];switch(F.type){case 1:this.kd(t,i,A,n),A.length=0,A.push(F.endX),A.push(F.endY),h=F.endX,d=F.endY,f=h,g=d;break;case 2:A.push(F.endX),A.push(F.endY),h=F.endX,d=F.endY;break;case 3:V.Yn(h,d,F.point1X,F.point1Y,F.point2X,F.point2Y,F.endX,F.endY,.5,A),h=F.endX,d=F.endY;break;case 4:V.Bg(h,d,F.point1X,F.point1Y,F.endX,F.endY,.5,A),h=F.endX,d=F.endY;break;case 5:{const b=F.Ao(a),L=b.length;if(L===0){A.push(F.centerX),A.push(F.centerY),h=F.centerX,d=F.centerY;break}for(let Q=0;Q<L;Q++){const M=b[Q];V.Yn(h,d,M[2],M[3],M[4],M[5],M[6],M[7],.5,A),h=M[6],d=M[7]}break}case 6:{const b=F.Kh(a,h,d),L=b.length;if(L===0){A.push(F.endX),A.push(F.endY),h=F.endX,d=F.endY;break}for(let Q=0;Q<L;Q++){const M=b[Q];V.Yn(h,d,M[2],M[3],M[4],M[5],M[6],M[7],.5,A),h=M[6],d=M[7]}break}default:u.o("Segment not of valid type: "+F.type)}F.isClosed&&(A.push(f),A.push(g),this.kd(t,i,A,n))}this.kd(t,i,A,n)}}else if(r.type===2)A.push(r.startX),A.push(r.startY),A.push(r.endX),A.push(r.startY),A.push(r.endX),A.push(r.endY),A.push(r.startX),A.push(r.endY),A.push(r.startX),A.push(r.startY),this.kd(t,i,A,n);else if(r.type===3){const o=new ve;o.startX=r.endX,o.startY=(r.startY+r.endY)/2;const a=new Nt(5);a.startAngle=0,a.sweepAngle=360,a.centerX=(r.startX+r.endX)/2,a.centerY=(r.startY+r.endY)/2,a.radiusX=Math.abs(r.startX-r.endX)/2,a.radiusY=Math.abs(r.startY-r.endY)/2,o.add(a);const h=a.Ao(o),d=h.length;if(d===0)A.push(a.centerX),A.push(a.centerY);else{let f=o.startX,g=o.startY;for(let x=0;x<d;x++){const B=h[x];V.Yn(f,g,B[2],B[3],B[4],B[5],B[6],B[7],.5,A),f=B[6],g=B[7]}}this.kd(t,i,A,n)}u.et(A),t.restore(),t.clearContextCache(!1)}Fv(t){let i=t.measuredBounds.width;return t instanceof De&&(i-=t.strokeWidth),i<1&&(i=1),i}kd(t,i,n,s){const r=n.length;if(r<4)return;const A=s.measuredBounds,o=Math.max(1,A.width),a=A.height;let h=n[0],d=n[1],f=0,g=0,x=0,B=0,C=0,F=0,b=0,L=0;const Q=u.ht();for(let W=2;W<r;W+=2)f=n[W],g=n[W+1],x=f-h,B=g-d,x===0&&(x=.001),C=B/x,F=Math.atan2(B,x),b=Math.sqrt(x*x+B*B),Q.push([x,F,C,b]),L+=b,h=f,d=g;h=n[0],d=n[1];const M=this.Fv(s);let O=M;const D=o/2;let K=D!==0,J=0,R=Q[J];x=R[0],F=R[1],C=R[2],b=R[3];let G=0;for(;L>=.1;){if(G===0&&(K?(O=M,O-=D,L-=D,K=!1):O=M,O===0&&(O=1)),O>L){O=L,u.et(Q);return}O>b?(G=O-b,O=b):G=0;let W=Math.sqrt(O*O/(1+C*C));if(x<0&&(W=-W),h+=W,d+=C*W,t.translate(h,d),t.rotate(F),t.translate(-(o/2),-(a/2)),G===0&&s.xh(t,i),t.translate(o/2,a/2),t.rotate(-F),t.translate(-h,-d),L-=O,b-=O,G!==0){if(J++,J===Q.length){u.et(Q);return}R=Q[J],x=R[0],F=R[1],C=R[2],b=R[3],O=G}}u.et(Q)}xh(t,i){const n=t instanceof qi;let s=this.Wi;const r=this.va;if(s===null&&r===null)return;const A=this.ft;if(A===null)return;t.commitTransform();const o=this.actualBounds,a=this.naturalBounds;r!==null&&this.mn(t,r,!0,!1,a,o);const h=this.part;let d=this.Wo;s!==null&&d===0&&h!==null&&(this.isPanelMain||h.findMainElement()===this)&&(d=h.Rv()),d===0&&(s=null),s!==null&&d!==0&&(this.mn(t,s,!1,!1,a,o),t.lineWidth=d,t.lineJoin=this.strokeJoin,t.lineCap=this.strokeCap,t.miterLimit=this.strokeMiterLimit);let f=!1;h&&i.getRenderingHint("drawShadows")&&(f=h.isShadowed),t.rl===!1&&(f=!1);let g=!0;s!==null&&(r===null||r==="transparent")&&(g=!1);let x=!1;const B=this.strokeDashArray;if(B!==null&&(x=!0,t.enableDash(B,this.strokeDashOffset)),A.type===1)t.beginPath(),t.moveTo(A.startX,A.startY),t.lineTo(A.endX,A.endY),s!==null&&t.strokeContext(),t.endPath();else if(A.type===2){const C=A.startX,F=A.startY,b=A.endX,L=A.endY,Q=Math.min(C,b),M=Math.min(F,L),O=Math.abs(b-C),D=Math.abs(L-F);t.beginPath(),t.rect(Q,M,O,D),r!==null&&t.fillContext(r,!1,null),s!==null&&(g&&f&&t.shadowsOff(),t.strokeContext(),g&&f&&t.shadowsOn()),t.endPath()}else if(A.type===3){const C=A.startX,F=A.startY,b=A.endX,L=A.endY,Q=Math.abs(b-C)/2,M=Math.abs(L-F)/2,O=Math.min(C,b)+Q,D=Math.min(F,L)+M;t.beginPath(),t.moveTo(O,D-M),t.bezierCurveTo(O+V.Xn*Q,D-M,O+Q,D-V.Xn*M,O+Q,D),t.bezierCurveTo(O+Q,D+V.Xn*M,O+V.Xn*Q,D+M,O,D+M),t.bezierCurveTo(O-V.Xn*Q,D+M,O-Q,D+V.Xn*M,O-Q,D),t.bezierCurveTo(O-Q,D-V.Xn*M,O-V.Xn*Q,D-M,O,D-M),t.closePath(),r!==null&&t.fillContext(r,!1,null),s!==null&&(g&&f&&t.shadowsOff(),t.strokeContext(),g&&f&&t.shadowsOn()),t.endPath()}else if(A.type===4){const C=A.figures,F=C.length;for(let b=0;b<F;b++){const L=C.r[b];n?this.buildPath(t,L):L.Ve===null&&(L.Ve=new Path2D,this.buildPath(L.Ve,L));const Q=L.isFilled;f?L.isShadowed?(Q===!0&&r!=="transparent"&&r!==null&&t.fillContext(r,L.isEvenOdd,L.Ve),s!==null&&(Q&&g&&t.shadowsOff(),t.stroke(L.Ve),Q&&g&&t.shadowsOn())):(t.shadowsOff(),Q&&r!=="transparent"&&r!==null&&t.fillContext(r,L.isEvenOdd,L.Ve),s!==null&&t.stroke(L.Ve),t.shadowsOn()):(Q&&r!==null&&t.fillContext(r,L.isEvenOdd,L.Ve),s!==null&&t.stroke(L.Ve)),t.endPath(b)}}x&&t.disableDash(),this.pathPattern!==null&&this.Dv(t,i)}buildPath(t,i){t instanceof Path2D||t.beginPath(),t.moveTo(i.startX,i.startY);const n=i.segments.r,s=n.length;let r=null;for(let A=0;A<s;A++){const o=n[A];switch(o.type){case 1:t.moveTo(o.endX,o.endY);break;case 2:t.lineTo(o.endX,o.endY);break;case 3:t.bezierCurveTo(o.point1X,o.point1Y,o.point2X,o.point2Y,o.endX,o.endY);break;case 4:t.quadraticCurveTo(o.point1X,o.point1Y,o.endX,o.endY);break;case 5:if(o.radiusX===o.radiusY){const a=r!==null?r.endX:i.startX,h=r!==null?r.endY:i.startY,d=Math.PI/180;t.arc(o.point1X,o.point1Y,o.radiusX,o.startAngle*d,(o.startAngle+o.sweepAngle)*d,o.sweepAngle<0,a,h)}else{const a=o.Ao(i),h=a.length;if(h===0){t.lineTo(o.centerX,o.centerY);break}for(let d=0;d<h;d++){const f=a[d];d===0&&t.lineTo(f[0],f[1]),t.bezierCurveTo(f[2],f[3],f[4],f[5],f[6],f[7])}}break;case 6:{let a=0,h=0,d;if(r!==null&&r.type===5){d=r.Ao(i);const g=d.length;if(g===0){t.lineTo(o.endX,o.endY);break}const x=d[g-1]||null;x!==null&&(a=x[6],h=x[7])}else a=r!==null?r.endX:i.startX,h=r!==null?r.endY:i.startY;d=o.Kh(i,a,h);const f=d.length;if(f===0){t.lineTo(o.endX,o.endY);break}for(let g=0;g<f;g++){const x=d[g];t.bezierCurveTo(x[2],x[3],x[4],x[5],x[6],x[7])}break}}o.isClosed&&t.closePath(),r=o}}ef(t,i,n){if(!super.ef(t,i,n)||this.Wi===null&&this.va===null||this.ft===null||this.pathPattern!==null)return!1;const s=this.svg.getElementsByTagName("path");return this.geometry.figures.length!==s.length?!1:(t.currentPath=this.svg,this.xh(t,i),t.currentPath=null,!0)}td(t){return this.geometry!==null&&this.geometry.figures.length>1||this.pathPattern!==null?!0:super.td(t)}f2(t,i){if(t.nodeName!=="g")t.setAttributeNS(null,"filter",i);else{const n=t.getElementsByTagName("path");for(let s=0;s<n.length;s++)n[s].setAttributeNS(null,"filter",i)}}getDocumentPoint(t,i){if(i===void 0&&(i=new T),t instanceof q){const n=t;n.isNoSpot()&&u.o("getDocumentPoint Spot must be a real, specific Spot, not: "+n.toString());const s=this.naturalBounds,r=this.strokeWidth;return i.i(n.x*(s.width+r)-r/2+s.x+n.offsetX,n.y*(s.height+r)-r/2+s.y+n.offsetY),this.zs.bt(i),i}else return i.set(t),this.zs.bt(i),i}getDocumentBounds(t){t===void 0&&(t=new it);const i=this.naturalBounds,n=this.zs,s=it.Y(i.x,i.y,i.width,i.height),r=this.strokeWidth;s.inflate(r/2,r/2);const A=T.Y(s.x,s.y).F(n);return t.i(A.x,A.y,0,0),A.i(s.right,s.y).F(n),t.unionNoCheck(A.x,A.y,0,0),A.i(s.right,s.bottom).F(n),t.unionNoCheck(A.x,A.y,0,0),A.i(s.x,s.bottom).F(n),t.unionNoCheck(A.x,A.y,0,0),it.e(s),T.e(A),t}ph(t,i){const n=this.geometry;if(n===null||this.fill===null&&this.stroke===null)return!1;const s=n.bounds;let r=this.strokeWidth/2;n.type===1&&!i&&(r+=2);const A=it.l();if(A.a(s),A.inflate(r+2,r+2),!A.containsPoint(t))return it.e(A),!1;const o=r+1e-4;if(n.type===1){if(this.stroke===null)return!1;const a=(n.startX-n.endX)*(t.x-n.endX)+(n.startY-n.endY)*(t.y-n.endY),h=(n.endX-n.startX)*(t.x-n.startX)+(n.endY-n.startY)*(t.y-n.startY);return a<0||h<0?!1:(it.e(A),V.Ei(n.startX,n.startY,n.endX,n.endY,r,t.x,t.y))}else if(n.type===2){const a=n.startX,h=n.startY,d=n.endX,f=n.endY;if(A.x=Math.min(a,d),A.y=Math.min(h,f),A.width=Math.abs(d-a),A.height=Math.abs(f-h),this.fill===null){if(A.inflate(-o,-o),A.containsPoint(t))return it.e(A),!1;A.inflate(o,o)}this.stroke!==null&&A.inflate(r,r);const g=A.containsPoint(t);return it.e(A),g}else if(n.type===3){const a=n.startX,h=n.startY,d=n.endX,f=n.endY;let g=Math.min(a,d),x=Math.min(h,f);const B=Math.abs(d-a),C=Math.abs(f-h);let F=B/2,b=C/2;if(g=t.x-(g+F),x=t.y-(x+b),this.fill===null){if(F-=o,b-=o,F<=0||b<=0||g*g/(F*F)+x*x/(b*b)<=1)return it.e(A),!1;F+=o,b+=o}return this.stroke!==null&&(F+=o,b+=o),it.e(A),F<=0||b<=0?!1:g*g/(F*F)+x*x/(b*b)<=1}else{if(n.type===4)return it.e(A),this.fill===null?n.DC(t.x,t.y,r):n.zk(t,r,this.strokeWidth>1,i);u.o("Unknown Geometry type: "+n.type)}}Qu(t,i,n,s){const r=this.desiredSize,A=this.Wo;t=Math.max(t,0),i=Math.max(i,0);let o;if(this.Ps!==null)o=this.geometry.bounds;else{const C=this.figure;let F=De.V2[C];if(F===void 0){let b=V.Gn[C];typeof b=="string"&&(b=V.Gn[b]),u.lt(b)?(F=b(null,100,100),De.V2[C]=F):u.o("Unsupported Figure: "+C)}o=F.bounds}let a=o.width,h=o.height,d=o.width,f=o.height;switch(this.Gs(!0)){case 0:n=0,s=0;break;case 2:d=Math.max(t-A,0),f=Math.max(i-A,0);break;case 5:d=Math.max(t-A,0),s=0;break;case 4:n=0,f=Math.max(i-A,0);break}isFinite(r.width)&&(d=r.width),isFinite(r.height)&&(f=r.height);const g=this.maxSize,x=this.minSize;n=Math.max(n-A,x.width),s=Math.max(s-A,x.height),d=Math.min(g.width,d),f=Math.min(g.height,f),d=isFinite(d)?Math.max(n,d):Math.max(a,n),f=isFinite(f)?Math.max(s,f):Math.max(h,s);const B=this.eS();switch(B){case 0:break;case 2:a=d,h=f;break;case 6:{let C=Math.min(d/a,f/h);isFinite(C)||(C=1),a=a*C,h=h*C;break}default:u.o(B+" is not a valid geometryStretch.")}if(this.Ps!==null){a===0&&(a=.001),h===0&&(h=.001);const C=(this.Ps!==null?this.Ps:this.ft).sF(a,h);this.ft=C}else(this.ft===null||!V.K(this.ft.hc,t-A)||!V.K(this.ft.ac,i-A))&&(this.ft=De.vv(this,a,h));o=this.ft.bounds,t===1/0||i===1/0?this.so(o.x-A/2,o.y-A/2,t===0&&a===0?0:o.width+A,i===0&&h===0?0:o.height+A):this.so(-(A/2),-(A/2),d+A,f+A),r.isReal()?(d=r.width,f=r.height,d=Math.min(g.width,d),f=Math.min(g.height,f),d=Math.max(x.width,d),f=Math.max(x.height,f),this.Ki.i(0,0,d,f)):this.Ki.a(o)}eS(){const t=this.geometryStretch;return this.Ps!==null?t===1?2:t:t===1?De.V2[this.figure].defaultStretch:t}yh(t,i,n,s){this.commonArrange(t,i,n,s)}getNearestIntersectionPoint(t,i,n){return this._c(t.x,t.y,i.x,i.y,n)}_c(t,i,n,s,r){const A=this.F,o=1/(A.m11*A.m22-A.m12*A.m21),a=A.m22*o,h=-A.m12*o,d=-A.m21*o,f=A.m11*o,g=o*(A.m21*A.dy-A.m22*A.dx),x=o*(A.m12*A.dx-A.m11*A.dy),B=t*a+i*d+g,C=t*h+i*f+x,F=n*a+s*d+g,b=n*h+s*f+x,L=this.Wo/2;let Q=this.ft;Q===null&&(this.dt(1/0,1/0),Q=this.ft);const M=Q.bounds;let O=!1;if(Q.type===1)if(this.strokeWidth<=1.5)O=V.Kn(Q.startX,Q.startY,Q.endX,Q.endY,B,C,F,b,r);else{let D=0,K=0;if(Q.startX===Q.endX)D=L,K=0;else{const Y=(Q.endY-Q.startY)/(Q.endX-Q.startX);K=L/Math.sqrt(1+Y*Y),D=K*Y}const J=u.ht();let R=new T;V.Kn(Q.startX+D,Q.startY+K,Q.endX+D,Q.endY+K,B,C,F,b,R)&&J.push(R),R=new T,V.Kn(Q.startX-D,Q.startY-K,Q.endX-D,Q.endY-K,B,C,F,b,R)&&J.push(R),R=new T,V.Kn(Q.startX+D,Q.startY+K,Q.startX-D,Q.startY-K,B,C,F,b,R)&&J.push(R),R=new T,V.Kn(Q.endX+D,Q.endY+K,Q.endX-D,Q.endY-K,B,C,F,b,R)&&J.push(R);const G=J.length;if(G===0)return u.et(J),!1;O=!0;let W=1/0;for(let Y=0;Y<G;Y++){const Z=J[Y],et=(Z.x-B)*(Z.x-B)+(Z.y-C)*(Z.y-C);et<W&&(W=et,r.x=Z.x,r.y=Z.y)}u.et(J)}else if(Q.type===2)O=V.Pl(M.x-L,M.y-L,M.x+M.width+L,M.y+M.height+L,B,C,F,b,r);else if(Q.type===3){const D=it.Y(M.x,M.y,M.width,M.height).inflate(L,L);O=this.Ov(D,B,C,F,b,r),it.e(D)}else if(Q.type===4){let D=0,K=0,J=0,R=0;const G=T.l();let W=F-B,Y=b-C,Z=W*W+Y*Y,et=B,At=C;if(Z>0&&M.contains(et,At)&&(G.x=et,G.y=At,this.containsPoint(G)))for(W!==0&&Math.abs(W)<.5?(Y*=.5/W,W=.5):Y!==0&&Math.abs(Y)<.5&&(W*=.5/Y,Y=.5),et-=W,At-=Y;M.contains(et,At);)et-=W,At-=Y;const ht=.6;r.x=F,r.y=b;for(let Wt=0;Wt<Q.figures.count;Wt++){const St=Q.figures.r[Wt],Qt=St.isFilled?et:B,Mt=St.isFilled?At:C,Ut=St.segments;D=St.startX,K=St.startY;let ne=D,te=K;for(let Ft=0;Ft<Ut.count;Ft++){const zt=Ut.r[Ft],He=zt.type;J=zt.endX,R=zt.endY;let ae=!1;switch(He){case 1:ne=J,te=R;break;case 2:ae=this.Zb(D,K,J,R,Qt,Mt,F,b,G);break;case 3:{ae=V.Ug(D,K,zt.point1X,zt.point1Y,zt.point2X,zt.point2Y,J,R,Qt,Mt,F,b,ht,G);break}case 4:{ae=V.Ug(D,K,D+2/3*(zt.point1X-D),K+2/3*(zt.point1Y-K),J+2/3*(zt.point1X-J),R+2/3*(zt.point1Y-R),J,R,Qt,Mt,F,b,ht,G);break}case 5:case 6:{const Pt=zt.type===5?zt.Ao(St):zt.Kh(St,D,K),wt=Pt.length;if(wt===0){ae=this.Zb(D,K,zt.type===5?zt.centerX:zt.endX,zt.type===5?zt.centerY:zt.endY,Qt,Mt,F,b,G);break}let Ht=null;for(let pe=0;pe<wt;pe++){if(Ht=Pt[pe],pe===0&&this.Zb(D,K,Ht[0],Ht[1],Qt,Mt,F,b,G)){const Re=this.Qb(Qt,Mt,G,Z,r);Re<Z&&(Z=Re,O=!0)}if(V.Ug(Ht[0],Ht[1],Ht[2],Ht[3],Ht[4],Ht[5],Ht[6],Ht[7],Qt,Mt,F,b,ht,G)){const Re=this.Qb(Qt,Mt,G,Z,r);Re<Z&&(Z=Re,O=!0)}}J=Ht[6],R=Ht[7];break}default:u.o("Unknown Segment type: "+He)}if(D=J,K=R,ae){const Pt=this.Qb(Qt,Mt,G,Z,r);Pt<Z&&(Z=Pt,O=!0)}if(zt.isClosed&&(J=ne,R=te,this.Zb(D,K,J,R,Qt,Mt,F,b,G))){const Pt=this.Qb(Qt,Mt,G,Z,r);Pt<Z&&(Z=Pt,O=!0)}}}let nt=n-t,gt=s-i;const Ct=Math.sqrt(nt*nt+gt*gt);Ct!==0&&(nt/=Ct,gt/=Ct),r.x-=nt*L,r.y-=gt*L,T.e(G)}else u.o("Unknown Geometry type: "+Q.type);return O?(this.F.bt(r),!0):!1}Qb(t,i,n,s,r){const A=n.x-t,o=n.y-i,a=A*A+o*o;return a<s?(r.x=n.x,r.y=n.y,a):s}Zb(t,i,n,s,r,A,o,a,h){if(V.K(t,n)&&V.K(i,s)||V.K(r,o)&&V.K(A,a))return!1;let d=!1;const f=(r-o)*(i-s)-(A-a)*(t-n);if(f===0)return!1;if(h.x=((r*a-A*o)*(t-n)-(r-o)*(t*s-i*n))/f,h.y=((r*a-A*o)*(i-s)-(A-a)*(t*s-i*n))/f,(t>n?t-n:n-t)<(i>s?i-s:s-i)){const g=i<s?i:s,x=i<s?s:i;(h.y>g||V.K(h.y,g))&&(h.y<x||V.K(h.y,x))&&(d=!0)}else{const g=t<n?t:n,x=t<n?n:t;(h.x>g||V.K(h.x,g))&&(h.x<x||V.K(h.x,x))&&(d=!0)}return d}Iv(t,i,n){return this.pickable===!1?!1:(n.rc(this.F),i?this.Ev(t,n):this.containedInRect(t,n))}containedInRect(t,i){if(i===void 0)return t.containsRect(this.actualBounds);let n=this.ft;n===null&&(this.dt(1/0,1/0),n=this.ft);const s=n.bounds,r=this.strokeWidth/2;let A=!1;const o=T.l();return o.i(s.x-r,s.y-r),t.containsPoint(i.bt(o))&&(o.i(s.x-r,s.bottom+r),t.containsPoint(i.bt(o))&&(o.i(s.right+r,s.bottom+r),t.containsPoint(i.bt(o))&&(o.i(s.right+r,s.y-r),t.containsPoint(i.bt(o))&&(A=!0)))),T.e(o),A}intersectsRect(t,i){if(this.containedInRect(t,i)||i===void 0&&(i=this.F,t.containsRect(this.actualBounds)))return!0;const n=Bt.l();n.set(i),n.yw();const s=t.left,r=t.right,A=t.top,o=t.bottom,a=T.l();if(a.i(s,A),n.bt(a),this.ph(a,!0)||(a.i(r,A),n.bt(a),this.ph(a,!0))||(a.i(s,o),n.bt(a),this.ph(a,!0))||(a.i(r,o),n.bt(a),this.ph(a,!0)))return T.e(a),!0;const h=T.l(),d=T.l();n.set(i),n.xC(this.F),n.yw(),h.x=r,h.y=A,h.F(n),a.x=s,a.y=A,a.F(n);let f=!1;return this.Ia(a,h,d)?f=!0:(a.x=r,a.y=o,a.F(n),this.Ia(a,h,d)?f=!0:(h.x=s,h.y=o,h.F(n),this.Ia(a,h,d)?f=!0:(a.x=s,a.y=A,a.F(n),this.Ia(a,h,d)&&(f=!0)))),T.e(a),Bt.e(n),T.e(h),T.e(d),f}Ia(t,i,n){if(!this.getNearestIntersectionPoint(t,i,n))return!1;const s=t.x,r=t.y,A=i.x,o=i.y,a=n.x,h=n.y;if(s===A){let d=0,f=0;return r<o?(d=r,f=o):(d=o,f=r),h>=d&&h<=f}else{let d=0,f=0;return s<A?(d=s,f=A):(d=A,f=s),a>=d&&a<=f}}Ev(t,i){if(this.containedInRect(t,i)||i===void 0&&(i=this.F,t.containsRect(this.actualBounds)))return!0;const n=t.left,s=t.right,r=t.top,A=t.bottom,o=T.l(),a=T.l(),h=T.l(),d=Bt.l();d.set(i),d.xC(this.F),d.yw(),a.x=s,a.y=r,a.F(d),o.x=n,o.y=r,o.F(d);let f=!1;return this.Ia(o,a,h)?f=!0:(o.x=s,o.y=A,o.F(d),this.Ia(o,a,h)?f=!0:(a.x=n,a.y=A,a.F(d),this.Ia(o,a,h)?f=!0:(o.x=n,o.y=r,o.F(d),this.Ia(o,a,h)&&(f=!0)))),Bt.e(d),T.e(o),T.e(a),T.e(h),f}dA(t,i,n){if(n&&this.fill!==null&&this.ph(t,!0))return!0;let s=t.distanceSquaredPoint(i);const r=s;this.strokeWidth>1.5&&(s=this.strokeWidth/2+Math.sqrt(s),s*=s);let A=this.ft;if(A===null&&(this.dt(1/0,1/0),A=this.ft,A===null))return!1;if(!n){const g=A.bounds,x=g.x,B=g.y,C=g.x+g.width,F=g.y+g.height;if(T.distanceSquared(t.x,t.y,x,B)<=s&&T.distanceSquared(t.x,t.y,C,B)<=s&&T.distanceSquared(t.x,t.y,x,F)<=s&&T.distanceSquared(t.x,t.y,C,F)<=s)return!0}function o(g,x){const B=g.length;for(let C=0;C<B;C+=2)if(x.distanceSquared(g[C],g[C+1])>s)return!0;return!1}const a=A.startX,h=A.startY,d=A.endX,f=A.endY;if(A.type===1){const g=T.distanceLineSegmentSquared(t.x,t.y,a,h,d,f),x=(d-a)*(t.x-a)+(f-h)*(t.y-h),B=(a-d)*(t.x-d)+(h-f)*(t.y-f),C=x>=0&&B>=0?s:r;return g<=C}else if(A.type===2){let g=!1;return n&&(g=T.distanceLineSegmentSquared(t.x,t.y,a,h,a,f)<=s||T.distanceLineSegmentSquared(t.x,t.y,a,h,d,h)<=s||T.distanceLineSegmentSquared(t.x,t.y,d,h,d,f)<=s||T.distanceLineSegmentSquared(t.x,t.y,a,f,d,f)<=s),g}else if(A.type===3){const g=(a+d)/2,x=(h+f)/2,B=t.x-g,C=t.y-x,F=Math.abs(d-a)/2,b=Math.abs(f-h)/2;if(F===0||b===0)return T.distanceLineSegmentSquared(t.x,t.y,a,h,d,f)<=s;if(n){const L=V.WD(F,b,B,C);return L*L<=s}else return!(T.distanceSquared(B,C,-F,0)>=s||T.distanceSquared(B,C,0,-b)>=s||T.distanceSquared(B,C,0,b)>=s||T.distanceSquared(B,C,F,0)>=s)}else if(A.type===4){const g=A.bounds,x=g.x,B=g.y,C=g.x+g.width,F=g.y+g.height;if(t.x>C&&t.x<x&&t.y>F&&t.y<B&&T.distanceLineSegmentSquared(t.x,t.y,x,B,x,F)>s&&T.distanceLineSegmentSquared(t.x,t.y,x,B,C,B)>s&&T.distanceLineSegmentSquared(t.x,t.y,C,F,x,F)>s&&T.distanceLineSegmentSquared(t.x,t.y,C,F,C,B)>s)return!1;const b=Math.sqrt(s);if(n){if(this.fill===null?A.DC(t.x,t.y,b):A.zk(t,b,!0,!1))return!0}else{const L=A.figures;for(let Q=0;Q<L.count;Q++){const M=L.r[Q];let O=M.startX,D=M.startY;if(t.distanceSquared(O,D)>s)return!1;const K=M.segments.r,J=K.length;for(let R=0;R<J;R++){const G=K[R];switch(G.type){case 1:case 2:if(O=G.endX,D=G.endY,t.distanceSquared(O,D)>s)return!1;break;case 3:{const W=u.ht();V.Yn(O,D,G.point1X,G.point1Y,G.point2X,G.point2Y,G.endX,G.endY,.8,W);const Y=o(W,t);if(u.et(W),Y||(O=G.endX,D=G.endY,t.distanceSquared(O,D)>s))return!1;break}case 4:{const W=u.ht();V.Bg(O,D,G.point1X,G.point1Y,G.endX,G.endY,.8,W);const Y=o(W,t);if(u.et(W),Y||(O=G.endX,D=G.endY,t.distanceSquared(O,D)>s))return!1;break}case 5:case 6:{const W=G.type===5?G.Ao(M):G.Kh(M,O,D),Y=W.length;if(Y===0){if(O=G.type===5?G.centerX:G.endX,D=G.type===5?G.centerY:G.endY,t.distanceSquared(O,D)>s)return!1;break}let Z=null;const et=u.ht();for(let At=0;At<Y;At++)if(Z=W[At],et.length=0,V.Yn(Z[0],Z[1],Z[2],Z[3],Z[4],Z[5],Z[6],Z[7],.8,et),o(et,t))return u.et(et),!1;u.et(et),Z!==null&&(O=Z[6],D=Z[7]);break}default:u.o("Unknown Segment type: "+G.type)}}}return!0}}return!1}Ov(t,i,n,s,r,A){if(t.width===0)return V.Kn(t.x,t.y,t.x,t.y+t.height,i,n,s,r,A);if(t.height===0)return V.Kn(t.x,t.y,t.x+t.width,t.y,i,n,s,r,A);{const o=t.width/2,a=t.height/2,h=t.x+o,d=t.y+a;let f=9999;if(i!==s&&(f=(n-r)/(i-s)),Math.abs(f)<9999){const g=n-d-f*(i-h);if(o*o*(f*f)+a*a-g*g<0)return A.x=NaN,A.y=NaN,!1;const x=Math.sqrt(o*o*(f*f)+a*a-g*g),B=(-(o*o*f*g)+o*a*x)/(a*a+o*o*(f*f))+h,C=(-(o*o*f*g)-o*a*x)/(a*a+o*o*(f*f))+h,F=f*(B-h)+g+d,b=f*(C-h)+g+d,L=Math.abs((i-B)*(i-B))+Math.abs((n-F)*(n-F)),Q=Math.abs((i-C)*(i-C))+Math.abs((n-b)*(n-b));L<Q?(A.x=B,A.y=F):(A.x=C,A.y=b)}else{const g=a*a,x=o*o,B=i-h,C=g-g/x*(B*B);if(C<0)return A.x=NaN,A.y=NaN,!1;const F=Math.sqrt(C),b=d+F,L=d-F,Q=Math.abs(b-n),M=Math.abs(L-n);Q<M?(A.x=i,A.y=b):(A.x=i,A.y=L)}return!0}}Nv(){return this.Wo/2*this.strokeMiterLimit*this.getDocumentScale()}get geometry(){return this.ft!==null?this.ft:this.Ps}set geometry(t){const i=this.ft,n=this.Ps;if(i===t)return;t!==null?(this.ft=t.g(),this.Ps=this.ft):(this.ft=null,this.Ps=null);const s=this.part;if(s!==null&&s.gf(),this.c(),this.t("geometry",i||n,t),this.Qc()){const r=this.part;r!==null&&this.Ma(r,"geometryString")}}get geometryString(){return this.geometry===null?"":this.geometry.toString()}set geometryString(t){const i=Jt.parse(t),n=i.normalize();this.geometry=i;const s=T.Y(-n.x,-n.y);this.position=s,T.e(s)}get isGeometryPositioned(){return(this.n&1048576)!==0}set isGeometryPositioned(t){const i=(this.n&1048576)!==0;i!==t&&(this.n=this.n^1048576,this.c(),this.t("isGeometryPositioned",i,t))}oe(){this.ft=null}get fill(){return this.va}set fill(t){const i=this.va;i!==t&&(t!==null&&Qe.sd(t,"Shape.fill"),t instanceof Qe&&t.g(),this.va=t,this.L(),this.t("fill",i,t))}get stroke(){return this.Wi}set stroke(t){const i=this.Wi;i!==t&&(t!==null&&Qe.sd(t,"Shape.stroke"),t instanceof Qe&&t.g(),this.Wi=t,this.L(),this.t("stroke",i,t))}get strokeWidth(){return this.Wo}set strokeWidth(t){const i=this.Wo;if(i!==t)if(t>=0){this.Wo=t,this.c();const n=this.part;n!==null&&n.gf(),this.t("strokeWidth",i,t)}else u.it(t,"value >= 0",De,"strokeWidth:value")}x0(){return this.Wo}get strokeCap(){return this.At!==null?this.At.mp:"butt"}set strokeCap(t){const i=this.strokeCap;i!==t&&(typeof t=="string"&&(t==="butt"||t==="round"||t==="square")?(this.Oa(),this.At.mp=t,this.L(),this.t("strokeCap",i,t)):u.it(t,'"butt", "round", or "square"',De,"strokeCap"))}get strokeJoin(){return this.At!==null?this.At.pp:"miter"}set strokeJoin(t){const i=this.strokeJoin;i!==t&&(typeof t=="string"&&(t==="miter"||t==="bevel"||t==="round")?(this.Oa(),this.At.pp=t,this.L(),this.t("strokeJoin",i,t)):u.it(t,'"miter", "bevel", or "round"',De,"strokeJoin"))}get strokeMiterLimit(){return this.At!==null?this.At.yp:10}set strokeMiterLimit(t){const i=this.strokeMiterLimit;if(i!==t&&t>=1){this.Oa(),this.At.yp=t,this.L();const n=this.part;n!==null&&n.gf(),this.t("strokeMiterLimit",i,t)}}get strokeDashArray(){return this.Ko}set strokeDashArray(t){const i=this.Ko;if(i!==t){if(t!==null&&!Array.isArray(t)&&u.te(t,"Array",De,"strokeDashArray:value"),t!==null){const n=t.length;let s=0;for(let r=0;r<n;r++){const A=t[r];(!(A>=0)||!isFinite(A))&&u.o("strokeDashArray:value "+A+" at index "+r+" must be a positive number or zero."),s+=A}if(s===0){if(i===null)return;t=null}}this.Ko=t,this.L(),this.t("strokeDashArray",i,t)}}get strokeDashOffset(){return this.At!==null?this.At.kh:0}set strokeDashOffset(t){const i=this.strokeDashOffset;i!==t&&t>=0&&(this.Oa(),this.At.kh=t,this.L(),this.t("strokeDashOffset",i,t))}get figure(){return this.wd}set figure(t){const i=this.wd;if(i!==t){let n=V.Gn[t];if(u.lt(n)?n=t:(n=V.Gn[t.toLowerCase()],n||u.o("Unknown Shape.figure: "+t)),i!==n){const s=this.part;s!==null&&s.gf(),this.wd=n,this.Ps=null,this.oe(),this.c(),this.t("figure",i,n)}}}get toArrow(){return this.Vt!==null?this.Vt.wp:"None"}set toArrow(t){const i=this.toArrow;if(t===!0?t="Standard":t===!1&&(t=""),i!==t){const n=De.XA(t);n===null?u.o("Unknown Shape.toArrow: "+t):i!==n&&(this.Vt===null&&(this.Vt=new Pn),this.Vt.wp=n,this.Ps=null,this.oe(),this.c(),this.YA(n),this.t("toArrow",i,n))}}get fromArrow(){return this.Vt!==null?this.Vt.xp:"None"}set fromArrow(t){const i=this.fromArrow;if(t===!0?t="Standard":t===!1&&(t=""),i!==t){const n=De.XA(t);n===null?u.o("Unknown Shape.fromArrow: "+t):i!==n&&(this.Vt===null&&(this.Vt=new Pn),this.Vt.xp=n,this.Ps=null,this.oe(),this.c(),this.YA(n),this.t("fromArrow",i,n))}}YA(t){const i=this.diagram;if(i!==null&&i.undoManager.isUndoingRedoing)return;this.WR();const n=q.MiddleRight;this.toArrow!=="None"?(this.segmentIndex=-1,this.alignmentFocus=n):this.fromArrow!=="None"&&(this.segmentIndex=0,this.alignmentFocus=new q(1-n.x,n.y))}get spot1(){return this.At!==null?this.At.Hn:q.Default}set spot1(t){const i=this.spot1;i.equals(t)||(t=t.N(),this.Oa(),this.At.Hn=t,this.c(),this.t("spot1",i,t))}get spot2(){return this.At!==null?this.At.jn:q.Default}set spot2(t){const i=this.spot2;i.equals(t)||(t=t.N(),this.Oa(),this.At.jn=t,this.c(),this.t("spot2",i,t))}get parameter1(){return this.xd}set parameter1(t){const i=this.xd;i!==t&&(this.xd=t,this.oe(),this.c(),this.t("parameter1",i,t))}get parameter2(){return this.bd}set parameter2(t){const i=this.bd;i!==t&&(this.bd=t,this.oe(),this.c(),this.t("parameter2",i,t))}get naturalBounds(){return this.Ki}gv(){const t=this.desiredSize;if(!t.isReal()&&this.ft!==null){const i=this.ft.bounds;this.Ki.a(i)}else this.Ki.i(0,0,t.width,t.height)}get pathPattern(){return this.At!==null?this.At.bp:null}set pathPattern(t){const i=this.pathPattern;i!==t&&(this.Oa(),this.At.bp=t,this.L(),this.t("pathPattern",i,t))}get geometryStretch(){return this.At!==null?this.At.kp:1}set geometryStretch(t){const i=this.geometryStretch;i!==t&&(this.Oa(),this.At.kp=t,this.c(),this.t("geometryStretch",i,t))}get interval(){return this.Z!==null?this.Z.pf:1}set interval(t){const i=this.interval;if(t=Math.round(t),i!==t&&t!==0&&isFinite(t)){this.Z===null&&(this.Z=new Zi),this.Z.pf=t;const n=this.diagram;n!==null&&this.panel===n.grid&&n.lh(),this.c();const s=this.panel;s!==null&&(s.rs=null),this.t("interval",i,t)}}get graduatedStart(){return this.Z!==null?this.Z.yf:0}set graduatedStart(t){const i=this.graduatedStart;i!==t&&(t<0?t=0:t>1&&(t=1),this.Z===null&&(this.Z=new Zi),this.Z.yf=t,this.c(),this.t("graduatedStart",i,t))}get graduatedEnd(){return this.Z!==null?this.Z.wf:1}set graduatedEnd(t){const i=this.graduatedEnd;i!==t&&(t<0?t=0:t>1&&(t=1),this.Z===null&&(this.Z=new Zi),this.Z.wf=t,this.c(),this.t("graduatedEnd",i,t))}get graduatedSkip(){return this.Z!==null?this.Z.xf:null}set graduatedSkip(t){const i=this.graduatedSkip;i!==t&&(t!==null&&u.C(t,De,"graduatedSkip"),this.Z===null&&(this.Z=new Zi),this.Z.xf=t,this.c(),this.t("graduatedSkip",i,t))}static vv(t,i,n){let s=null;if(t.toArrow!=="None")s=De.Sn[t.toArrow];else if(t.fromArrow!=="None")s=De.Sn[t.fromArrow];else{let r=V.Gn[t.figure];typeof r=="string"&&(r=V.Gn[r]),r===void 0&&u.o("Unknown Shape.figure: "+t.figure),s=r(t,i,n),s.hc=i,s.ac=n}if(s===null){const r=V.Gn.Rectangle;u.lt(r)&&(s=r(t,i,n))}return s}static getFigureGenerators(){const t=new xt;for(const i in V.Gn){if(i===i.toLowerCase())continue;const n=V.Gn[i];t.set(i,n)}return t.g(),t}static defineFigureGenerator(t,i){u.s(t,"string",De,"defineFigureGenerator:name"),typeof i=="string"||u.C(i,De,"defineFigureGenerator:func");const n=t.toLowerCase(),s=V.Gn;s[t]=i,s[n]=t}static isFigureDefined(t){return V.Gn.has(t)}static getArrowheadGeometries(){const t=new xt;for(const i in V.Xg)if(De.Sn[i]===void 0){const n=Jt.parse(V.Xg[i],!1);De.Sn[i]=n;const s=i.toLowerCase();s!==i&&(De.Sn[s]=i)}for(const i in De.Sn){if(i===i.toLowerCase())continue;const n=De.Sn[i];n instanceof Jt&&t.set(i,n)}return t.g(),t}static defineArrowheadGeometry(t,i){u.s(t,"string",De,"defineArrowheadGeometry:name");let n=null;typeof i=="string"?(u.s(i,"string",De,"defineArrowheadGeometry:pathstr"),n=Jt.parse(i,!1)):n=i;const s=t.toLowerCase();(s==="none"||t===s)&&u.o("Shape.defineArrowheadGeometry name must not be empty or None or all-lower-case: "+t);const r=De.Sn;r[t]=n,r[s]=t}static isArrowheadDefined(t){return De.Sn.has(t)}static XA(t){let i=De.Sn[t];if(i===void 0){const n=t.toLowerCase();if(n==="none")return"None";if(i=De.Sn[n],i===void 0){let s=null;for(const r in V.Xg)if(r.toLowerCase()===n){s=r;break}if(s!==null){const r=Jt.parse(V.Xg[s],!1);return De.Sn[s]=r,n!==s&&(De.Sn[n]=s),s}}}return typeof i=="string"?i:i instanceof Jt?t:null}};p(De,"Sn",new v),p(De,"V2",new v);let Zt=De;class gn{constructor(){p(this,"gi");p(this,"mp");p(this,"pp");p(this,"yp");p(this,"kh");p(this,"bp");p(this,"kp");p(this,"Hn");p(this,"jn");this.gi=!1,this.mp="butt",this.pp="miter",this.yp=10,this.kh=0,this.bp=null,this.kp=1,this.Hn=q.Default,this.jn=q.Default}copy(){const e=new gn;return e.mp=this.mp,e.pp=this.pp,e.yp=this.yp,e.kh=this.kh,e.bp=this.bp,e.kp=this.kp,e.Hn=this.Hn.N(),e.jn=this.jn.N(),e}}var No=(k=>(k[k.None=0]="None",k[k.Fit=1]="Fit",k[k.DesiredSize=2]="DesiredSize",k[k.BreakAll=3]="BreakAll",k))(No||{}),Oa=(k=>(k[k.Clip=0]="Clip",k[k.Ellipsis=1]="Ellipsis",k))(Oa||{}),Eo=(k=>(k[k.Trim=0]="Trim",k[k.None=1]="None",k))(Eo||{});const oe=class oe extends Ye{constructor(t,i){super();p(this,"hi");p(this,"Wi");p(this,"Mn");p(this,"we");p(this,"mi");p(this,"b0");p(this,"Pd");p(this,"Z");p(this,"$");p(this,"Bl");p(this,"ao");p(this,"Nn");p(this,"Te");p(this,"Ri");p(this,"Cn");return this.n|=2097152,this.hi="",this.Wi="black",this.Mn="13px sans-serif",this.we=0,this.mi=0,this.b0=0,this.Pd=null,this.Z=null,this.$=null,this.Bl=0,this.ao=null,this.Nn=0,this.Te=null,this.Ri=null,this.Cn=null,typeof t=="string"?this.text=t:t&&Object.assign(this,t),i&&Object.assign(this,i),this}cloneProtected(t){super.cloneProtected(t),t.hi=this.hi,t.Wi=this.Wi,t.Mn=this.Mn,t.we=this.we,t.mi=this.mi,t.b0=this.b0,t.Pd=this.Pd,this.Z!==null&&(t.Z=this.Z.copy()),this.$!==null&&(this.$.gi?t.$=this.$:t.$=this.$.copy()),t.Bl=this.Bl,t.ao=this.ao,t.Nn=this.Nn,t.Te=this.Te,t.Ri=this.Ri,t.Cn=this.Cn}Ln(){this.$===null?this.$=new fr:this.$.gi&&(this.$=this.$.copy())}mh(){super.mh(),this.$!==null&&(this.$.gi=!0)}kv(t){this.n=t.n|2048|4096,this.Qt=t.opacity,this.Rt=t.background,this.ns=t.desiredSize.N(),this.minSize=t.minSize.N(),this.maxSize=t.maxSize.N(),t.ki!==null?this.ki=t.ki.copy():this.ki=null,this.rt=t.scale,this.Ht=t.angle,this.stretch=t.stretch,this.sl=t.margin.N(),this.ci=t.alignment.N(),this.Ju=t.alignmentFocus.N(),this.segmentFraction=t.segmentFraction,this.segmentOffset=t.segmentOffset.N(),this.segmentOrientation=t.segmentOrientation,t.oi!==null&&(this.oi=t.oi.copy()),this.shadowVisible=t.shadowVisible,this.hi=t.hi,this.Wi=t.Wi,this.Mn=t.Mn,this.Z!==null&&(this.Z=t.Z.copy()),t.$!==null&&(t.$.gi?this.$=t.$:this.$=t.$.copy()),this.Bl=t.Bl}xv(t){if(this.hi=t.text||"",this.Ht=t.labelAngle||0,this.we=t.lineCount||0,this.Bv(t.lines),t.naturalBounds&&(this.Ki=t.naturalBounds),t.actualBounds){const i=t.actualBounds;this.Kt(i.x,i.y,i.width,i.height)}}li(t){t in No?this.wrap=t:super.li(t)}toString(){return this.hi.length>22?'TextBlock("'+this.hi.substring(0,20)+'"...)':'TextBlock("'+this.hi+'")'}static getEllipsis(){return oe.Pp}static setEllipsis(t){oe.Pp=t,oe._b=new v,oe.z2=0}static getBaseline(){return oe.t1}static setBaseline(t){oe.t1=t}static getUnderline(){return oe.i1}static setUnderline(t){oe.i1=t}c(){super.c(),this.Ye(!0)}get font(){return this.Mn}set font(t){const i=this.Mn;i!==t&&(this.Mn=t,this.ao=null,this.c(),this.t("font",i,t))}static isValidFont(t){return y.CSS?y.CSS.supports("font",t):!0}get text(){return this.hi}set text(t){const i=this.hi;t!=null?t=t.toString():t="",i!==t&&(this.hi=t,this.c(),this.t("text",i,t))}get textAlign(){return this.$!==null?this.$.Sp:"start"}set textAlign(t){const i=this.textAlign;i!==t&&(t==="start"||t==="end"||t==="left"||t==="right"||t==="center")&&(this.Ln(),this.$.Sp=t,this.L(),this.t("textAlign",i,t))}get flip(){return this.$!==null?this.$.co:0}set flip(t){const i=this.flip;i!==t&&(this.Ln(),this.$.co=t,this.L(),this.t("flip",i,t))}get verticalAlignment(){return this.$!==null?this.$.al:q.Top}set verticalAlignment(t){const i=this.verticalAlignment;i.equals(t)||(t=t.N(),this.Ln(),this.$.al=t,this.rf(),this.t("verticalAlignment",i,t))}get naturalBounds(){if(!this.Ki.isReal()){const t=ct.l();this.X2(this.hi,999999,t);let i=t.width;ct.e(t);let n=this.KA(i);const s=this.desiredSize;isNaN(s.width)||(i=s.width),isNaN(s.height)||(n=s.height),this.Ki.zn(i,n)}return this.Ki}get isMultiline(){return(this.n&2097152)!==0}set isMultiline(t){const i=(this.n&2097152)!==0;i!==t&&(this.n=this.n^2097152,this.c(),this.t("isMultiline",i,t))}get isUnderline(){return(this.n&4194304)!==0}set isUnderline(t){const i=(this.n&4194304)!==0;i!==t&&(this.n=this.n^4194304,this.Ye(!0),this.L(),this.t("isUnderline",i,t))}get isStrikethrough(){return(this.n&8388608)!==0}set isStrikethrough(t){const i=(this.n&8388608)!==0;i!==t&&(this.n=this.n^8388608,this.Ye(!0),this.L(),this.t("isStrikethrough",i,t))}get wrap(){return this.$!==null?this.$.Mp:2}set wrap(t){const i=this.wrap;i!==t&&(this.Ln(),this.$.Mp=t,this.c(),this.t("wrap",i,t))}get overflow(){return this.$!==null?this.$.Np:0}set overflow(t){const i=this.overflow;i!==t&&(this.Ln(),this.$.Np=t,this.c(),this.t("overflow",i,t))}get isOverflowed(){return(this.n&16777216)!==0}Y2(t){t?this.n|=16777216:this.n&=-16777217}get stroke(){return this.Wi}set stroke(t){const i=this.Wi;i!==t&&(t!==null&&Qe.sd(t,"TextBlock.stroke"),t instanceof Qe&&t.g(),this.Wi=t,typeof t!="string"&&this.sf(),this.L(),this.t("stroke",i,t))}get lineCount(){return this.we}get lineHeight(){return this.Cp()}get editable(){return(this.n&1048576)!==0}set editable(t){const i=(this.n&1048576)!==0;i!==t&&(this.n=this.n^1048576,this.t("editable",i,t))}get F2(){return(this.n&33554432)!==0}set F2(t){this.n=this.n^33554432}get textEditor(){return this.$!==null?this.$.Lp:null}set textEditor(t){const i=this.textEditor;i!==t&&(this.Ln(),this.$.Lp=t,this.t("textEditor",i,t))}get errorFunction(){return this.$!==null?this.$.ls:null}set errorFunction(t){const i=this.errorFunction;i!==t&&(t!==null&&u.C(t,oe,"errorFunction"),this.Ln(),this.$.ls=t,this.t("errorFunction",i,t))}get interval(){return this.Z!==null?this.Z.pf:1}set interval(t){const i=this.interval;if(t=Math.round(t),i!==t&&t!==0&&isFinite(t)){this.Z===null&&(this.Z=new Zi),this.Z.pf=t,this.c();const n=this.panel;n!==null&&(n.rs=null),this.t("interval",i,t)}}get graduatedStart(){return this.Z!==null?this.Z.yf:0}set graduatedStart(t){const i=this.graduatedStart;i!==t&&(t<0?t=0:t>1&&(t=1),this.Z===null&&(this.Z=new Zi),this.Z.yf=t,this.c(),this.t("graduatedStart",i,t))}get graduatedEnd(){return this.Z!==null?this.Z.wf:1}set graduatedEnd(t){const i=this.graduatedEnd;i!==t&&(t<0?t=0:t>1&&(t=1),this.Z===null&&(this.Z=new Zi),this.Z.wf=t,this.c(),this.t("graduatedEnd",i,t))}get graduatedFunction(){return this.Z!==null?this.Z.Ap:null}set graduatedFunction(t){const i=this.graduatedFunction;i!==t&&(t!==null&&u.C(t,oe,"graduatedFunction"),this.Z===null&&(this.Z=new Zi),this.Z.Ap=t,this.c(),this.t("graduatedFunction",i,t))}get graduatedSkip(){return this.Z!==null?this.Z.xf:null}set graduatedSkip(t){const i=this.graduatedSkip;i!==t&&(t!==null&&u.C(t,oe,"graduatedSkip"),this.Z===null&&(this.Z=new Zi),this.Z.xf=t,this.c(),this.t("graduatedSkip",i,t))}xh(t,i){if(this.Wi===null||this.hi.length===0||this.Mn===null)return;const n=this.naturalBounds,s=this.actualBounds,r=n.width,A=n.height,o=this.Cp();let a=t.textAlign=this.textAlign;const h=i.Gu;a==="start"?a=h?"right":"left":a==="end"&&(a=h?"left":"right");const d=this.isUnderline,f=this.isStrikethrough;this.mn(t,this.Wi,!0,!1,n,s),(d||f)&&this.mn(t,this.Wi,!1,!1,n,s);const g=0;let x=0;const B=r;let C=!1;i.ti===t&&!(i.ti instanceof qi)&&!this.F2&&i.getRenderingHint("textGreeking")===!0&&o*this.ya*i.scale<3&&(C=!0);const F=this.spacingAbove,b=this.spacingBelow;switch(this.flip){case 0:break;case 2:t.translate(r,0),t.scale(-1,1);break;case 1:t.translate(0,A),t.scale(1,-1);break;case 3:t.translate(r,A),t.scale(-1,-1);break}t.commitTransform();const L=this.we,Q=(F+o+b)*L;if(A>Q){const M=this.verticalAlignment;x=M.y*A-M.y*Q+M.offsetY}if(L===1&&this.Cn!==null){let M=this.mi;M>B&&(M=B),x+=F,this.GA(this.Cn,t,g,x,B,o,M,C,a,d,f)}else if(this.Te!==null&&this.Ri!==null)for(let M=0;M<L;M++){let O=this.Te[M];O>B&&(O=B),x+=F,this.GA(this.Ri[M],t,g,x,B,o,O,C,a,d,f),x+=o+b}switch(this.flip){case 0:break;case 2:t.scale(-1,1),t.translate(-r,0);break;case 1:t.scale(1,-1),t.translate(0,-A);break;case 3:t.scale(-1,-1),t.translate(-r,-A);break}}GA(t,i,n,s,r,A,o,a,h,d,f){let g=0;if(a){h==="left"?g=0:h==="right"?g=r-o:h==="center"&&(g=(r-o)/2);const C=i.globalAlpha;i.globalAlpha=C/2,i.fillRect(n+g,s+A/4,o,A/2),i.globalAlpha=C;return}h==="left"?g=0:h==="right"?g=r:h==="center"&&(g=r/2);const x=oe.t1!==null?oe.t1(this,A):A*.75;i.fillText(t,n+g,s+x);let B=A/20|0;if(B===0&&(B=1),h==="right"?g-=o:h==="center"&&(g-=o/2),d){const C=oe.i1!==null?oe.i1(this,A):A*.8;this.HA(n+g,s+C,n+g+o,s+C,B,i),i instanceof qi&&i.lastCreatedElement.classList.add("gojs-td")}if(f){let C=s+A-A/2.2|0;B%2!==0&&(C+=.5),this.HA(n+g,C,n+g+o,C,B,i),i instanceof qi&&i.lastCreatedElement.classList.add("gojs-td")}}HA(t,i,n,s,r,A){A.beginPath(),A.lineWidth=r,A.moveTo(t,i),A.lineTo(n,s),A.stroke(),A.endPath()}ef(t,i,n){if(!super.ef(t,i,n))return!1;if(this.mn(t,this.Wi,!0,!1,this.naturalBounds,this.actualBounds),n){if(this.svg.getElementsByTagName("text").length===0)return!0;const s=this.svg.getElementsByClassName("gojs-td");for(let r=0;r<s.length;r++)t.setFillOrStrokeInPlace(s[r],!1)}else this.Uv(this.svg,this.text,t);return!0}Uv(t,i,n){t.innerHTML=i,n.setFillOrStrokeInPlace(t,!0)}td(t){return this.lineCount>1||this.isUnderline||this.isStrikethrough?!0:super.td(t)}f2(t,i){if(t.nodeName!=="g")t.setAttributeNS(null,"filter",i);else{const n=t.getElementsByTagName("text");for(let s=0;s<n.length;s++)n[s].setAttributeNS(null,"filter",i)}}Vv(){this.Nn=0,this.mi=0,this.ao=null,this.Te=null,this.Ri=null,this.Cn=null}Qu(t,i,n,s){const r=this.we;this.Bl=t,this.Y2(!1);const A=this.Mn;oe.ll!==null&&oe.jA!==A&&(oe.ll.font=A,oe.jA=A),this.Vv();let o=0,a=0;isNaN(this.desiredSize.width)?(o=this.zv(),o=Math.min(o,t/this.scale)):o=this.desiredSize.width,this.panel!==null&&(o=Math.min(o,this.panel.maxSize.width)),a=this.KA(o),isNaN(this.desiredSize.height)?a=Math.min(a,i/this.scale):a=this.desiredSize.height,this.Xv(t,a),(this.wrap===1||isNaN(this.desiredSize.width))&&(o=isNaN(t)?this.mi:Math.min(t,this.mi)),o=Math.max(n,o),a=Math.max(s,a),this.Ki.zn(o,a),this.so(0,0,o,a),this.svg!==null&&r!==this.we&&this.Ye(!0)}yh(t,i,n,s){this.commonArrange(t,i,n,s)}An(t,i){this.Cn===null?(this.Cn=t,this.mi=i):((this.Ri===null||this.Te===null)&&(this.Ri=[],this.Te=[],this.Ri.push(this.Cn),this.Te.push(this.mi)),this.Ri.push(t),this.Te.push(i),this.Ri.length>this.maxLines&&(this.n|=16777216))}X2(t,i,n){const s=this.formatting===0;s&&(t=t.trim());let r=0,A=0,o=0;const a=this.Mn,h=this.spacingAbove+this.spacingBelow,d=Math.max(0,this.Cp()+h),f=this.overflow===1?this.qA(a):0;if(this.we>=this.maxLines){n!==null&&n.i(0,d);return}let g=t;if(this.wrap===0){if(this.Nn=1,A=this.getStringWidth(t),f===0||A<=i){this.mi=Math.max(this.mi,A),this.An(t,this.mi),n!==null&&n.i(A,d);return}let B=this.Sd(g);g=g.substring(B.length);let C=this.Sd(g);for(A=this.getStringWidth(B+C),o=0;C.length>0&&A<=i;){B+=C,g=g.substring(C.length),C=this.Sd(g),o=A;let F=B+C;s&&(F=F.trim()),A=this.getStringWidth(F)}for(s&&(C=C.trim()),B+=C,i=Math.max(1,i-f);this.getStringWidth(B)>i&&B.length>1;)B=B.substring(0,B.length-1);this.Y2(!0),B+=oe.Pp,o=this.getStringWidth(B),this.mi=o,this.An(B,o),n!==null&&n.i(o,d);return}let x=0;for(g.length===0&&(x=1,this.An(g,0));g.length>0;){let B=this.Sd(g);for(g=g.substring(B.length);this.getStringWidth(B)>i;){let b=1;for(A=this.getStringWidth(B.substring(0,b)),o=0;A<=i;)b++,o=A,A=this.getStringWidth(B.substring(0,b));let L=0;b===1?(L=A,r=Math.max(r,A)):(L=o,r=Math.max(r,o)),b--,b<1&&(b=1);const Q=B.substring(0,b);if(this.An(Q,L),x++,B=B.substring(b),this.we+x>this.maxLines)break}let C=this.Sd(g);for(A=this.getStringWidth(B+C),o=0;C.length>0&&A<=i;){B+=C,g=g.substring(C.length),C=this.Sd(g),o=A;let b=B+C;s&&(b=b.trim()),A=this.getStringWidth(b)}if(s&&(B=B.trim()),B==="")continue;B[B.length-1]===""&&(B=B.substring(0,B.length-1)+"");let F=0;if(C.length===0?(F=A,r=Math.max(r,A)):(o=this.getStringWidth(B),F=o,r=Math.max(r,o)),this.An(B,F),x++,this.we+x>this.maxLines)break}this.Nn=Math.min(this.maxLines-this.we,x),this.mi=Math.max(this.mi,r),n!==null&&n.i(this.mi,d*this.Nn)}Xv(t,i){if(this.mi===0||this.Te===null||this.Ri===null||this.overflow!==1)return;const n=this.Mn,s=this.overflow===1?this.qA(n):0,r=this.spacingAbove+this.spacingBelow,A=Math.max(0,this.Cp()+r),o=Math.min(this.maxLines-1,Math.max(Math.floor(i/A+.01)-1,0));if(o+1>=this.Ri.length)return;this.Y2(!0);let a=this.Ri[o];const h=Math.max(1,t-s);for(;this.getStringWidth(a)>h&&a.length>1;)a=a.substring(0,a.length-1);a+=oe.Pp;const d=this.getStringWidth(a);this.Ri[o]=a,this.Ri=this.Ri.slice(0,o+1),this.Te[o]=d,this.Te=this.Te.slice(0,o+1),this.Nn=this.Ri.length,this.mi=Math.max(this.mi,d),this.we=this.Nn,this.we===1&&(this.Cn=this.Ri[0])}Sd(t){if(this.wrap===3)return t.substring(0,1);let i=t.length,n=0;const s=oe.Yv;for(;n<i&&!s.test(t.charAt(n));)n++;for(this.formatting===1&&(i=Math.min(i,n+1));n<i&&s.test(t.charAt(n));)n++;return n>=t.length?t:t.substring(0,n)}getStringWidth(t){return oe.ll===null?t.length*8:oe.ll.measureText(t).width}Cp(){if(this.ao!==null)return this.ao;const t=this.Mn;let i=0;return oe.ll===null?(i=16,this.ao=i,i):(oe.K2[t]!==void 0&&oe.WA<5e3?i=oe.K2[t]:(i=oe.ll.measureText("M").width*1.3,oe.K2[t]=i,oe.WA++),this.ao=i,i)}qA(t){if(oe.ll===null)return 6;let i=0;return oe._b[t]!==void 0&&oe.z2<5e3?i=oe._b[t]:(i=oe.ll.measureText(oe.Pp).width,oe._b[t]=i,oe.z2++),i}e1(t,i){return t.indexOf(`
`,i)}KA(t){let i=this.hi.replace(/\r\n/g,`
`).replace(/\r/g,`
`);const n=this.spacingAbove+this.spacingBelow,s=Math.max(0,this.Cp()+n);if(i.length===0)return this.mi=0,this.we=1,s;if(!this.isMultiline){const h=this.e1(i,0);h>=0&&(i=i.substring(0,h))}let r=0;this.we=0;let A=0,o=-1,a=!1;for(;!a;){if(o=this.e1(i,A),o===-1&&(o=i.length,a=!0),A<=o){const h=i.substring(A,o);if(this.wrap!==0){this.Nn=0;const d=ct.l();this.X2(h,t,d),r+=d.height,ct.e(d),this.we+=this.Nn}else this.X2(h,t,null),r+=s,this.we++;this.we===this.maxLines&&(a=!0)}A=o+1}return this.b0=r,r}zv(){let t=this.hi.replace(/\r\n/g,`
`).replace(/\r/g,`
`);if(t.length===0)return 8;if(this.isMultiline){let i=0,n=0,s=!1;for(;!s;){let r=this.e1(t,n);r===-1&&(r=t.length,s=!0);let A=t.substring(n,r);this.formatting===0&&(A=A.trim()),i=Math.max(i,this.getStringWidth(A)),n=r+1}return i}else{const i=this.e1(t,0);return i>=0&&(t=t.substring(0,i)),this.getStringWidth(t)}}get textValidation(){return this.$!==null?this.$.El:null}set textValidation(t){const i=this.textValidation;i!==t&&(t!==null&&u.C(t,oe,"textValidation"),this.Ln(),this.$.El=t,this.t("textValidation",i,t))}get textEdited(){return this.$!==null?this.$.Tp:null}set textEdited(t){const i=this.textEdited;i!==t&&(t!==null&&u.C(t,oe,"textEdited"),this.Ln(),this.$.Tp=t,this.t("textEdited",i,t))}get spacingAbove(){return this.$!==null?this.$.Dp:0}set spacingAbove(t){const i=this.spacingAbove;i!==t&&(this.Ln(),this.$.Dp=t,this.c(),this.t("spacingAbove",i,t))}get spacingBelow(){return this.$!==null?this.$.Fp:0}set spacingBelow(t){const i=this.spacingBelow;i!==t&&(this.Ln(),this.$.Fp=t,this.c(),this.t("spacingBelow",i,t))}get formatting(){return this.$!==null?this.$.Rp:0}set formatting(t){const i=this.formatting;i!==t&&(this.Ln(),this.$.Rp=t,this.c(),this.t("formatting",i,t))}get maxLines(){return this.$!==null?this.$.vp:1/0}set maxLines(t){const i=this.maxLines;i!==t&&(t=Math.floor(t),t<=0&&u.it(t,"> 0",oe,"maxLines"),this.Ln(),this.$.vp=t,this.c(),this.t("maxLines",i,t))}getMetrics(){return[this.mi,this.Bl,this.ao,this.Nn,this.Te,this.Ri,this.Cn]}Bv(t){t!==void 0&&(this.mi=t[0],this.Bl=t[1],this.ao=t[2],this.Nn=t[3],this.Te=t[4],this.Ri=t[5],this.Cn=t[6])}get metrics(){return{arrSize:this.Te!==null?this.Te:[this.mi],arrText:this.Ri!==null?this.Ri:[this.Cn],maxLineWidth:this.mi,fontHeight:this.ao}}get choices(){return this.Pd}set choices(t){const i=this.Pd;i!==t&&(this.Pd=t,this.t("choices",i,t))}};p(oe,"t1",null),p(oe,"i1",null),p(oe,"None",0),p(oe,"WrapFit",1),p(oe,"WrapDesiredSize",2),p(oe,"WrapBreakAll",3),p(oe,"OverflowClip",0),p(oe,"OverflowEllipsis",1),p(oe,"FormatTrim",0),p(oe,"FormatNone",1),p(oe,"Yv",new RegExp("[ ]")),p(oe,"K2",new v),p(oe,"WA",0),p(oe,"_b",new v),p(oe,"z2",0),p(oe,"Pp","..."),p(oe,"jA",""),p(oe,"ll",ge.isUsingDOM()?new kn(null).ai:null);let We=oe;class fr{constructor(){p(this,"gi");p(this,"ls");p(this,"co");p(this,"Rp");p(this,"vp");p(this,"Np");p(this,"Dp");p(this,"Fp");p(this,"Sp");p(this,"Tp");p(this,"Lp");p(this,"El");p(this,"al");p(this,"Mp");this.gi=!1,this.ls=null,this.co=0,this.Rp=0,this.vp=1/0,this.Np=0,this.Dp=0,this.Fp=0,this.Sp="start",this.Tp=null,this.Lp=null,this.El=null,this.al=q.Top,this.Mp=2}copy(){const e=new fr;return e.ls=this.ls,e.co=this.co,e.Rp=this.Rp,e.vp=this.vp,e.Np=this.Np,e.Dp=this.Dp,e.Fp=this.Fp,e.Sp=this.Sp,e.Tp=this.Tp,e.Lp=this.Lp,e.El=this.El,e.al=this.al,e.Mp=this.Mp,e}}class Zi{constructor(){p(this,"pf");p(this,"yf");p(this,"wf");p(this,"Ap");p(this,"xf");this.pf=1,this.yf=0,this.wf=1,this.Ap=null,this.xf=null}copy(){const e=new Zi;return e.pf=this.pf,e.yf=this.yf,e.wf=this.wf,e.Ap=this.Ap,e.xf=this.xf,e}}var gr=(k=>(k[k.None=0]="None",k[k.Fill=2]="Fill",k[k.Uniform=6]="Uniform",k[k.UniformToFill=7]="UniformToFill",k))(gr||{});const ai=class ai extends Ye{constructor(t,i){super();p(this,"cl");p(this,"xt");p(this,"fl");p(this,"bf");p(this,"ls");p(this,"ul");p(this,"kf");p(this,"co");p(this,"Pf");p(this,"Sf");p(this,"Eb");this.n|=2097152,this.cl=null,this.xt="",this.fl=it.KD,this.bf=2,this.ls=null,this.ul=null,this.kf=q.Center,this.co=0,this.Pf=null,this.Sf=null,this.Eb=null,typeof t=="string"?this.source=t:t&&Object.assign(this,t),i&&Object.assign(this,i)}cloneProtected(t){super.cloneProtected(t),t.xt=this.xt,t.element=this.cl,t.fl=this.fl.N(),t.bf=this.bf,t.co=this.co,t.ls=this.ls,t.ul=this.ul,t.kf=this.kf.N(),t.Sf=this.Sf}li(t){t in gr?this.imageStretch=t:super.li(t)}toString(){return"Picture("+this.source+")#"+X.us(this)}get Mf(){return(this.n&1048576)!==0}set Mf(t){this.Mf!==t&&(this.n=this.n^1048576)}get Op(){return(this.n&2097152)!==0}set Op(t){this.Op!==t&&(this.n=this.n^2097152)}get yn(){return(this.n&4194304)!==0}set yn(t){this.yn!==t&&(this.n=this.n^4194304)}static clearCache(t){t===void 0&&(t=""),u.s(t,"string",ai,"clearCache:url"),t!==""?ai.Ip[t]&&(delete ai.Ip[t],ai.s1--):(ai.Ip=new v,ai.s1=0)}static WL(t,i){i.JA||(i.o1=n=>{ai.Kv(i,n),t.desiredSize.isReal()||(t.me(!1),t.c())},i.l1=n=>ai.Gv(i,n),i.addEventListener("load",i.o1),i.addEventListener("error",i.l1),i.JA=!0)}static FR(t){t.o1&&t.removeEventListener("load",t.o1),t.l1&&t.removeEventListener("error",t.l1),delete t.o1,delete t.l1,delete t.JA}get element(){return this.cl}set element(t){const i=this.cl;if(this.Ye(!0),i!==t){this.Mf=t instanceof HTMLCanvasElement;const n=t instanceof HTMLImageElement;t!==null&&!(n||t instanceof HTMLVideoElement||this.Mf)&&u.o("Picture.element must be an instance of Image, Canvas, or Video, not: "+t);const s=this.diagram;s!==null&&s.OM(this),this.cl=t,t!==null&&n&&t.ss===void 0&&(t.ss=new X),s!==null&&n&&s.vM(this),this.t("element",i,t),this.L()}}TR(){const t=this.cl;if(t===null)return;const i=this.desiredSize.isReal();(this.Mf||t.complete===!0)&&(t.h0&&(t.Ep instanceof Event&&this.ls!==null?this.ls(this,t.Ep):t.yn===!0&&!t.Ep&&this.ul!==null&&t.G2&&this.ul(this,t.G2)),t.yn=!0),t.yn&&i&&this.diagram!==null&&this.diagram.Ku.add(this)}Hv(){if(this.cl===null){this.Pf=!1;return}const t=new kn(null).ai;try{t.drawImage(this.cl,0,0)}catch{this.Op=!1}try{t.getImageData(0,0,1,1).data[3]&&(this.Pf=!1),this.Pf=!1}catch{this.Pf=!0}}get source(){return this.xt}set source(t){const i=this.xt;if(i!==t){this.Ye(!0),u.s(t,"string",ai,"source"),this.xt=t;let n=ai.Ip;if(!ge.isUsingDOM()){this.t("source",i,t);return}let s=null;if(n[t]!==void 0)s=n[t];else if(t!==""){ai.s1>30&&(ai.clearCache(),n=ai.Ip),s=u.fs("img"),s.h0=!0,ai.WL(this,s);const r=this.Sf;r!==null&&(s.crossOrigin=r(this)),s.src=t,n[t]=s,ai.s1++}this.element=s,s!==null&&s.__goCache===void 0&&(s.__goCache=new Uh),this.c(),this.L(),this.t("source",i,t)}}static Kv(t,i){t.yn=!0,t.Ep=!1;let n;const s=t.ss.copy();if(s==null)return;const r=s.iterator;for(;r.next();){const A=r.value;A.L();const o=t.getAttribute("src")||"",a=A.eh.get(o);if(a===null)continue;const h=a.length;for(let d=0;d<h;d++)n=a[d],n.desiredSize.isReal()||A.Ku.add(n),n.Ye(!0),A.requestUpdate(),t.h0&&(t.G2===void 0&&(t.G2=i),n.ul!==null&&n.ul(n,i))}t.ss.clear()}static Gv(t,i){t.Ep=i;let n;const s=t.ss.copy();if(s==null)return;const r=s.iterator;for(;r.next();){const A=r.value,o=t.getAttribute("src")||"",a=A.eh.get(o);if(a===null)continue;const h=a.length,d=u.ht();for(let f=0;f<h;f++)d.push(a[f]);if(t.h0)for(let f=0;f<h;f++)n=d[f],n.ls!==null&&n.ls(n,i);u.et(d)}t.ss.clear()}reloadSource(){if(this.source==="")return;ai.clearCache(this.source);const t=this.source;this.source="",this.source=t}redraw(){this.L(),this.Ye(!0)}get sourceCrossOrigin(){return this.Sf}set sourceCrossOrigin(t){if(this.Sf!==t&&(t!==null&&u.C(t,ai,"sourceCrossOrigin"),this.Sf=t,this.element!==null)){const i=this.element.getAttribute("src");t===null&&typeof i=="string"?this.element.crossOrigin=null:t!==null&&(this.element.crossOrigin=t(this)),this.element.src=i}}get sourceRect(){return this.fl}set sourceRect(t){const i=this.fl;i.equals(t)||(t=t.N(),this.fl=t,this.L(),this.t("sourceRect",i,t))}get imageStretch(){return this.bf}set imageStretch(t){const i=this.bf;i!==t&&(this.bf=t,this.L(),this.t("imageStretch",i,t))}get flip(){return this.co}set flip(t){const i=this.co;i!==t&&(this.co=t,this.L(),this.t("flip",i,t))}get imageAlignment(){return this.kf}set imageAlignment(t){const i=this.kf;i.equals(t)||(t=t.N(),this.kf=t,this.L(),this.t("imageAlignment",i,t))}get errorFunction(){return this.ls}set errorFunction(t){const i=this.ls;i!==t&&(t!==null&&u.C(t,ai,"errorFunction"),this.ls=t,this.t("errorFunction",i,t))}get successFunction(){return this.ul}set successFunction(t){const i=this.ul;i!==t&&(t!==null&&u.C(t,ai,"successFunction"),this.ul=t,this.t("successFunction",i,t))}xh(t,i){const n=this.cl;if(n===null)return;const s=n.getAttribute("src");if(n instanceof HTMLImageElement&&(s===null||s==="")||n.Ep instanceof Event&&t instanceof Ls)return;const r=t instanceof qi,A=this.naturalBounds;let o=0,a=0;const h=this.Mf;let d=h?+n.width:n.naturalWidth,f=h?+n.height:n.naturalHeight;if(d===void 0&&n.videoWidth&&(d=n.videoWidth),f===void 0&&n.videoHeight&&(f=n.videoHeight),d===0||f===0)return;const g=d,x=f;this.sourceRect.isReal()&&(o=this.fl.x,a=this.fl.y,d=this.fl.width,f=this.fl.height);let B=d,C=f;const F=this.bf,b=this.kf;switch(F){case 0:if(this.sourceRect.isReal())break;B>=A.width&&(o=o+b.offsetX+(B*b.x-A.width*b.x)),C>=A.height&&(a=a+b.offsetY+(C*b.y-A.height*b.y)),d=Math.min(A.width,B),f=Math.min(A.height,C);break;case 2:B=A.width,C=A.height;break;case 6:case 7:let Z=0;F===6?(Z=Math.min(A.height/C,A.width/B),B*=Z,C*=Z):F===7&&(Z=Math.max(A.height/C,A.width/B),B*=Z,C*=Z,B>=A.width&&(o=(o+b.offsetX+(B*b.x-A.width*b.x)/B)*d),C>=A.height&&(a=(a+b.offsetY+(C*b.y-A.height*b.y)/C)*f),d*=1/(B/A.width),f*=1/(C/A.height),B=A.width,C=A.height);break}const L=d*f,Q=this.getDocumentScale()*i.scale,M=B*Q,O=C*Q,D=M*O,K=L/D,J=n.__goCache;let R=null;const G=ai.jv;if(!r){if(n.yn&&J!==void 0&&D>4&&K>G*G){J.Et===null&&(J.$A(4,g,x,n),J.$A(16,g,x,n));const Z=J.Et,et=Z.length;for(let At=0;At<et&&Z[At].Md*Z[At].Md<K;At++)R=Z[At]}if(!i.Yu&&(this.Pf===null&&this.Hv(),this.Pf))return}const W=B<A.width?b.offsetX+(A.width*b.x-B*b.x):0,Y=C<A.height?b.offsetY+(A.height*b.y-C*b.y):0;switch(this.flip){case 0:break;case 2:t.translate(Math.min(A.width,B),0),t.scale(-1,1);break;case 1:t.translate(0,Math.min(A.height,C)),t.scale(1,-1);break;case 3:t.translate(Math.min(A.width,B),Math.min(A.height,C)),t.scale(-1,-1);break}if(t.commitTransform(),i.getRenderingHint("pictureRatioOptimization")&&!i.oa&&J!==void 0&&R!==null&&R.Md!==1){t.save();const Z=R.Md;try{t.drawImage(R.xt,o/Z,a/Z,Math.min(R.xt.width,d/Z),Math.min(R.xt.height,f/Z),W,Y,Math.min(A.width,B),Math.min(A.height,C)),t instanceof qi&&(this.Eb=[o/Z,a/Z,Math.min(R.xt.width,d/Z),Math.min(R.xt.height,f/Z),W,Y,Math.min(A.width,B),Math.min(A.height,C)])}catch{this.Op=!1}t.restore()}else try{t.drawImage(n,o,a,d,f,W,Y,Math.min(A.width,B),Math.min(A.height,C)),t instanceof qi&&(this.Eb=[o,a,d,f,W,Y,Math.min(A.width,B),Math.min(A.height,C)])}catch{this.Op=!1}switch(this.flip){case 0:break;case 2:t.scale(-1,1),t.translate(-Math.min(A.width,B),0);break;case 1:t.scale(1,-1),t.translate(0,-Math.min(A.height,C));break;case 3:t.scale(-1,-1),t.translate(-Math.min(A.width,B),-Math.min(A.height,C));break}}get naturalBounds(){return this.Ki}Qu(t,i,n,s){const r=this.desiredSize,A=this.Gs(!0),o=this.cl,a=this.Mf;let h=0,d=0;(a||!this.yn&&o&&o.complete)&&(this.yn=!0),o===null?(isFinite(r.width)||(t=n),isFinite(r.height)||(i=s)):(h=a?+o.width:o.naturalWidth,d=a?+o.height:o.naturalHeight),!isFinite(r.width)&&A!==2&&A!==5?o!==null&&this.yn!==!1&&(this.sourceRect.isReal()?t=this.sourceRect.width:t=h):(isFinite(t)||(this.sourceRect.isReal()?t=this.sourceRect.width:o!==null&&(t=h)),n=0),!isFinite(r.height)&&A!==2&&A!==4?o!==null&&this.yn!==!1&&(this.sourceRect.isReal()?i=this.sourceRect.height:i=d):(isFinite(i)||(this.sourceRect.isReal()?i=this.sourceRect.height:o!==null&&(i=d)),s=0),isFinite(r.width)&&(t=r.width),isFinite(r.height)&&(i=r.height);const f=this.maxSize,g=this.minSize;n=Math.max(n||0,g.width),s=Math.max(s||0,g.height),t=Math.min(f.width,t),i=Math.min(f.height,i),t=Math.max(n,t),i=Math.max(s,i),o!==null&&!o.complete&&(isFinite(t)||(t=0),isFinite(i)||(i=0)),this.Ki.zn(t,i),this.so(0,0,t,i)}yh(t,i,n,s){this.commonArrange(t,i,n,s)}};p(ai,"Ip",new v),p(ai,"s1",0),p(ai,"jv",4);let pn=ai;class Uh{constructor(){p(this,"Et");this.Et=null}$A(e,t,i,n){this.Et===null&&(this.Et=[]);const s=new kn(null),r=s.ai,A=1/e;if(s.width=t/e,s.height=i/e,s.width===0||s.height===0)return;const o=new To(s.Ot,e);let a=n,h=1;if(this.Et.length>0){const d=this.Et[this.Et.length-1];a=d.xt,h=d.Md}r.setTransform(A*h,0,0,A*h,0,0),r.commitTransform(),r.drawImage(a,0,0),this.Et.push(o)}}class To{constructor(e,t){p(this,"xt");p(this,"Md");this.xt=e,this.Md=t}}const qs=class qs{constructor(){p(this,"Si");p(this,"jg");this.jg=new Jt,this.Si=null}Ii(e){e!==null?(this.jg=e,e.figures.clear()):this.jg=new Jt,this.Si=null}du(e,t,i,n,s,r){if(n!==void 0&&n===!0){const A=new Nt(1);A.endX=e,A.endY=t,this.Si.segments.add(A)}else this.Si=new ve,this.Si.startX=e,this.Si.startY=t,this.Si.isFilled=i,this.Si.isEvenOdd=r||!1,this.jg.figures.add(this.Si);s!==void 0&&(this.Si.isShadowed=s)}_D(){const e=this.Si.segments.length;e>0&&this.Si.segments.elt(e-1).close()}tF(){this.Si.segments.length>0&&(this.Si.isFilled=!0)}iF(e){this.Si.isShadowed=e}CE(e){this.Si.isEvenOdd=e}$D(e,t,i){i===void 0&&(i=!1);const n=new Nt(1);n.endX=e,n.endY=t,i&&n.close(),this.Si.segments.add(n)}yr(e,t,i){i===void 0&&(i=!1);const n=new Nt(2);n.endX=e,n.endY=t,i&&n.close(),this.Si.segments.add(n)}wr(e,t,i,n,s,r,A){A===void 0&&(A=!1);const o=new Nt(3);o.point1X=e,o.point1Y=t,o.point2X=i,o.point2Y=n,o.endX=s,o.endY=r,A&&o.close(),this.Si.segments.add(o)}Sw(e,t,i,n,s){s===void 0&&(s=!1);const r=new Nt(4);r.point1X=e,r.point1Y=t,r.endX=i,r.endY=n,s&&r.close(),this.Si.segments.add(r)}ZD(e,t,i,n,s,r,A){r===void 0&&(r=0),A===void 0&&(A=!1);const o=new Nt(5);o.startAngle=e,o.sweepAngle=t,o.centerX=i,o.centerY=n,o.radiusX=s,r!==0?o.radiusY=r:o.radiusY=s,A&&o.close(),this.Si.segments.add(o)}QD(e,t,i,n,s,r,A,o){o===void 0&&(o=!1);const a=new Nt(6,r,A,e,t,i,n,s);o&&a.close(),this.Si.segments.add(a)}static CC(e){const t=qs.H2;if(t!==null)return qs.H2=null,t.Ii(e),t;{const i=new qs;return i.Ii(e),i}}static LC(e){qs.H2=e}};p(qs,"H2",null);let zs=qs;{const k=function(s,r){const A=s.toLowerCase(),o=V.Gn;o[s]=r,o[A]=s};k("Rectangle",(s,r,A)=>{const o="r"+r+","+A;let a=V.mr[o];return a!==void 0||(a=new Jt(2),a.endX=r,a.endY=A,V.pr<V.Yg&&(V.mr[o]=a,V.pr++)),a}),k("Square",(s,r,A)=>{const o="s"+r+","+A;let a=V.mr[o];return a!==void 0||(a=new Jt(2),a.endX=r,a.endY=A,a.defaultStretch=6,V.pr<V.Yg&&(V.mr[o]=a,V.pr++)),a});const e=(s,r,A,o,a)=>{(isNaN(o)||o<0)&&(o=5),isNaN(a)&&(a=15);const h="rr"+r+","+A+","+o+","+a;let d=V.mr[h];if(d!==void 0)return d;let f=o;(a&1)===1?(f=Math.min(f,(a&2)===2?r/3:r),f=Math.min(f,(a&8)===8?A/3:A)):f=0;const g=new ve(f,0,!0);d=new Jt().add(g);const x=q.TopLeft.copy(),B=q.BottomRight.copy();if((a&2)===2){let C=o;C=Math.min(C,(a&1)===1?r/3:r),C=Math.min(C,(a&4)===4?A/3:A);const F=C*V.Xn;g.add(new Nt(2,r-C,0)).add(new Nt(3,r,C,r-F,0,r,F)),x.offsetY=F,B.offsetX=-F}else g.add(new Nt(2,r,0));if((a&4)===4){let C=o;C=Math.min(C,(a&8)===8?r/3:r),C=Math.min(C,(a&2)===2?A/3:A);const F=C*V.Xn;g.add(new Nt(2,r,A-C)).add(new Nt(3,r-C,A,r,A-F,r-F,A)),B.offsetX=-F,B.offsetY=-F}else g.add(new Nt(2,r,A));if((a&8)===8){let C=o;C=Math.min(C,(a&4)===4?r/3:r),C=Math.min(C,(a&1)===1?A/3:A);const F=C*V.Xn;g.add(new Nt(2,C,A)).add(new Nt(3,0,A-C,F,A,0,A-F)),x.offsetX=F,B.offsetY=-F}else g.add(new Nt(2,0,A));if((a&1)===1){const C=f*V.Xn;g.add(new Nt(2,0,f)).add(new Nt(3,f,0,0,C,C,0).close()),x.offsetX=C,x.offsetY=C}else g.add(new Nt(2,0,0).close());return d.spot1=x,d.spot2=B,V.pr<V.Yg&&(V.mr[h]=d,V.pr++),d};k("RoundedRectangle",(s,r,A)=>{const o=s?s.parameter1:NaN,a=s?s.parameter2:NaN;return e(s,r,A,o,a)}),k("Border","RoundedRectangle"),k("RoundedTopRectangle",(s,r,A)=>{const o=s?s.parameter1:NaN;return e(s,r,A,o,3)}),k("RoundedBottomRectangle",(s,r,A)=>{const o=s?s.parameter1:NaN;return e(s,r,A,o,12)}),k("RoundedLeftRectangle",(s,r,A)=>{const o=s?s.parameter1:NaN;return e(s,r,A,o,9)}),k("RoundedRightRectangle",(s,r,A)=>{const o=s?s.parameter1:NaN;return e(s,r,A,o,6)}),k("Ellipse",(s,r,A)=>{const o="e"+r+","+A;let a=V.mr[o];return a!==void 0||(a=new Jt(3),a.endX=r,a.endY=A,a.spot1=q.vk,a.spot2=q.Ok,V.pr<V.Yg&&(V.mr[o]=a,V.pr++)),a}),k("Circle",(s,r,A)=>{const o="c"+r+","+A;let a=V.mr[o];return a!==void 0||(a=new Jt(3),a.endX=r,a.endY=A,a.spot1=q.vk,a.spot2=q.Ok,a.defaultStretch=6,V.pr<V.Yg&&(V.mr[o]=a,V.pr++)),a}),k("TriangleRight",(s,r,A)=>new Jt().add(new ve(0,0).add(new Nt(2,r,.5*A)).add(new Nt(2,0,A).close())).setSpots(0,.25,.5,.75)),k("TriangleDown",(s,r,A)=>new Jt().add(new ve(0,0).add(new Nt(2,r,0)).add(new Nt(2,.5*r,A).close())).setSpots(.25,0,.75,.5)),k("TriangleLeft",(s,r,A)=>new Jt().add(new ve(r,A).add(new Nt(2,0,.5*A)).add(new Nt(2,r,0).close())).setSpots(.5,.25,1,.75)),k("TriangleUp",(s,r,A)=>new Jt().add(new ve(r,A).add(new Nt(2,0,A)).add(new Nt(2,.5*r,0).close())).setSpots(.25,.5,.75,1)),k("Triangle","TriangleUp"),k("Diamond",(s,r,A)=>new Jt().add(new ve(.5*r,0).add(new Nt(2,0,.5*A)).add(new Nt(2,.5*r,A)).add(new Nt(2,r,.5*A).close())).setSpots(.25,.25,.75,.75)),k("LineH",(s,r,A)=>{const o=new Jt(1);return o.startX=0,o.startY=A/2,o.endX=r,o.endY=A/2,o}),k("LineV",(s,r,A)=>{const o=new Jt(1);return o.startX=r/2,o.startY=0,o.endX=r/2,o.endY=A,o}),k("None","Rectangle"),k("BarH","Rectangle"),k("BarV","Rectangle"),k("MinusLine","LineH"),k("PlusLine",(s,r,A)=>new Jt().add(new ve(0,A/2,!1).add(new Nt(2,r,A/2)).add(new Nt(1,r/2,0)).add(new Nt(2,r/2,A)))),k("XLine",(s,r,A)=>new Jt().add(new ve(0,A,!1).add(new Nt(2,r,0)).add(new Nt(1,0,0)).add(new Nt(2,r,A)))),k("LineRight",(s,r,A)=>new Jt().add(new ve(.25*r,0,!1).add(new Nt(2,.75*r,.5*A)).add(new Nt(2,.25*r,A)))),k("LineDown",(s,r,A)=>new Jt().add(new ve(0,.25*A,!1).add(new Nt(2,.5*r,.75*A)).add(new Nt(2,r,.25*A)))),k("LineLeft",(s,r,A)=>new Jt().add(new ve(.75*r,0,!1).add(new Nt(2,.25*r,.5*A)).add(new Nt(2,.75*r,A)))),k("LineUp",(s,r,A)=>new Jt().add(new ve(0,.75*A,!1).add(new Nt(2,.5*r,.25*A)).add(new Nt(2,r,.75*A)))),k("Capsule",(s,r,A)=>{const o=new Jt;if(r<A){const a=r/2,h=new ve(0,a,!0);o.add(h),h.add(new Nt(5,180,180,a,a,a,a)),h.add(new Nt(2,r,A-a)),h.add(new Nt(5,0,180,a,A-a,a,a)),h.add(new Nt(2,0,a));const d=isFinite(s.parameter1)?s.parameter1:r*.156;return o.spot1=new q(0,0,0,d),o.spot2=new q(1,1,0,-d),o}else if(r>A){const a=A/2,h=new ve(a,0,!0);o.add(h),h.add(new Nt(2,r-a,0)),h.add(new Nt(5,270,180,r-a,a,a,a)),h.add(new Nt(2,a,A)),h.add(new Nt(5,90,180,a,a,a,a));const d=isFinite(s.parameter1)?s.parameter1:A*.156;return o.spot1=new q(0,0,d,0),o.spot2=new q(1,1,-d,0),o}else return o.type=3,o.endX=r,o.endY=A,o.spot1=q.vk,o.spot2=q.Ok,o});const t=(s,r)=>new ve(s,r,!1,!1),i=(s,r,A)=>s.add(new Nt(2,r,A)),n=(s,r,A)=>s.add(new Nt(1,r,A));k("Borders",(s,r,A)=>{let o=s?s.parameter1:NaN;isNaN(o)?o=10:o=o&15;const a=new Jt;let h;return o===10?(h=t(r,0),i(h,r,A),n(h,0,A),i(h,0,0)):o===5?(h=t(0,0),i(h,r,0),n(h,r,A),i(h,0,A)):o===1?(h=t(0,0),i(h,r,0),n(h,r,A)):o===2?(h=t(r,0),i(h,r,A)):o===4?(h=t(r,A),i(h,0,A)):o===8?(h=t(0,A),i(h,0,0),n(h,r,A)):o===3?(h=t(0,0),i(h,r,0),i(h,r,A)):o===6?(h=t(r,0),i(h,r,A),i(h,0,A)):o===12?(h=t(r,A),i(h,0,A),i(h,0,0)):o===9?(h=t(0,A),i(h,0,0),i(h,r,0)):o===7?(h=t(0,0),i(h,r,0),i(h,r,A),i(h,0,A)):o===14?(h=t(r,0),i(h,r,A),i(h,0,A),i(h,0,0)):o===13?(h=t(r,A),i(h,0,A),i(h,0,0),i(h,r,0)):o===11?(h=t(0,A),i(h,0,0),i(h,r,0),i(h,r,A)):o===15?(h=t(0,0),i(h,r,0),i(h,r,A),i(h,0,A),h.add(new Nt(2,0,0).close())):(h=t(0,0),n(h,r,A)),a.add(h),a})}V.Xg={"":"",Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",Backward:"F1 m 8,0 l -2,4 2,4 -8,-4 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",BackwardBoomerang:"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",BackwardV:"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",OpenTriangle:"m 0,0 l 8,4 -8,4",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",OpenTriangleLine:"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",BackwardOpenTriangleLine:"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",OpenTriangleTop:"m 0,0 l 8,4 m 0,4",BackwardOpenTriangleTop:"m 8,0 l -8,4 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4",BackwardOpenTriangleBottom:"m 0,4 l 8,4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 z m 0,8",BackwardHalfTriangleTop:"F1 m 8,0 l 0,4 -8,0 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 z",BackwardHalfTriangleBottom:"F1 m 8,4 l 0,4 -8,-4 z",ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",Feather:"m 0,0 l 3,4 -3,4",BackwardFeather:"m 3,0 l -3,4 3,4",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardDoubleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardTripleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",ForwardSlash:"m 0,8 l 5,-8",BackSlash:"m 0,0 l 5,8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",Fork:"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",LineFork:"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardLineFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",CircleFork:"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",CircleLineFork:"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",Circle:"F1 m 8,4 b 0 360 -4 0 4 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",CircleLine:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",Line:"m 0,0 l 0,8",DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z"};var LA=(k=>(k[k.None=0]="None",k[k.Added=1]="Added",k[k.Removed=2]="Removed",k[k.Shown=4]="Shown",k[k.Hidden=8]="Hidden",k[k.NodeSized=16]="NodeSized",k[k.GroupLayout=32]="GroupLayout",k[k.NodeReplaced=64]="NodeReplaced",k[k.Standard=127]="Standard",k[k.All=16777215]="All",k))(LA||{});const li=class li extends Kt{constructor(t,i){let n;t===void 0||t instanceof xe||typeof t=="string"?n=t:t&&(i=t);super(n);p(this,"P");p(this,"Jo");p(this,"v");p(this,"dl");p(this,"gl");p(this,"$o");p(this,"hi");p(this,"Zo");p(this,"Mh");p(this,"Js");p(this,"Qo");p(this,"Nd");p(this,"zS");p(this,"ZA");p(this,"Bp");p(this,"Up");this.P=2408959,this.Jo="",this.v=null,this.dl="",this.gl=null,this.$o=null,this.hi="",this.Zo=null,this.Mh=null,this.Js=new T(NaN,NaN).g(),this.Qo=null,this.Nd=NaN,this.zS=-1,this.ZA=new it,this.Bp=null,this.Up=NaN,i&&Object.assign(this,i)}cloneProtected(t){super.cloneProtected(t),t.P=this.P&-4097|16384|32768,t.Jo=this.Jo,this.v!==null&&(this.v.gi?t.v=this.v:t.v=this.v.copy()),t.dl=this.dl,t.$o=null,t.hi=this.hi,t.Js.a(this.Js),t.Nd=this.Nd}Xo(t){super.Xo(t),t.wh(),t.gl=null,t.Qo=null,t.Bp=null}toString(){let t=u.Vn(this.constructor)+"#"+X.us(this);return this.data!==null&&(t+="("+u.toString(this.data)+")"),t}Ji(){this.v===null?this.v=new Do:this.v.gi&&(this.v=this.v.copy())}mh(){super.mh(),this.v!==null&&(this.v.gi=!0)}Zc(t,i,n,s,r,A,o){const a=this.diagram;a!==null&&(t===3&&i==="elements"?r instanceof Kt?r.Qr(h=>{a.partManager.CM(h,a)}):r instanceof pn&&a.vM(r):t===4&&i==="elements"&&(r instanceof Kt?r.Qr(h=>a.partManager.LM(h,a)):r instanceof pn&&a.OM(r)),a.raiseChangedEvent(t,i,n,s,r,A,o))}updateTargetBindings(t){if(super.updateTargetBindings(t),this.data===null)return;const i=this.T.r,n=i.length;for(let r=0;r<n;r++){const A=i[r];A instanceof Kt&&A.Qr(o=>{o.data!==null&&o.updateTargetBindings()})}const s=this.adornments;for(;s.next();)s.value.updateTargetBindings(t)}Uo(){if(super.Uo(),this.w2()){const i=this.T.r,n=i.length;for(let s=0;s<n;s++){const r=i[s];r instanceof Kt&&r.Qr(A=>A.Uo())}}const t=this.adornments;for(;t.next();)t.value.Uo()}updateRelationshipsFromData(){var t;this.data!==null&&((t=this.diagram)==null||t.partManager.updateRelationshipsFromData(this))}get key(){const t=this.diagram;if(t!==null)return t.model.getKeyForNodeData(this.data)}get adornments(){return this.$o===null?P.instance:this.$o.iteratorValues}findAdornment(t){const i=this.$o;return i===null?null:i.get(t)}addAdornment(t,i){if(i===null)return;let n=null,s=this.$o;if(s!==null&&(n=s.get(t)),n!==i){if(n!==null){const A=n.diagram;A!==null&&A.remove(n)}s===null&&(s=new xt,this.$o=s),i.Jo!==t&&(i.category=t),s.set(t,i);const r=this.diagram;if(r!==null){r.add(i);const A=i.adornedObject;if(A!==null){const o=A.findBindingPanel();o!==null&&(i.data=o.data)}}}}removeAdornment(t){const i=this.$o;if(i===null)return;const n=i.get(t);if(n!==null){const s=n.diagram;s!==null&&(s.remove(n),n.data=null)}i.delete(t),i.count===0&&(this.$o=null)}clearAdornments(){const t=this.$o;if(t===null)return;const i=u.ht(),n=t.iterator;for(;n.next();){const r=n.key;i.push(r)}const s=i.length;for(let r=0;r<s;r++)this.removeAdornment(i[r]);u.et(i)}updateAdornments(){const t=this.diagram;if(t===null)return;this.qv(t),this.Wv(t);let i=this.adornments;for(;i.next();){const n=i.value;n.c(),n.hasPlaceholder()&&n.placeholder.c()}for(i=this.adornments;i.next();)i.value.updateTargetBindings()}invalidateAdornments(){const t=this.diagram;t!==null&&(t.rh(),this.QA()!==!0&&this._A(!0))}XS(){this.QA()!==!1&&(this.updateAdornments(),this._A(!1))}qv(t){const i="Selection";if(this.isSelected&&this.selectionAdorned){const n=this.selectionObject;if(n!==null&&this.actualBounds.isReal()&&this.isVisible()&&n.isVisibleObject()&&n.actualBounds.isReal()){let s=this.findAdornment(i);if(s===null){let r=this.selectionAdornmentTemplate;r===null&&(this.vl()?r=t.linkSelectionAdornmentTemplate:this instanceof Vt?r=t.groupSelectionAdornmentTemplate:r=t.nodeSelectionAdornmentTemplate),s=r.copy(),s!==null&&(this.vl()&&this.selectionObject===this.path&&(s.type=Kt.Link),s.adornedObject=n)}if(s!==null){s.type===Kt.Link&&s.c(),this.addAdornment(i,s);return}}}this.removeAdornment(i)}Wv(t){const i=this;t.toolManager.mouseDownTools.each(n=>{n.isEnabled&&n.updateAdornments(i)}),t.toolManager.updateAdornments(i)}US(t){this.Zo=t,t===null&&this.HR()}get layer(){return this.Zo}get diagram(){const t=this.Zo;return t==null?null:t.diagram}get layerName(){return this.dl}set layerName(t){const i=this.dl;if(i===t)return;let n=this.diagram;if(n!==null&&(n.findLayer(t)===null||n.partManager.addsToTemporaryLayer))return;this.dl=t,n!==null&&n.invalidateDocumentBounds(),this.t("layerName",i,t);const s=this.layer;if(s===null||s.name===t||(n=s.diagram,n===null))return;const r=n.findLayer(t);if(r===null||r===s)return;let A=s.se(-1,this,!0);A>=0&&n.raiseChangedEvent(4,"parts",s,this,null,A,!0),A=r.ta(99999999,this,!0),s.visible!==r.visible&&this.Vi(r.visible),A>=0&&n.raiseChangedEvent(3,"parts",r,null,this,!0,A);const o=this.layerChanged;if(o===null)return;const a=n.G;n.G=!0,o(this,s,r),n.G=a}get layerChanged(){return this.v!==null?this.v.Vp:null}set layerChanged(t){const i=this.layerChanged;i!==t&&(t!==null&&u.C(t,li,"layerChanged"),this.Ji(),this.v.Vp=t,this.t("layerChanged",i,t))}get zOrder(){return this.Nd}set zOrder(t){const i=this.Nd;if(i===t)return;this.Nd=t;const n=this.layer;n!==null&&n.px(-1,this),this.t("zOrder",i,t);const s=this.diagram;s!==null&&s.L()}Jv(){const t=this.layer;t!==null&&t.px(-1,this)}h1(){if(this.hh()!==!1)return;this.j2(!0),this.tf();const t=this.diagram;t!==null&&(t.e0(this),t.requestUpdate())}tT(){if(this.P|=2097152,this.hh()===!1)return;const t=this.position,i=this.location;(!i.isReal()||!t.isReal())&&this.iT(t,i);const n=this.Ai,s=it.l().a(n);n.Tt(),n.x=t.x,n.y=t.y,n.g(),this._u(s,n),it.e(s),this.j2(!1),this.tf()}so(t,i,n,s){const r=this.re;r.i(t,i,n,s),this.ki===null&&(this.ki=new Bt);const A=this.ki;A.Ii(),this.y0(A,t,i,n,s),this.ki=A,A.Ik()||A.Eg(r)}y0(t,i,n,s,r){if(this.rt!==1&&t.rt(this.rt),this.Ht===0)return;let A=q.Center;this.locationSpot.isSpot()&&(A=this.locationSpot);const o=T.l();if(this.locationObject!==this){const a=this.locationObject,h=a.naturalBounds;o.setSpot(h.x,h.y,h.width,h.height,A),a.ki!==null&&a.ki.bt(o),o.offset(-a.measuredBounds.x,-a.measuredBounds.y);let d=a.panel;for(;d!==null&&d!==this;)d.ki!==null&&d.ki.bt(o),o.offset(-d.measuredBounds.x,-d.measuredBounds.y),d=d.panel}else o.setSpot(i,n,s,r,A);t.ds(this.Ht,o.x,o.y),T.e(o)}get locationObject(){if(this.Qo===null)if(this instanceof se&&this.type!==Kt.Link&&this.hasPlaceholder())this.Qo=this.placeholder;else{const t=this.locationObjectName;if(t!==""){const i=this.findObject(t);i!==null?this.Qo=i:this.Qo=this}else this.Qo=this}return this.Qo.visible?this.Qo:this}get minLocation(){return this.v!==null?this.v.zp:T.lC}set minLocation(t){const i=this.minLocation;i.equals(t)||(t=t.N(),this.Ji(),this.v.zp=t,this.t("minLocation",i,t))}get maxLocation(){return this.v!==null?this.v.Xp:T.hC}set maxLocation(t){const i=this.maxLocation;i.equals(t)||(t=t.N(),this.Ji(),this.v.Xp=t,this.t("maxLocation",i,t))}get locationObjectName(){return this.v!==null?this.v.Yp:""}set locationObjectName(t){const i=this.locationObjectName;i!==t&&(this.Ji(),this.v.Yp=t,this.Qo=null,this.c(),this.t("locationObjectName",i,t))}get locationSpot(){return this.v!==null?this.v.Kp:q.TopLeft}set locationSpot(t){const i=this.locationSpot;i.equals(t)||(t=t.N(),this.Ji(),this.v.Kp=t,this.c(),this.t("locationSpot",i,t))}move(t,i){i===!0?this.location=t:this.position=t}moveTo(t,i,n){const s=T.Y(t,i);this.move(s,n),T.e(s)}isVisible(){if(!this.visible)return!1;const t=this.layer;if(t!==null){if(!t.visible)return!1;const n=t.diagram;if(n!==null&&n.animationManager.sx(this))return!0}const i=this.containingGroup;return!(i!==null&&(!i.isSubGraphExpanded||!i.isVisible()))}Vi(t){const i=this.diagram;t?(this.invalidateLayout(4),this.invalidateAdornments(),i!==null&&i.e0(this)):(this.invalidateLayout(8),this.clearAdornments()),this.wh(),i!==null&&(i.invalidateDocumentBounds(),i.L())}findObject(t){if(this.name===t)return this;let i=this.Bp;if(i===null&&(this.Bp=i=new xt),i.get(t)!==null)return i.get(t);const n=super.findObject(t);return n!==null?(i.set(t,n),n):(i.set(t,null),null)}D0(){this.Bp=null}getRelativePoint(t,i,n){n===void 0&&(n=new T);const s=i.isNoSpot()?q.Center:i,r=t.naturalBounds;if(n.i(r.width*s.x+s.offsetX,r.height*s.y+s.offsetY),t===null||t===this)return n;t.F.bt(n);let A=t.panel;for(;A!==null&&A!==this;)A.F.bt(n),A=A.panel;return this.ki!==null&&this.ki.bt(n),n.offset(-this.re.x,-this.re.y),n}getDocumentBounds(t){return t===void 0&&(t=new it),t.a(this.actualBounds)}ensureBounds(){this.dt(1/0,1/0),this.Kt()}TA(t){const i=this.locationSpot,n=this.locationObject;let s=n.naturalBounds;s.isReal()||(s=it.pw);const r=n instanceof Zt?n.strokeWidth:0;if(t.setSpot(0,0,s.width+r,s.height+r,i),n!==this){t.offset(-r/2,-r/2),n.F.bt(t);let A=n.panel;for(;A!==null&&A!==this;)A.F.bt(t),A=A.panel}return this.ki!==null&&this.ki.bt(t),t.offset(-this.re.x,-this.re.y),t}_h(t,i){const n=i===void 0?this.ZA:i,s=this.$v(),r=s*2;if(!this.isShadowed)return n.i(t.x-1-s,t.y-1-s,t.width+2+r,t.height+2+r),n;let A=t.x,o=t.y,a=t.width,h=t.height;const d=this.shadowBlur,f=this.shadowOffset;return a+=d,h+=d,A-=d/2,o-=d/2,f.x>0?a+=f.x:(A+=f.x,a-=f.x),f.y>0?h+=f.y:(o+=f.y,h-=f.y),n.i(A-1,o-1,a+2,h+2),n}Rv(){return this.type===Kt.Link&&this instanceof se&&this.category==="Selection"&&this.adornedObject instanceof Zt&&this.adornedPart.findMainElement()===this.adornedObject?this.adornedObject.strokeWidth:0}$v(){return isNaN(this.Up)&&(this.Up=this.EA()),this.Up}gf(){this.Up=NaN}Kt(){if(this.es()===!1){this.tT();return}this.no(!1);const t=this.Ai,i=it.l();i.a(t);const n=this.Rl();this.yh(0,0,this.re.width,this.re.height);const s=this.position;this.iT(s,this.location),t.Tt(),t.x=s.x,t.y=s.y,t.g(),this._u(i,t),i.equals(t)?this.Xs(n):this.Ne()&&(!V.u(i.width,t.width)||!V.u(i.height,t.height))&&this.zS>=0&&this.invalidateLayout(16),it.e(i),this.j2(!1)}_u(t,i){const n=this.diagram;if(n===null)return;let s=!1;if(n.na===!1&&t.isReal()){const r=it.l();r.a(n.documentBounds),r.subtractMargin(n.padding),t.x>r.x&&t.y>r.y&&t.right<r.right&&t.bottom<r.bottom&&i.x>r.x&&i.y>r.y&&i.right<r.right&&i.bottom<r.bottom&&(s=!0),it.e(r)}(this.Zv()===!0||!t.equals(i))&&this.UL(s,n),n.L(),!(!t.isReal()&&!i.isReal()||t.equalsApproxClose(i))&&(this instanceof Et&&!n.undoManager.isUndoingRedoing&&this.invalidateConnectedLinks(),this.wh())}get location(){return this.Js}set location(t){const i=t.x,n=t.y,s=this.Js;(s.x!==i&&(!isNaN(s.x)||!isNaN(i))||s.y!==n&&(!isNaN(s.y)||!isNaN(n)))&&(t=t.copy(),this.Qv(t,s)&&this.t("location",s,t.copy()))}Qv(t,i){if(this.vl())return!1;if(this.Js=t,this.P|=2097152,this.es()===!1){this.h1();const n=this.gt;if(n.isReal()){const s=this.diagram;if(s===null||s.animationManager.isTicking||!s.undoManager.isUndoingRedoing){const r=n.copy();n.i(n.x+(t.x-i.x),n.y+(t.y-i.y)),this.eT(s,n,r.x,r.y),this.t("position",r,n.copy())}}}return!0}g2(t,i,n){if(this.vl()||!t.isReal())return!1;const s=this.diagram;if(s!==null&&this.eT(s,t,i,n),this.gt=t,this.P&=-2097153,this.Js.isReal()&&(s===null||s.animationManager.isTicking||!s.undoManager.isUndoingRedoing)){const r=this.Js;this.Js=new T(r.x+(t.x-i),r.y+(t.y-n)),this.t("location",r,this.Js.copy())}return this.hh()===!1&&this.es()===!1&&(this.h1(),this.tT()),!0}eT(t,i,n,s){if(t===null||this instanceof se)return;const r=t.animationManager;r.xi&&r.lL(this,new T(n,s),i,!1)}Sc(t,i,n){const s=this.Js,r=this.gt;if(n){if(s.x===t&&s.y===i)return;this.hh()||this.es()?r.i(NaN,NaN):r.i(r.x+t-s.x,r.y+i-s.y),s.i(t,i)}else{if(r.x===t&&r.y===i)return;s.i(s.x+t-r.x,s.y+i-r.y),r.i(t,i)}this.h1()}m2(){this.P&=-2097153,this.h1()}iT(t,i){const n=this.TA(T.l()),s=this.diagram,r=i.isReal(),A=t.isReal();r&&A?this.P&2097152?this.sT(t,i,s,n):this.nT(t,i,s,n):r?this.sT(t,i,s,n):A&&this.nT(t,i,s,n),this.P|=2097152,T.e(n),this.tf()}sT(t,i,n,s){const r=t.x,A=t.y;if(t.i(i.x-s.x,i.y-s.y),n!==null){const o=n.animationManager,a=o.defaultAnimation.isAnimating;!a&&o.xi&&!(this instanceof se)&&o.lL(this,new T(r,A),t,!1),!a&&!(t.x===r&&t.y===A)&&this.t("position",new T(r,A),t.copy())}}nT(t,i,n,s){const r=i.copy();i.i(t.x+s.x,t.y+s.y),!i.equals(r)&&n!==null&&this.t("location",r,i.copy())}UL(t,i){this.a2(!1),this instanceof Et&&i.zM(this),!this.layer.isTemporary&&!t&&i.invalidateDocumentBounds();const n=this.Ai,s=i.viewportBounds;s.isReal()?this.Rl()?(n.intersectsRectPlus(s,10)||this.Xs(!1),this.updateAdornments()):this.isVisible()&&n.intersectsRect(s)?(this.Xs(!0),this.updateAdornments()):this.invalidateAdornments():i.Vc=!0}Zr(){return!0}Ne(){return!0}vl(){return!1}Hs(){return!0}hasPlaceholder(){return!1}get category(){return this.Jo}set category(t){const i=this.Jo;if(i===t)return;this.svg!==null&&(this.svg.remove(),this.Ye(!0));const n=this.diagram,s=this.data;let r=null;if(n!==null&&s!==null&&!(this instanceof se)){const A=n.model.undoManager;A.isEnabled&&!A.isUndoingRedoing&&(r=this.clone(),r.T.addAll(this.T))}if(this.Jo=t,this.t("category",i,t),n!==null&&s!==null&&!(this instanceof se)){const A=n.model;if(A.undoManager.isUndoingRedoing)return;if(this.vl()){n.partManager.setLinkCategoryForData(s,t);const o=n.partManager.findLinkTemplateForCategory(t);if(o!==null){o.Xt();const a=o.copy();a!==null&&this.q2(a,i,t)}}else{A!==null&&A.setCategoryForNodeData(s,t);const o=n.partManager.findTemplateForNodeData(s,t);if(o!==null){o.Xt();const a=o.copy();if(a!==null&&!(a instanceof Xt)){const h=this.location.copy();this.q2(a,i,t),this.location.isReal()||(this.location=h)}}}if(r!==null){const o=this.clone();o.T.addAll(this.T),this.t("self",r,o)}}else if(this instanceof se){const A=this.adornedPart;if(A!==null){const o=A.$o;o!==null&&o.delete(i),A.addAdornment(this.category,this)}}}get self(){return this}set self(t){this.q2(t,this.category,t.category)}q2(t,i,n){t.constructor!==this.constructor&&(li.oT||(li.oT=!0,u.ri('Should not change the class of the Part when changing category from "'+i+'" to "'+n+'"'),u.ri("  Old class: "+u.Vn(this.constructor)+", new class: "+u.Vn(t.constructor)+", part: "+this.toString()))),this.clearAdornments();const s=this.data,r=this.layerName,A=this.isSelected,o=this.isHighlighted;let a=!0,h=!0,d=!1;this instanceof Et&&(a=this.isTreeLeaf,h=this.isTreeExpanded,d=this.wasTreeExpanded),t.Xo(this),t.cloneProtected(this),this.Jo=n,this.svg!==null&&(this.svg.remove(),this.svg=null,this.Ye(!0)),this.c(),this.L();const f=this.diagram;let g=!0;f!==null&&(g=f.skipsUndoManager,f.skipsUndoManager=!0),this.ii=s,this.P=A?this.P|4096:this.P&-4097,this.P=o?this.P|524288:this.P&-524289,this instanceof Et&&(this.B=a?this.B|4:this.B&-5,this.B=h?this.B|1:this.B&-2,this.B=d?this.B|2:this.B&-3),s!==null&&this.updateTargetBindings();const x=this.layerName;x!==r&&(this.dl=r,this.layerName=x),f!==null&&(f.skipsUndoManager=g),this.Ne()&&this.invalidateLayout(64)}canCopy(){if(!this.copyable)return!1;const t=this.layer;if(t===null)return!0;if(!t.allowCopy)return!1;const i=t.diagram;return i===null?!0:!!i.allowCopy}canDelete(){if(!this.deletable)return!1;const t=this.layer;if(t===null)return!0;if(!t.allowDelete)return!1;const i=t.diagram;return i===null?!0:!!i.allowDelete}canEdit(){if(!this.textEditable)return!1;const t=this.layer;if(t===null)return!0;if(!t.allowTextEdit)return!1;const i=t.diagram;return i===null?!0:!!i.allowTextEdit}canGroup(){if(!this.groupable)return!1;const t=this.layer;if(t===null)return!0;if(!t.allowGroup)return!1;const i=t.diagram;return i===null?!0:!!i.allowGroup}canMove(){if(!this.movable)return!1;const t=this.layer;if(t===null)return!0;if(!t.allowMove)return!1;const i=t.diagram;return i===null?!0:!!i.allowMove}canReshape(){if(!this.reshapable)return!1;const t=this.layer;if(t===null)return!0;if(!t.allowReshape)return!1;const i=t.diagram;return i===null?!0:!!i.allowReshape}canResize(){if(!this.resizable)return!1;const t=this.layer;if(t===null)return!0;if(!t.allowResize)return!1;const i=t.diagram;return i===null?!0:!!i.allowResize}canRotate(){if(!this.rotatable)return!1;const t=this.layer;if(t===null)return!0;if(!t.allowRotate)return!1;const i=t.diagram;return i===null?!0:!!i.allowRotate}canSelect(){if(!this.selectable)return!1;const t=this.layer;if(t===null)return!0;if(!t.allowSelect)return!1;const i=t.diagram;return i===null?!0:!!i.allowSelect}get copyable(){return(this.P&1)!==0}set copyable(t){const i=(this.P&1)!==0;i!==t&&(this.P=this.P^1,this.t("copyable",i,t))}get deletable(){return(this.P&2)!==0}set deletable(t){const i=(this.P&2)!==0;i!==t&&(this.P=this.P^2,this.t("deletable",i,t))}get textEditable(){return(this.P&4)!==0}set textEditable(t){const i=(this.P&4)!==0;i!==t&&(this.P=this.P^4,this.t("textEditable",i,t),this.invalidateAdornments())}get groupable(){return(this.P&8)!==0}set groupable(t){const i=(this.P&8)!==0;i!==t&&(this.P=this.P^8,this.t("groupable",i,t))}get movable(){return(this.P&16)!==0}set movable(t){const i=(this.P&16)!==0;i!==t&&(this.P=this.P^16,this.t("movable",i,t))}get selectionAdorned(){return(this.P&32)!==0}set selectionAdorned(t){const i=(this.P&32)!==0;i!==t&&(this.P=this.P^32,this.t("selectionAdorned",i,t),this.invalidateAdornments())}get isInDocumentBounds(){return(this.P&64)!==0}set isInDocumentBounds(t){const i=(this.P&64)!==0;if(i!==t){this.P=this.P^64;const n=this.diagram;n!==null&&n.invalidateDocumentBounds(),this.t("isInDocumentBounds",i,t)}}get isLayoutPositioned(){return(this.P&128)!==0}set isLayoutPositioned(t){const i=(this.P&128)!==0;i!==t&&(this.P=this.P^128,this.t("isLayoutPositioned",i,t),this.invalidateLayout(t?4:8))}get selectable(){return(this.P&256)!==0}set selectable(t){const i=(this.P&256)!==0;i!==t&&(this.P=this.P^256,this.t("selectable",i,t),this.invalidateAdornments())}get reshapable(){return(this.P&512)!==0}set reshapable(t){const i=(this.P&512)!==0;i!==t&&(this.P=this.P^512,this.t("reshapable",i,t),this.invalidateAdornments())}get resizable(){return(this.P&1024)!==0}set resizable(t){const i=(this.P&1024)!==0;i!==t&&(this.P=this.P^1024,this.t("resizable",i,t),this.invalidateAdornments())}get rotatable(){return(this.P&2048)!==0}set rotatable(t){const i=(this.P&2048)!==0;i!==t&&(this.P=this.P^2048,this.t("rotatable",i,t),this.invalidateAdornments())}get isSelected(){return(this.P&4096)!==0}set isSelected(t){const i=(this.P&4096)!==0;if(i!==t){const n=this.diagram;if(t){if(!this.canSelect())return;if(n!==null){const A=n.maxSelectionCount;if(n.selection.count>=A)return}}this.P=this.P^4096;let s=!1;if(n!==null){s=n.skipsUndoManager,n.skipsUndoManager=!0;const A=n.selection;A.Tt(),t?A.add(this):A.delete(this),A.g()}this.t("isSelected",i,t),this.invalidateAdornments();const r=this.selectionChanged;r!==null&&r(this),n!==null&&(n.requestUpdate(),n.skipsUndoManager=s)}}get isHighlighted(){return(this.P&524288)!==0}set isHighlighted(t){const i=(this.P&524288)!==0;if(i!==t){this.P=this.P^524288;const n=this.diagram;if(n!==null){const r=n.highlighteds;r.Tt(),t?r.add(this):r.delete(this),r.g()}this.t("isHighlighted",i,t),this.L();const s=this.highlightedChanged;s!==null&&s(this)}}get isShadowed(){return(this.P&8192)!==0}set isShadowed(t){const i=(this.P&8192)!==0;i!==t&&(this.P=this.P^8192,this.Ye(!0),this.t("isShadowed",i,t),this.L())}QA(){return(this.P&16384)!==0}_A(t){t?this.P|=16384:this.P&=-16385}hh(){return(this.P&32768)!==0}j2(t){t?this.P|=32768:this.P&=-32769}Zv(){return(this.P&65536)!==0}a2(t){t?this.P|=65536:this.P&=-65537}Rl(){return(this.P&131072)!==0}Xs(t){t?this.P|=131072:this.P&=-131073}rT(){return(this.P&1048576)!==0}a1(t){t?this.P|=1048576:this.P&=-1048577}get isAnimated(){return(this.P&262144)!==0}set isAnimated(t){const i=(this.P&262144)!==0;i!==t&&(this.P=this.P^262144,this.t("isAnimated",i,t))}get highlightedChanged(){return this.v!==null?this.v.Gp:null}set highlightedChanged(t){const i=this.highlightedChanged;i!==t&&(t!==null&&u.C(t,li,"highlightedChanged"),this.Ji(),this.v.Gp=t,this.t("highlightedChanged",i,t))}get selectionObjectName(){return this.v!==null?this.v.Hp:""}set selectionObjectName(t){const i=this.selectionObjectName;i!==t&&(this.Ji(),this.v.Hp=t,this.gl=null,this.t("selectionObjectName",i,t))}get selectionAdornmentTemplate(){return this.v!==null?this.v.jp:null}set selectionAdornmentTemplate(t){const i=this.selectionAdornmentTemplate;i!==t&&(t!==null&&t.Xt(),this.Ji(),this.v.jp=t,this.t("selectionAdornmentTemplate",i,t))}get selectionObject(){if(this.gl===null){const t=this.selectionObjectName;if(t!==null&&t!==""){const i=this.findObject(t);i!==null?this.gl=i:this.gl=this}else if(this instanceof Xt){const i=this.path;i!==null?this.gl=i:this.gl=this}else this.gl=this}return this.gl}get selectionChanged(){return this.v!==null?this.v.qp:null}set selectionChanged(t){const i=this.selectionChanged;i!==t&&(t!==null&&u.C(t,li,"selectionChanged"),this.Ji(),this.v.qp=t,this.t("selectionChanged",i,t))}get resizeAdornmentTemplate(){return this.v!==null?this.v.Wp:null}set resizeAdornmentTemplate(t){const i=this.resizeAdornmentTemplate;i!==t&&(this.Ji(),this.v.Wp=t.Xt(),this.t("resizeAdornmentTemplate",i,t))}get resizeObjectName(){return this.v!==null?this.v.Jp:""}set resizeObjectName(t){const i=this.resizeObjectName;i!==t&&(this.Ji(),this.v.Jp=t,this.t("resizeObjectName",i,t))}get resizeObject(){const t=this.resizeObjectName;if(t!==""){const i=this.findObject(t);if(i!==null)return i}return this}get resizeCellSize(){return this.v!==null?this.v.$p:ct.gw}set resizeCellSize(t){const i=this.resizeCellSize;i.equals(t)||(t=t.N(),this.Ji(),this.v.$p=t,this.t("resizeCellSize",i,t))}get rotateAdornmentTemplate(){return this.v!==null?this.v.Zp:null}set rotateAdornmentTemplate(t){const i=this.rotateAdornmentTemplate;i!==t&&(this.Ji(),this.v.Zp=t.Xt(),this.t("rotateAdornmentTemplate",i,t))}get rotateObjectName(){return this.v!==null?this.v.Qp:""}set rotateObjectName(t){const i=this.rotateObjectName;i!==t&&(this.Ji(),this.v.Qp=t,this.t("rotateObjectName",i,t))}get rotateObject(){const t=this.rotateObjectName;if(t!==""){const i=this.findObject(t);if(i!==null)return i}return this}get rotationSpot(){return this.v!==null?this.v._p:q.Default}set rotationSpot(t){const i=this.rotationSpot;i.equals(t)||(t=t.N(),this.Ji(),this.v._p=t,this.t("rotationSpot",i,t))}get text(){return this.hi}set text(t){const i=this.hi;i!==t&&(this.hi=t,this.t("text",i,t))}get containingGroup(){return this.Mh}set containingGroup(t){if(this.Ne()){const i=this.Mh;if(i!==t){t!==null&&(this===t||t.isMemberOf(this))&&(this===t&&u.o("Cannot make a Group a member of itself: "+this.toString()),u.o("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+t.toString())),this.invalidateLayout(2);const n=this.diagram;if(i!==null?i.W2(this):this instanceof Vt&&n!==null&&n.Jr.delete(this),this.Mh=t,t!==null?t.J2(this):this instanceof Vt&&n!==null&&n.Jr.add(this),this.invalidateLayout(1),n!==null&&n.G){const r=this.data,A=n.model;if(r!==null&&A.$c()){const o=t!==null?t.data:null;A.setGroupForData(r,A.getKeyForNodeData(o))}}const s=this.containingGroupChanged;if(s!==null){let r=!0;n!==null&&(r=n.G,n.G=!0),s(this,i,t),n!==null&&(n.G=r)}if(this instanceof Vt){const r=new X;li.fh(r,this,!0,0,!0);const A=r.iterator;for(;A.next();){const o=A.value;if(o instanceof Et){const a=o.linksConnected;for(;a.next();)a.value.Cd()}}}if(this instanceof Et){const r=this.linksConnected;for(;r.next();)r.value.Cd();const A=this.labeledLink;A!==null&&A.Cd()}this.t("containingGroup",i,t),t!==null&&t.Jv()}}else u.o("cannot set the Part.containingGroup of a Link or Adornment")}wh(){const t=this.containingGroup;t!==null&&(t.hasPlaceholder()&&t.placeholder.c(),t.c(),t.invalidateConnectedLinks())}L(){const t=this.diagram;t!==null&&!this.es()&&!this.hh()&&this.isVisible()&&this.Ai.isReal()&&t.L(this._h(this.Ai))}c(){if(this.Bo())return;super.c();const t=this.diagram;t!==null&&(t.e0(this),this instanceof Et&&this.labeledLink!==null&&this.labeledLink.rf(),t.requestUpdate(!0))}rf(t){if(this.es())return;const i=this.diagram;i!==null&&(i.e0(this),this instanceof Et&&this.invalidateConnectedLinks(),i.requestUpdate()),this.no(!0)}Im(t){if(!t){const i=this.Mh;i!==null&&i.J2(this)}}Em(t){if(!t){const i=this.Mh;i!==null&&i.W2(this)}}Hc(){const t=this.data;if(t!==null){const i=this.diagram;if(i!==null){const n=i.model;n!==null&&n.removeNodeData(t)}}}get containingGroupChanged(){return this.v!==null?this.v.ty:null}set containingGroupChanged(t){const i=this.containingGroupChanged;i!==t&&(t!==null&&u.C(t,li,"containingGroupChanged"),this.Ji(),this.v.ty=t,this.t("containingGroupChanged",i,t))}findSubGraphLevel(){return this.$2(this)}$2(t){const i=t.containingGroup;if(i!==null)return 1+this.$2(i);if(t instanceof Et){const n=t.labeledLink;if(n!==null)return this.$2(n)}return 0}findTopLevelPart(){return this.Z2(this)}Z2(t){const i=t.containingGroup;if(i!==null)return this.Z2(i);if(t instanceof Et){const n=t.labeledLink;if(n!==null)return this.Z2(n)}return t}get isTopLevel(){return!(this.containingGroup!==null||this instanceof Et&&this.labeledLink!==null)}isMemberOf(t){return t instanceof Vt?this.Q2(this,t):!1}Q2(t,i){if(t===i||i===null)return!1;const n=t.containingGroup;if(n!==null&&(n===i||this.Q2(n,i)))return!0;if(t instanceof Et){const s=t.labeledLink;if(s!==null)return this.Q2(s,i)}return!1}findCommonContainingGroup(t){if(t===null)return null;if(this===t)return this.containingGroup;let i=this;for(;i!==null;){if(i instanceof Vt&&i.a1(!0),i instanceof Et){const s=i.labeledLink;s!==null&&(i=s)}i=i.containingGroup}let n=null;for(i=t;i!==null;){if(i.rT()){n=i;break}if(i instanceof Et){const s=i.labeledLink;s!==null&&(i=s)}i=i.containingGroup}for(i=this;i!==null;){if(i instanceof Vt&&i.a1(!1),i instanceof Et){const s=i.labeledLink;s!==null&&(i=s)}i=i.containingGroup}return n}get layoutConditions(){return this.v!==null?this.v.iy:127}set layoutConditions(t){const i=this.layoutConditions;i!==t&&(this.Ji(),this.v.iy=t,this.t("layoutConditions",i,t))}canLayout(){if(!this.isLayoutPositioned||!this.isVisible())return!1;const t=this.layer;return!(t!==null&&t.isTemporary||this instanceof Et&&this.isLinkLabel)}_v(t){if(!this.isLayoutPositioned||!(t&this.layoutConditions))return!1;const i=this.layer;if(i!==null&&i.isTemporary||this instanceof Et&&this.isLinkLabel)return!1;const n=this.diagram;return!(n!==null&&n.undoManager.isUndoingRedoing)}invalidateLayout(t){if(t===void 0&&(t=16777215),!this._v(t))return;const i=this.Mh;if(i!==null){const n=i.layout;n!==null?n.invalidateLayout():i.invalidateLayout(t)}else{const n=this.diagram;if(n!==null){const s=n.layout;s!==null&&s.invalidateLayout()}}}VL(){if(!this.isVisible())return!1;const t=this.layer;return!(t!==null&&t.isTemporary)}static fh(t,i,n,s,r,A){if(A===void 0&&(A=null),!t.has(i)&&!(A!==null&&!A(i))&&!(i instanceof se)){if(t.add(i),i instanceof Et){if(n&&i instanceof Vt){const o=i.memberParts;for(;o.next();){const a=o.value;li.fh(t,a,n,s,r,A)}}if(r!==!1){const o=i.linksConnected;for(;o.next();){const a=o.value;if(t.has(a))continue;const h=a.fromNode,d=a.toNode,f=h===null||t.has(h),g=d===null||t.has(d);(r?f&&g:f||g)&&li.fh(t,a,n,s,r,A)}}if(s>1){const o=i.findTreeChildrenNodes();for(;o.next();){const a=o.value;li.fh(t,a,n,s-1,r,A)}}}else if(i instanceof Xt){const o=i.labelNodes;for(;o.next();){const a=o.value;li.fh(t,a,n,s,r,A)}}}}get dragComputation(){return this.v!==null?this.v.ey:null}set dragComputation(t){const i=this.dragComputation;i!==t&&(t!==null&&u.C(t,li,"dragComputation"),this.Ji(),this.v.ey=t,this.t("dragComputation",i,t))}get shadowOffset(){return this.v!==null?this.v.sy:T.aC}set shadowOffset(t){const i=this.shadowOffset;i.equals(t)||(t=t.N(),this.Ji(),this.v.sy=t,this.L(),this.t("shadowOffset",i,t))}get shadowColor(){return this.v!==null?this.v.ny:"gray"}set shadowColor(t){const i=this.shadowColor;i!==t&&(this.Ji(),this.v.ny=t,this.L(),this.t("shadowColor",i,t))}get shadowBlur(){return this.v!==null?this.v.kn:4}set shadowBlur(t){const i=this.shadowBlur;i!==t&&(this.Ji(),this.v.kn=t,this.L(),this.t("shadowBlur",i,t))}};p(li,"LayoutNone",0),p(li,"LayoutAdded",1),p(li,"LayoutRemoved",2),p(li,"LayoutShown",4),p(li,"LayoutHidden",8),p(li,"LayoutNodeSized",16),p(li,"LayoutGroupLayout",32),p(li,"LayoutNodeReplaced",64),p(li,"LayoutStandard",127),p(li,"LayoutAll",16777215),p(li,"oT",!1);let Ce=li;class Do{constructor(){p(this,"gi");p(this,"Vp");p(this,"ty");p(this,"jp");p(this,"Hp");p(this,"qp");p(this,"Gp");p(this,"Wp");p(this,"Jp");p(this,"$p");p(this,"Zp");p(this,"Qp");p(this,"_p");p(this,"Yp");p(this,"Kp");p(this,"zp");p(this,"Xp");p(this,"ey");p(this,"iy");p(this,"sy");p(this,"ny");p(this,"kn");this.gi=!1,this.Vp=null,this.ty=null,this.jp=null,this.Hp="",this.qp=null,this.Gp=null,this.Wp=null,this.Jp="",this.$p=ct.gw,this.Zp=null,this.Qp="",this._p=q.Default,this.Yp="",this.Kp=q.TopLeft,this.zp=T.lC,this.Xp=T.hC,this.ey=null,this.iy=127,this.sy=T.aC,this.ny="gray",this.kn=4}copy(){const e=new Do;return e.Vp=this.Vp,e.ty=this.ty,e.jp=this.jp,e.Hp=this.Hp,e.qp=this.qp,e.Gp=this.Gp,e.Wp=this.Wp,e.Jp=this.Jp,e.$p=this.$p.N(),e.Zp=this.Zp,e.Qp=this.Qp,e._p=this._p.N(),e.Yp=this.Yp,e.Kp=this.Kp.N(),e.zp=this.zp.N(),e.Xp=this.Xp.N(),e.ey=this.ey,e.iy=this.iy,e.sy=this.sy.N(),e.ny=this.ny,e.kn=this.kn,e}}class se extends Ce{constructor(t,i){let n;t===void 0||t instanceof xe||typeof t=="string"?n=t:t&&(i=t);super(n);p(this,"ms");p(this,"Bt");p(this,"ZP");p(this,"QP");p(this,"uf");this.P&=-257,this.dl="Adornment",this.ms=null,this.ZP=0,this.QP=!1,this.Bt=null,this.uf=null,i&&Object.assign(this,i)}toString(){const t=this.adornedPart;return"Adornment("+this.category+")"+(t!==null?t.toString():"")}updateRelationshipsFromData(){}ld(t){const i=this.adornedObject,n=i==null?void 0:i.part;if(!(n instanceof Xt)||!(i instanceof Zt))return;const s=n.path;let r=s.geometry;n.ld(t),r=s.geometry;const A=this.T.r,o=A.length;for(let a=0;a<o;a++){const h=A[a];h.isPanelMain&&h instanceof Zt&&(h.ft=r)}}hasPlaceholder(){return this.Bt!==null&&this.Bt.isVisibleObject()}get placeholder(){return this.Bt}get adornedObject(){return this.ms}set adornedObject(t){const i=this.adornedPart;let n=null;t!==null&&(n=t.part),i!==null&&(t===null||i!==n)&&i.removeAdornment(this.category),this.ms=t,n!==null&&n.addAdornment(this.category,this)}get adornedPart(){const t=this.ms;return t!==null?t.part:null}Zr(){const t=this.ms;if(t===null)return!0;const i=t.part;return i===null||!i.es()}Ne(){return!1}get containingGroup(){return null}Zc(t,i,n,s,r,A,o){if(t===3&&i==="elements"){if(r instanceof Fi)this.Bt===null&&(this.Bt=r);else if(r instanceof Kt){const a=r.findInVisualTree(h=>h instanceof Fi);a instanceof Fi&&this.Bt===null&&(this.Bt=a)}}else t===4&&i==="elements"&&this.Bt!==null&&(s===this.Bt?this.Bt=null:s instanceof Kt&&this.Bt.isContainedBy(s)&&(this.Bt=null));super.Zc(t,i,n,s,r,A,o)}updateAdornments(){}Hc(){}}var Je=(k=>(k[k.None=0]="None",k[k.Evenly=1]="Evenly",k[k.Packed=2]="Packed",k))(Je||{});const Yn=class Yn extends Ce{constructor(t,i){let n;t===void 0||t instanceof xe||typeof t=="string"?n=t:t&&(i=t);super(n);p(this,"B");p(this,"yt");p(this,"Nf");p(this,"ml");p(this,"Nh");p(this,"le");p(this,"ei");this.B=13,this.yt=null,this.ei=new H,this.Nf=null,this.ml=null,this.le=null,this.Nh=!1,i&&Object.assign(this,i)}cloneProtected(t){super.cloneProtected(t),t.B=this.B,this.yt!==null&&(this.yt.gi?t.yt=this.yt:t.yt=this.yt.copy())}Xo(t){super.Xo(t),t.invalidateConnectedLinks(),t.ml=this.ml,t.le=null}pl(){this.yt===null?this.yt=new NA:this.yt.gi&&(this.yt=this.yt.copy())}mh(){super.mh(),this.yt!==null&&(this.yt.gi=!0)}lT(t){t!==null&&(this.ml===null&&(this.ml=new X),this.ml.add(t))}hT(t){t!==null&&this.ml!==null&&this.ml.delete(t)}aT(t,i,n){if(t===null||this.ml===null)return null;const s=this.ml.iterator;for(;s.next();){const r=s.value;if(r.oy===this&&r.c1===t&&r._2===i&&r.tN===n||r.oy===t&&r.c1===this&&r._2===n&&r.tN===i)return r}return null}invalidateLinkBundle(t,i,n){i==null&&(i=""),n==null&&(n="");const s=this.aT(t,i,n);s!==null&&s.Ld()}Zc(t,i,n,s,r,A,o){t===3&&i==="elements"?this.le=null:t===4&&i==="elements"&&(this.le=null),super.Zc(t,i,n,s,r,A,o)}invalidateConnectedLinks(t){const i=this.linksConnected;for(;i.next();){const n=i.value;t!==void 0&&t.has(n)||(this.$i(n.fromPort),this.$i(n.toPort),n.invalidateRoute())}}gA(t){const i=this.linksConnected;for(;i.next();){const n=i.value;n.fromPort!==t&&n.toPort!==t||(this.$i(n.fromPort),this.$i(n.toPort),n.invalidateRoute())}}$i(t){if(t===null)return;const i=t.Wu;i!==null&&i.Ld();const n=t.part,s=n.containingGroup;s!==null&&!n.isVisible()&&s.$i(s.port)}Zr(){return!0}get portSpreading(){return this.yt!==null?this.yt.ry:1}set portSpreading(t){const i=this.portSpreading;if(i!==t){this.pl(),this.yt.ry=t,this.t("portSpreading",i,t);const n=this.diagram;if(n!==null&&n.undoManager.isUndoingRedoing)return;this.invalidateConnectedLinks()}}get avoidable(){return(this.B&8)!==0}set avoidable(t){const i=(this.B&8)!==0;if(i!==t){this.B=this.B^8;const n=this.diagram;n!==null&&n.zM(this),this.t("avoidable",i,t)}}get avoidableMargin(){return this.yt!==null?this.yt.ly:Rt.pC}set avoidableMargin(t){typeof t=="number"&&(t=new Rt(t));const i=this.avoidableMargin;if(!i.equals(t)){t=t.N(),this.pl(),this.yt.ly=t;const n=this.diagram;n!==null&&n.zM(this),this.t("avoidableMargin",i,t)}}canAvoid(){return this.avoidable&&!this.isLinkLabel}getAvoidableRect(t){return t.set(this.actualBounds),t.addMargin(this.avoidableMargin),t}findVisibleNode(){let t=this;for(;t!==null&&!t.isVisible();)t=t.containingGroup;return t}isVisible(){if(!super.isVisible())return!1;let t=!0,i=1;const n=this.diagram;if(n!==null){if(n.animationManager.sx(this))return!0;t=n.isTreePathToChildren,i=n.treeCollapsePolicy}if(i===1){const r=this.findTreeParentNode();if(r!==null&&!r.isTreeExpanded)return!1}else if(i===2){const r=t?this.findLinksInto():this.findLinksOutOf();let A=!1,o=!1;for(;r.next();){const a=r.value;if(a.isTreeLink){A=!0;const h=t?a.fromNode:a.toNode;if(h&&h.isTreeExpanded){o=!0;break}}}if(A&&!o)return!1}else if(i===3){const r=t?this.findLinksInto():this.findLinksOutOf();let A=!1,o=!1;for(;r.next();){const a=r.value;if(a.isTreeLink){A=!0;const h=t?a.fromNode:a.toNode;if(h&&!h.isTreeExpanded){o=!0;break}}}if(A&&o)return!1}const s=this.labeledLink;return s!==null?s.isVisible():!0}Vi(t){super.Vi(t);const i=this.linksConnected;for(;i.next();){const n=i.value;if(t&&this.containingGroup!==null){const s=n.getOtherNode(this);s!==null&&!s.isMemberOf(this.containingGroup)&&n.invalidateRoute()}n.Vi(t)}}get linksConnected(){return this.ei.iterator}findExternalTreeLinksConnected(){const t=new X,i=new X;return this.cT(this,t,i),i.iterator}cT(t,i,n){if(t===null||i.has(t))return;i.add(t);let s=!0;const r=this.diagram;r!==null&&(s=r.isTreePathToChildren),t.linksConnected.each(A=>{A.isTreeLink?(s?A.fromNode===t:A.toNode===t)&&this.cT(s?A.toNode:A.fromNode,i,n):n.add(A)})}findLinksConnected(t){if(t===void 0&&(t=null),t===null)return this.ei.iterator;const i=new I(this.ei),n=this;return i.predicate=s=>s.fromNode===n&&s.fromPortId===t||s.toNode===n&&s.toPortId===t,i}findLinksOutOf(t){t===void 0&&(t=null);const i=new I(this.ei),n=this;return i.predicate=s=>s.fromNode!==n?!1:t===null?!0:s.fromPortId===t,i}findLinksInto(t){t===void 0&&(t=null);const i=new I(this.ei),n=this;return i.predicate=s=>s.toNode!==n?!1:t===null?!0:s.toPortId===t,i}findNodesConnected(t){t===void 0&&(t=null);let i=null,n=null;const s=this.ei.iterator;for(;s.next();){const r=s.value;if(r.fromNode===this){if(t===null||r.fromPortId===t){const A=r.toNode;i!==null?i.add(A):n!==null&&n!==A?(i=new X,i.add(n),i.add(A)):n=A}}else if(r.toNode===this&&(t===null||r.toPortId===t)){const A=r.fromNode;i!==null?i.add(A):n!==null&&n!==A?(i=new X,i.add(n),i.add(A)):n=A}}return i!==null?i.iterator:n!==null?new N(n):P.instance}findNodesOutOf(t){t===void 0&&(t=null);let i=null,n=null;const s=this.ei.iterator;for(;s.next();){const r=s.value;if(r.fromNode===this&&(t===null||r.fromPortId===t)){const A=r.toNode;i!==null?i.add(A):n!==null&&n!==A?(i=new X,i.add(n),i.add(A)):n=A}}return i!==null?i.iterator:n!==null?new N(n):P.instance}findNodesInto(t){t===void 0&&(t=null);let i=null,n=null;const s=this.ei.iterator;for(;s.next();){const r=s.value;if(r.toNode===this&&(t===null||r.toPortId===t)){const A=r.fromNode;i!==null?i.add(A):n!==null&&n!==A?(i=new X,i.add(n),i.add(A)):n=A}}return i!==null?i.iterator:n!==null?new N(n):P.instance}findLinksBetween(t,i,n){i===void 0&&(i=null),n===void 0&&(n=null);const s=new I(this.ei),r=this;return s.predicate=A=>A.fromNode===r&&A.toNode===t&&(i===null||A.fromPortId===i)&&(n===null||A.toPortId===n)||A.fromNode===t&&A.toNode===r&&(n===null||A.fromPortId===n)&&(i===null||A.toPortId===i),s}findLinksTo(t,i,n){i===void 0&&(i=null),n===void 0&&(n=null);const s=new I(this.ei),r=this;return s.predicate=A=>!(A.fromNode!==r||A.toNode!==t||i!==null&&A.fromPortId!==i||n!==null&&A.toPortId!==n),s}get linkConnected(){return this.yt!==null?this.yt.hy:null}set linkConnected(t){const i=this.linkConnected;i!==t&&(t!==null&&u.C(t,Yn,"linkConnected"),this.pl(),this.yt.hy=t,this.t("linkConnected",i,t))}get linkDisconnected(){return this.yt!==null?this.yt.ay:null}set linkDisconnected(t){const i=this.linkDisconnected;i!==t&&(t!==null&&u.C(t,Yn,"linkDisconnected"),this.pl(),this.yt.ay=t,this.t("linkDisconnected",i,t))}get linkValidation(){return this.yt!==null?this.yt.Fl:null}set linkValidation(t){const i=this.linkValidation;i!==t&&(t!==null&&u.C(t,Yn,"linkValidation"),this.pl(),this.yt.Fl=t,this.t("linkValidation",i,t))}f1(t,i){this.$i(i);const n=this.ei.has(t);if(n||this.ei.add(t),!n||t.fromNode===t.toNode){const s=this.linkConnected;if(s!==null){let r=!0;const A=this.diagram;A!==null&&(r=A.G,A.G=!0),s(this,t,i),A!==null&&(A.G=r)}}if(!n){if(!t.isTreeLink)return;const s=t.fromNode,r=t.toNode;if(s!==null&&r!==null&&s!==r){let A=!0;const o=this.diagram;o!==null&&(A=o.isTreePathToChildren);const a=A?r:s,h=A?s:r;if(a.Nh||(a.Nh=h),h.isTreeLeaf){if(o!==null&&o.undoManager.isUndoingRedoing)return;A?s===h&&(h.isTreeLeaf=!1):r===h&&(h.isTreeLeaf=!1)}}}}u1(t,i){this.$i(i);const n=this.ei.delete(t);let s=null;if(n||t.toNode===t.fromNode){const r=this.linkDisconnected;if(s=this.diagram,r!==null){let A=!0;s!==null&&(A=s.G,s.G=!0),r(this,t,i),s!==null&&(s.G=A)}}if(n){if(!t.isTreeLink)return;let r=!0;s!==null&&(r=s.isTreePathToChildren);const A=r?t.toNode:t.fromNode,o=r?t.fromNode:t.toNode;if(A!==null&&(A.Nh=!1),o!==null&&!o.isTreeLeaf)if(o.ei.count===0){if(o.Nh=null,s!==null&&s.undoManager.isUndoingRedoing)return;o.isTreeLeaf=!0}else o.a0()}}a0(){if(this.Nh=!1,this.ei.count===0)return;let t=!0;const i=this.diagram;if(i!==null&&i.undoManager.isUndoingRedoing)return;i!==null&&(t=i.isTreePathToChildren);const n=this.ei.iterator;for(;n.next();){const s=n.value;if(s.isTreeLink){if(t){if(s.fromNode===this){this.isTreeLeaf=!1;return}}else if(s.toNode===this){this.isTreeLeaf=!1;return}}}this.isTreeLeaf=!0}updateRelationshipsFromData(){const t=this.diagram;t!==null&&t.partManager.updateRelationshipsFromData(this)}Im(t){if(super.Im(t),!t){this.a0();const i=this.Nf;i!==null&&i.fT(this)}}Em(t){if(super.Em(t),!t){const i=this.Nf;i!==null&&i.uT(this)}}Hc(){if(this.ei.count>0){const t=this.diagram;if(t!==null){const i=t.commandHandler!==null?t.commandHandler.deletesConnectedLinks:!0,n=this.ei.copy().iterator;for(;n.next();){const s=n.value;i?t.remove(s):(s.fromNode===this&&(s.fromNode=null),s.toNode===this&&(s.toNode=null))}}}this.labeledLink=null,super.Hc()}get isLinkLabel(){return this.Nf!==null}get labeledLink(){return this.Nf}set labeledLink(t){const i=this.Nf;if(i!==t){const n=this.diagram,s=this.data;if(i!==null){if(i.uT(this),n!==null&&s!==null&&!n.undoManager.isUndoingRedoing){const r=i.data,A=n.model;if(r!==null&&A.Ea()){const o=A.getKeyForNodeData(s);o!==void 0&&A.removeLabelKeyForLinkData(r,o)}}this.containingGroup=null}if(this.Nf=t,t!==null){if(t.fT(this),n!==null&&s!==null&&!n.undoManager.isUndoingRedoing){const r=t.data,A=n.model;if(r!==null&&A.Ea()){const o=A.getKeyForNodeData(s);o!==void 0&&A.addLabelKeyForLinkData(r,o)}}this.containingGroup=t.containingGroup}this.rf(),this.t("labeledLink",i,t)}}findVisiblePort(t){let i=t;for(;i!==null&&(!i.actualBounds.isReal()||!i.isVisibleObject());)i=i.panel;return i===null?this.port:i}findPort(t){if(this.le===null){if(t===""&&this.bn===!1)return this;this.dT()}let i=this.le.get(t);return i!==null||t!==""&&(i=this.le.get(""),i!==null)?i:this}get port(){return this.findPort("")}get ports(){return this.le===null&&this.dT(),this.le.iteratorValues}dT(){this.le===null?this.le=new xt:this.le.clear(),this.walkVisualTreeFrom(this,(t,i)=>t.kA(i)),this.le.count===0&&this.le.set("",this)}kA(t){const i=t.portId;i!==null&&this.le!==null&&this.le.set(i,t)}p2(t,i){const n=t.portId;if(n!==null){this.le!==null&&this.le.delete(n);const s=this.diagram;if(s!==null&&i){let r=null;const A=this.findLinksConnected(n);for(;A.next();){const o=A.value;r===null&&(r=u.ht()),r.push(o)}if(r!==null){for(let o=0;o<r.length;o++){const a=r[o];s.remove(a)}u.et(r)}}}}isInTreeOf(t){if(t===null||t===this)return!1;let i=!0;const n=this.diagram;n!==null&&(i=n.isTreePathToChildren);let s=this;const r=t;let A;if(i)for(;s!==r;){A=null;const o=s.ei.iterator;for(;o.next();){const a=o.value;if(a.isTreeLink&&(A=a.fromNode,A!==s&&A!==this))break}if(A===this||A===null||A===s)return!1;s=A}else for(;s!==r;){A=null;const o=s.ei.iterator;for(;o.next();){const a=o.value;if(a.isTreeLink&&(A=a.toNode,A!==s&&A!==this))break}if(A===this||A===null||A===s)return!1;s=A}return!0}findTreeRoot(){let t=!0;const i=this.diagram;i!==null&&(t=i.isTreePathToChildren);let n=this,s;if(t)for(;;){s=null;const r=n.ei.iterator;for(;r.next();){const A=r.value;if(A.isTreeLink&&(s=A.fromNode,s!==n&&s!==this))break}if(s===this)return this;if(s===null||s===n)return n;n=s}else for(;;){s=null;const r=n.ei.iterator;for(;r.next();){const A=r.value;if(A.isTreeLink&&(s=A.toNode,s!==n&&s!==this))break}if(s===this)return this;if(s===null||s===n)return n;n=s}}findCommonTreeParent(t){if(t===null)return null;if(this===t)return this;let i=this;for(;i!==null;)i.a1(!0),i=i.findTreeParentNode();let n=null;for(i=t;i!==null;){if(i.rT()){n=i;break}i=i.findTreeParentNode()}for(i=this;i!==null;)i.a1(!1),i=i.findTreeParentNode();return n}findTreeParentLink(){let t=!0;const i=this.diagram;i!==null&&(t=i.isTreePathToChildren);const n=this.ei.iterator;if(t)for(;n.next();){const s=n.value;if(s.isTreeLink&&s.fromNode!==this)return s}else for(;n.next();){const s=n.value;if(s.isTreeLink&&s.toNode!==this)return s}return null}findTreeParentNode(){const t=this.Nh;if(t===null)return null;if(t instanceof Yn)return t;const i=this.diagram,n=i!==null?i.isTreePathToChildren:!0,s=this.ei.iterator;for(;s.next();){const r=s.value;if(!r.isTreeLink)continue;const A=n?r.fromNode:r.toNode;if(A!==this)return this.Nh=A,A}return this.Nh=null,null}findTreeParentChain(){function t(n,s){s.add(n);const r=n.findTreeParentLink();if(r!==null){s.add(r);const A=n.findTreeParentNode();if(A===null)return;t(A,s)}}const i=new X;return t(this,i),i}findTreeLevel(){return this.tO(this)}tO(t){let i=0,n=t.findTreeParentNode();for(;n!==null&&n!==t;)n=n.findTreeParentNode(),i++;return i}findTreeChildrenLinks(){let t=!0;const i=this.diagram;i!==null&&(t=i.isTreePathToChildren);const n=new I(this.ei),s=this;return t?n.predicate=r=>!(!r.isTreeLink||r.fromNode!==s):n.predicate=r=>!(!r.isTreeLink||r.toNode!==s),n}findTreeChildrenNodes(){let t=!0;const i=this.diagram;i!==null&&(t=i.isTreePathToChildren);let n=null,s=null;const r=this.ei.iterator;if(t)for(;r.next();){const A=r.value;if(A.isTreeLink&&A.fromNode===this){const o=A.toNode;n!==null?n.add(o):s!==null&&s!==o?(n=new H,n.add(s),n.add(o)):s=o}}else for(;r.next();){const A=r.value;if(A.isTreeLink&&A.toNode===this){const o=A.fromNode;n!==null?n.add(o):s!==null&&s!==o?(n=new H,n.add(s),n.add(o)):s=o}}return n!==null?n.iterator:s!==null?new N(s):P.instance}findTreeParts(t){t===void 0&&(t=1/0),u.s(t,"number",Yn,"findTreeParts:level");const i=new X;return Ce.fh(i,this,!1,t,!0),i}collapseTree(t){t===void 0&&(t=1),t<1&&(t=1);const i=this.diagram;if(i===null||i.isCollapsingExpanding)return;i.isCollapsingExpanding=!0;const n=new X;n.add(this),this.gT(n,i.isTreePathToChildren,t,i,this,i.treeCollapsePolicy===1),i.isCollapsingExpanding=!1}gT(t,i,n,s,r,A){if(n>1){const o=i?this.findLinksOutOf():this.findLinksInto();for(;o.next();){const a=o.value;if(!a.isTreeLink)continue;const h=a.getOtherNode(this);h!==null&&h!==this&&!t.has(h)&&(t.add(h),h.gT(t,i,n-1,s,r,A))}}else this.mT(t,i,s,r,A)}mT(t,i,n,s,r){const A=s===this?!0:this.isTreeExpanded,o=i?this.findLinksOutOf():this.findLinksInto();for(;o.next();){const a=o.value;if(!a.isTreeLink)continue;const h=a.getOtherNode(this);if(h!==null&&h!==this){const d=t.has(h);if(d||t.add(h),A){const f=i?h.findNodesInto():h.findNodesOutOf(),g=this;f.all(x=>x===g||!x.isTreeExpanded)&&n.Dc(h,s),h.wh(),h.Vi(!1)}h.isTreeExpanded&&(h.wasTreeExpanded=h.isTreeExpanded,d||h.mT(t,i,n,s,r))}}this.isTreeExpanded=!1}expandTree(t){t===void 0&&(t=2),t<2&&(t=2);const i=this.diagram;if(i===null||i.isCollapsingExpanding)return;i.isCollapsingExpanding=!0;const n=new X;n.add(this),this.pT(n,i.isTreePathToChildren,t,i,this,i.treeCollapsePolicy===1),i.isCollapsingExpanding=!1}pT(t,i,n,s,r,A){const o=r===this?!1:this.isTreeExpanded,a=i?this.findLinksOutOf():this.findLinksInto();for(;a.next();){const h=a.value;if(!h.isTreeLink)continue;o||h.Le||h.invalidateRoute();const d=h.getOtherNode(this);if(d!==null&&d!==this&&!t.has(d)){if(t.add(d),!o){d.Vi(!0),d.wh();const f=i?d.findNodesInto():d.findNodesOutOf(),g=this;f.all(x=>x===g||!x.isTreeExpanded)&&s.Tc(d,r)}(n>2||d.wasTreeExpanded)&&(d.wasTreeExpanded=!1,d.pT(t,i,n-1,s,r,A))}}this.isTreeExpanded=!0}get isTreeExpanded(){return(this.B&1)!==0}set isTreeExpanded(t){const i=(this.B&1)!==0;if(i!==t){this.B=this.B^1;const n=this.diagram;this.t("isTreeExpanded",i,t);const s=this.treeExpandedChanged;if(s!==null){let r=!0;n!==null&&(r=n.G,n.G=!0),s(this),n!==null&&(n.G=r)}if(n!==null&&n.undoManager.isUndoingRedoing){this.Vi(t);return}t?this.expandTree():this.collapseTree()}}get wasTreeExpanded(){return(this.B&2)!==0}set wasTreeExpanded(t){const i=(this.B&2)!==0;i!==t&&(this.B=this.B^2,this.t("wasTreeExpanded",i,t))}get treeExpandedChanged(){return this.yt!==null?this.yt.cy:null}set treeExpandedChanged(t){const i=this.treeExpandedChanged;i!==t&&(t!==null&&u.C(t,Yn,"treeExpandedChanged"),this.pl(),this.yt.cy=t,this.t("treeExpandedChanged",i,t))}get isTreeLeaf(){return(this.B&4)!==0}set isTreeLeaf(t){const i=(this.B&4)!==0;i!==t&&(this.B=this.B^4,this.t("isTreeLeaf",i,t))}get isTreeRoot(){return this.findTreeParentLink()===null}};p(Yn,"SpreadingNone",0),p(Yn,"SpreadingEvenly",1),p(Yn,"SpreadingPacked",2);let Et=Yn;class NA{constructor(){p(this,"gi");p(this,"hy");p(this,"ay");p(this,"Fl");p(this,"cy");p(this,"ly");p(this,"ry");p(this,"fy");p(this,"uy");p(this,"ch");p(this,"gy");this.gi=!1,this.hy=null,this.ay=null,this.Fl=null,this.cy=null,this.ly=Rt.pC,this.ry=1,this.fy=null,this.uy=null,this.ch=null,this.gy=null}copy(){const e=new NA;return e.hy=this.hy,e.ay=this.ay,e.Fl=this.Fl,e.cy=this.cy,e.ly=this.ly.N(),e.ry=this.ry,e.fy=this.fy,e.uy=this.uy,e.ch=this.ch,e.gy=this.gy,e}}var $r=(k=>(k[k.None=0]="None",k[k.End=17]="End",k[k.Scale=18]="Scale",k[k.Stretch=19]="Stretch",k))($r||{}),EA=(k=>(k[k.Normal=1]="Normal",k[k.Orthogonal=2]="Orthogonal",k[k.AvoidsNodes=6]="AvoidsNodes",k[k.AvoidsNodesStraight=7]="AvoidsNodesStraight",k))(EA||{}),TA=(k=>(k[k.None=0]="None",k[k.Bezier=9]="Bezier",k[k.JumpGap=10]="JumpGap",k[k.JumpOver=11]="JumpOver",k))(TA||{});const $t=class $t extends Ce{constructor(t){super(Kt.Link);p(this,"Lt");p(this,"fo");p(this,"uo");p(this,"Ad");p(this,"go");p(this,"mo");p(this,"Td");p(this,"Cf");p(this,"Dd");p(this,"Fd");p(this,"Rd");p(this,"Ba");p(this,"vd");p(this,"$s");p(this,"Pi");p(this,"yl");p(this,"Tr");p(this,"Lf");p(this,"_o");p(this,"iN");p(this,"eN");p(this,"d1");p(this,"sN");p(this,"nN");p(this,"my");p(this,"g1");p(this,"ft");p(this,"tr");p(this,"uf");p(this,"oN");p(this,"rN");this.Lt=8,this.fo=null,this.uo="",this.Ad=null,this.go=null,this.mo="",this.Td=null,this.Cf=0,this.Dd=0,this.Fd=0,this.Rd=NaN,this.Ba=1,this.vd=.5,this.$s=null,this.Pi=new H().g(),this.yl=null,this.Tr=null,this.Lf=new it,this.ft=new Jt,this._o=null,this.tr=null,this.iN=null,this.eN=null,this.oN=0,this.rN=0,this.d1=new T,this.sN=null,this.nN=null,this.my=null,this.g1=NaN,this.J=null,this.uf=[],t&&Object.assign(this,t)}cloneProtected(t){super.cloneProtected(t),t.Lt=this.Lt&-113,t.uo=this.uo,t.Ad=this.Ad,t.mo=this.mo,t.Td=this.Td,t.Cf=this.Cf,t.Dd=this.Dd,t.Fd=this.Fd,t.Rd=this.Rd,t.Ba=this.Ba,t.vd=this.vd,this.J!==null&&(t.J=this.J.copy())}Xo(t){super.Xo(t),this.uo=t.uo,this.mo=t.mo,t.yl=null,t.invalidateRoute(),t.tr=this.tr;const i=t.fromPort;i!==null&&t.fromNode.$i(i);const n=t.toPort;n!==null&&t.toNode.$i(n)}li(t){t in EA||t in TA||t in $r?$t.lN(t)?this.routing=t:t===9||t===10||t===11?this.curve=t:t===17||t===18||t===19?this.adjusting=t:t===1||t===0||u.o("Unknown Link enum value for a Link property: "+t):super.li(t)}Xe(){this.J===null&&(this.J=new Xn)}dv(t,i,n){const s=t.segmentIndex,r=t.segmentFraction;let A=t.alignmentFocus;const o=t.segmentOrientation,a=t.segmentOffset;let h=0,d=0,f=0,g=0;if(isNaN(s)){const R=this.ft,G=u.ht();R.getPointAndAngleAlongPath(r,G);const W=T.Y(G[0],G[1]);if(W.add(this.getPoint(0)),R.type===1)W.offset(-R.startX,-R.startY);else{const Y=R.figures.first();W.offset(-Y.startX,-Y.startY)}g=G[2],o!==0&&(f=this.computeAngle(t,o,g),t.angle=f),h=W.x,d=W.y,T.e(W),u.et(G)}else if(s<-i||s>=i){const R=T.l();this.AA(R),g=this.midAngle,o!==0&&(f=this.computeAngle(t,o,g),t.angle=f),h=R.x,d=R.y,T.e(R)}else{let R,G,W=0;if(s>=0?(R=n.r[s],G=s<i-1?n.r[s+1]:R):(W=i+s,R=n.r[W],G=W>0?n.r[W-1]:R),R.equalsApprox(G)){let Y,Z;s>=0?(Y=s>0?n.r[s-1]:R,Z=s<i-2?n.r[s+2]:G):(Y=W<i-1?n.r[W+1]:R,Z=W>1?n.r[W-2]:G);const et=Y.distanceSquaredPoint(R),At=G.distanceSquaredPoint(Z);et>At+10?g=s>=0?Y.directionPoint(R):R.directionPoint(Y):At>et+10?g=s>=0?G.directionPoint(Z):Z.directionPoint(G):g=s>=0?Y.directionPoint(Z):Z.directionPoint(Y)}else g=s>=0?R.directionPoint(G):G.directionPoint(R);o!==0&&(f=this.computeAngle(t,o,g),t.angle=f),h=R.x+(G.x-R.x)*r,d=R.y+(G.y-R.y)*r}if(A.isNone()){t.location=new T(h,d);return}else A.isNoSpot()&&(A=q.Center);const x=Bt.l();x.Ii(),x.rt(t.scale,t.scale),x.ds(t.angle,0,0);const B=t.naturalBounds,C=it.Y(0,0,B.width,B.height),F=T.l();F.setRectSpot(C,A),x.bt(F);let b=-F.x,L=-F.y;const Q=B.width,M=B.height,O=T.l();O.a(a);const D=isNaN(a.x),K=isNaN(a.y);if(D||K){const R=Q/2+3,G=M/2+3,W=g>=45&&g<=135,Y=g>=225&&g<=315;o===0&&(W||Y)?(O.x=K?R:a.y,O.y=D?G:a.x,W?s>=0||isNaN(s)&&r<.5||D&&(O.y=-G):Y&&((s>=0||isNaN(s)&&r<.5)&&D&&(O.y=-G),K&&(O.x=-R))):(D&&(s>=0||isNaN(s)&&r<.5?O.x=R:O.x=-R),K&&(O.y=-G),O.rotate(g))}else O.rotate(g);h+=O.x,d+=O.y,x.Eg(C),b+=C.x,L+=C.y;const J=T.Y(h+b,d+L);t.move(J),T.e(J),T.e(O),T.e(F),it.e(C),Bt.e(x)}Zr(){let t=this.fromNode;if(t!==null){const n=t.findVisibleNode();if(n!==null&&(t=n),t.es()||t.hh())return!1}let i=this.toNode;if(i!==null){const n=i.findVisibleNode();if(n!==null&&(i=n),i.es()||i.hh())return!1}return!0}g2(t,i,n){return!1}m2(){}Ne(){return!1}computeAngle(t,i,n){return $t.computeAngle(i,n)}static computeAngle(t,i){let n=0;switch(t){default:case 0:n=0;break;case 21:n=i;break;case 22:n=i+90;break;case 23:n=i-90;break;case 24:n=i+180;break;case 25:n=V.zg(i),n>90&&n<270&&(n-=180);break;case 26:n=V.zg(i+90),n>90&&n<270&&(n-=180);break;case 27:n=V.zg(i-90),n>90&&n<270&&(n-=180);break;case 28:if(n=V.zg(i),n>45&&n<135||n>225&&n<315)return 0;n>90&&n<270&&(n-=180);break}return V.zg(n)}get fromNode(){return this.fo}set fromNode(t){const i=this.fo;if(i!==t){const n=this.fromPort;i!==null&&(this.go!==i&&i.u1(this,n),this.py(),this.invalidateLayout(2)),this.fo=t,t!==null&&this.Vi(t.isVisible()),this._o=null,this.invalidateRoute();const s=this.diagram;s!==null&&s.G&&s.partManager.setFromNodeForLink(this,t,i);const r=this.fromPort,A=this.fromPortChanged;if(A!==null){let o=!0;s!==null&&(o=s.G,s.G=!0),A(this,n,r),s!==null&&(s.G=o)}t!==null&&(this.go!==t&&t.f1(this,r),this.yy(),this.invalidateLayout(1)),this.t("fromNode",i,t),this.Cd()}}get fromPortId(){return this.uo}set fromPortId(t){const i=this.uo;if(i!==t){const n=this.fromPort;n!==null&&this.fromNode.$i(n),this.py(),this.uo=t;const s=this.fromPort;s!==null&&this.fromNode.$i(s);const r=this.diagram;if(r!==null){const A=this.data,o=r.model;A!==null&&o.Ea()&&o.setFromPortIdForLinkData(A,t)}if(n!==s){this._o=null,this.invalidateRoute();const A=this.fromPortChanged;if(A!==null){let o=!0;r!==null&&(o=r.G,r.G=!0),A(this,n,s),r!==null&&(r.G=o)}}this.yy(),this.t("fromPortId",i,t)}}get fromPort(){const t=this.fo;if(t===null)return null;const i=this.uo;return t.findPort(i)}get fromPortChanged(){return this.Ad}set fromPortChanged(t){const i=this.Ad;i!==t&&(t!==null&&u.C(t,$t,"fromPortChanged"),this.Ad=t,this.t("fromPortChanged",i,t))}get toNode(){return this.go}set toNode(t){const i=this.go;if(i!==t){const n=this.toPort;i!==null&&(this.fo!==i&&i.u1(this,n),this.py(),this.invalidateLayout(2)),this.go=t,t!==null&&this.Vi(t.isVisible()),this._o=null,this.invalidateRoute();const s=this.diagram;s!==null&&s.G&&s.partManager.setToNodeForLink(this,t,i);const r=this.toPort,A=this.toPortChanged;if(A!==null){let o=!0;s!==null&&(o=s.G,s.G=!0),A(this,n,r),s!==null&&(s.G=o)}t!==null&&(this.fo!==t&&t.f1(this,r),this.yy(),this.invalidateLayout(1)),this.t("toNode",i,t),this.Cd()}}get toPortId(){return this.mo}set toPortId(t){const i=this.mo;if(i!==t){const n=this.toPort;n!==null&&this.toNode.$i(n),this.py(),this.mo=t;const s=this.toPort;s!==null&&this.toNode.$i(s);const r=this.diagram;if(r!==null){const A=this.data,o=r.model;A!==null&&o.Ea()&&o.setToPortIdForLinkData(A,t)}if(n!==s){this._o=null,this.invalidateRoute();const A=this.toPortChanged;if(A!==null){let o=!0;r!==null&&(o=r.G,r.G=!0),A(this,n,s),r!==null&&(r.G=o)}}this.yy(),this.t("toPortId",i,t)}}get toPort(){const t=this.go;if(t===null)return null;const i=this.mo;return t.findPort(i)}get toPortChanged(){return this.Td}set toPortChanged(t){const i=this.Td;i!==t&&(t!==null&&u.C(t,$t,"toPortChanged"),this.Td=t,this.t("toPortChanged",i,t))}get fromSpot(){return this.J!==null?this.J.wa:q.Default}set fromSpot(t){const i=this.fromSpot;if(!i.equals(t)){if(t=t.N(),this.Xe(),this.J.wa=t,this.t("fromSpot",i,t),i.isSide()||t.isSide()){const n=this.fromNode;n!==null&&n.$i(this.fromPort)}this.invalidateRoute()}}get fromEndSegmentLength(){return this.J!==null?this.J.ba:NaN}set fromEndSegmentLength(t){const i=this.fromEndSegmentLength;if(i!==t){if(t<0&&u.it(t,">= 0",$t,"fromEndSegmentLength"),this.Xe(),this.J.ba=t,this.t("fromEndSegmentLength",i,t),this.computeSpot(!0,this.fromPort).isSide()){const n=this.fromNode;n!==null&&n.$i(this.fromPort)}this.invalidateRoute()}}get fromShortLength(){return this.J!==null?this.J.Pa:NaN}set fromShortLength(t){const i=this.fromShortLength;i!==t&&(this.Xe(),this.J.Pa=t,this.oe(),this.t("fromShortLength",i,t))}get toSpot(){return this.J!==null?this.J.xa:q.Default}set toSpot(t){const i=this.toSpot;if(!i.equals(t)){if(t=t.N(),this.Xe(),this.J.xa=t,this.t("toSpot",i,t),i.isSide()||t.isSide()){const n=this.toNode;n!==null&&n.$i(this.toPort)}this.invalidateRoute()}}get toEndSegmentLength(){return this.J!==null?this.J.ka:NaN}set toEndSegmentLength(t){const i=this.toEndSegmentLength;if(i!==t){if(t<0&&u.it(t,">= 0",$t,"toEndSegmentLength"),this.Xe(),this.J.ka=t,this.t("toEndSegmentLength",i,t),this.computeSpot(!1,this.toPort).isSide()){const n=this.toNode;n!==null&&n.$i(this.toPort)}this.invalidateRoute()}}get toShortLength(){return this.J!==null?this.J.Sa:NaN}set toShortLength(t){const i=this.toShortLength;i!==t&&(this.Xe(),this.J.Sa=t,this.oe(),this.t("toShortLength",i,t))}Cd(){const t=this.fromNode,i=this.toNode;let n=null;if(t!==null?i!==null?n=t.findCommonContainingGroup(i):n=t.containingGroup:i!==null?n=i.containingGroup:n=null,this.nO(n),this.isLabeledLink){const s=this.labelNodes;for(;s.next();){const r=s.value;r.containingGroup=n}}}nO(t){const i=this.Mh;if(i!==t){i!==null&&i.W2(this),this.Mh=t,t!==null&&t.J2(this);const n=this.containingGroupChanged;if(n!==null){let s=!0;const r=this.diagram;r!==null&&(s=r.G,r.G=!0),n(this,i,t),r!==null&&(r.G=s)}this.Le&&(this.sN===i||this.nN===i)&&this.invalidateRoute()}}wh(){const t=this.containingGroup;t!==null&&this.fromNode!==t&&this.toNode!==t&&t.computesBoundsIncludingLinks&&super.wh()}getOtherNode(t){const i=this.fromNode;return t===i?this.toNode:i}getOtherPort(t){const i=this.fromPort;return t===i?this.toPort:i}get isLabeledLink(){return this.$s===null?!1:this.$s.count>0}get labelNodes(){return this.$s===null?P.instance:this.$s.iterator}fT(t){this.$s===null&&(this.$s=new X),this.$s.add(t),this.c()}uT(t){this.$s!==null&&(this.$s.delete(t),this.c())}Im(t){if(super.Im(t),this.Xa()&&this.invalidateOtherJumpOvers(this.actualBounds),!t){const i=this.fo;let n=null;i!==null&&(n=this.fromPort,i.f1(this,n));const s=this.go;let r=null;s!==null&&(r=this.toPort,(s!==i||r!==n)&&s.f1(this,r)),this.yy()}}Em(t){if(super.Em(t),this.Xa()&&this.invalidateOtherJumpOvers(this.actualBounds),!t){const i=this.fo;let n=null;i!==null&&(n=this.fromPort,i.u1(this,n));const s=this.go;let r=null;s!==null&&(r=this.toPort,(s!==i||r!==n)&&s.u1(this,r)),this.py()}}Hc(){if(this.Le=!0,this.$s!==null){const t=this.diagram;if(t!==null){const i=this.$s.copy().iterator;for(;i.next();){const n=i.value;t.remove(n)}}}if(this.data!==null){const t=this.diagram;t!==null&&t.partManager.hN(this)}}updateRelationshipsFromData(){if(this.data===null)return;const t=this.diagram;t!==null&&t.partManager.updateRelationshipsFromData(this)}move(t,i){const n=i?this.location:this.position;let s=n.x;isNaN(s)&&(s=0);let r=n.y;isNaN(r)&&(r=0);const A=t.x-s,o=t.y-r;if(i===!0)super.move(t,!1);else{const h=T.Y(n.x+A,n.y+o);super.move(h,!1),T.e(h)}this.kr(A,o);const a=this.labelNodes;for(;a.next();){const h=a.value,d=h.position;h.moveTo(d.x+A,d.y+o)}}get relinkableFrom(){return(this.Lt&1)!==0}set relinkableFrom(t){const i=(this.Lt&1)!==0;i!==t&&(this.Lt=this.Lt^1,this.t("relinkableFrom",i,t),this.invalidateAdornments())}get relinkableTo(){return(this.Lt&2)!==0}set relinkableTo(t){const i=(this.Lt&2)!==0;i!==t&&(this.Lt=this.Lt^2,this.t("relinkableTo",i,t),this.invalidateAdornments())}canRelinkFrom(){if(!this.relinkableFrom)return!1;const t=this.layer;if(t===null)return!0;if(!t.allowRelink)return!1;const i=t.diagram;return!(i!==null&&!i.allowRelink)}canRelinkTo(){if(!this.relinkableTo)return!1;const t=this.layer;if(t===null)return!0;if(!t.allowRelink)return!1;const i=t.diagram;return!(i!==null&&!i.allowRelink)}get resegmentable(){return(this.Lt&4)!==0}set resegmentable(t){const i=(this.Lt&4)!==0;i!==t&&(this.Lt=this.Lt^4,this.t("resegmentable",i,t),this.invalidateAdornments())}get isTreeLink(){return(this.Lt&8)!==0}set isTreeLink(t){const i=(this.Lt&8)!==0;i!==t&&(this.Lt=this.Lt^8,this.t("isTreeLink",i,t),this.fromNode!==null&&this.fromNode.a0(),this.toNode!==null&&this.toNode.a0())}get path(){const t=this.findMainElement();return t instanceof Zt?t:null}get routeBounds(){return this.updateRoute(),this.oO(this.Lf)}oO(t){let i=1/0,n=1/0;const s=this.pointsCount;if(s===0)return t.i(NaN,NaN,0,0),t;if(s===1){const r=this.getPoint(0);i=Math.min(r.x,i),n=Math.min(r.y,n),t.i(r.x,r.y,0,0)}else if(s===2){const r=this.getPoint(0),A=this.getPoint(1);i=Math.min(r.x,A.x),n=Math.min(r.y,A.y),t.i(r.x,r.y,0,0),t.unionPoint(A)}else if(this.computeCurve()===9&&s>=3&&!this.isOrthogonal){let r=this.getPoint(0);if(i=r.x,n=r.y,t.i(i,n,0,0),s===3){const A=this.getPoint(1);i=Math.min(A.x,i),n=Math.min(A.y,n);const o=this.getPoint(2);i=Math.min(o.x,i),n=Math.min(o.y,n),V.cu(r.x,r.y,A.x,A.y,A.x,A.y,o.x,o.y,.5,t)}else for(let A=3;A<s;A+=3){const o=this.getPoint(A-2);A+3>=s&&(A=s-1);const a=this.getPoint(A-1),h=this.getPoint(A);V.cu(r.x,r.y,o.x,o.y,a.x,a.y,h.x,h.y,.5,t),i=Math.min(h.x,i),n=Math.min(h.y,n),r=h}}else{const r=this.getPoint(0),A=this.getPoint(1);i=Math.min(r.x,A.x),n=Math.min(r.y,A.y),t.i(r.x,r.y,0,0),t.unionPoint(A);for(let o=2;o<s;o++){const a=this.getPoint(o);i=Math.min(a.x,i),n=Math.min(a.y,n),t.unionPoint(a)}}return this.d1.i(i-t.x,n-t.y),t}get midPoint(){return this.updateRoute(),this.computeMidPoint(new T)}AA(t){return this.updateRoute(),this.computeMidPoint(t)}computeMidPoint(t){const i=this.pointsCount;if(i===0)return t.a(T.Tk),t;if(i===1)return t.a(this.getPoint(0)),t;if(i===2){const d=this.getPoint(0),f=this.getPoint(1);return t.i((d.x+f.x)/2,(d.y+f.y)/2),t}if(this.isOrthogonal&&(this.computeCorner()>=15||this.computeCurve()===9)){this.ft.getPointAlongPath(.5,t),t.add(this.getPoint(0));const d=this.ft.figures.first();return t.offset(-d.startX,-d.startY),t}if(this.computeCurve()===9){if(i===3){const g=this.getPoint(0),x=this.getPoint(1),B=this.getPoint(2);return V.PC(g.x,g.y,x.x,x.y,x.x,x.y,B.x,B.y,t),t}const d=(i-1)/3|0,f=(d/2|0)*3;if(d%2===1){const g=this.getPoint(f),x=this.getPoint(f+1),B=this.getPoint(f+2),C=this.getPoint(f+3);return V.PC(g.x,g.y,x.x,x.y,B.x,B.y,C.x,C.y,t),t}else return t.a(this.getPoint(f)),t}const n=this.flattenedLengths,s=this.flattenedTotalLength;let r=0,A=0,o=0;for(;r<s/2&&A<i&&(o=n[A],!(r+o>s/2));)r+=o,A++;const a=this.getPoint(A),h=this.getPoint(A+1);if(Math.abs(a.x-h.x)<1)a.y>h.y?t.i(a.x,a.y-(s/2-r)):t.i(a.x,a.y+(s/2-r));else if(Math.abs(a.y-h.y)<1)a.x>h.x?t.i(a.x-(s/2-r),a.y):t.i(a.x+(s/2-r),a.y);else{const d=(s/2-r)/o,f=d*(h.x-a.x),g=d*(h.y-a.y);t.i(a.x+f,a.y+g)}return t}get midAngle(){return this.updateRoute(),this.computeMidAngle()}computeMidAngle(){const t=this.pointsCount;if(t<2)return NaN;if(t===2){const h=this.getPoint(0),d=this.getPoint(1);return h.directionPoint(d)}if(this.isOrthogonal&&(this.computeCorner()>=15||this.computeCurve()===9))return this.ft.getAngleAlongPath(.5);if(this.computeCurve()===9&&t>=4){const h=(t-1)/3|0;let d=(h/2|0)*3;if(h%2===1){d=Math.floor(d);const f=this.getPoint(d),g=this.getPoint(d+1),x=this.getPoint(d+2),B=this.getPoint(d+3);return V.jD(f.x,f.y,g.x,g.y,x.x,x.y,B.x,B.y)}else if(d>0&&d+1<t){const f=this.getPoint(d-1),g=this.getPoint(d+1);return f.directionPoint(g)}}const i=this.flattenedLengths,n=this.flattenedTotalLength;let s=0,r=0,A=0;for(;s<n/2&&r<t&&(A=i[r],!(s+A>n/2));)s+=A,r++;const o=this.getPoint(r),a=this.getPoint(r+1);if(Math.abs(o.x-a.x)<1&&Math.abs(o.y-a.y)<1){if(r>0&&r+2<t){const h=this.getPoint(r-1),d=this.getPoint(r+2);return h.directionPoint(d)}}else{if(Math.abs(o.x-a.x)<1)return o.y>a.y?270:90;if(Math.abs(o.y-a.y)<1)return o.x>a.x?180:0}return o.directionPoint(a)}rO(){if(this.my===null){this.Le||this.m1();const t=this.my=[];this.lO(t)}}get flattenedLengths(){return this.rO(),this.my}get flattenedTotalLength(){let t=this.g1;if(isNaN(t)){const i=this.flattenedLengths,n=i.length;t=0;for(let s=0;s<n;s++)t+=i[s];this.g1=t}return t}lO(t){const i=this.pointsCount;for(let n=0;n<i-1;n++){let s=0;const r=this.getPoint(n),A=this.getPoint(n+1);V.K(r.x,A.x)?(s=A.y-r.y,s<0&&(s=-s),t.push(s)):V.K(r.y,A.y)?(s=A.x-r.x,s<0&&(s=-s),t.push(s)):(s=Math.sqrt(r.distanceSquaredPoint(A)),t.push(s))}}get points(){return this.Pi}set points(t){const i=this.Pi;if(i===t)return;let n=null;if(Array.isArray(t)){const r=t;let A=r.length%2===0;if(A){for(let o=0;o<r.length;o++)if(typeof r[o]!="number"||isNaN(r[o])){A=!1;break}}if(A){n=new H;for(let o=0;o<r.length/2;o++){const a=new T(r[o*2],r[o*2+1]).g();n.add(a)}}else{let o=!0;for(let a=0;a<r.length;a++){const h=r[a];if(!u.j(h)||typeof h.x!="number"||isNaN(h.x)||typeof h.y!="number"||isNaN(h.y)){o=!1;break}}if(o){n=new H;for(let a=0;a<r.length;a++){const h=r[a];n.add(new T(h.x,h.y).g())}}}}else if(t instanceof H){n=t.copy();const r=n.iterator;for(;r.next();)r.value.g()}else u.o("Link.points value is not an instance of List or Array: "+t);n.g(),this.Pi=n,this.oe(),this.m1();const s=this.diagram;s!==null&&(!s.Gh&&!s.undoManager.isUndoingRedoing&&s.gx.add(this),s.animationManager.xi&&s.animationManager.FS(this,n)),this.t("points",i,n)}get pointsCount(){return this.Pi.count}getPoint(t){return this.Pi.r[t]}setPoint(t,i){this.Pi.setElt(t,i)}setPointAt(t,i,n){this.Pi.setElt(t,new T(i,n))}insertPoint(t,i){this.Pi.insertAt(t,i)}insertPointAt(t,i,n){this.Pi.insertAt(t,new T(i,n))}addPoint(t){this.Pi.add(t)}addPointAt(t,i){this.Pi.add(new T(t,i))}removePoint(t){this.Pi.removeAt(t)}clearPoints(){this.Pi.clear()}kr(t,i){if(t===0&&i===0)return;if(this.pointsCount===0){this.defaultFromPoint&&this.defaultFromPoint.offset(t,i),this.defaultToPoint&&this.defaultToPoint.offset(t,i);return}const n=this.Le,s=new H,r=this.Pi.iterator;for(;r.next();){const a=r.value;s.add(new T(a.x+t,a.y+i).g())}s.g();const A=this.Pi;this.Pi=s;const o=this.diagram;isNaN(t)||isNaN(i)||o!==null&&o.animationManager.xi?this.c():(this.Js.i(this.Js.x+t,this.Js.y+i),this.gt.i(this.gt.x+t,this.gt.y+i),this.rf()),n?this.m1():(this.defaultFromPoint&&(this.defaultFromPoint=this.getPoint(0)),this.defaultToPoint&&(this.defaultToPoint=this.getPoint(this.pointsCount-1))),o!==null&&o.animationManager.xi&&o.animationManager.FS(this,s),this.t("points",A,s)}startRoute(){this.yl===null&&(this.yl=this.Pi,this.Pi=this.Pi.copy())}commitRoute(){if(this.yl===null)return;const t=this.yl,i=this.Pi;let n=1/0,s=1/0;const r=t.r,A=r.length;for(let g=0;g<A;g++){const x=r[g];n=Math.min(x.x,n),s=Math.min(x.y,s)}let o=1/0,a=1/0;const h=i.r,d=h.length;for(let g=0;g<d;g++){const x=h[g];o=Math.min(x.x,o),a=Math.min(x.y,a),x.g()}if(i.g(),d===A)for(let g=0;g<d;g++){const x=r[g],B=h[g];if(x.x-n!==B.x-o||x.y-s!==B.y-a){this.oe();break}}else this.oe();this.yl=null;const f=this.diagram;f!==null&&f.animationManager.xi&&f.animationManager.FS(this,i),this.m1(),this.t("points",t,i)}rollbackRoute(){this.yl!==null&&(this.Pi=this.yl,this.yl=null)}FF(){this.Tr!==null&&(this.points=this.Tr,this.Tr=null)}m1(){if(this.Pi.count===0){this.Le=!1;return}this.Le=!0,this.my=null,this.g1=NaN,this.defaultFromPoint=this.getPoint(0),this.defaultToPoint=this.getPoint(this.pointsCount-1),this.p1(!1)}invalidateRoute(){if(this.suspendsRouting)return;const t=this.path;if(t===null)return;const i=this.diagram;if(i){if(i.gx.has(this)||i.undoManager.isUndoingRedoing)return;const n=i.animationManager;if(n.isTicking&&!n.isAnimating)return;this.Tr!==null&&!n.isTicking&&(this.Tr=null)}this.Le=!1,this.c(),t.c()}get Le(){return(this.Lt&16)!==0}set Le(t){(this.Lt&16)!==0!==t&&(this.Lt=this.Lt^16)}get suspendsRouting(){return(this.Lt&32)!==0}set suspendsRouting(t){(this.Lt&32)!==0!==t&&(this.Lt=this.Lt^32)}get wy(){return(this.Lt&64)!==0}set wy(t){(this.Lt&64)!==0!==t&&(this.Lt=this.Lt^64)}get aN(){return(this.Lt&512)!==0}set aN(t){(this.Lt&512)!==0!==t&&(this.Lt=this.Lt^512)}get defaultFromPoint(){return this.iN}set defaultFromPoint(t){this.iN=t.copy()}get defaultToPoint(){return this.eN}set defaultToPoint(t){this.eN=t.copy()}updateRoute(){if(this.Le||this.wy)return;let t=!0;try{this.wy=!0,this.startRoute(),t=this.computePoints()}catch{this.wy=!1,this.rollbackRoute()}finally{this.wy=!1,t?this.commitRoute():this.rollbackRoute()}}computePoints(){const t=this.diagram;if(t===null)return!1;let i=this.fromNode,n=null;if(i===null?($t.Ua||($t.Ua=new Et,$t.Ua.desiredSize=ct.hu,$t.Ua.ensureBounds()),this.defaultFromPoint&&($t.Ua.location=this.defaultFromPoint,$t.Ua.ensureBounds(),i=$t.Ua,n=$t.Ua)):n=this.fromPort,n!==null&&!i.isVisible()){const C=i.findVisibleNode();C!==null&&C!==i?(i=C,n=C.port):i=C}if(this.sN=i,i===null||!i.location.isReal()||(n=i.findVisiblePort(n),n===null))return!1;let s=this.toNode,r=null;if(s===null?($t.Va||($t.Va=new Et,$t.Va.desiredSize=ct.hu,$t.Va.ensureBounds()),this.defaultToPoint&&($t.Va.location=this.defaultToPoint,$t.Va.ensureBounds(),s=$t.Va,r=$t.Va)):r=this.toPort,r!==null&&!s.isVisible()){const C=s.findVisibleNode();C!==null&&C!==s?(s=C,r=C.port):s=C}if(this.nN=s,s===null||!s.location.isReal()||(r=s.findVisiblePort(r),r===null))return!1;const A=this.pointsCount,o=this.computeSpot(!0,n),a=this.computeSpot(!1,r),h=this.Od(o),d=this.Od(a),f=n===r&&n!==null,g=this.isOrthogonal;let x=this.curve===9;f&&!g?(x=!0,this._o=!0):this._o=!1;const B=this.computeAdjusting()===0||f;if(!g&&!f&&h&&d){let C=!1;if(!B&&A>=3){let F=this.getLinkPoint(i,n,o,!0,!1,s,r),b=this.getLinkPoint(s,r,a,!1,!1,i,n);C=this.adjustPoints(0,F,A-1,b),C&&(F=this.getLinkPoint(i,n,o,!0,!1,s,r),b=this.getLinkPoint(s,r,a,!1,!1,i,n),this.adjustPoints(0,F,A-1,b))}C||(this.clearPoints(),x?this.hO(i,n,o,s,r,a):this.aO(i,n,o,s,r,a))}else{const C=this.isAvoiding;B&&(g&&C||f)&&this.clearPoints();const F=f?this.computeCurviness():0,b=this.getLinkPoint(i,n,o,!0,g,s,r);let L=0,Q=0,M=0;if(g||!h||f){let W=this.computeEndSegmentLength(i,n,o,!0);if(M=this.getLinkDirection(i,n,b,o,!0,g,s,r),f&&(h||o.equals(a)||!g&&o.x+a.x===1&&o.y+a.y===1)&&(M-=g?90:30,F<0&&(M-=180)),M<0?M+=360:M>=360&&(M-=360),f&&(W+=Math.abs(F)*(g?1:2)),M===0?L=W:M===90?Q=W:M===180?L=-W:M===270?Q=-W:(L=W*Math.cos(M*Math.PI/180),Q=W*Math.sin(M*Math.PI/180)),o.isNoSpot()&&f){const Y=n.getDocumentPoint(q.Center,T.l()),Z=T.Y(Y.x+L*1e3,Y.y+Q*1e3);this.getLinkPointFromPoint(i,n,Y,Z,!0,b),T.e(Y),T.e(Z)}}const O=this.getLinkPoint(s,r,a,!1,g,i,n);let D=0,K=0,J=0;if(g||!d||f){let W=this.computeEndSegmentLength(s,r,a,!1);if(J=this.getLinkDirection(s,r,O,a,!1,g,i,n),f&&(d||o.equals(a)||!g&&o.x+a.x===1&&o.y+a.y===1)&&(J+=g?0:30,F<0&&(J+=180)),J<0?J+=360:J>=360&&(J-=360),f&&(W+=Math.abs(F)*(g?1:2)),J===0?D=W:J===90?K=W:J===180?D=-W:J===270?K=-W:(D=W*Math.cos(J*Math.PI/180),K=W*Math.sin(J*Math.PI/180)),a.isNoSpot()&&f){const Y=r.getDocumentPoint(q.Center,T.l()),Z=T.Y(Y.x+D*1e3,Y.y+K*1e3);this.getLinkPointFromPoint(s,r,Y,Z,!1,O),T.e(Y),T.e(Z)}}let R=b;(g||!h||f)&&(R=new T(b.x+L,b.y+Q));let G=O;(g||!d||f)&&(G=new T(O.x+D,O.y+K)),!B&&!g&&h&&A>3&&this.adjustPoints(0,b,A-2,G)?this.setPoint(A-1,O):!B&&!g&&d&&A>3&&this.adjustPoints(1,R,A-1,O)?this.setPoint(0,b):!B&&(g?A>=6:A>4)&&this.adjustPoints(1,R,A-2,G)?(this.setPoint(0,b),this.setPoint(A-1,O)):(this.clearPoints(),this.addPoint(b),(g||!h||f)&&this.addPoint(R),g&&this.addOrthoPoints(R,M,G,J,i,s),(g||!d||f)&&this.addPoint(G),this.addPoint(O))}return t.addInvalidRoute(this),!0}cN(t,i){return Math.abs(i.x-t.x)>Math.abs(i.y-t.y)?(i.x>=t.x?i.x=t.x+9e9:i.x=t.x-9e9,i.y=t.y):(i.y>=t.y?i.y=t.y+9e9:i.y=t.y-9e9,i.x=t.x),i}getLinkPointFromPoint(t,i,n,s,r,A){if(A===void 0&&(A=new T),t===null||i===null)return A.a(n),A;if(!t.isVisible()){const x=t.findVisibleNode();x!==null&&x!==t&&(t=x,i=t.port)}let o=0,a=0,h=0,d=0,f=null,g=i.panel;if(g!==null&&!g.wn()&&(g=g.panel),g===null)o=s.x,a=s.y,h=n.x,d=n.y;else{f=g.zs;const x=1/(f.m11*f.m22-f.m12*f.m21),B=f.m22*x,C=-f.m12*x,F=-f.m21*x,b=f.m11*x,L=x*(f.m21*f.dy-f.m22*f.dx),Q=x*(f.m12*f.dx-f.m11*f.dy);o=s.x*B+s.y*F+L,a=s.x*C+s.y*b+Q,h=n.x*B+n.y*F+L,d=n.x*C+n.y*b+Q}return i._c(o,a,h,d,A),f!==null&&A.F(f),A}cO(t,i){const n=t.Wu;return n!==null?n.yT(i):null}w1(t){let i=t.Wu;return i===null&&(i=new $n,i.ir=t,i.pe=t.part,t.Wu=i),i.yT(this)}getLinkPoint(t,i,n,s,r,A,o,a){if(a===void 0&&(a=new T),n.isSpot()&&!this.Od(n))return i.getDocumentPoint(n,a),a;if(n.isSide()){const f=this.w1(i);if(f!==null){const g=f.Id;if(a.a(g),r&&this.routing===7){const x=this.w1(o);if(x!==null&&f.Af<x.Af){const B=T.l(),C=T.l(),F=new it(i.getDocumentPoint(q.TopLeft,B),i.getDocumentPoint(q.BottomRight,C)),b=this.computeSpot(!s,o),L=this.getLinkPoint(A,o,b,!s,r,t,i,C);(n.includesSide(q.LeftSide)||n.includesSide(q.RightSide))&&L.y>=F.y&&L.y<=F.y+F.height?a.y=L.y:(n.includesSide(q.TopSide)||n.includesSide(q.BottomSide))&&L.x>=F.x&&L.x<=F.x+F.width&&(a.x=L.x),T.e(B),T.e(C)}}return a}}const h=i.getDocumentPoint(this.b1(n,s),T.l());let d=null;if(this.pointsCount>(r?6:2))d=s?this.getPoint(1):this.getPoint(this.pointsCount-2),r&&(d=this.cN(h,d.copy()));else{const f=this.computeSpot(!s,o),g=T.l();d=o.getDocumentPoint(this.b1(f,!s),g),r&&(d=this.cN(h,d)),T.e(g)}return this.getLinkPointFromPoint(t,i,h,d,s,a),T.e(h),a}getLinkDirection(t,i,n,s,r,A,o,a){let h=this.fO(t,i,n,s,r,A,o,a);if(o&&s.isNoSpot()&&o.isMemberOf(t)&&(h+=180,h>=360&&(h-=360)),this.Od(s))return h;const d=i.getDocumentAngle();return d===0||(45<=d&&d<135?h+=90:135<=d&&d<225?h+=180:225<=d&&d<315&&(h+=270),h>=360&&(h-=360)),h}fO(t,i,n,s,r,A,o,a){if(s.isSpot())return s.x>s.y?s.x>1-s.y?0:s.x<1-s.y?270:315:s.x<s.y?s.x>1-s.y?90:s.x<1-s.y?180:135:s.x<.5?225:s.x>.5?45:0;if(s.isSide()){const g=this.w1(i);if(g!==null)switch(g.xe){case 1:return 270;case 2:return 180;default:case 4:return 0;case 8:return 90}}const h=i.getDocumentPoint(q.Center,T.l());let d=null;if(this.pointsCount>(A?6:2))d=r?this.getPoint(1):this.getPoint(this.pointsCount-2),A?d=this.cN(h,d.copy()):d=n;else{const g=T.l();d=a.getDocumentPoint(q.Center,g),T.e(g)}let f=0;return Math.abs(d.x-h.x)>Math.abs(d.y-h.y)?d.x>=h.x?f=0:f=180:d.y>=h.y?f=90:f=270,T.e(h),f}computeEndSegmentLength(t,i,n,s){if(i!==null&&n.isSide()){const A=this.w1(i);if(A!==null)return A.k1}let r=NaN;return s?r=this.fromEndSegmentLength:r=this.toEndSegmentLength,i!==null&&isNaN(r)&&(s?r=i.fromEndSegmentLength:r=i.toEndSegmentLength),isNaN(r)&&(r=10),r}computeSpot(t,i){return i===void 0&&(i=null),t?this.uO(i||this.fromPort):this.dO(i||this.toPort)}uO(t){if(t===null)return q.Center;let i=this.fromSpot;return i.isDefault()&&(i=t.fromSpot),i===q.Default?q.None:i}dO(t){if(t===null)return q.Center;let i=this.toSpot;return i.isDefault()&&(i=t.toSpot),i===q.Default?q.None:i}Od(t){return t===q.None||t.x===.5&&t.y===.5}b1(t,i){return t.x===.5&&t.y===.5?t:q.Center}computeOtherPoint(t,i){if(this.computeAdjusting()!==0&&this.pointsCount>4)return this.computeMidPoint(new T);{const n=this.cO(i,this);return n!==null?n.Id:i.getDocumentPoint(q.Center)}}computeShortLength(t){if(t){let i=this.fromShortLength;if(isNaN(i)){const n=this.fromPort;n!==null&&(i=n.fromShortLength)}return isNaN(i)?0:i}else{let i=this.toShortLength;if(isNaN(i)){const n=this.toPort;n!==null&&(i=n.toShortLength)}return isNaN(i)?0:i}}Rm(t,i,n,s,r,A){if(this.pickable===!1)return!1;i===void 0&&(i=null),n===void 0&&(n=null);let o=A;if(A===void 0&&(o=Bt.l(),o.Ii()),o.rc(this.F),this.containedInRect(t,o))return this.O2(i,n,r),A===void 0&&Bt.e(o),!0;if(this.intersectsRect(t,o)){let a=!1;if(!this.df){const h=this.T.r,d=h.length;for(let f=d;f--;){const g=h[f];if(!g.visible&&g!==this.locationObject)continue;const x=g.actualBounds,B=this.naturalBounds;if(x.x>B.width||x.y>B.height||x.x+x.width<0||x.y+x.height<0)continue;const C=g,F=Bt.l();if(F.set(o),C instanceof Kt?a=C.Rm(t,i,n,s,r,F):this.path===C?C instanceof Zt&&(a=C.Iv(t,s,F)):a=C.uA(t,s,F),a){let b=C;i!==null&&(b=i(C)),b&&(n===null||n(b))&&r.add(b)}Bt.e(F)}}return A===void 0&&Bt.e(o),a||this.background!==null}return A===void 0&&Bt.e(o),!1}get isOrthogonal(){return(this.Ba&2)===2}static lN(t){return(t&2)===2}get isAvoiding(){return(this.Ba&4)===4}computeCurve(){if(this._o===null){const t=this.fromPort,i=t!==null&&t===this.toPort,n=this.isOrthogonal;this._o=i&&!n}return this._o?9:this.curve}computeCorner(){if(this.curve===9)return 0;let t=this.corner;return(isNaN(t)||t<0)&&(t=10),t}findMidLabel(){const t=this.path,i=this.T.r,n=i.length;for(let r=0;r<n;r++){const A=i[r];if(!(A===t||A.isPanelMain)&&(A.segmentIndex===-1/0||isNaN(A.segmentIndex)))return A}const s=this.labelNodes;for(;s.next();){const r=s.value;if(r.segmentIndex===-1/0||isNaN(r.segmentIndex))return r}return null}computeSpacing(){if(!this.isVisible())return 0;let t=$t.sO;t=Math.max(t,this.computeThickness());const i=this.fromPort,n=this.toPort;if(i!==null&&n!==null){const s=this.findMidLabel();if(s!==null){const r=s.naturalBounds,A=s.margin,o=isNaN(r.width)?30:r.width*s.scale+A.left+A.right,a=isNaN(r.height)?14:r.height*s.scale+A.top+A.bottom,h=s.segmentOrientation;if(h===21||h===25||h===24)t=Math.max(t,a);else if(h===23||h===27||h===22||h===26)t=Math.max(t,o);else{const d=i.getDocumentPoint(q.Center).directionPoint(n.getDocumentPoint(q.Center))/180*Math.PI;t=Math.max(t,Math.abs(Math.sin(d)*o)+Math.abs(Math.cos(d)*a)+1)}this.curve===9&&(t*=1.333)}}return t}arrangeBundledLinks(t,i){if(i)for(let n=0;n<t.length;n++){const s=t[n];s.computeAdjusting()===0&&s.invalidateRoute()}}computeCurviness(){let t=this.curviness;if(isNaN(t)){t=$t.eO;const i=this.tr;if(i!==null){const n=u.ht();let s=0;const r=i.Zs;for(let o=0;o<r.length;o++){const a=r[o].computeSpacing();n.push(a),s+=a}let A=-s/2;for(let o=0;o<r.length;o++){if(r[o]===this){t=A+n[o]/2;break}A+=n[o]}i.oy===this.fromNode&&(t=-t),u.et(n)}}return t}computeThickness(){if(!this.isVisible())return 0;const t=this.path;return t!==null?Math.max(t.strokeWidth,1):1}hasCurviness(){return!isNaN(this.curviness)||this.tr!==null}aO(t,i,n,s,r,A){const o=this.getLinkPoint(t,i,n,!0,!1,s,r),a=this.getLinkPoint(s,r,A,!1,!1,t,i);if(this.hasCurviness()){const h=a.x-o.x,d=a.y-o.y,f=this.computeCurviness(),g=f,x=o.x+h/2,B=o.y+d/2;let C=x,F=B;if(V.u(d,0))h>0?F-=g:F+=g;else{const b=-h/d;let L=Math.sqrt(g*g/(b*b+1));f<0&&(L=-L),C=(d<0?-1:1)*L+x,F=b*(C-x)+B}this.addPoint(o),this.addPointAt(C,F),this.addPoint(a)}else{this.addPoint(o),this.addPoint(a);const h=it.l();i.getDocumentBounds(h);const d=h.containsPoint(a);r.getDocumentBounds(h);const f=h.containsPoint(o);if(d||f){const g=i.getDocumentPoint(this.b1(n,!0),new T);this.setPoint(0,this.getLinkPointFromPoint(t,i,g,a,!0,g));const x=r.getDocumentPoint(this.b1(A,!1),new T);this.setPoint(1,this.getLinkPointFromPoint(s,r,x,o,!1,x))}it.e(h)}}hO(t,i,n,s,r,A){const o=this.getLinkPoint(t,i,n,!0,!1,s,r),a=this.getLinkPoint(s,r,A,!1,!1,t,i),h=a.x-o.x,d=a.y-o.y,f=this.computeCurviness();let g=0,x=0,B=o.x+h/3,C=o.y+d/3,F=B,b=C;V.u(d,0)?h>0?b-=f:b+=f:(g=-h/d,x=Math.sqrt(f*f/(g*g+1)),f<0&&(x=-x),F=(d<0?-1:1)*x+B,b=g*(F-B)+C),B=o.x+2*h/3,C=o.y+2*d/3;let L=B,Q=C;V.u(d,0)?h>0?Q-=f:Q+=f:(L=(d<0?-1:1)*x+B,Q=g*(L-B)+C),this.clearPoints(),this.addPoint(o),this.addPointAt(F,b),this.addPointAt(L,Q),this.addPoint(a),this.setPoint(0,this.getLinkPoint(t,i,n,!0,!1,s,r)),this.setPoint(3,this.getLinkPoint(s,r,A,!1,!1,t,i))}adjustPoints(t,i,n,s){let r=this.computeAdjusting();if(this.isOrthogonal){if(r===18)return!1;r===19&&(r=17)}switch(r){case 18:return this.gO(t,i,n,s);case 19:return this.mO(t,i,n,s);case 17:return this.pO(t,i,n,s);default:return!1}}gO(t,i,n,s){const r=this.getPoint(t),A=this.getPoint(n);if(r.equalsApprox(i)&&A.equalsApprox(s))return!0;const o=r.x,a=r.y,h=A.x,d=A.y;let f=h-o,g=d-a;const x=Math.sqrt(f*f+g*g);if(V.K(x,0))return!0;let B=0;V.K(f,0)?g<0?B=-Math.PI/2:B=Math.PI/2:(B=Math.atan(g/Math.abs(f)),f<0&&(B=Math.PI-B));const C=i.x,F=i.y,b=s.x,L=s.y,Q=b-C,M=L-F,O=Math.sqrt(Q*Q+M*M);let D=0;V.K(Q,0)?M<0?D=-Math.PI/2:D=Math.PI/2:(D=Math.atan(M/Math.abs(Q)),Q<0&&(D=Math.PI-D));const K=O/x,J=D-B;this.setPoint(t,i);for(let R=t+1;R<n;R++){const G=this.getPoint(R);f=G.x-o,g=G.y-a;const W=Math.sqrt(f*f+g*g);if(V.K(W,0))continue;let Y=0;V.K(f,0)?g<0?Y=-Math.PI/2:Y=Math.PI/2:(Y=Math.atan(g/Math.abs(f)),f<0&&(Y=Math.PI-Y));const Z=Y+J,et=W*K,At=C+et*Math.cos(Z),ht=F+et*Math.sin(Z);this.setPointAt(R,At,ht)}return this.setPoint(n,s),!0}mO(t,i,n,s){const r=this.getPoint(t),A=this.getPoint(n);if(r.equalsApprox(i)&&A.equalsApprox(s))return!0;const o=r.x,a=r.y,h=A.x,d=A.y,f=(h-o)*(h-o)+(d-a)*(d-a),g=i.x,x=i.y,B=s.x,C=s.y;let F=0,b=1;B-g!==0?(F=(C-x)/(B-g),b=Math.sqrt(1+1/(F*F))):F=9e9,this.setPoint(t,i);for(let L=t+1;L<n;L++){const Q=this.getPoint(L),M=Q.x,O=Q.y;let D=.5;f!==0&&(D=((o-M)*(o-h)+(a-O)*(a-d))/f);const K=o+D*(h-o),J=a+D*(d-a);let R=Math.sqrt((M-K)*(M-K)+(O-J)*(O-J));O<F*(M-K)+J&&(R=-R),F>0&&(R=-R);const G=g+D*(B-g),W=x+D*(C-x);if(F!==0){const Y=G+R/b,Z=W-(Y-G)/F;this.setPointAt(L,Y,Z)}else this.setPointAt(L,G,W+R)}return this.setPoint(n,s),!0}pO(t,i,n,s){if(this.isOrthogonal){let r=this.getPoint(t),A=this.getPoint(t+1),o=this.getPoint(t+2),a=A.x,h=A.y;const d=a,f=h;V.u(r.y,A.y)?V.u(A.x,o.x)?h=i.y:V.u(A.y,o.y)&&(a=i.x):V.u(r.x,A.x)&&(V.u(A.y,o.y)?a=i.x:V.u(A.x,o.x)&&(h=i.y)),this.setPointAt(t+1,a,h),r=this.getPoint(n),A=this.getPoint(n-1),o=this.getPoint(n-2);let g=A.x,x=A.y;const B=g,C=x;if(V.u(r.y,A.y)?V.u(A.x,o.x)?x=s.y:V.u(A.y,o.y)&&(g=s.x):V.u(r.x,A.x)&&(V.u(A.y,o.y)?g=s.x:V.u(A.x,o.x)&&(x=s.y)),this.setPointAt(n-1,g,x),this.YL())return this.setPointAt(t+1,d,f),this.setPointAt(n-1,B,C),!1}return this.setPoint(t,i),this.setPoint(n,s),!0}addOrthoPoints(t,i,n,s,r,A){i<0?i+=360:i>=360&&(i-=360),s<0?s+=360:s>=360&&(s-=360);const o=s;i>=315||i<45?i=0:45<=i&&i<135?i=90:135<=i&&i<225?i=180:i=270,s>=315||s<45?s=0:45<=s&&s<135?s=90:135<=s&&s<225?s=180:s=270;const a=t,h=n,d=r.actualBounds.copy(),f=A.actualBounds.copy();if(!d.isReal()||!f.isReal())return;d.inflate($t.za,$t.za),f.inflate($t.za,$t.za),d.unionPoint(t),f.unionPoint(n);const g=T.l(),x=T.l();i===0?h.x>a.x||s===270&&h.y<a.y&&f.right>a.x||s===90&&h.y>a.y&&f.right>a.x?(g.i(h.x,a.y),x.i(h.x,(a.y+h.y)/2),s===180?(g.x=this.computeMidOrthoPosition(a.x,a.y,h.x,h.y,!1),x.x=g.x,x.y=h.y):s===270&&h.y<a.y||s===90&&h.y>a.y?(a.x<f.left?g.x=this.computeMidOrthoPosition(a.x,a.y,f.left,h.y,!1):a.x<f.right&&(s===270&&a.y<f.top||s===90&&a.y>f.bottom)?g.x=this.computeMidOrthoPosition(a.x,a.y,h.x,h.y,!1):g.x=f.right,x.x=g.x,x.y=h.y):s===0&&a.x<f.left&&a.y>f.top&&a.y<f.bottom&&(g.x=a.x,a.y<h.y?g.y=Math.min(h.y,f.top):g.y=Math.max(h.y,f.bottom),x.y=g.y)):(g.i(a.x,h.y),x.i((a.x+h.x)/2,h.y),(s===180||s===90&&h.y<d.top||s===270&&h.y>d.bottom)&&(s===180&&(f.containsPoint(a)||d.containsPoint(h))?g.y=this.computeMidOrthoPosition(a.x,a.y,h.x,h.y,!0):h.y<a.y&&(s===180||s===90)?g.y=this.computeMidOrthoPosition(a.x,d.top,h.x,Math.max(h.y,f.bottom),!0):h.y>a.y&&(s===180||s===270)&&(g.y=this.computeMidOrthoPosition(a.x,d.bottom,h.x,Math.min(h.y,f.top),!0)),x.x=h.x,x.y=g.y),g.y>d.top&&g.y<d.bottom&&(h.x>=d.left&&h.x<=a.x||a.x<=f.right&&a.x>=h.x?(s===90||s===270)&&(g.i(Math.max((a.x+h.x)/2,a.x),a.y),x.i(g.x,h.y)):(s===270||(s===0||s===180)&&h.y<a.y?g.y=Math.min(h.y,s===0?d.top:Math.min(d.top,f.top)):g.y=Math.max(h.y,s===0?d.bottom:Math.max(d.bottom,f.bottom)),x.x=h.x,x.y=g.y))):i===180?h.x<a.x||s===270&&h.y<a.y&&f.left<a.x||s===90&&h.y>a.y&&f.left<a.x?(g.i(h.x,a.y),x.i(h.x,(a.y+h.y)/2),s===0?(g.x=this.computeMidOrthoPosition(a.x,a.y,h.x,h.y,!1),x.x=g.x,x.y=h.y):s===270&&h.y<a.y||s===90&&h.y>a.y?(a.x>f.right?g.x=this.computeMidOrthoPosition(a.x,a.y,f.right,h.y,!1):a.x>f.left&&(s===270&&a.y<f.top||s===90&&a.y>f.bottom)?g.x=this.computeMidOrthoPosition(a.x,a.y,h.x,h.y,!1):g.x=f.left,x.x=g.x,x.y=h.y):s===180&&a.x>f.right&&a.y>f.top&&a.y<f.bottom&&(g.x=a.x,a.y<h.y?g.y=Math.min(h.y,f.top):g.y=Math.max(h.y,f.bottom),x.y=g.y)):(g.i(a.x,h.y),x.i((a.x+h.x)/2,h.y),(s===0||s===90&&h.y<d.top||s===270&&h.y>d.bottom)&&(s===0&&(f.containsPoint(a)||d.containsPoint(h))?g.y=this.computeMidOrthoPosition(a.x,a.y,h.x,h.y,!0):h.y<a.y&&(s===0||s===90)?g.y=this.computeMidOrthoPosition(a.x,d.top,h.x,Math.max(h.y,f.bottom),!0):h.y>a.y&&(s===0||s===270)&&(g.y=this.computeMidOrthoPosition(a.x,d.bottom,h.x,Math.min(h.y,f.top),!0)),x.x=h.x,x.y=g.y),g.y>d.top&&g.y<d.bottom&&(h.x<=d.right&&h.x>=a.x||a.x>=f.left&&a.x<=h.x?(s===90||s===270)&&(g.i(Math.min((a.x+h.x)/2,a.x),a.y),x.i(g.x,h.y)):(s===270||(s===0||s===180)&&h.y<a.y?g.y=Math.min(h.y,s===180?d.top:Math.min(d.top,f.top)):g.y=Math.max(h.y,s===180?d.bottom:Math.max(d.bottom,f.bottom)),x.x=h.x,x.y=g.y))):i===90?h.y>a.y||s===180&&h.x<a.x&&f.bottom>a.y||s===0&&h.x>a.x&&f.bottom>a.y?(g.i(a.x,h.y),x.i((a.x+h.x)/2,h.y),s===270?(g.y=this.computeMidOrthoPosition(a.x,a.y,h.x,h.y,!0),x.x=h.x,x.y=g.y):s===180&&h.x<a.x||s===0&&h.x>a.x?(a.y<f.top?g.y=this.computeMidOrthoPosition(a.x,a.y,h.x,f.top,!0):a.y<f.bottom&&(s===180&&a.x<f.left||s===0&&a.x>f.right)?g.y=this.computeMidOrthoPosition(a.x,a.y,h.x,h.y,!0):g.y=f.bottom,x.x=h.x,x.y=g.y):s===90&&a.y<f.top&&a.x>f.left&&a.x<f.right&&(a.x<h.x?g.x=Math.min(h.x,f.left):g.x=Math.max(h.x,f.right),g.y=a.y,x.x=g.x)):(g.i(h.x,a.y),x.i(h.x,(a.y+h.y)/2),(s===270||s===0&&h.x<d.left||s===180&&h.x>d.right)&&(s===270&&(f.containsPoint(a)||d.containsPoint(h))?g.x=this.computeMidOrthoPosition(a.x,a.y,h.x,h.y,!1):h.x<a.x&&(s===270||s===0)?g.x=this.computeMidOrthoPosition(d.left,a.y,Math.max(h.x,f.right),h.y,!1):h.x>a.x&&(s===270||s===180)&&(g.x=this.computeMidOrthoPosition(d.right,a.y,Math.min(h.x,f.left),h.y,!1)),x.x=g.x,x.y=h.y),g.x>d.left&&g.x<d.right&&(h.y>=d.top&&h.y<=a.y||a.y<=f.bottom&&a.y>=h.y?(s===0||s===180)&&(g.i(a.x,Math.max((a.y+h.y)/2,a.y)),x.i(h.x,g.y)):(s===180||(s===90||s===270)&&h.x<a.x?g.x=Math.min(h.x,s===90?d.left:Math.min(d.left,f.left)):g.x=Math.max(h.x,s===90?d.right:Math.max(d.right,f.right)),x.x=g.x,x.y=h.y))):h.y<a.y||s===180&&h.x<a.x&&f.top<a.y||s===0&&h.x>a.x&&f.top<a.y?(g.i(a.x,h.y),x.i((a.x+h.x)/2,h.y),s===90?(g.y=this.computeMidOrthoPosition(a.x,a.y,h.x,h.y,!0),x.x=h.x,x.y=g.y):s===180&&h.x<a.x||s===0&&h.x>=a.x?(a.y>f.bottom?g.y=this.computeMidOrthoPosition(a.x,a.y,h.x,f.bottom,!0):a.y>f.top&&(s===180&&a.x<f.left||s===0&&a.x>f.right)?g.y=this.computeMidOrthoPosition(a.x,a.y,h.x,h.y,!0):g.y=f.top,x.x=h.x,x.y=g.y):s===270&&a.y>f.bottom&&a.x>f.left&&a.x<f.right&&(a.x<h.x?g.x=Math.min(h.x,f.left):g.x=Math.max(h.x,f.right),g.y=a.y,x.x=g.x)):(g.i(h.x,a.y),x.i(h.x,(a.y+h.y)/2),(s===90||s===0&&h.x<d.left||s===180&&h.x>d.right)&&(s===90&&(f.containsPoint(a)||d.containsPoint(h))?g.x=this.computeMidOrthoPosition(a.x,a.y,h.x,h.y,!1):h.x<a.x&&(s===90||s===0)?g.x=this.computeMidOrthoPosition(d.left,a.y,Math.max(h.x,f.right),h.y,!1):h.x>a.x&&(s===90||s===180)&&(g.x=this.computeMidOrthoPosition(d.right,a.y,Math.min(h.x,f.left),h.y,!1)),x.x=g.x,x.y=h.y),g.x>d.left&&g.x<d.right&&(h.y<=d.bottom&&h.y>=a.y||a.y>=f.top&&a.y<=h.y?(s===0||s===180)&&(g.i(a.x,Math.min((a.y+h.y)/2,a.y)),x.i(h.x,g.y)):(s===180||(s===90||s===270)&&h.x<a.x?g.x=Math.min(h.x,s===270?d.left:Math.min(d.left,f.left)):g.x=Math.max(h.x,s===270?d.right:Math.max(d.right,f.right)),x.x=g.x,x.y=h.y))),this.aN=s!==o,this.oN=i,this.rN=s,this.addPoint(g.copy()),this.addPoint(x.copy()),T.e(g),T.e(x)}computeMidOrthoPosition(t,i,n,s,r){let A=0;return this.hasCurviness()&&!this.computeSpot(!0,this.fromPort).isSide()&&!this.computeSpot(!1,this.toPort).isSide()&&(A=this.computeCurviness()),r?(i+s)/2+A:(t+n)/2+A}YL(){if(this.diagram===null||!this.isAvoiding||this.diagram.animationManager.isTicking)return!1;const t=this.points.r,i=t.length;if(i<4)return!1;const n=this.diagram.getPositions(!1,this.containingGroup,null);for(let s=1;s<i-2;s++){const r=t[s],A=t[s+1];if(!n.isUnoccupied(Math.min(r.x,A.x),Math.min(r.y,A.y),Math.abs(r.x-A.x),Math.abs(r.y-A.y)))return!0}return!1}findClosestSegment(t){const i=t.x,n=t.y;let s=this.getPoint(0),r=this.getPoint(1),A=T.distanceLineSegmentSquared(i,n,s.x,s.y,r.x,r.y),o=0;for(let a=1;a<this.pointsCount-1;a++){s=this.getPoint(a+1);const h=T.distanceLineSegmentSquared(i,n,r.x,r.y,s.x,s.y);r=s,h<A&&(o=a,A=h)}return o}oe(){this.Ch=!1,this.c()}get Ch(){return(this.Lt&128)!==0}set Ch(t){(this.Lt&128)!==0!==t&&(this.Lt=this.Lt^128)}get geometry(){if(!this.Ch){if(this.updateRoute(),this.pointsCount<2)return this.Ch=!0,this.ft;this.ft=this.makeGeometry()}return this.ft}ld(t){if(!t){if(this.Le===!1)return;const r=this.findMainElement();if(this.Ch&&(r===null||r.geometry!==null))return}this.pointsCount<2?this.Ch=!0:this.ft=this.makeGeometry();const i=this.path;if(i===null)return;i.ft=this.ft;const n=this.T.r,s=n.length;for(let r=0;r<s;r++){const A=n[r];A!==i&&A.isPanelMain&&A instanceof Zt&&(A.ft=this.ft)}}yO(t){return this.Xa()&&t.sh.has(this)&&(this.Lf.width!==0||this.Lf.height!==0)&&(t.animationManager.isAnimating||t.currentTool!==t.toolManager)}makeGeometry(){const t=this.ft,i=this.pointsCount;let n=!1;const s=this.diagram;s!==null&&this.yO(s)&&(n=!0);let r=0,A=0,o=this.getPoint(0).copy();const a=o.copy(),h=this.Pi.r,d=this.computeCurve();if(d===9&&i>=3&&!V.K(this.smoothness,0))if(i===3){let f=this.getPoint(1);r=Math.min(o.x,f.x),A=Math.min(o.y,f.y),f=this.getPoint(2),r=Math.min(r,f.x),A=Math.min(A,f.y)}else if(this.isOrthogonal){for(let f=0;f<i;f++){const g=h[f];a.x=Math.min(g.x,a.x),a.y=Math.min(g.y,a.y)}r=a.x,A=a.y}else{for(let f=3;f<i;f+=3){f+3>=i&&(f=i-1);const g=this.getPoint(f);a.x=Math.min(g.x,a.x),a.y=Math.min(g.y,a.y)}r=a.x,A=a.y}else{for(let f=0;f<i;f++){const g=h[f];a.x=Math.min(g.x,a.x),a.y=Math.min(g.y,a.y)}r=a.x,A=a.y}if(r-=this.d1.x,A-=this.d1.y,o.x-=r,o.y-=A,i===2&&!this.Xa()){let f=this.getPoint(1).copy();return f.x-=r,f.y-=A,this.computeShortLength(!0)!==0&&(o=this.Tf(o,!0,a)),this.computeShortLength(!1)!==0&&(f=this.Tf(f,!1,a)),t.type=1,t.startX=o.x,t.startY=o.y,t.endX=f.x,t.endY=f.y,this.Ch=!0,t}else{t.type=4;const f=zs.CC(t);if(this.computeShortLength(!0)!==0&&(o=this.Tf(o,!0,a)),f.du(o.x,o.y,!1,!1),d===9&&i>=3&&!V.K(this.smoothness,0))if(i===3){const g=this.getPoint(1),x=g.x-r,B=g.y-A;let C=this.getPoint(2).copy();C.x-=r,C.y-=A,this.computeShortLength(!1)!==0&&(C=this.Tf(C,!1,a)),f.wr(x,B,x,B,C.x,C.y)}else if(this.isOrthogonal){const g=T.Y(r,A),x=T.l();x.a(this.getPoint(1));const B=T.Y(r,A),C=T.Y(r,A);let F=this.getPoint(0),b=null;const L=this.smoothness/3;for(let D=1;D<this.pointsCount-1;D++){b=this.getPoint(D);const K=F,J=b,R=this.getPoint(this.fN(b,D,!1));V.K(K.x,J.x)&&V.K(J.x,R.x)||V.K(K.y,J.y)&&V.K(J.y,R.y)||(this.wO(K,J,R,L,B,C),(D===1||D===2&&V.K(F.x,this.getPoint(0).x)&&V.K(F.y,this.getPoint(0).y))&&(x.x=(F.x+b.x)*.5,x.y=(F.y+b.y)*.5),f.wr(x.x-r,x.y-A,B.x-r,B.y-A,b.x-r,b.y-A),g.set(B),x.set(C),F=b)}let Q=F.x,M=F.y,O=this.getPoint(this.pointsCount-1);this.computeShortLength(!1)!==0&&(O=this.Tf(O.copy(),!1,T.Lo)),Q=.5*(Q+O.x),M=.5*(M+O.y),f.wr(C.x-r,C.y-A,Q-r,M-A,O.x-r,O.y-A),T.e(g),T.e(x),T.e(B),T.e(C)}else for(let g=3;g<i;g+=3){const x=this.getPoint(g-2);g+3>=i&&(g=i-1);const B=this.getPoint(g-1);let C=this.getPoint(g);g===i-1&&this.computeShortLength(!1)!==0&&(C=this.Tf(C.copy(),!1,T.Lo)),f.wr(x.x-r,x.y-A,B.x-r,B.y-A,C.x-r,C.y-A)}else{const g=T.l();g.a(this.getPoint(0));const x=T.l();x.a(g);const B=this.computeCorner();let C=1,F=0;for(;C<i;){C=this.fN(g,C,C>1);let b=this.getPoint(C);if(C>=i-1){if(!g.equals(b))this.computeShortLength(!1)!==0&&(b=this.Tf(b.copy(),!1,T.Lo)),this.An(f,-r,-A,g,b,n);else if(F===0)for(C=1;C<i;)x.a(g),b=this.getPoint(C++),this.An(f,-r,-A,g,b,n),g.a(b);break}F=this.fN(b,C+1,C<i-3);const L=this.getPoint(F);this.xO(f,-r,-A,g,b,L,g,x,B,n),x.a(b),C=F}T.e(g)}return zs.LC(f),this.Ch=!0,t}}P1(t,i,n,s){let r=n-t;if(isNaN(r)||r===1/0||r===-1/0)return NaN;r<0&&(r=-r);let A=s-i;return isNaN(A)||A===1/0||A===-1/0?NaN:(A<0&&(A=-A),V.K(r,0)?A:V.K(A,0)?r:Math.sqrt(r*r+A*A))}wO(t,i,n,s,r,A){isNaN(s)&&(s=this.smoothness/3);const o=t.x,a=t.y,h=i.x,d=i.y,f=n.x,g=n.y,x=s*this.P1(o,a,h,d),B=s*this.P1(h,d,f,g);if(V.K(a,d)&&V.K(h,f)&&(h>o?g>d?(r.x=h-x,r.y=d-x,A.x=h+B,A.y=d+B):(r.x=h-x,r.y=d+x,A.x=h+B,A.y=d-B):g>d?(r.x=h+x,r.y=d-x,A.x=h-B,A.y=d+B):(r.x=h+x,r.y=d+x,A.x=h-B,A.y=d-B)),V.K(o,h)&&V.K(d,g)&&(d>a?f>h?(r.x=h-x,r.y=d-x,A.x=h+B,A.y=d+B):(r.x=h+x,r.y=d-x,A.x=h-B,A.y=d+B):f>h?(r.x=h-x,r.y=d+x,A.x=h+B,A.y=d-B):(r.x=h+x,r.y=d+x,A.x=h-B,A.y=d-B)),V.K(o,h)&&V.K(h,f)||V.K(a,d)&&V.K(d,g)){const C=.5*(o+f),F=.5*(a+g);r.x=C,r.y=F,A.x=C,A.y=F}}Tf(t,i,n){const s=this.pointsCount;if(s<2)return t;if(i){const r=this.getPoint(1),A=r.x-n.x,o=r.y-n.y,a=this.P1(t.x,t.y,A,o);if(a===0)return t;const h=s===2?a*.5:a;let d=this.computeShortLength(!0);d>h&&(d=h);const f=d*(A-t.x)/a,g=d*(o-t.y)/a;t.x+=f,t.y+=g}else{const r=this.getPoint(s-2),A=r.x-n.x,o=r.y-n.y,a=this.P1(t.x,t.y,A,o);if(a===0)return t;const h=s===2?a*.5:a;let d=this.computeShortLength(!1);d>h&&(d=h);const f=d*(t.x-A)/a,g=d*(t.y-o)/a;t.x-=f,t.y-=g}return t}fN(t,i,n){const s=this.pointsCount;let r=t;for(;V.K(t.x,r.x)&&V.K(t.y,r.y);){if(i>=s)return s-1;r=this.getPoint(i++)}if(!V.K(t.x,r.x)&&!V.K(t.y,r.y))return i-1;let A=r;for(;V.K(t.x,r.x)&&V.K(r.x,A.x)&&(!n||(t.y>=r.y?r.y>=A.y:r.y<=A.y))||V.K(t.y,r.y)&&V.K(r.y,A.y)&&(!n||(t.x>=r.x?r.x>=A.x:r.x<=A.x));){if(i>=s)return s-1;A=this.getPoint(i++)}return i-2}xO(t,i,n,s,r,A,o,a,h,d){if(V.u(s.y,r.y)&&V.u(r.x,A.x)){let f=Math.min(h,Math.abs(r.x-a.x)/2);const g=Math.min(f,Math.abs(A.y-r.y)/2);if(f=g,V.u(f,0)){this.An(t,i,n,s,r,d),o.a(r);return}let x=r.x;const B=r.y,C=x;let F=B;r.x>s.x?(x=r.x-f,A.y>r.y?F=r.y+g:F=r.y-g):(x=r.x+f,A.y>r.y?F=r.y+g:F=r.y-g);const b=T.Y(x,B);this.An(t,i,n,s,b,d),T.e(b),t.Sw(r.x+i,r.y+n,C+i,F+n),o.i(C,F)}else if(V.u(s.x,r.x)&&V.u(r.y,A.y)){let f=Math.min(h,Math.abs(r.y-a.y)/2);const g=Math.min(f,Math.abs(A.x-r.x)/2);if(f=g,V.u(g,0)){this.An(t,i,n,s,r,d),o.a(r);return}const x=r.x;let B=r.y,C=x;const F=B;r.y>s.y?(B=r.y-f,A.x>r.x?C=r.x+g:C=r.x-g):(B=r.y+f,A.x>r.x?C=r.x+g:C=r.x-g);const b=T.Y(x,B);this.An(t,i,n,s,b,d),T.e(b),t.Sw(r.x+i,r.y+n,C+i,F+n),o.i(C,F)}else this.An(t,i,n,s,r,d),o.a(r)}computeJumpLength(){return 10}An(t,i,n,s,r,A){if(A||!this.Xa())t.yr(r.x+i,r.y+n);else{const o=this.computeJumpLength(),a=o/2,h=[];let d=0;this.isVisible()&&(d=this.bO(s,r,h));let f=s.x,g=s.y;if(d>0){if(V.u(s.y,r.y))if(s.x<r.x){let x=0;for(;x<d;){const B=Math.max(s.x,Math.min(h[x++]-a,r.x-o));t.yr(B+i,r.y+n),f=B+i,g=r.y+n;let C=Math.min(B+o,r.x);for(;x<d;){const Q=h[x];if(Q<C+o)x++,C=Math.min(Q+a,r.x);else break}const F=r.y-o+n,b=C+i,L=r.y+n;this.curve===10?t.du(b,L,!1,!1):t.wr(f,F,b,F,b,L),f=b,g=L}}else{let x=d-1;for(;x>=0;){const B=Math.min(s.x,Math.max(h[x--]+a,r.x+o));t.yr(B+i,r.y+n),f=B+i,g=r.y+n;let C=Math.max(B-o,r.x);for(;x>=0;){const Q=h[x];if(Q>C-o)x--,C=Math.max(Q-a,r.x);else break}const F=r.y-o+n,b=C+i,L=r.y+n;this.curve===10?t.du(b,L,!1,!1):t.wr(f,F,b,F,b,L),f=b,g=L}}else if(V.u(s.x,r.x))if(s.y<r.y){let x=0;for(;x<d;){const B=Math.max(s.y,Math.min(h[x++]-a,r.y-o));t.yr(r.x+i,B+n),f=r.x+i,g=B+n;let C=Math.min(B+o,r.y);for(;x<d;){const Q=h[x];if(Q<C+o)x++,C=Math.min(Q+a,r.y);else break}const F=r.x-o+i,b=r.x+i,L=C+n;this.curve===10?t.du(b,L,!1,!1):t.wr(F,g,F,L,b,L),f=b,g=L}}else{let x=d-1;for(;x>=0;){const B=Math.min(s.y,Math.max(h[x--]+a,r.y+o));t.yr(r.x+i,B+n),f=r.x+i,g=B+n;let C=Math.max(B-o,r.y);for(;x>=0;){const Q=h[x];if(Q>C-o)x--,C=Math.max(Q-a,r.y);else break}const F=r.x-o+i,b=r.x+i,L=C+n;this.curve===10?t.du(b,L,!1,!1):t.wr(F,g,F,L,b,L),f=b,g=L}}}t.yr(r.x+i,r.y+n)}}bO(t,i,n){const s=this.diagram;if(s===null||t.equals(i))return 0;const r=s.layers;for(;r.next();){const A=r.value;if(A!==null&&A.visible){const o=A.VS(),a=o.length;for(let h=0;h<a;h++){const d=o[h];if(!(d instanceof $t))continue;if(d===this)return n.length>0&&n.sort((x,B)=>x-B),n.length;if(!d.isVisible()||!d.Xa())continue;const f=d.routeBounds;if(!f.isReal()||!this.routeBounds.intersectsRect(f)||this.usesSamePort(d))continue;const g=d.path;g!==null&&g.isVisibleObject()&&this.kO(t,i,n,d)}}}return n.length>0&&n.sort((A,o)=>A-o),n.length}kO(t,i,n,s){const r=V.u(t.y,i.y),A=s.pointsCount;let o=s.getPoint(0);const a=T.l();for(let h=1;h<A;h++){const d=s.getPoint(h);if(h<A-1){const f=s.getPoint(h+1);if(o.y===d.y&&d.y===f.y){if(d.x>o.x&&f.x>=d.x||d.x<o.x&&f.x<=d.x)continue}else if(o.x===d.x&&d.x===f.x&&(d.y>o.y&&f.y>=d.y||d.y<o.y&&f.y<=d.y))continue}this.PO(t,i,o,d,a)&&(r?n.push(a.x):n.push(a.y)),o=d}T.e(a)}PO(t,i,n,s,r){const A=t.x,o=t.y,a=i.x,h=i.y,d=n.x,f=n.y,g=s.x,x=s.y;if(V.u(A,a)){if(!V.u(o,h)&&V.u(f,x)&&Math.min(o,h)<f&&Math.max(o,h)>f&&Math.min(d,g)<A&&Math.max(d,g)>A&&!V.u(d,g))return r.x=A,r.y=f,!0}else if(V.u(o,h)&&V.u(d,g)&&Math.min(A,a)<d&&Math.max(A,a)>d&&Math.min(f,x)<o&&Math.max(f,x)>o&&!V.u(f,x))return r.x=d,r.y=o,!0;return r.x=0,r.y=0,!1}get firstPickIndex(){return this.pointsCount<=2?0:this.isOrthogonal||!this.Od(this.computeSpot(!0))?1:0}get lastPickIndex(){const t=this.pointsCount;return t===0?0:t<=2?t-1:this.isOrthogonal||!this.Od(this.computeSpot(!1))?t-2:t-1}Xa(){const t=this.curve;return t===11||t===10}p1(t){if(t||this.Xa()){const i=this.diagram;i!==null&&!i.animationManager.isTicking&&!i.sh.has(this)&&(this.Lf.width!==0||this.Lf.height!==0)&&i.sh.set(this,this.Lf.copy())}}invalidateOtherJumpOvers(t){const i=this.layer;if(i===null||!i.visible||i.isTemporary)return;const n=i.diagram;if(n===null||n.animationManager.isTicking)return;let s=!1;const r=n.layers;for(;r.next();){const A=r.value;if(A.visible){if(A===i){s=!0;let o=!1;const a=A.VS(),h=a.length;for(let d=0;d<h;d++){const f=a[d];f instanceof $t&&(f===this?o=!0:o&&this.wT(f,t))}}else if(s){const o=A.VS(),a=o.length;for(let h=0;h<a;h++){const d=o[h];d instanceof $t&&this.wT(d,t)}}}}}wT(t,i){if(t===null||!t.Ch||!t.Le||!t.Xa())return;const n=t.routeBounds;n.isReal()&&(!this.routeBounds.intersectsRect(n)&&!i.intersectsRect(n)||this.usesSamePort(t)||t.oe())}usesSamePort(t){const i=this.pointsCount,n=t.pointsCount;if(i>0&&n>0){const s=this.getPoint(0),r=t.getPoint(0);if(s.equalsApprox(r))return!0;const A=this.getPoint(i-1),o=t.getPoint(n-1);if(A.equalsApprox(o)||s.equalsApprox(o)||A.equalsApprox(r))return!0}else if(this.fromNode===t.fromNode||this.toNode===t.toNode||this.fromNode===t.toNode||this.toNode===t.fromNode)return!0;return!1}isVisible(){if(!super.isVisible())return!1;const t=this.containingGroup;let i=!0;const n=this.diagram;n!==null&&(i=n.isTreePathToChildren);const s=this.fromNode;if(s!==null){if(this.isTreeLink&&i&&!s.isTreeExpanded)return!1;if(s===t)return!0;let A=s;for(;A!==null;){if(A.labeledLink===this)return!0;A=A.containingGroup}const o=s.findVisibleNode();if(o===null||o===t)return!1}const r=this.toNode;if(r!==null){if(this.isTreeLink&&!i&&!r.isTreeExpanded)return!1;if(r===t)return!0;let A=r;for(;A!==null;){if(A.labeledLink===this)return!0;A=A.containingGroup}const o=r.findVisibleNode();if(o===null||o===t)return!1}return!0}Vi(t){if(super.Vi(t),t&&this.p1(!1),this.tr!==null&&this.tr.Ld(),this.$s!==null){const i=this.$s.iterator;for(;i.next();)i.value.Vi(t)}}get adjusting(){return this.Cf}set adjusting(t){const i=this.Cf;i!==t&&(this.Cf=t,this.t("adjusting",i,t))}computeAdjusting(){return this.isAvoiding&&this.diagram!==null&&this.diagram.animationManager.defaultAnimation.isAnimating?17:this.Cf}get corner(){return this.Dd}set corner(t){const i=this.Dd;i!==t&&(this.Dd=t,this.oe(),this.t("corner",i,t))}get curve(){return this.Fd}set curve(t){const i=this.Fd;i!==t&&(this.Fd=t,this.invalidateRoute(),this.oe(),this.p1(i===10||i===11||t===10||t===11),this.t("curve",i,t))}get curviness(){return this.Rd}set curviness(t){const i=this.Rd;i!==t&&(this.Rd=t,this.invalidateRoute(),this.oe(),this.t("curviness",i,t))}get routing(){return this.Ba}set routing(t){const i=this.Ba;i!==t&&(this.Ba=t,this.isAvoiding&&this.diagram!==null&&(this.diagram.Ym=!0),this._o=null,this.invalidateRoute(),this.p1($t.lN(i)||$t.lN(t)),this.t("routing",i,t))}get smoothness(){return this.vd}set smoothness(t){const i=this.vd;i!==t&&(this.vd=t,this.oe(),this.t("smoothness",i,t))}yy(){const t=this.fo;if(t===null)return;const i=this.go;if(i===null||!isNaN(this.curviness))return;const n=this.uo,s=this.mo;let r=null,A=null;const o=t.ei.r,a=o.length;for(let h=0;h<a;h++){const d=o[h];!(d.fo===t&&d.uo===n&&d.go===i&&d.mo===s)&&!(d.fo===i&&d.uo===s&&d.go===t&&d.mo===n)||(A===null?A=d:(r===null&&(r=[],r.push(A)),r.push(d)))}if(r!==null){let h=t.aT(i,n,s);h===null&&(h=new Io(t,n,i,s),t.lT(h),i.lT(h)),h.Zs=r;for(let d=0;d<r.length;d++){const f=r[d];f.tr=h}h.Ld()}}py(){const t=this.tr;if(t!==null){if(!isNaN(this.curviness))return;this.tr=null;const i=t.Zs.indexOf(this);i>=0&&(t.Zs.splice(i,1),t.Ld())}}vl(){return!0}get key(){const t=this.diagram;if(!(t===null||!t.model.Ea()))return t.model.getKeyForLinkData(this.data)}};p($t,"Ua",null),p($t,"Va",null),p($t,"Normal",1),p($t,"Orthogonal",2),p($t,"AvoidsNodes",6),p($t,"AvoidsNodesStraight",7),p($t,"None",0),p($t,"Bezier",9),p($t,"JumpGap",10),p($t,"JumpOver",11),p($t,"End",17),p($t,"Scale",18),p($t,"Stretch",19),p($t,"OrientAlong",21),p($t,"OrientPlus90",22),p($t,"OrientMinus90",23),p($t,"OrientOpposite",24),p($t,"OrientUpright",25),p($t,"OrientPlus90Upright",26),p($t,"OrientMinus90Upright",27),p($t,"OrientUpright45",28),p($t,"iO",8),p($t,"eO",16),p($t,"sO",14),p($t,"za",8);let Xt=$t;class Io{constructor(e,t,i,n){p(this,"Vo");p(this,"Us");p(this,"oy");p(this,"_2");p(this,"c1");p(this,"tN");p(this,"Zs");X.qi(this),this.Vo=!1,this.Us=!1,this.oy=e,this._2=t,this.c1=i,this.tN=n,this.Zs=[]}Ld(){if(!this.Vo){const e=this.Zs;if(e.length>0){const t=e[0].diagram;t!==null&&(t.cM.add(this),this.Us=t.undoManager.isUndoingRedoing)}}this.Vo=!0}SM(){if(this.Vo){this.Vo=!1;const e=this.Zs;if(e.length>0){const t=e[0],i=t.diagram,n=i===null||i.Gh&&!this.Us;this.Us=!1,t.arrangeBundledLinks(e,n),e.length===1&&(t.tr=null,e.length=0)}e.length===0&&(this.oy.hT(this),this.c1.hT(this))}}}const Ue=class Ue{constructor(e){p(this,"he");p(this,"ae");p(this,"Ya");p(this,"Ka");p(this,"pi");p(this,"yi");p(this,"Et");p(this,"Lh");p(this,"Ah");p(this,"ma");p(this,"EM");p(this,"Vo");p(this,"xy");p(this,"qc");p(this,"BM");p(this,"UM");X.qi(this),this.ma=null,this.EM=null,this.Vo=!0,this.xy=!1,this.he=1,this.ae=1,this.Ya=-1,this.Ka=-1,this.pi=e.width,this.yi=e.height,this.Et=null,this.Lh=0,this.Ah=0,this.qc=11,this.BM=this.qc*2,this.UM=this.qc*2}Pb(e){if(e.width<=0||e.height<=0)return;const t=e.x,i=e.y,n=e.x+e.width,s=e.y+e.height;this.he=Math.floor((t-this.pi)/this.pi)*this.pi,this.ae=Math.floor((i-this.yi)/this.yi)*this.yi,this.Ya=Math.ceil((n+2*this.pi)/this.pi)*this.pi,this.Ka=Math.ceil((s+2*this.yi)/this.yi)*this.yi;const r=1+(Math.ceil((this.Ya-this.he)/this.pi)|0),A=1+(Math.ceil((this.Ka-this.ae)/this.yi)|0);if(this.Et===null||this.Lh<r-1||this.Ah<A-1){const o=[];for(let a=0;a<=r;a++)o[a]=new Uint32Array(A);this.Et=o,this.Lh=r-1,this.Ah=A-1}this.SO(Ue.uN)}get bounds(){return new it(this.he,this.ae,this.Ya-this.he,this.Ka-this.ae)}get cellWidth(){return this.pi}set cellWidth(e){e>0&&e!==this.pi&&(this.pi=e,this.Pb(this.bounds))}get cellHeight(){return this.yi}set cellHeight(e){e>0&&e!==this.yi&&(this.yi=e,this.Pb(this.bounds))}Bd(e,t){return this.he<=e&&e<=this.Ya&&this.ae<=t&&t<=this.Ka}po(e,t){if(!this.Bd(e,t))return Ue.uN;e-=this.he,e/=this.pi,t-=this.ae,t/=this.yi;const i=e|0,n=t|0;return this.Et[i][n]}RR(e,t,i,n){if(!this.Bd(e,t))return;const s=(e-this.he)/this.pi|0,r=(t-this.ae)/this.yi|0,A=(e+i-this.he)/this.pi|0,o=(t+n-this.ae)/this.yi|0,a=Math.min(A,this.Lh),h=Math.min(o,this.Ah);for(let d=s;d<=a;d++){const f=this.Et[d];if(f.fill)f.fill(Ue.Qs,r,h+1);else for(let g=r;g<=h;g++)f[g]=Ue.Qs}}SO(e){if(this.Et!==null)for(let t=0;t<=this.Lh;t++){const i=this.Et[t];if(i.fill)i.fill(e);else for(let n=0;n<=this.Ah;n++)i[n]=e}}tA(){if(this.Et!==null)for(let e=0;e<=this.Lh;e++){const t=this.Et[e];for(let i=0;i<=this.Ah;i++)t[i]>=Ue.Ga&&(t[i]=Ue.uN)}}MO(e,t){return this.po(e,t)===Ue.Qs}isUnoccupied(e,t,i,n){if(e>this.Ya||e+i<this.he||t>this.Ka||t+n<this.ae)return!0;let s=(e-this.he)/this.pi|0,r=(t-this.ae)/this.yi|0,A=Math.max(0,i)/this.pi+1|0,o=Math.max(0,n)/this.yi+1|0;if(s<0&&(A+=s,s=0),r<0&&(o+=r,r=0),A<0||o<0)return!0;const a=Math.min(s+A-1,this.Lh)|0,h=Math.min(r+o-1,this.Ah)|0;for(let d=s;d<=a;d++){const f=this.Et[d];for(let g=r;g<=h;g++)if(f[g]===Ue.Qs)return!1}return!0}maxAvoidsLinksSpaceH(e,t,i,n){if(e>this.Ya||t<this.he||i>this.Ka||i<this.ae)return 0;const s=(e-this.he)/this.pi|0,r=(t-this.he)/this.pi|0,A=(i-this.ae)/this.yi|0,o=n/this.yi+1|0;let a;for(a=0;a<o/2;a++){let h=!1;for(let d=s;d<=r;d++)if(this.Et[d][A+a]===Ue.Qs||this.Et[d][A-a]===Ue.Qs){h=!0;break}if(h)return Math.max(0,(2*a-1)*this.yi)}return n}maxAvoidsLinksSpaceV(e,t,i,n){if(e>this.Ka||t<this.ae||i>this.Ya||i<this.he)return 0;const s=(e-this.ae)/this.yi|0,r=(t-this.ae)/this.yi|0,A=(i-this.he)/this.pi|0,o=n/this.pi+1|0;let a;for(a=0;a<o/2;a++){let h=!1;for(let d=s;d<=r;d++)if(this.Et[A+a][d]===Ue.Qs||this.Et[A-a][d]===Ue.Qs){h=!0;break}if(h)return Math.max(0,(2*a-1)*this.pi)}return n}NO(e,t,i,n,s,r,A,o){e=e|0,t=t|0;let a=this.Et[e][t];if(a>=Ue.Ga&&a<Ue.Ed)for(n?t+=i:e+=i,a+=1;s<=e&&e<=r&&A<=t&&t<=o;){const h=this.Et[e][t];if(a>=h)break;this.Et[e][t]=a,a+=1,n?t+=i:e+=i}return n?t:e}yo(e,t,i,n,s,r,A,o){if(e<s||e>r||t<A||t>o)return;const a=this.NO(e,t,i,n,s,r,A,o);if(n)if(i>0)for(let h=t+i;h<a;h+=i)this.yo(e,h,1,!n,s,r,A,o),this.yo(e,h,-1,!n,s,r,A,o);else for(let h=t+i;h>a;h+=i)this.yo(e,h,1,!n,s,r,A,o),this.yo(e,h,-1,!n,s,r,A,o);else if(i>0)for(let h=e+i;h<a;h+=i)this.yo(h,t,1,!n,s,r,A,o),this.yo(h,t,-1,!n,s,r,A,o);else for(let h=e+i;h>a;h+=i)this.yo(h,t,1,!n,s,r,A,o),this.yo(h,t,-1,!n,s,r,A,o)}S1(e,t,i,n,s,r,A,o,a,h){let d=e|0,f=t|0,g=Ue.Qs,x=Ue.Ga;for(this.Et[d][f]=x;g===Ue.Qs&&d>A&&d<o&&f>a&&f<h;)x+=1,this.Et[d][f]=x,r?f+=s:d+=s,g=this.Et[d][f];return r?f:d}M1(e,t,i,n,s,r,A,o,a,h){let d=i|0,f=n|0,g=Ue.Qs;const x=Ue.Ed;for(this.Et[d][f]=x;g===Ue.Qs&&d>A&&d<o&&f>a&&f<h;)this.Et[d][f]=x,r?f+=s:d+=s,g=this.Et[d][f]}xT(e,t,i,n,s,r){if(this.Et===null)return;this.xy=!1;let A=e.x,o=e.y;if(!this.Bd(A,o))return;A-=this.he,A/=this.pi,o-=this.ae,o/=this.yi;let a=i.x,h=i.y;if(!this.Bd(a,h))return;if(a-=this.he,a/=this.pi,h-=this.ae,h/=this.yi,Math.abs(A-a)<=1&&Math.abs(o-h)<=1){this.xy=!0;return}let d=s.x,f=s.y,g=s.x+s.width,x=s.y+s.height;d-=this.he,d/=this.pi,f-=this.ae,f/=this.yi,g-=this.he,g/=this.pi,x-=this.ae,x/=this.yi;const B=Math.max(0,Math.min(this.Lh,d|0)),C=Math.min(this.Lh,Math.max(0,g|0)),F=Math.max(0,Math.min(this.Ah,f|0)),b=Math.min(this.Ah,Math.max(0,x|0)),L=0,Q=90,M=270,O=this.Et,D=A|0,K=o|0,J=a|0,R=h|0,G=t===L||t===Q?1:-1,W=t===Q||t===M;O[D][K]===Ue.Qs?(this.S1(D,K,J,R,G,W,B,C,F,b),this.S1(D,K,J,R,1,!W,B,C,F,b),this.S1(D,K,J,R,-1,!W,B,C,F,b)):this.S1(D,K,J,R,G,W,D,K,D,K),O[J][R]===Ue.Qs?(this.M1(D,K,J,R,n===L||n===Q?1:-1,n===Q||n===M,B,C,F,b),this.M1(D,K,J,R,1,!(n===Q||n===M),B,C,F,b),this.M1(D,K,J,R,-1,!(n===Q||n===M),B,C,F,b)):this.M1(D,K,J,R,G,W,J,R,J,R);const Y=u.ht();if(r&&this.bT(J,R,n,D,K,Y)){(Y[0]!==J||Y[1]!==R)&&(Y.unshift(R),Y.unshift(J)),(Y[Y.length-2]!==D||Y[Y.length-1]!==K)&&(Y.push(D),Y.push(K));let Z=Ue.Ga,et=Y[Y.length-2],At=Y[Y.length-1];O[et][At]=Z++;for(let ht=Y.length-4;ht>=0;ht-=2){et=Y[ht+2],At=Y[ht+3];const nt=Y[ht],gt=Y[ht+1];for(;nt>et?et++:nt<et?et--:gt>At?At++:gt<At&&At--,O[et][At]=Z++,!(et===nt&&At===gt););}}else this.yo(D,K,1,!1,B,C,F,b),this.yo(D,K,-1,!1,B,C,F,b),this.yo(D,K,1,!0,B,C,F,b),this.yo(D,K,-1,!0,B,C,F,b);u.et(Y)}bT(e,t,i,n,s,r){const A=this.Et;let o=e,a=t;for(;;){if(o===n&&a===s)return!0;let h=o,d=a;if(i===0)if(h<n)h++;else break;else if(i===90)if(d<s)d++;else break;else if(i===180)if(h>n)h--;else break;else if(d>s)d--;else break;const f=A[h][d];if(f===0||f===Ue.dN)break;o=h,a=d}for(;;){let h=i,d=o,f=a;i===0?f<s?(h=90,f++):f>s&&(h=270,f--):i===90?d<n?(h=0,d++):d>n&&(h=180,d--):i===180?f<s?(h=90,f++):f>s&&(h=270,f--):d<n?(h=0,d++):d>n&&(h=180,d--);const g=A[d][f];if(h!==i&&g!==0&&g!==Ue.dN){if(r.push(o),r.push(a),this.bT(o,a,h,n,s,r))return!0;r.pop(),r.pop()}if(A[o][a]=Ue.dN,i===0){if(o===e)return!1;o--}else if(i===90){if(a===t)return!1;a--}else if(i===180){if(o===e)return!1;o++}else{if(a===t)return!1;a++}}}};p(Ue,"Qs",0),p(Ue,"Ga",1),p(Ue,"Ed",999999),p(Ue,"uN",Ue.Ed+1),p(Ue,"dN",Ue.Ed+2);let Mn=Ue;class $n{constructor(){p(this,"pe");p(this,"ir");p(this,"hs");p(this,"Ud");X.qi(this),this.pe=null,this.ir=null,this.hs=[],this.Ud=!1}toString(){const e=this.hs;let t=this.pe.toString()+" "+e.length.toString()+":";for(let i=0;i<e.length;i++){const n=e[i];n!==null&&(t+=`
  `+n.toString())}return t}CO(e,t,i,n){const s=t.offsetY;switch(s){case 8:return 90;case 2:return 180;case 1:return 270;case 4:return 0}let r=i;switch(s){case 9:return r>180?270:90;case 6:return r>90&&r<=270?180:0}const A=Math.atan2(e.height,e.width)*180/Math.PI;switch(s){case 3:return r>A&&r<=180+A?180:270;case 5:return r>180-A&&r<=360-A?270:0;case 12:return r>A&&r<=180+A?90:0;case 10:return r>180-A&&r<=360-A?180:90;case 7:return r>90&&r<=180+A?180:r>180+A&&r<=360-A?270:0;case 13:return r>180&&r<=360-A?270:r>A&&r<=180?90:0;case 14:return r>A&&r<=180-A?90:r>180-A&&r<=270?180:0;case 11:return r>180-A&&r<=180+A?180:r>180+A?270:90}return n&&s!==15&&(r-=15,r<0&&(r+=360)),r>A&&r<180-A?90:r>=180-A&&r<=180+A?180:r>180+A&&r<360-A?270:0}Ld(){this.hs.length=0}yT(e){let t=this.hs;t.length===0&&(this.LO(),t=this.hs);for(let i=0;i<t.length;i++){const n=t[i];if(n!==null&&n.qe===e)return n}return null}LO(){if(!this.Ud){const e=this.Ud;this.Ud=!0;let t,i=null;const n=this.pe,s=n instanceof Vt?n:null;if(s!==null&&!s.isSubGraphExpanded){if(!s.actualBounds.isReal())return this.Ud=e,this.hs;i=s,t=i.findExternalLinksConnected()}else n.isTreeExpanded?t=n.findLinksConnected(this.ir.portId):t=n.findExternalTreeLinksConnected();this.hs.length=0;let r=0;const A=this.ir.getDocumentPoint(q.TopLeft,T.l()),o=this.ir.getDocumentPoint(q.BottomRight,T.l()),a=it.Y(A.x,A.y,0,0);a.unionPoint(o),T.e(A),T.e(o);const h=T.Y(a.x+a.width/2,a.y+a.height/2),d=this.ir.getDocumentAngle(),f=t.iterator;for(;f.next();){const C=f.value;if(!C.isVisible()||C.fromPort===C.toPort)continue;const F=C.fromPort===this.ir||C.fromNode!==null&&C.fromNode.isMemberOf(i),b=C.computeSpot(F,this.ir);if(!b.isSide())continue;let L;if(F?L=C.toPort:L=C.fromPort,L===null)continue;let Q=L.part;if(Q===null)continue;const M=Q.findVisibleNode();M!==null&&M!==Q&&(Q=M,L=Q.port);const O=C.computeOtherPoint(Q,L);let D=h.directionPoint(O);D-=d,D<0?D+=360:D>=360&&(D-=360);const K=this.CO(a,b,D,C.isOrthogonal);let J=0;K===0?(J=4,D>180&&(D-=360)):K===90?(J=8,D>270&&(D-=360)):K===180?J=2:(J=1,D<90&&(D+=360));let R=this.hs[r];R===void 0?(R=new Ns(C,D,J),this.hs[r]=R):(R.qe=C,R.Ht=D,R.xe=J),R.N1.set(O),r++}T.e(h),this.AO();const g=this.hs.length;let x=-1,B=0;for(r=0;r<g;r++){const C=this.hs[r];C!==void 0&&(C.xe!==x&&(x=C.xe,B=0),C.Vd=B,B++)}for(x=-1,B=0,r=g-1;r>=0;r--){const C=this.hs[r];C!==void 0&&(C.xe!==x&&(x=C.xe,B=C.Vd+1),C.Af=B)}this.TO(this.hs),this.DO(this.hs),this.Ud=e,it.e(a)}return this.hs}FO(e,t){return e===t?0:e===null?-1:t===null?1:e.xe<t.xe?-1:e.xe>t.xe?1:e.Ht<t.Ht?-1:e.Ht>t.Ht?1:0}AO(){this.hs.sort($n.prototype.FO)}TO(e){const t=this.ir,i=this.pe.portSpreading,n=T.l(),s=T.l(),r=T.l(),A=T.l();t.getDocumentPoint(q.TopLeft,n),t.getDocumentPoint(q.TopRight,s),t.getDocumentPoint(q.BottomRight,r),t.getDocumentPoint(q.BottomLeft,A);let o=0,a=0,h=0,d=0;if(i===2)for(let L=0;L<e.length;L++){const Q=e[L];if(Q===null)continue;const M=Q.qe.computeThickness();switch(Q.xe){case 8:h+=M;break;case 2:d+=M;break;case 1:o+=M;break;default:case 4:a+=M;break}}let f=0,g=0,x=1,B,C,F=0,b=0;for(let L=0;L<e.length;L++){const Q=e[L];if(Q===null)continue;if(f!==Q.xe){switch(f=Q.xe,f){case 8:B=r,C=A;break;case 2:B=A,C=n;break;case 1:B=n,C=s;break;default:case 4:B=s,C=r;break}switch(F=C.x-B.x,b=C.y-B.y,f){case 8:h>Math.abs(F)?(x=Math.abs(F)/h,h=Math.abs(F)):x=1;break;case 2:d>Math.abs(b)?(x=Math.abs(b)/d,d=Math.abs(b)):x=1;break;case 1:o>Math.abs(F)?(x=Math.abs(F)/o,o=Math.abs(F)):x=1;break;default:case 4:a>Math.abs(b)?(x=Math.abs(b)/a,a=Math.abs(b)):x=1;break}g=0}const M=Q.Id;if(i===2){let O=Q.qe.computeThickness();switch(O*=x,M.set(B),f){case 8:M.x=B.x+F/2+h/2-g-O/2;break;case 2:M.y=B.y+b/2+d/2-g-O/2;break;case 1:M.x=B.x+F/2-o/2+g+O/2;break;default:case 4:M.y=B.y+b/2-a/2+g+O/2;break}g+=O}else{let O=.5;i===1&&(O=(Q.Vd+1)/(Q.Af+1)),M.x=B.x+F*O,M.y=B.y+b*O}}T.e(n),T.e(s),T.e(r),T.e(A)}DO(e){for(let t=0;t<e.length;t++){const i=e[t];i!==null&&(i.k1=this.RO(i))}}RO(e){const t=e.qe,i=t.fromPort===this.ir,n=t.computeEndSegmentLength(this.pe,this.ir,q.None,i);let s=e.Vd;if(s<0)return n;const r=e.Af;if(r<=1||!t.isOrthogonal)return n;const A=e.N1,o=e.Id;(e.xe===2||e.xe===8)&&(s=r-1-s);const a=Xt.iO,h=e.xe===2||e.xe===4;return(h?A.y<o.y:A.x<o.x)?n+s*a:(h?A.y===o.y:A.x===o.x)?n:n+(r-1-s)*a}}class Ns{constructor(e,t,i){p(this,"qe");p(this,"Ht");p(this,"xe");p(this,"N1");p(this,"Vd");p(this,"Af");p(this,"Id");p(this,"k1");this.qe=e,this.Ht=t,this.xe=i,this.N1=new T,this.Vd=0,this.Af=0,this.Id=new T,this.k1=0}toString(){return this.qe.toString()+" "+this.Ht.toString()+" "+this.xe.toString()+":"+this.Vd.toString()+"/"+this.Af.toString()+" "+this.Id.toString()+" "+this.k1.toString()+" "+this.N1.toString()}}class Xn{constructor(){p(this,"wa");p(this,"xa");p(this,"ba");p(this,"ka");p(this,"Pa");p(this,"Sa");p(this,"E0");p(this,"O0");p(this,"B0");p(this,"I0");this.wa=q.Default,this.xa=q.Default,this.ba=NaN,this.ka=NaN,this.Pa=NaN,this.Sa=NaN,this.E0=null,this.O0=null,this.B0=1/0,this.I0=1/0}copy(){const e=new Xn;return e.wa=this.wa.N(),e.xa=this.xa.N(),e.ba=this.ba,e.ka=this.ka,e.Pa=this.Pa,e.Sa=this.Sa,e.E0=this.E0,e.O0=this.O0,e.B0=this.B0,e.I0=this.I0,e}}class Pn{constructor(){p(this,"L0");p(this,"A0");p(this,"T0");p(this,"C0");p(this,"wp");p(this,"xp");this.L0=-1/0,this.A0=0,this.T0=T.Lo,this.C0=0,this.wp="None",this.xp="None"}copy(){const e=new Pn;return e.L0=this.L0,e.A0=this.A0,e.T0=this.T0.N(),e.C0=this.C0,e.wp=this.wp,e.xp=this.xp,e}}class Vt extends Et{constructor(t,i){let n;t===void 0||t instanceof xe||typeof t=="string"?n=t:t&&(i=t);super(n);p(this,"zd");p(this,"Bt");p(this,"ga");p(this,"c0");p(this,"oi");p(this,"ne");this.B=this.B|4608,this.zd=new X,this.Bt=null,this.ne=new Ni,this.ne.group=this,this.ga=new X,this.c0=null,this.oi=null,i&&Object.assign(this,i)}cloneProtected(t){super.cloneProtected(t),this.B=this.B&-32769;const i=t.findInVisualTree(n=>n instanceof Fi);i instanceof Fi?t.Bt=i:t.Bt=null,this.ne!==null?(t.ne=this.ne.copy(),t.ne.group=t):(t.ne!==null&&(t.ne.group=null),t.ne=null),this.oi!==null&&(t.oi=this.oi.copy())}Xo(t){super.Xo(t);const i=t.findSubGraphParts(),n=t.memberParts;for(;n.next();){const s=n.value;if(s.c(),s.invalidateLayout(8),s.clearAdornments(),s instanceof Et)s.invalidateConnectedLinks(i);else if(s instanceof Xt){const r=s.labelNodes;for(;r.next();)r.value.invalidateConnectedLinks(i)}}}Zc(t,i,n,s,r,A,o){if(t===3&&i==="elements"){if(r instanceof Fi)this.Bt===null?this.Bt=r:this.Bt!==r&&u.o("Cannot insert a second Placeholder into the visual tree of a Group.");else if(r instanceof Kt){const a=r.findInVisualTree(h=>h instanceof Fi);a instanceof Fi&&(this.Bt===null?this.Bt=a:this.Bt!==a&&u.o("Cannot insert a second Placeholder into the visual tree of a Group."))}}else t===4&&i==="elements"&&this.Bt!==null&&(s===this.Bt?this.Bt=null:s instanceof Kt&&this.Bt.isContainedBy(s)&&(this.Bt=null));super.Zc(t,i,n,s,r,A,o)}_u(t,i){if(super._u(t,i),this.isClipping&&this.type!==Kt.Spot&&this.isSubGraphExpanded){let n=this.resizeObject;n instanceof Kt&&(n=n.findMainElement()),this.oi===null&&(this.oi=new it),n.getDocumentBounds(this.oi),n instanceof Zt&&this.oi.inflate(-n.strokeWidth,-n.strokeWidth)}}yh(t,i,n,s){this.hasPlaceholder()&&(this.Qo=this.placeholder),super.yh(t,i,n,s)}ensureBounds(){this.isSubGraphExpanded&&this.memberParts.each(t=>{t.ensureBounds()}),super.ensureBounds()}Zr(){if(!super.Zr())return!1;const t=this.memberParts;for(;t.next();){const i=t.value;if(i instanceof Et){if(!i.isVisible())continue;if(i.es())return!1}else if(i instanceof Xt){if(!i.isVisible())continue;if(i.es()&&i.fromNode!==this&&i.toNode!==this)return!1}}return!0}hasPlaceholder(){return this.Bt!==null&&this.Bt.isVisibleObject()&&this.isSubGraphExpanded}get placeholder(){return this.Bt}get computesBoundsAfterDrag(){return(this.B&2048)!==0}set computesBoundsAfterDrag(t){const i=(this.B&2048)!==0;i!==t&&(this.B=this.B^2048,this.t("computesBoundsAfterDrag",i,t))}get computesBoundsIncludingLinks(){return(this.B&4096)!==0}set computesBoundsIncludingLinks(t){const i=(this.B&4096)!==0;i!==t&&(this.B=this.B^4096,this.t("computesBoundsIncludingLinks",i,t))}get computesBoundsIncludingLocation(){return(this.B&8192)!==0}set computesBoundsIncludingLocation(t){const i=(this.B&8192)!==0;i!==t&&(this.B=this.B^8192,this.t("computesBoundsIncludingLocation",i,t))}get handlesDragDropForMembers(){return(this.B&16384)!==0}set handlesDragDropForMembers(t){const i=(this.B&16384)!==0;i!==t&&(this.B=this.B^16384,this.t("handlesDragDropForMembers",i,t))}get avoidableMembers(){return(this.B&131072)!==0}set avoidableMembers(t){const i=(this.B&131072)!==0;i!==t&&(this.B=this.B^131072,this.t("avoidableMembers",i,t))}get memberParts(){return this.zd.iterator}J2(t){if(this.zd.add(t)){t instanceof Vt&&this.ga.add(t);const n=this.memberAdded;if(n!==null){let s=!0;const r=this.diagram;r!==null&&(s=r.G,r.G=!0),n(this,t),r!==null&&(r.G=s)}(!this.isVisible()||!this.isSubGraphExpanded)&&t.Vi(!1)}if(t instanceof Xt&&!this.computesBoundsIncludingLinks)return;let i=this.Bt;i===null&&(i=this),i.c()}W2(t){if(this.zd.delete(t)){t instanceof Vt&&this.ga.delete(t);const n=this.memberRemoved;if(n!==null){let s=!0;const r=this.diagram;r!==null&&(s=r.G,r.G=!0),n(this,t),r!==null&&(r.G=s)}(!this.isVisible()||!this.isSubGraphExpanded)&&t.Vi(!0)}if(t instanceof Xt&&!this.computesBoundsIncludingLinks)return;let i=this.Bt;i===null&&(i=this),i.c()}Hc(){if(this.zd.count>0){const t=this.diagram;if(t!==null){const i=this.zd.copy().iterator;for(;i.next();){const n=i.value;t.remove(n)}}}super.Hc()}get layout(){return this.ne}set layout(t){const i=this.ne;if(i!==t){t!==null&&t.diagram!==null&&t.diagram.layout===t&&u.o("A layout cannot be both the Diagram.layout and a Group.layout: "+t),i!==null&&(i.diagram=null,i.group=null),this.ne=t;const n=this.diagram;t!==null&&(t.diagram=n,t.group=this),n!==null&&(n.Wr=!0),this.t("layout",i,t),n!==null&&n.requestUpdate()}}get memberAdded(){return this.yt!==null?this.yt.fy:null}set memberAdded(t){const i=this.memberAdded;i!==t&&(t!==null&&u.C(t,Vt,"memberAdded"),this.pl(),this.yt.fy=t,this.t("memberAdded",i,t))}get memberRemoved(){return this.yt!==null?this.yt.uy:null}set memberRemoved(t){const i=this.memberRemoved;i!==t&&(t!==null&&u.C(t,Vt,"memberRemoved"),this.pl(),this.yt.uy=t,this.t("memberRemoved",i,t))}get memberValidation(){return this.yt!==null?this.yt.ch:null}set memberValidation(t){const i=this.memberValidation;i!==t&&(t!==null&&u.C(t,Vt,"memberValidation"),this.pl(),this.yt.ch=t,this.t("memberValidation",i,t))}canAddMembers(t){const i=this.diagram;if(i===null)return!1;const n=i.commandHandler,s=n.l2(t).iterator;for(;s.next();){const r=s.value;if(!n.isValidMember(this,r))return!1}return!0}addMembers(t,i){const n=this.diagram;if(n===null)return!1;const s=n.commandHandler,r=s.l2(t);let A=!0;const o=r.iterator;for(;o.next();){const a=o.value;!i||s.isValidMember(this,a)?a.containingGroup=this:A=!1}return A}get ungroupable(){return(this.B&256)!==0}set ungroupable(t){const i=(this.B&256)!==0;i!==t&&(this.B=this.B^256,this.t("ungroupable",i,t))}canUngroup(){if(!this.ungroupable)return!1;const t=this.layer;if(t===null||!t.allowUngroup)return!1;const i=t.diagram;return!(i!==null&&!i.allowUngroup)}invalidateConnectedLinks(t){const i=this.vO();if(super.invalidateConnectedLinks(t),i)return;this.IL(!0);const n=this.findExternalLinksConnected();for(;n.next();){const s=n.value;if(t!==void 0&&t.has(s))continue;const r=s.fromNode;if(r!==null&&r!==this&&r.isMemberOf(this)&&!r.isVisible())r.$i(s.fromPort),r.$i(s.toPort),s.invalidateRoute();else{const A=s.toNode;A!==null&&A!==this&&A.isMemberOf(this)&&!A.isVisible()&&(A.$i(s.fromPort),A.$i(s.toPort),s.invalidateRoute())}}}findExternalLinksConnected(){const t=this.diagram!==null&&this.diagram.pM;if(t&&this.c0!==null)return this.c0.iterator;const i=this.findSubGraphParts();i.add(this);const n=new X,s=i.iterator;for(;s.next();){const r=s.value;if(!(r instanceof Et))continue;const A=r.linksConnected;for(;A.next();){const o=A.value;i.has(o)||n.add(o)}}return t&&(this.c0=n),n.iterator}findExternalNodesConnected(){const t=this.findSubGraphParts();t.add(this);const i=new X,n=t.iterator;for(;n.next();){const s=n.value;if(!(s instanceof Et))continue;const r=s.linksConnected;for(;r.next();){const A=r.value,o=A.fromNode;o!==null&&(!t.has(o)||o===this)&&i.add(o);const a=A.toNode;a!==null&&(!t.has(a)||a===this)&&i.add(a)}}return i.iterator}LE(){function t(n,s){n!==null&&(s.add(n),t(n.containingGroup,s))}const i=new X;return t(this,i),i}findSubGraphParts(){const t=new X;return Ce.fh(t,this,!0,0,!0),t.delete(this),t}Vi(t){super.Vi(t);const i=this.memberParts;for(;i.next();)i.value.Vi(t)}collapseSubGraph(){const t=this.diagram;if(t===null||t.isCollapsingExpanding)return;t.isCollapsingExpanding=!0;const i=this.findSubGraphParts();this.kT(i,t,this),t.isCollapsingExpanding=!1}kT(t,i,n){const s=this.memberParts;for(;s.next();){const r=s.value;if(r.Vi(!1),r instanceof Vt&&r.isSubGraphExpanded&&(r.wasSubGraphExpanded=r.isSubGraphExpanded,r.kT(t,i,n)),r instanceof Et)r.invalidateConnectedLinks(t),i.Dc(r,n);else if(r instanceof Xt){const A=r.labelNodes;for(;A.next();)A.value.invalidateConnectedLinks(t)}}this.isSubGraphExpanded=!1}expandSubGraph(){const t=this.diagram;if(t===null||t.isCollapsingExpanding)return;t.isCollapsingExpanding=!0;const i=this.findSubGraphParts();this.PT(i,t,this),t.isCollapsingExpanding=!1}PT(t,i,n){const s=this.memberParts;for(;s.next();){const r=s.value;if(r.Vi(!0),r instanceof Vt&&r.wasSubGraphExpanded&&(r.wasSubGraphExpanded=!1,r.PT(t,i,n)),r instanceof Et)r.invalidateConnectedLinks(t);else if(r instanceof Xt){const A=r.labelNodes;for(;A.next();)A.value.invalidateConnectedLinks(t)}}this.isSubGraphExpanded=!0}get isSubGraphExpanded(){return(this.B&512)!==0}set isSubGraphExpanded(t){const i=(this.B&512)!==0;if(i!==t){this.B=this.B^512;const n=this.diagram;this.t("isSubGraphExpanded",i,t);const s=this.subGraphExpandedChanged;if(s!==null){let r=!0;n!==null&&(r=n.G,n.G=!0),s(this),n!==null&&(n.G=r)}if(n!==null&&n.undoManager.isUndoingRedoing){this.Bt!==null&&this.Bt.c(),this.memberParts.each(r=>r.updateAdornments());return}t?this.expandSubGraph():this.collapseSubGraph()}}get wasSubGraphExpanded(){return(this.B&1024)!==0}set wasSubGraphExpanded(t){const i=(this.B&1024)!==0;i!==t&&(this.B=this.B^1024,this.t("wasSubGraphExpanded",i,t))}get subGraphExpandedChanged(){return this.yt!==null?this.yt.gy:null}set subGraphExpandedChanged(t){const i=this.subGraphExpandedChanged;i!==t&&(t!==null&&u.C(t,Vt,"subGraphExpandedChanged"),this.pl(),this.yt.gy=t,this.t("subGraphExpandedChanged",i,t))}move(t,i){i===void 0&&(i=!1);const n=i?this.location:this.position,s=n.x,r=n.y,A=t.x,o=t.y;if((s===A||isNaN(s)&&isNaN(A))&&(r===o||isNaN(r)&&isNaN(o)))return;const a=A-(isNaN(s)?0:s),h=o-(isNaN(r)?0:r),d=T.l();super.move(t,i);const f=new X,g=this.findSubGraphParts().iterator;for(;g.next();){const x=g.value;x instanceof Xt&&(x.suspendsRouting&&f.add(x),!(!x.Le&&(x.fromNode===this||x.toNode===this))&&(x.suspendsRouting=!0))}for(g.reset();g.next();){const x=g.value;if(x.vl()||x instanceof Et&&x.isLinkLabel)continue;const B=x.position,C=x.location;B.isReal()?(d.x=B.x+a,d.y=B.y+h,x.position=d):C.isReal()&&(d.x=C.x+a,d.y=C.y+h,x.location=d)}for(g.reset();g.next();){const x=g.value;if(!(x instanceof Xt)||(x.suspendsRouting=f.has(x),!x.Le&&(x.fromNode===this||x.toNode===this)))continue;const B=x.position;d.x=B.x+a,d.y=B.y+h,d.isReal()?x.move(d):x.invalidateRoute()}T.e(d)}vO(){return(this.B&65536)!==0}IL(t){(this.B&65536)!==0!==t&&(this.B=this.B^65536)}get tl(){return(this.B&32768)!==0}set tl(t){(this.B&32768)!==0!==t&&(this.B=this.B^32768)}}class Fi extends Ye{constructor(t){super();p(this,"_t");p(this,"Xd");this._t=Rt.Ig,this.Xd=new it(NaN,NaN,NaN,NaN),t&&Object.assign(this,t)}cloneProtected(t){super.cloneProtected(t),t._t=this._t.N(),t.Xd=this.Xd.copy()}ph(t){if(this.background===null)return!1;const i=this.naturalBounds;return it.contains(0,0,i.width,i.height,t.x,t.y)}Qu(t,i,n,s){const r=this.part;if((r===null||!(r instanceof Vt)&&!(r instanceof se))&&u.o("Placeholder is not inside a Group or Adornment."),r instanceof Vt){const A=this.computeBorder(this.Xd),o=this.minSize,a=isFinite(o.width)?Math.max(o.width,A.width):A.width,h=isFinite(o.height)?Math.max(o.height,A.height):A.height,d=this.Ki;d.zn(a||0,h||0),this.so(0,0,d.width,d.height);const f=r.memberParts;let g=!1;for(;f.next();)if(f.value.isVisible()){g=!0;break}const x=r.diagram;if(g&&x!==null&&!x.animationManager.TS(r)&&!isNaN(A.x)&&!isNaN(A.y)){const B=T.l();B.setRectSpot(A,r.locationSpot),r.location=B,T.e(B)}}else{const A=r,o=this.Ki,a=this._t,h=a.left+a.right,d=a.top+a.bottom,f=A.adornedObject,g=f.getDocumentAngle();A.angle=g;let x=0;f instanceof Zt&&(x=f.strokeWidth);const B=f.getDocumentScale(),C=f.naturalBounds,F=(C.width+x)*B,b=(C.height+x)*B;if(A.type!==Kt.Link){const L=A.category==="Selection"?q.TopLeft:A.locationSpot,Q=f.getDocumentPoint(L,T.l());A.location=Q,T.e(Q)}if(!isNaN(F)&&!isNaN(b))o.zn(F+h||0,b+d||0),this.so(-a.left,-a.top,o.width,o.height);else{const L=f.getDocumentPoint(q.TopLeft,T.l()),Q=it.Y(L.x,L.y,0,0);Q.unionPoint(f.getDocumentPoint(q.BottomRight,L)),Q.unionPoint(f.getDocumentPoint(q.TopRight,L)),Q.unionPoint(f.getDocumentPoint(q.BottomLeft,L)),o.zn(Q.width+h||0,Q.height+d||0),this.so(-a.left,-a.top,o.width,o.height),T.e(L),it.e(Q)}}}yh(t,i,n,s){this.actualBounds.i(t,i,n,s)}computeBorder(t){const i=this.part,n=i.diagram,s=n===null||!n.animationManager.isAnimating;if(n!==null&&i instanceof Vt&&!i.layer.isTemporary&&i.computesBoundsAfterDrag&&this.Xd.isReal()){const a=n.toolManager.findTool("Dragging");if(a===n.currentTool){const h=a.computeBorder(i,this.Xd,t);if(h!==null)return h}}const r=it.l(),A=this.computeMemberBounds(r),o=this._t;return i instanceof Vt&&!i.isSubGraphExpanded?t.i(A.x-o.left,A.y-o.top,0,0):t.i(A.x-o.left,A.y-o.top,Math.max(A.width+o.left+o.right,0),Math.max(A.height+o.top+o.bottom,0)),it.e(r),s&&i instanceof Vt&&i.computesBoundsIncludingLocation&&i.location.isReal()&&t.unionPoint(i.location),t}computeMemberBounds(t){if(!(this.part instanceof Vt))return t.i(0,0,0,0),t;const i=this.part;let n=1/0,s=1/0,r=-1/0,A=-1/0;const o=i.memberParts;for(;o.next();){const a=o.value;if(!a.isVisible()||a instanceof Xt&&(!i.computesBoundsIncludingLinks||a.Bo()||a.fromNode===i||a.toNode===i))continue;const h=a.actualBounds;h.left<n&&(n=h.left),h.top<s&&(s=h.top),h.right>r&&(r=h.right),h.bottom>A&&(A=h.bottom)}if(!isFinite(n)||!isFinite(s)){const a=i.location;t.i(a.x,a.y,0,0)}else t.i(n,s,r-n,A-s);return t}get padding(){return this._t}set padding(t){typeof t=="number"&&(t=new Rt(t));const i=this._t;i.equals(t)||(t=t.N(),this._t=t,this.t("padding",i,t),this.c())}}class Ni{constructor(e){p(this,"k");p(this,"ma");p(this,"Yd");p(this,"Lr");p(this,"Kd");p(this,"Gd");p(this,"Oo");p(this,"wl");p(this,"Hd");p(this,"jd");p(this,"wo");X.qi(this),this.k=null,this.ma=null,this.Yd=!0,this.Lr=!0,this.Kd=!1,this.Gd=new T(0,0).g(),this.Oo=!0,this.wl=null,this.Hd=null,this.jd=!1,this.wo=null,e&&Object.assign(this,e)}cloneProtected(e){e.Yd=this.Yd,e.Lr=this.Lr,e.Kd=this.Kd,e.Gd.a(this.Gd),e.Oo=this.Oo,e.wl=this.wl,e.Hd=this.Hd,e.jd=!0}copy(){const e=new this.constructor;return this.cloneProtected(e),e}li(e){}toString(){let e=u.Vn(this.constructor);return e+="(",this.group!==null&&(e+=" in "+this.group),this.diagram!==null&&(e+=" for "+this.diagram),e+=")",e}get diagram(){return this.k}set diagram(e){this.k=e}get group(){return this.ma}set group(e){this.ma!==e&&(this.ma=e,e!==null&&(this.k=e.diagram))}get isOngoing(){return this.Yd}set isOngoing(e){this.Yd!==e&&(u.s(e,"boolean",Ni,"isOngoing"),this.Yd=e)}get isInitial(){return this.Lr}set isInitial(e){u.s(e,"boolean",Ni,"isInitial"),this.Lr=e,e||(this.jd=!0)}get isViewportSized(){return this.Kd}set isViewportSized(e){this.Kd!==e&&(u.s(e,"boolean",Ni,"isViewportSized"),this.Kd=e,e&&this.invalidateLayout())}get isRouting(){return this.Oo}set isRouting(e){this.Oo!==e&&(u.s(e,"boolean",Ni,"isRouting"),this.Oo=e)}get isRealtime(){return this.wl}set isRealtime(e){this.wl!==e&&(e!==null&&u.s(e,"boolean",Ni,"isRealtime"),this.wl=e)}get isValidLayout(){return this.jd}set isValidLayout(e){if(this.jd!==e&&(u.s(e,"boolean",Ni,"isValidLayout"),this.jd=e,!e)){const t=this.diagram;t!==null&&(t.Wr=!0)}}invalidateLayout(){if(this.isValidLayout){const e=this.diagram;if(e===null||e.undoManager.isUndoingRedoing)return;const t=e.animationManager;if(t.isTicking)return;t.defaultAnimation.isAnimating&&t.stopAnimation(),(this.isOngoing&&e.Gh||this.isInitial&&!e.Gh)&&(this.isValidLayout=!1,e.requestUpdate())}}get network(){return this.wo}set network(e){this.wo!==e&&(this.wo=e,e!==null&&(e.layout=this))}createNetwork(){return new ps(this)}makeNetwork(e){const t=this.createNetwork();return e instanceof ge?(t.addParts(e.nodes,!0),t.addParts(e.links,!0)):e instanceof Vt?t.addParts(e.memberParts):t.addParts(e.iterator),t}updateParts(){this.isValidLayout=!0;let e=this.diagram;if(e===null&&this.network!==null){const t=this.network.vertexes.iterator;for(;t.next();){const i=t.value.node;if(i!==null&&(e=i.diagram,e!==null))break}}try{e!==null&&e.startTransaction("Layout"),this.commitLayout()}finally{e!==null&&e.commitTransaction("Layout")}}commitLayout(){if(this.network===null)return;const e=this.network.vertexes.iterator;for(;e.next();)e.value.commit();if(this.isRouting){const t=this.network.edges.iterator;for(;t.next();)t.value.commit()}}doLayout(e){const t=new X;if(e instanceof ge?(this.Th(t,e.nodes,!0,this.tl,!0,!1,!0),this.Th(t,e.parts,!0,this.tl,!0,!1,!0)):e instanceof Vt?this.Th(t,e.memberParts,!1,this.tl,!0,!1,!0):t.addAll(e.iterator),t.count>0){const i=this.diagram;i!==null&&i.startTransaction("Layout"),this.doMinimalNoNetworkLayout(t),i!==null&&i.commitTransaction("Layout")}this.isValidLayout=!0}doMinimalNoNetworkLayout(e){const t=e.count,i=Math.ceil(Math.sqrt(t));this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);const n=this.arrangementOrigin.x,s=this.arrangementOrigin.y;let r=n,A=s,o=0,a=0;const h=e.iterator;for(;h.next();){const d=h.value;d.ensureBounds();const f=d.measuredBounds,g=f.width,x=f.height;d.moveTo(r,A),d instanceof Vt&&(d.tl=!1),r+=Math.max(g,50)+20,a=Math.max(a,Math.max(x,50)),o>=i-1?(o=0,r=n,A+=a+20,a=0):o++}}doMinimalNetworkLayout(){const e=this.network.vertexes.count,t=Math.ceil(Math.sqrt(e));this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);const i=this.arrangementOrigin.x,n=this.arrangementOrigin.y;let s=i,r=n,A=0,o=0;const a=this.network.vertexes.iterator;for(;a.next();){const h=a.value.node;if(h===null||h instanceof Xt||(h.ensureBounds(),!this.tl(h)))continue;const d=h.measuredBounds,f=d.width,g=d.height;h.moveTo(s,r),h instanceof Vt&&(h.tl=!1),s+=Math.max(f,50)+20,o=Math.max(o,Math.max(g,50)),A>=t-1?(A=0,s=i,r+=o+20,o=0):A++}}tl(e){return!!(!e.location.isReal()&&!e.position.isReal()||e instanceof Vt&&e.tl)}Th(e,t,i,n,s,r,A){const o=t.iterator;for(;o.next();){const a=o.value;if(!(i&&!a.isTopLevel)&&!(n!==null&&!n(a))&&a.canLayout())if(s&&a instanceof Et){if(a.isLinkLabel)continue;a instanceof Vt&&a.layout===null?this.Th(e,a.memberParts,!1,n,s,r,A):(a.ensureBounds(),e.add(a))}else r&&a instanceof Xt?e.add(a):A&&a.Ne()&&!(a instanceof Et)&&(a.ensureBounds(),e.add(a))}}getLayoutBounds(e,t){const i=this.boundsComputation;return i!==null?(t||(t=new it),i(e,this,t)):!t&&e.margin.equalTo(0,0,0,0)?e.actualBounds:(t||(t=new it),t.set(e.actualBounds),t.addMargin(e.margin),t)}get boundsComputation(){return this.Hd}set boundsComputation(e){this.Hd!==e&&(e!==null&&u.C(e,Ni,"boundsComputation"),this.Hd=e,this.invalidateLayout())}collectParts(e){const t=new X;return e instanceof ge?(this.Th(t,e.nodes,!0,null,!0,!0,!0),this.Th(t,e.links,!0,null,!0,!0,!0),this.Th(t,e.parts,!0,null,!0,!0,!0)):e instanceof Vt?this.Th(t,e.memberParts,!1,null,!0,!0,!0):this.Th(t,e.iterator,!1,null,!0,!0,!0),t}get arrangementOrigin(){return this.Gd}set arrangementOrigin(e){this.Gd.equals(e)||(this.Gd.a(e),this.invalidateLayout())}initialOrigin(e){const t=this.group;if(t!==null)if(t.hasPlaceholder()){const i=t.placeholder,n=i.getDocumentPoint(q.TopLeft);(isNaN(n.x)||isNaN(n.y))&&n.set(e);const s=i.padding;return n.x+=s.left,n.y+=s.top,n}else{const i=t.position.copy();return(isNaN(i.x)||isNaN(i.y))&&i.set(e),i}return e}}class ps{constructor(e){p(this,"ne");p(this,"xo");p(this,"Tn");p(this,"by");p(this,"ky");X.qi(this),this.ne=e,this.xo=new X,this.Tn=new X,this.by=new xt,this.ky=new xt}clear(){if(this.xo){const e=this.xo.iterator;for(;e.next();)e.value.clear()}if(this.Tn){const e=this.Tn.iterator;for(;e.next();)e.value.clear()}this.xo=new X,this.Tn=new X,this.by=new xt,this.ky=new xt}toString(e){e===void 0&&(e=0);let t="LayoutNetwork"+(this.layout!==null?"("+this.layout.toString()+")":"");if(e<=0)return t;if(t+=" vertexes: "+this.xo.count+" edges: "+this.Tn.count,e>1){const i=this.xo.iterator;for(;i.next();){const s=i.value;t+=`
    `+s.toString(e-1)}const n=this.Tn.iterator;for(;n.next();){const s=n.value;t+=`
    `+s.toString(e-1)}}return t}get layout(){return this.ne}set layout(e){e!==null&&(this.ne=e)}get vertexes(){return this.xo}get edges(){return this.Tn}createVertex(){return new Qn(this)}createEdge(){return new pr(this)}addParts(e,t,i){if(e===null)return;t===void 0&&(t=!1),u.s(t,"boolean",ps,"addParts:toplevelonly"),i===void 0&&(i=null),i===null&&(i=s=>{if(s instanceof Et)return!s.isLinkLabel;if(s instanceof Xt){const r=s.fromNode;if(r===null||r.isLinkLabel)return!1;const A=s.toNode;return!(A===null||A.isLinkLabel)}return!1});const n=e.iterator;for(;n.next();){const s=n.value;if(s instanceof Et&&!(t&&!s.isTopLevel)&&s.canLayout()&&i(s))if(s instanceof Vt&&s.layout===null)this.addParts(s.memberParts,!1);else{if(this.findVertex(s)!==null)continue;const r=this.createVertex();r.node=s,this.addVertex(r)}}for(n.reset();n.next();){const s=n.value;if(!(s instanceof Xt)||t&&!s.isTopLevel||!s.canLayout()||!i(s)||this.findEdge(s)!==null)continue;const r=s.fromNode,A=s.toNode;if(r===null||A===null||r===A)continue;const o=this.findGroupVertex(r),a=this.findGroupVertex(A);this.linkVertexes(o,a,s)}}findGroupVertex(e){if(e===null)return null;const t=e.findVisibleNode();if(t===null)return null;let i=this.findVertex(t);if(i!==null)return i;let n=t.containingGroup;for(;n!==null;){if(i=this.findVertex(n),i!==null)return i;n=n.containingGroup}return null}addVertex(e){if(e===null)return;this.xo.add(e);const t=e.node;t!==null&&this.by.set(t,e),e.network=this}addNode(e){if(e===null)return null;let t=this.findVertex(e);return t===null&&(t=this.createVertex(),t.node=e,this.addVertex(t)),t}deleteVertex(e){if(e!==null&&this.ST(e)){let t=e.er;for(let i=t.count-1;i>=0;i--){const n=t.elt(i);this.deleteEdge(n)}t=e.sr;for(let i=t.count-1;i>=0;i--){const n=t.elt(i);this.deleteEdge(n)}}}ST(e){if(e===null)return!1;const t=this.xo.delete(e);if(t){const i=e.node;i!==null&&this.by.delete(i)}return t}deleteNode(e){if(e===null)return;const t=this.findVertex(e);t!==null&&this.deleteVertex(t)}findVertex(e){return e===null?null:this.by.get(e)}addEdge(e){if(e===null)return;this.gN(e);const t=e.toVertex;t!==null&&t.addSourceEdge(e);const i=e.fromVertex;i!==null&&i.addDestinationEdge(e)}gN(e){if(e===null)return;this.Tn.add(e);const t=e.link;t!==null&&this.findEdge(t)===null&&this.ky.set(t,e),e.network=this}addLink(e){if(e===null)return null;const t=e.fromNode,i=e.toNode;let n=this.findEdge(e);return n===null?(n=this.createEdge(),n.link=e,t!==null&&(n.fromVertex=this.addNode(t)),i!==null&&(n.toVertex=this.addNode(i)),this.addEdge(n)):(t!==null?n.fromVertex=this.addNode(t):n.fromVertex=null,i!==null?n.toVertex=this.addNode(i):n.toVertex=null),n}deleteEdge(e){if(e===null)return;const t=e.toVertex;t!==null&&t.deleteSourceEdge(e);const i=e.fromVertex;i!==null&&i.deleteDestinationEdge(e),this.mN(e)}mN(e){if(e===null)return!1;const t=this.Tn.delete(e);if(t){const i=e.link;i!==null&&this.ky.delete(i)}return t}deleteLink(e){if(e===null)return;const t=this.findEdge(e);t!==null&&this.deleteEdge(t)}findEdge(e){return e===null?null:this.ky.get(e)}linkVertexes(e,t,i){if(e===null||t===null)return null;if(e.network===this&&t.network===this){const n=this.createEdge();return n.link=i,n.fromVertex=e,n.toVertex=t,this.addEdge(n),n}return null}reverseEdge(e){if(e===null)return;const t=e.fromVertex,i=e.toVertex;t===null||i===null||(t.deleteDestinationEdge(e),i.deleteSourceEdge(e),e.reverseEdge(),t.addSourceEdge(e),i.addDestinationEdge(e))}deleteSelfEdges(){const e=u.ht(),t=this.Tn.iterator;for(;t.next();){const n=t.value;n.fromVertex===n.toVertex&&e.push(n)}const i=e.length;for(let n=0;n<i;n++)this.deleteEdge(e[n]);u.et(e)}deleteArtificialVertexes(){const e=u.ht(),t=this.xo.iterator;for(;t.next();){const r=t.value;r.node===null&&r.data===null&&e.push(r)}let i=e.length;for(let r=0;r<i;r++)this.deleteVertex(e[r]);const n=u.ht(),s=this.Tn.iterator;for(;s.next();){const r=s.value;r.link===null&&r.data===null&&n.push(r)}i=n.length;for(let r=0;r<i;r++)this.deleteEdge(n[r]);u.et(e),u.et(n)}deleteUselessEdges(){const e=u.ht(),t=this.Tn.iterator;for(;t.next();){const n=t.value;(n.fromVertex===null||n.toVertex===null)&&e.push(n)}const i=e.length;for(let n=0;n<i;n++)this.deleteEdge(e[n]);u.et(e)}isSingleton(e){return!(e.er.count>0||e.sr.count>0)}splitIntoSubNetworks(e){e===void 0&&(e=!0),e&&(this.deleteArtificialVertexes(),this.deleteUselessEdges(),this.deleteSelfEdges());const t=new H;let i=!0;for(;i;){i=!1;const n=this.xo.iterator;for(;n.next();){const s=n.value;if(this.isSingleton(s))continue;const r=this.layout.createNetwork();t.add(r),this.OO(r,s),i=!0;break}}return t.sort((n,s)=>n===null||s===null||n===s?0:s.vertexes.count-n.vertexes.count),t}OO(e,t){if(t===null)return;const i=new H;for(i.add(t);i.count>0;){const n=i.first();if(i.removeAt(0),n.network===e)continue;this.ST(n),e.addVertex(n);let s=n.sourceEdges;for(;s.next();){const r=s.value;r.network!==e&&(this.mN(r),e.gN(r),i.add(r.fromVertex))}for(s=n.destinationEdges;s.next();){const r=s.value;r.network!==e&&(this.mN(r),e.gN(r),i.add(r.toVertex))}}}findAllParts(){const e=new X,t=this.xo.iterator;for(;t.next();){const n=t.value;e.add(n.node)}const i=this.Tn.iterator;for(;i.next();){const n=i.value;e.add(n.link)}return e}}class Qn{constructor(e){p(this,"wo");p(this,"ii");p(this,"pe");p(this,"De");p(this,"We");p(this,"er");p(this,"sr");X.qi(this),this.wo=e,this.De=new it(0,0,10,10).g(),this.We=new T(5,5).g(),this.ii=null,this.pe=null,this.er=new H,this.sr=new H}clear(){this.ii=null,this.pe=null,this.er=new H,this.sr=new H}toString(e){e===void 0&&(e=0);let t="LayoutVertex#"+X.us(this);if(e>0&&(t+=this.node!==null?"("+this.node.toString()+")":"",e>1)){let i="",n=!0,s=this.er.iterator;for(;s.next();){const A=s.value;n?n=!1:i+=",",i+=A.toString(0)}let r="";for(n=!0,s=this.sr.iterator;s.next();){const A=s.value;n?n=!1:r+=",",r+=A.toString(0)}t+=" sources: "+i+" destinations: "+r}return t}get bo(){return this.er.oC}get nr(){return this.sr.oC}get data(){return this.ii}set data(e){if(this.ii=e,e!==null&&e.bounds){const t=e.bounds,i=t.x,n=t.y,s=t.width,r=t.height;this.We.i(s/2,r/2),this.De.i(i,n,s,r)}}get node(){return this.pe}set node(e){if(this.pe!==e){this.pe=e,e.ensureBounds();const t=this.network.layout,i=it.l(),n=t.getLayoutBounds(e,i);let s=n.x,r=n.y;const A=n.width,o=n.height;if(isNaN(s)&&(s=0),isNaN(r)&&(r=0),this.De.i(s,r,A,o),it.e(i),!(e instanceof Vt)){const a=e.locationObject.getDocumentPoint(q.Center);if(a.isReal()){this.We.i(a.x-s,a.y-r);return}}this.We.i(A/2,o/2)}}get bounds(){return this.De}set bounds(e){this.De.equals(e)||this.De.a(e)}get focus(){return this.We}set focus(e){this.We.equals(e)||this.We.a(e)}get centerX(){return this.De.x+this.We.x}set centerX(e){const t=this.De;t.x+this.We.x!==e&&(t.Tt(),t.x=e-this.We.x,t.g())}get centerY(){return this.De.y+this.We.y}set centerY(e){const t=this.De;t.y+this.We.y!==e&&(t.Tt(),t.y=e-this.We.y,t.g())}get focusX(){return this.We.x}set focusX(e){const t=this.We;t.x!==e&&(t.Tt(),t.x=e,t.g())}get focusY(){return this.We.y}set focusY(e){const t=this.We;t.y!==e&&(t.Tt(),t.y=e,t.g())}get x(){return this.De.x}set x(e){const t=this.De;t.x!==e&&(t.Tt(),t.x=e,t.g())}get y(){return this.De.y}set y(e){const t=this.De;t.y!==e&&(t.Tt(),t.y=e,t.g())}get width(){return this.De.width}set width(e){const t=this.De;t.width!==e&&(t.Tt(),t.width=e,t.g())}get height(){return this.De.height}set height(e){const t=this.De;t.height!==e&&(t.Tt(),t.height=e,t.g())}commit(){const e=this.ii;if(e!==null){const i=this.bounds,n=e.bounds;u.j(n)?(n.x=i.x,n.y=i.y,n.width=i.width,n.height=i.height):e.bounds=i.copy();return}const t=this.node;if(t!==null){const i=this.bounds;if(!(t instanceof Vt)){const n=it.l();t.ensureBounds();const s=this.network.layout.getLayoutBounds(t,n),r=t.locationObject.getDocumentPoint(q.Center);if(s.isReal()&&r.isReal()){t.moveTo(i.x+this.focusX-(r.x-s.x)+t.margin.left,i.y+this.focusY-(r.y-s.y+t.margin.top)),it.e(n);return}it.e(n)}t.moveTo(i.x+t.margin.left,i.y+t.margin.top)}}addSourceEdge(e){e!==null&&(this.er.has(e)||this.er.add(e))}deleteSourceEdge(e){e!==null&&this.er.delete(e)}addDestinationEdge(e){e!==null&&(this.sr.has(e)||this.sr.add(e))}deleteDestinationEdge(e){e!==null&&this.sr.delete(e)}get network(){return this.wo}set network(e){this.wo=e}get sourceVertexes(){const e=new X,t=this.sourceEdges;for(;t.next();){const i=t.value;e.add(i.fromVertex)}return e.iterator}get destinationVertexes(){const e=new X,t=this.destinationEdges;for(;t.next();){const i=t.value;e.add(i.toVertex)}return e.iterator}get vertexes(){const e=new X;let t=this.sourceEdges;for(;t.next();){const i=t.value;e.add(i.fromVertex)}for(t=this.destinationEdges;t.next();){const i=t.value;e.add(i.toVertex)}return e.iterator}get sourceEdges(){return this.er.iterator}get destinationEdges(){return this.sr.iterator}get edges(){const e=new H;let t=this.sourceEdges;for(;t.next();){const i=t.value;e.add(i)}for(t=this.destinationEdges;t.next();){const i=t.value;e.add(i)}return e.iterator}get edgesCount(){return this.er.count+this.sr.count}static standardComparer(e,t){const i=e.pe,n=t.pe;if(i)if(n){const s=i.text,r=n.text;return s<r?-1:s>r?1:0}else return 1;else return n!==null?-1:0}static smartComparer(e,t){if(e!==null)if(t!==null){const i=e.pe,n=t.pe;if(i!==null)if(n!==null){const s=i.text.toLocaleLowerCase(),r=n.text.toLocaleLowerCase(),A=s.split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/),o=r.split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/);let a=0;for(;a<A.length;a++)if(o[a]!==""&&o[a]!==void 0){const h=parseFloat(A[a]),d=parseFloat(o[a]);if(isNaN(h))if(isNaN(d)){if(A[a].localeCompare(o[a])!==0)return A[a].localeCompare(o[a]);continue}else return 1;else{if(isNaN(d))return-1;if(h-d!==0)return h-d;continue}}else{if(A[a]==="")continue;return 1}return o[a]!==""&&o[a]!==void 0?-1:0}else return 1;else return n!==null?-1:0}else return 1;else return t!==null?-1:0}}class pr{constructor(e){p(this,"wo");p(this,"ii");p(this,"qe");p(this,"Je");p(this,"$e");X.qi(this),this.wo=e,this.ii=null,this.qe=null,this.Je=null,this.$e=null}clear(){this.ii=null,this.qe=null,this.Je=null,this.$e=null}toString(e){e===void 0&&(e=0);let t="LayoutEdge#"+X.us(this);return e>0&&(t+=this.qe!==null?"("+this.qe.toString()+")":"",e>1&&(t+=" "+(this.Je?this.Je.toString():"null")+" --> "+(this.$e?this.$e.toString():"null"))),t}reverseEdge(){const e=this.Je;this.Je=this.$e,this.$e=e}commit(){}getOtherVertex(e){return this.$e===e?this.Je:this.Je===e?this.$e:null}get network(){return this.wo}set network(e){this.wo=e}get data(){return this.ii}set data(e){this.ii!==e&&(this.ii=e)}get link(){return this.qe}set link(e){this.qe!==e&&(this.qe=e)}get fromVertex(){return this.Je}set fromVertex(e){this.Je!==e&&(this.Je=e)}get toVertex(){return this.$e}set toVertex(e){this.$e!==e&&(this.$e=e)}}var DA=(k=>(k[k.Position=0]="Position",k[k.Location=1]="Location",k))(DA||{}),mr=(k=>(k[k.LeftToRight=10]="LeftToRight",k[k.RightToLeft=11]="RightToLeft",k))(mr||{}),IA=(k=>(k[k.Forwards=20]="Forwards",k[k.Reverse=21]="Reverse",k[k.Ascending=22]="Ascending",k[k.Descending=23]="Descending",k))(IA||{});const Nn=class Nn extends Ni{constructor(t){super();p(this,"qd");p(this,"Wd");p(this,"Do");p(this,"Dn");p(this,"ci");p(this,"Gi");p(this,"be");p(this,"ke");this.isViewportSized=!0,this.qd=NaN,this.Wd=NaN,this.Do=new ct(NaN,NaN).g(),this.Dn=new ct(10,10).g(),this.ci=1,this.Gi=10,this.be=22,this.ke=Nn.standardComparer,t&&Object.assign(this,t)}cloneProtected(t){super.cloneProtected(t),t.qd=this.qd,t.Wd=this.Wd,t.Do.a(this.Do),t.Dn.a(this.Dn),t.ci=this.ci,t.Gi=this.Gi,t.be=this.be,t.ke=this.ke}li(t){t in IA?this.sorting=t:t in mr?this.arrangement=t:t in DA?this.alignment=t:super.li(t)}doLayout(t){this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);const i=this.collectParts(t),n=this.diagram,s=i.copy().iterator;for(;s.next();){const B=s.value;if(B.vl()&&(B.fromNode!==null||B.toNode!==null)){i.delete(B);continue}if(B.ensureBounds(),B instanceof Vt){const C=B.memberParts;for(;C.next();){const F=C.value;i.delete(F)}}}const r=i.toArray();if(r.length===0)return;switch(this.sorting){case 20:break;case 21:r.reverse();break;case 22:r.sort(this.comparer);break;case 23:r.sort(this.comparer),r.reverse();break}let A=this.wrappingColumn;isNaN(A)&&(A=0);let o=this.wrappingWidth;if(isNaN(o)&&n!==null){const B=n.viewportBounds,C=n.padding;o=Math.max(B.width-C.left-C.right,0)}else o=Math.max(this.wrappingWidth,0);A<=0&&o<=0&&(A=1);let a=this.spacing.width;isFinite(a)||(a=0);let h=this.spacing.height;isFinite(h)||(h=0),n!==null&&n.startTransaction("Layout");const d=[];switch(this.alignment){case 0:this.IO(r,o,A,a,h,d);break;case 1:this.EO(r,o,A,a,h,d);break}let f=0,g=0,x=0;for(let B=0;B<d.length;B++){const C=d[B];f=Math.min(f,C.x),g=Math.min(g,C.y),x=Math.max(x,C.x+C.width)}this.arrangement===11?this.commitLayers(d,new T(f+a/2-(x+f),g-h/2)):this.commitLayers(d,new T(f-a/2,g-h/2)),n!==null&&n.commitTransaction("Layout"),this.isValidLayout=!0}IO(t,i,n,s,r,A){const o=it.l();let a=Math.max(this.cellSize.width,1);if(!isFinite(a)){a=0;for(let b=0;b<t.length;b++){const L=t[b],Q=this.getLayoutBounds(L,o);a=Math.max(a,Q.width)}}a+=s,a=Math.max(a,1);let h=Math.max(this.cellSize.height,1);if(!isFinite(h)){h=0;for(let b=0;b<t.length;b++){const L=t[b],Q=this.getLayoutBounds(L,o);h=Math.max(h,Q.height)}}h+=r,h=Math.max(h,1);const d=this.arrangement,f=this.arrangementOrigin.x,g=this.arrangementOrigin.y;let x=f,B=g,C=0,F=0;for(let b=0;b<t.length;b++){const L=t[b],Q=this.getLayoutBounds(L,o),M=Math.ceil((Q.width+s)/a),O=Math.ceil((Q.height+r)/h),D=M*a,K=O*h;let J=0;switch(d){case 11:J=Math.abs(x-Q.width);break;default:J=x+Q.width;break}(n>0&&C>n-1||i>0&&C>0&&J-f>i)&&(A.push(new it(0,B,i+s,F)),C=0,x=f,B+=F,F=0),F=Math.max(F,K);let R=0;switch(d){case 11:R=-Q.width;break;default:R=0;break}switch(L.moveTo(x+R+L.margin.left,B+L.margin.top),d){case 11:x-=D;break;default:x+=D;break}C++}A.push(new it(0,B,i+s,F)),it.e(o)}EO(t,i,n,s,r,A){const o=it.l();let a=Math.max(this.cellSize.width,1),h=0,d=0,f=0;const g=T.l();for(let R=0;R<t.length;R++){const G=t[R],W=this.getLayoutBounds(G,o),Y=G.getRelativePoint(G.locationObject,G.locationSpot,g);h=Math.max(h,Y.x),d=Math.max(d,W.width-Y.x),f=Math.max(f,Y.y)}const x=this.arrangement;switch(x){case 11:h+=s;break;default:d+=s;break}isFinite(a)?a=Math.max(a+s,1):a=Math.max(h+d,1);const B=this.arrangementOrigin.x,C=this.arrangementOrigin.y;let F=B,b=C,L=0;i>=h&&(i-=h);let Q=0,M=0;const O=Math.max(this.cellSize.height,1);f=0;let D=0,K=!0;const J=T.l();for(let R=0;R<t.length;R++){const G=t[R],W=this.getLayoutBounds(G,o),Y=G.getRelativePoint(G.locationObject,G.locationSpot,g);if(L>0)switch(x){case 11:{let et=(F-B-(W.width-Y.x))/a;V.K(Math.round(et),et)?et=Math.round(et):et=Math.floor(et),F=et*a+B;break}default:{let et=(F-B+Y.x)/a;V.K(Math.round(et),et)?et=Math.round(et):et=Math.ceil(et),F=et*a+B;break}}else switch(x){case 11:Q=F+Y.x+W.width;break;default:Q=F-Y.x;break}let Z=0;switch(x){case 11:Z=-(F+Y.x)+Q;break;default:Z=F+W.width-Y.x-Q;break}if(n>0&&L>n-1||i>0&&L>0&&Z>i){A.push(new it(0,K?b-f:b,i+s,D+f+r));for(let et=0;et<L&&R!==L;et++){const At=t[R-L+et],ht=At.getRelativePoint(At.locationObject,At.locationSpot,J);At.moveTo(At.position.x,At.position.y+f-ht.y)}D+=r,K?b+=D:b+=D+f,f=0,D=0,L=0,F=B,K=!1}switch(F===B&&(x===11?M=Math.max(M,W.width-Y.x):M=Math.min(M,-Y.x)),f=Math.max(f,Y.y),D=Math.max(D,W.height-Y.y),isFinite(O)&&(D=Math.max(D,Math.max(W.height,O)-Y.y)),K?G.moveTo(F-Y.x,b-Y.y):G.moveTo(F-Y.x,b),x){case 11:F-=Y.x+s;break;default:F+=W.width-Y.x+s;break}L++}if(A.push(new it(0,b,i+s,(K?D:D+f)+r)),t.length!==L)for(let R=0;R<L;R++){const G=t[t.length-L+R],W=G.getRelativePoint(G.locationObject,G.locationSpot,g);G.moveTo(G.position.x,G.position.y+f-W.y)}if(T.e(g),T.e(J),x===11)for(let R=0;R<A.length;R++){const G=A[R];G.width+=M,G.x-=M}else for(let R=0;R<A.length;R++){const G=A[R];G.x>M&&(G.width+=G.x-M,G.x=M)}it.e(o)}commitLayers(t,i){}get wrappingWidth(){return this.qd}set wrappingWidth(t){this.qd!==t&&(t>0||isNaN(t))&&(this.qd=t,this.isViewportSized=isNaN(t),this.invalidateLayout())}get wrappingColumn(){return this.Wd}set wrappingColumn(t){this.Wd!==t&&(t>0||isNaN(t))&&(this.Wd=t,this.invalidateLayout())}get cellSize(){return this.Do}set cellSize(t){this.Do.equals(t)||(this.Do.a(t),this.invalidateLayout())}get spacing(){return this.Dn}set spacing(t){this.Dn.equals(t)||(this.Dn.a(t),this.invalidateLayout())}get alignment(){return this.ci}set alignment(t){this.ci!==t&&(t===1||t===0)&&(this.ci=t,this.invalidateLayout())}get arrangement(){return this.Gi}set arrangement(t){this.Gi!==t&&(t===10||t===11)&&(this.Gi=t,this.invalidateLayout())}get sorting(){return this.be}set sorting(t){this.be!==t&&(t===20||t===21||t===22||t===23)&&(this.be=t,this.invalidateLayout())}get comparer(){return this.ke}set comparer(t){this.ke!==t&&(this.ke=t,this.invalidateLayout())}static standardComparer(t,i){const n=t.text,s=i.text;return n<s?-1:n>s?1:0}static smartComparer(t,i){if(t!==null)if(i!==null){const n=t.text.toLocaleLowerCase(),s=i.text.toLocaleLowerCase(),r=n.split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/),A=s.split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/);let o=0;for(;o<r.length;o++)if(A[o]!==""&&A[o]!==void 0){const a=parseFloat(r[o]),h=parseFloat(A[o]);if(isNaN(a))if(isNaN(h)){if(r[o].localeCompare(A[o])!==0)return r[o].localeCompare(A[o]);continue}else return 1;else{if(isNaN(h))return-1;if(a-h!==0)return a-h;continue}}else{if(r[o]==="")continue;return 1}return A[o]!==""&&A[o]!==void 0?-1:0}else return 1;else return i!==null?-1:0}};p(Nn,"Position",0),p(Nn,"Location",1),p(Nn,"LeftToRight",10),p(Nn,"RightToLeft",11),p(Nn,"Forward",20),p(Nn,"Reverse",21),p(Nn,"Ascending",22),p(Nn,"Descending",23);let OA=Nn;const En=class En{constructor(){p(this,"Jd");p(this,"Zs");p(this,"Dt");p(this,"ko");p(this,"$d");p(this,"Zd");p(this,"k");p(this,"pN");this.Jd=new X,this.Zs=new X,this.Dt=new X,this.ko=new xt,this.$d=new xt,this.Zd=new xt,this.k=null,this.pN=!1}clear(){this.Jd.clear(),this.Zs.clear(),this.Dt.clear(),this.ko.clear(),this.$d.clear(),this.Zd.clear()}Ro(e){this.k=e}ta(e){if(e instanceof Et){if(this.Jd.add(e),e instanceof Vt){const i=e.containingGroup;i===null?this.k.Jr.add(e):i.ga.add(e);const n=e.layout;n!==null&&(n.diagram=this.k)}}else e instanceof Xt?(this.Zs.add(e),e.isAvoiding&&(this.k.Ym=!0)):e instanceof se||this.Dt.add(e);const t=e.data;t!==null&&(e instanceof se||(e instanceof Xt?this.MT(t,e):this.ko.set(t,e)))}se(e){if(e.clearAdornments(),e instanceof Et){if(this.Jd.delete(e),e instanceof Vt){const i=e.containingGroup;i===null?this.k.Jr.delete(e):i.ga.delete(e);const n=e.layout;n!==null&&(n.diagram=null)}}else e instanceof Xt?this.Zs.delete(e):e instanceof se||this.Dt.delete(e);const t=e.data;t!==null&&(e instanceof se||(e instanceof Xt?this.NT(t,e):this.ko.delete(t)))}MT(e,t){this.$d.set(e,t)}NT(e,t){this.$d.delete(e)}rebuildParts(){const e=this.k;if(e===null)return;const t=e.nodeTemplateMap.iterator;for(;t.next();){const g=t.value,x=t.key;(!g.Ne()||g instanceof Vt)&&u.o(`Invalid node template in Diagram.nodeTemplateMap: template for "${x}" must be a Node or a simple Part, not a Group or Link: ${g}`)}const i=e.groupTemplateMap.iterator;for(;i.next();){const g=i.value,x=i.key;g instanceof Vt||u.o(`Invalid group template in Diagram.groupTemplateMap: template for "${x}" must be a Group, not a normal Node or Link: ${g}`)}const n=e.linkTemplateMap.iterator;for(;n.next();){const g=n.value,x=n.key;g instanceof Xt||u.o(`Invalid link template in Diagram.linkTemplateMap: template for "${x}" must be a Link, not a normal Node or simple Part: ${g}`)}const s=u.ht(),r=e.selection.iterator;for(;r.next();){const g=r.value.data;g&&s.push(g)}const A=u.ht(),o=e.highlighteds.iterator;for(;o.next();){const g=o.value.data;g&&A.push(g)}const a=u.ht(),h=this.nodes.iterator;for(;h.next();){const g=h.value;g.data!==null&&(a.push(g.data),a.push(g.location))}const d=this.links.iterator;for(;d.next();){const g=d.value;g.data!==null&&(a.push(g.data),a.push(g.location))}const f=this.parts.iterator;for(;f.next();){const g=f.value;g.data!==null&&(a.push(g.data),a.push(g.location))}this.CT(),this.FM();for(let g=0;g<s.length;g++){const x=this.findPartForData(s[g]);x!==null&&(x.isSelected=!0)}for(let g=0;g<A.length;g++){const x=this.findPartForData(A[g]);x!==null&&(x.isHighlighted=!0)}for(let g=0;g<a.length;g+=2){const x=this.findPartForData(a[g]);x!==null&&(x.location=a[g+1])}u.et(s),u.et(A),u.et(a)}FM(){const e=this.diagram.model;this.Py(e.nodeDataArray)}Py(e,t){const i=this.diagram.model;e.forEach(n=>{i.containsNodeData(n)&&this.LT(n,!1)}),e.forEach(n=>{i.containsNodeData(n)&&this.C1(n)}),t!==!1&&this.diagram.kb(!1)}LT(e,t){if(e==null||this.diagram.undoManager.isUndoingRedoing||this.ko.has(e))return null;t===void 0&&(t=!0);const i=this.BO(e);return i!==null&&t&&this.C1(e),i}BO(e){if(e==null||this.k.undoManager.isUndoingRedoing||this.ko.has(e))return null;const t=this.UO(e),i=this.findTemplateForNodeData(e,t);if(i!==null){i.Xt();const n=i.copy();if(n!==null){const s=this.diagram.ge;return this.diagram.ge=!0,n.Jo=t,n.ii=e,this.addsToTemporaryLayer&&(n.dl="Tool"),this.diagram.add(n),n.ii=null,n.data=e,this.diagram.ge=s,n}}return null}insertLink(e,t,i,n){return null}C1(e){}UO(e){return this.k.model.getCategoryForNodeData(e)}findTemplateForNodeData(e,t){const i=this.k,n=i.model,s=n.$c()&&n.isGroupForData(e);let r=null;return s?(r=i.groupTemplateMap.get(t),r===null&&(r=i.groupTemplateMap.get(""),r===null&&(En.TT||(En.TT=!0,u.ri('No Group template found for category "'+t+'"'),u.ri("  Using default group template")),r=i.aM))):(r=i.nodeTemplateMap.get(t),r===null&&(r=i.nodeTemplateMap.get(""),r===null&&(En.AT||(En.AT=!0,u.ri('No Node template found for category "'+t+'"'),u.ri("  Using default node template")),r=i.rM))),r}getLinkCategoryForData(e){return""}setLinkCategoryForData(e,t){}setFromNodeForLink(e,t,i){}setToNodeForLink(e,t,i){}findLinkTemplateForCategory(e){const t=this.k;let i=t.linkTemplateMap.get(e);return i===null&&(i=t.linkTemplateMap.get(""),i===null&&(En.DT||(En.DT=!0,u.ri('No Link template found for category "'+e+'"'),u.ri("  Using default link template")),i=t.lM)),i}Cv(e,t,i){e instanceof Xt?(t!==null&&this.NT(t,e),i!==null&&this.MT(i,e)):e instanceof Ce&&(t!==null&&this.ko.delete(t),i!==null&&this.ko.set(i,e))}CT(){const e=this.diagram.model;this.yN(e.nodeDataArray)}yN(e){e.forEach(t=>{this.L1(t)})}L1(e){const t=this.findPartForData(e);t!==null&&(this.diagram.AM(t,!1),this.wN(t))}wN(e){}hN(e){}findPartForKey(e){if(e==null)return null;const t=this.diagram.model.findNodeDataForKey(e);return t!==null?this.ko.get(t):null}findNodeForKey(e){if(e==null)return null;const t=this.diagram.model.findNodeDataForKey(e);if(t===null)return null;const i=this.ko.get(t);return i instanceof Et?i:null}findLinkForKey(e){return null}findPartForData(e){if(e===null)return null;let t=this.ko.get(e);return t!==null||(t=this.$d.get(e)),t}findNodeForData(e){if(e===null)return null;const t=this.ko.get(e);return t instanceof Et?t:null}findLinkForData(e,t){return e===null?null:this.$d.get(e)}findNodesByExample(...e){const t=new X,i=this.Jd.iterator;for(;i.next();){const n=i.value,s=n.data;if(s!==null)for(let r=0;r<arguments.length;r++){const A=arguments[r];if(u.j(A)&&this.xN(s,A)){t.add(n);break}}}return t.iterator}findLinksByExample(...e){const t=new X,i=this.Zs.iterator;for(;i.next();){const n=i.value,s=n.data;if(s!==null)for(let r=0;r<arguments.length;r++){const A=arguments[r];if(u.j(A)&&this.xN(s,A)){t.add(n);break}}}return t.iterator}xN(e,t){for(const i in t){const n=e[i],s=t[i];if(Array.isArray(s)){if(!Array.isArray(n))return!1;const r=n,A=s;if(r.length<A.length)return!1;for(let o=0;o<r.length;o++){const a=r[o],h=A[o];if(h!==void 0&&!this.FT(a,h))return!1}}else if(!this.FT(n,s))return!1}return!0}FT(e,t){if(u.lt(t)){if(!t(e))return!1}else if(t instanceof RegExp){if(!e||!t.test(e.toString()))return!1}else if(u.j(e)&&u.j(t)){if(!this.xN(e,t))return!1}else if(e!==t)return!1;return!0}doModelDataChanged(e){if(e.model===this.diagram.model&&this.diagram.G){this.diagram.G=!1;try{const t=e.change;e.modelChange===""&&t===2&&this.Sy(e.object,e.propertyName)}finally{this.diagram.G=!0}}}doModelChanged(e){if(!this.k)return;const t=this.k;if(e.model!==t.model)return;const i=e.change;if(t.AR(e),!!t.G){t.G=!1;try{const n=e.modelChange;if(n!=="")if(i===2){if(n==="nodeCategory"){const s=e.object,r=this.findPartForData(s),A=e.newValue;r!==null&&typeof A=="string"&&(r.category=A)}else if(n==="nodeDataArray"){const s=e.oldValue;this.yN(s);const r=e.newValue;this.Py(r)}t.isModified=!0}else if(i===3){const s=e.newValue;n==="nodeDataArray"&&u.j(s)&&this.LT(s),t.isModified=!0}else if(i===4){const s=e.oldValue;n==="nodeDataArray"&&u.j(s)&&this.L1(s),t.isModified=!0}else i===1&&(n==="SourceChanged"?e.object!==null?this.Sy(e.object,e.propertyName):(this.updateAllRelationshipsFromData(),this.updateAllTargetBindings()):n==="ModelDisplaced"&&this.rebuildParts());else if(i===2){const s=e.propertyName,r=e.object,A=t.model;r===A?(s==="nodeKeyProperty"||s==="nodeCategoryProperty")&&(t.undoManager.isUndoingRedoing||this.rebuildParts()):this.Sy(r,s),t.isModified=!0}else(i===3||i===4)&&(this.VO(e,t.model),t.isModified=!0)}finally{t.G=!0}}}updateAllTargetBindings(e){e===void 0&&(e="");let t=this.parts.iterator;for(;t.next();)t.value.updateTargetBindings(e);for(t=this.nodes.iterator;t.next();)t.value.updateTargetBindings(e);for(t=this.links.iterator;t.next();)t.value.updateTargetBindings(e)}updateAllThemeBindings(){let e=this.parts.iterator;for(;e.next();)e.value.Uo();for(e=this.nodes.iterator;e.next();)e.value.Uo();for(e=this.links.iterator;e.next();)e.value.Uo()}updateAllRelationshipsFromData(){const e=this.k.model,t=new X,i=e.nodeDataArray;for(let r=0;r<i.length;r++){const A=i[r];t.add(A)}const n=[];this.nodes.each(r=>{r.data!==null&&!t.has(r.data)&&n.push(r.data)}),this.parts.each(r=>{r.data!==null&&!t.has(r.data)&&n.push(r.data)}),n.forEach(r=>e.RT(r,!1));for(let r=0;r<i.length;r++){const A=i[r];this.findPartForData(A)===null&&e.vT(A,!1)}this.OT();let s=this.parts.iterator;for(;s.next();)s.value.updateRelationshipsFromData();for(s=this.nodes.iterator;s.next();)s.value.updateRelationshipsFromData();for(s=this.links.iterator;s.next();)s.value.updateRelationshipsFromData()}OT(){}updateRelationshipsFromData(e){}Sy(e,t){if(typeof t=="string"){const i=this.findPartForData(e);if(i!==null)i.updateTargetBindings(t);else{const n=this.zO(e);if(n!==null&&n.length>0){for(let r=0;r<n.length;r++)n[r].updateTargetBindings(t);const s=n[0].part;if(s!==null){const r=s.adornments;for(;r.next();)r.value.updateTargetBindings(t)}u.et(n)}}e===this.diagram.model.modelData&&this.updateAllTargetBindings(t)}}zO(e){let t=null;const i=this.Zd.iterator;for(;i.next();){const n=i.value;for(let s=0;s<n.length;s++){const r=n[s].findItemPanelForData(e);r!==null&&(t===null&&(t=u.ht()),t.push(r))}if(t!==null)break}return t}bN(e){return this.Zd.get(e)}VO(e,t){const i=e.object;if(!Array.isArray(i))return;const n=e.change===3,s=n?e.newParam:e.oldParam,r=n?e.newValue:e.oldValue,A=this.bN(i);if(Array.isArray(A))for(let o=0;o<A.length;o++){const a=A[o];n?a.$b(r,s,!0):a.Av(s)}}CM(e,t){t!==null&&e.Qr(n=>t.BL(n));const i=e.Sh;if(Array.isArray(i)){const n=this.bN(i);if(n===null)this.Zd.set(i,[e]);else{for(let s=0;s<n.length;s++)if(n[s]===e)return;n.push(e)}}}LM(e,t){e.Qr(n=>t.DR(n));const i=e.Sh;if(Array.isArray(i)){const n=this.bN(i);if(n!==null){for(let s=0;s<n.length;s++)if(n[s]===e){n.splice(s,1),n.length===0&&this.Zd.delete(i);return}}}}copyParts(e,t,i){i===void 0&&(i=!1);const n=new xt;if(Array.isArray(e))for(let r=0;r<e.length;r++)this.A1(e[r],t,n,i);else{const r=e.iterator;for(;r.next();)this.A1(r.value,t,n,i)}if(t!==null){const r=t.model,A=t.l0().dragsLink,o=new X,a=new xt,h=n.iterator;for(;h.next();){const d=h.value;if(d instanceof Xt)!A&&(d.fromNode===null||d.toNode===null)&&o.add(d);else if(d instanceof Et&&d.data!==null){if(r.xm()){const f=d,g=h.key,x=g.findTreeParentNode();if(x!==null){const B=n.get(x);if(B!==null){r.setParentKeyForNodeData(f.data,r.getKeyForNodeData(B.data));const C=t.findLinkForData(f.data),F=g.findTreeParentLink();F!==null&&C!==null&&a.set(F,C)}}}else if(r.xb()){const f=d,g=h.key,x=r.isRelatedKeysPathTo?g.findNodesOutOf():g.findNodesInto();for(;x.next();){const B=x.value,C=n.get(B);if(C!==null){r.addRelatedKeyForNodeData(f.data,C.key);const F=t.partManager.findLinkForData(f.data,C.key),b=this.findLinkForData(g.data,B.key);b!==null&&F!==null&&a.set(b,F)}else r.removeRelatedKeyForNodeData(f.data,B.key)}}}}if(o.count>0&&t.removeParts(o,!1),a.count>0){const d=a.iterator;for(;d.next();){const f=d.key,g=d.value;n.set(f,g)}}}if(t!==null&&this.k!==null){const r=t.model,A=r.afterCopyFunction;if(A!==null){const o=new xt;n.each(h=>{h.key.data!==null&&o.set(h.key.data,h.value.data)});const a=this.k.model;A(o,r,a)}}const s=n.iterator;for(;s.next();)s.value.updateTargetBindings();return n}A1(e,t,i,n){if(e===null||n&&!e.canCopy())return null;if(i.has(e))return i.get(e);const s=this.kN(e,t);if(!(s instanceof Ce))return null;if(s.isSelected=!1,s.isHighlighted=!1,i.set(e,s),e instanceof Et){const r=e.linksConnected;for(;r.next();){const A=r.value;if(A.fromNode===e){const o=i.get(A);o!==null&&(o.fromNode=s)}if(A.toNode===e){const o=i.get(A);o!==null&&(o.toNode=s)}}if(e instanceof Vt&&s instanceof Vt){const A=e.memberParts;for(;A.next();){const o=A.value,a=this.A1(o,t,i,n);a instanceof Xt||a!==null&&(a.containingGroup=s)}}}else if(e instanceof Xt&&s instanceof Xt){const r=e.fromNode;if(r!==null){const a=i.get(r);a!==null&&(s.fromNode=a)}const A=e.toNode;if(A!==null){const a=i.get(A);a!==null&&(s.toNode=a)}const o=e.labelNodes;for(;o.next();){const a=o.value,h=this.A1(a,t,i,n);h!==null&&h instanceof Et&&(h.labeledLink=s)}}return s}kN(e,t){let i=null;const n=e.data;if(n!==null&&t!==null){const s=t.model;if(!(e instanceof Xt)){const r=s.copyNodeData(n);u.j(r)&&(s.addNodeData(r),i=t.findPartForData(r))}}else if(e.Xt(),i=e.copy(),i!==null){const s=this.k;if(t!==null)t.add(i);else if(n!==null&&s!==null&&s.commandHandler!==null&&s.commandHandler.copiesClipboardData){const r=s.model;let A=null;i instanceof Xt||(A=r.copyNodeData(n)),u.j(A)&&(i.data=A)}}return i}get nodes(){return this.Jd}get links(){return this.Zs}get parts(){return this.Dt}get diagram(){return this.k}get addsToTemporaryLayer(){return this.pN}set addsToTemporaryLayer(e){this.pN=e}};p(En,"AT",!1),p(En,"TT",!1),p(En,"DT",!1);let zn=En;class _r extends zn{FM(){const e=this.diagram.model;this.Py(e.nodeDataArray),this.IT(e.linkDataArray)}Py(e){super.Py(e,!1);const t=this.links.iterator;for(;t.next();)t.value.Cd();this.diagram.kb(!1)}IT(e){e.forEach(t=>{this.ET(t)}),this.diagram.kb(!1)}ET(e){if(e==null||this.diagram.undoManager.isUndoingRedoing||this.findLinkForData(e))return null;const t=this.getLinkCategoryForData(e),i=this.findLinkTemplateForCategory(t);if(i!==null){i.Xt();const n=i.copy();if(n!==null){const s=this.diagram.ge;this.diagram.ge=!0,n.Jo=t,n.ii=e;const r=this.diagram.model,A=r.T1(e,!0);A!==""&&(n.fromPortId=A);const o=r.Fe(e,!0);if(o!==void 0){const f=this.findNodeForKey(o);f instanceof Et&&(n.fromNode=f)}const a=r.T1(e,!1);a!==""&&(n.toPortId=a);const h=r.Fe(e,!1);if(h!==void 0){const f=this.findNodeForKey(h);f instanceof Et&&(n.toNode=f)}const d=r.getLabelKeysForLinkData(e);return Array.isArray(d)&&d.forEach(f=>{const g=this.findNodeForKey(f);g!==null&&(g.labeledLink=n)}),this.addsToTemporaryLayer&&(n.dl="Tool"),this.diagram.add(n),n.ii=null,n.data=e,this.diagram.ge=s,n}}return null}CT(){const e=this.diagram.model;this.BT(e.linkDataArray),this.yN(e.nodeDataArray)}BT(e){e.forEach(t=>{this.L1(t)})}getLinkCategoryForData(e){return this.diagram.model.getCategoryForLinkData(e)}setLinkCategoryForData(e,t){return this.diagram.model.setCategoryForLinkData(e,t)}setFromNodeForLink(e,t){const i=this.diagram.model,n=t!==null?t.data:null;i.setFromKeyForLinkData(e.data,i.getKeyForNodeData(n))}setToNodeForLink(e,t){const i=this.diagram.model,n=t!==null?t.data:null;i.setToKeyForLinkData(e.data,i.getKeyForNodeData(n))}hN(e){this.diagram.model.removeLinkData(e.data)}findPartForKey(e){const t=super.findPartForKey(e);if(t===null){const i=this.diagram.model.findLinkDataForKey(e);if(i!==null)return this.findLinkForData(i)}return t}findLinkForKey(e){if(e==null)return null;const t=this.diagram.model.findLinkDataForKey(e);return t!==null?this.findLinkForData(t):null}doModelChanged(e){if(super.doModelChanged(e),!this.diagram)return;const t=this.diagram;if(e.model!==t.model)return;const i=e.change;if(t.G){t.G=!1;try{const n=e.modelChange;if(n!==""){if(i===2){if(n==="linkFromKey"){const s=e.object,r=this.findLinkForData(s);if(r!==null){const A=e.newValue,o=this.findNodeForKey(A);r.fromNode=o}}else if(n==="linkToKey"){const s=e.object,r=this.findLinkForData(s);if(r!==null){const A=e.newValue,o=this.findNodeForKey(A);r.toNode=o}}else if(n==="linkFromPortId"){const s=e.object,r=this.findLinkForData(s);if(r!==null){const A=e.newValue;typeof A=="string"&&(r.fromPortId=A)}}else if(n==="linkToPortId"){const s=e.object,r=this.findLinkForData(s);if(r!==null){const A=e.newValue;typeof A=="string"&&(r.toPortId=A)}}else if(n==="nodeGroupKey"){const s=e.object,r=this.findPartForData(s);if(r!==null){const A=e.newValue;if(A!==void 0){const o=this.findNodeForKey(A);o instanceof Vt?r.containingGroup=o:r.containingGroup=null}else r.containingGroup=null}}else if(n==="linkLabelKeys"){const s=e.object,r=this.findLinkForData(s);if(r!==null){const A=e.oldValue,o=e.newValue;Array.isArray(A)&&A.forEach(a=>{if(o.indexOf(a)>=0)return;const h=this.findNodeForKey(a);h!==null&&(h.labeledLink=null)}),Array.isArray(o)&&o.forEach(a=>{const h=this.findNodeForKey(a);h!==null&&(h.labeledLink=r)})}}else if(n==="linkCategory"){const s=e.object,r=this.findLinkForData(s),A=e.newValue;r!==null&&typeof A=="string"&&(r.category=A)}else if(n==="linkDataArray"){const s=e.oldValue;this.BT(s);const r=e.newValue;this.IT(r)}t.isModified=!0}else if(i===3){const s=e.newValue;if(n==="linkDataArray"&&u.j(s))this.ET(s);else if(n==="linkLabelKeys"&&e.model.isKeyType(s)){const r=e.object,A=this.findLinkForData(r),o=this.findNodeForKey(s);A!==null&&o!==null&&(o.labeledLink=A)}t.isModified=!0}else if(i===4){const s=e.oldValue;if(n==="linkDataArray"&&u.j(s))this.L1(s);else if(n==="linkLabelKeys"&&e.model.isKeyType(s)){const r=this.findNodeForKey(s);r!==null&&(r.labeledLink=null)}t.isModified=!0}}else if(i===2){const s=e.propertyName,r=e.object,A=t.model;r===A&&(s==="linkFromKeyProperty"||s==="linkToKeyProperty"||s==="linkFromPortIdProperty"||s==="linkToPortIdProperty"||s==="linkLabelKeysProperty"||s==="nodeIsGroupProperty"||s==="nodeGroupKeyProperty"||s==="linkCategoryProperty")&&(t.undoManager.isUndoingRedoing||this.rebuildParts()),t.isModified=!0}}finally{t.G=!0}}}OT(){const e=this.diagram.model,t=new X,i=e.linkDataArray;i.forEach(s=>{t.add(s)});const n=[];this.links.each(s=>{s.data!==null&&!t.has(s.data)&&n.push(s.data)}),n.forEach(s=>{e.UT(s,!1)}),i.forEach(s=>{this.findLinkForData(s)===null&&e.VT(s,!1)})}updateRelationshipsFromData(e){const t=e.data;if(t===null)return;const i=e.diagram;if(i===null)return;const n=i.model;if(e instanceof Xt){let s=n.Fe(t,!0),r=i.findNodeForKey(s);e.fromNode=r,s=n.Fe(t,!1),r=i.findNodeForKey(s),e.toNode=r;const A=n.getLabelKeysForLinkData(t);if(A.length>0||e.labelNodes.count>0){if(A.length===1&&e.labelNodes.count===1){const f=A[0],g=e.labelNodes.first();if(n.getKeyForNodeData(g.data)===f)return}const o=new X().addAll(A),a=new X;e.labelNodes.each(f=>{if(f.data!==null){const g=n.getKeyForNodeData(f.data);g!==void 0&&a.add(g)}});const h=a.copy();h.removeAll(o);const d=o.copy();if(d.removeAll(a),h.count>0||d.count>0){const f=e;h.each(g=>{const x=i.findNodeForKey(g);x!==null&&x.labeledLink===f&&(x.labeledLink=null)}),d.each(g=>{const x=i.findNodeForKey(g);x!==null&&x.labeledLink!==f&&(x.labeledLink=f)})}}}else if(!(e instanceof se)){const s=n.getGroupKeyForNodeData(t),r=i.findPartForKey(s);(r===null||r instanceof Vt)&&(e.containingGroup=r)}}C1(e){const t=this.diagram.model,i=t.getKeyForNodeData(e);if(i!==void 0){const n=t.My(i),s=this.findPartForData(e);if(n!==null&&s!==null){const A=n.iterator;for(;A.next();){const o=A.value;if(t.containsNodeData(o)){if(s instanceof Vt&&t.getGroupKeyForNodeData(o)===i){const a=this.findPartForData(o);a!==null&&(a.containingGroup=s)}}else{const a=this.findLinkForData(o);if(a!==null&&s instanceof Et){t.Fe(o,!0)===i&&(a.fromNode=s),t.Fe(o,!1)===i&&(a.toNode=s);const h=t.getLabelKeysForLinkData(o);Array.isArray(h)&&h.some(d=>d===i?(s.labeledLink=a,!0):!1)}}}t._s(i)}const r=t.getGroupKeyForNodeData(e);if(r!==void 0){const A=this.findNodeForKey(r);A instanceof Vt&&(s.containingGroup=A)}}}wN(e){const t=this.diagram.model;if(e instanceof Et){const i=t.getKeyForNodeData(e.data);if(i!==void 0){const n=e.linksConnected;for(;n.next();){const s=n.value;t.tn(i,s.data)}if(e.isLinkLabel){const s=e.labeledLink;s!==null&&t.tn(i,s.data)}if(e instanceof Vt){const s=e.memberParts;for(;s.next();){const r=s.value.data;t.containsNodeData(r)&&t.tn(i,r)}}}}}kN(e,t){let i=super.kN(e,t);if(e instanceof Xt){const n=e.data;if(n!==null&&t!==null){const s=t.model,r=s.copyLinkData(n);u.j(r)&&(s.addLinkData(r),i=t.findLinkForData(r))}else if(i!==null){const s=this.diagram;if(n!==null&&s!==null&&s.commandHandler!==null&&s.commandHandler.copiesClipboardData){const r=s.model.copyLinkData(n);u.j(r)&&(i.data=r)}}}return i}insertLink(e,t,i,n){const s=this.diagram,r=s.model,A=s.toolManager.findTool("Linking");let o="";e!==null&&(t===null&&(t=e),o=t.portId,o===null&&(o=""));let a="";i!==null&&(n===null&&(n=i),a=n.portId,a===null&&(a=""));const h=A.archetypeLinkData;if(h instanceof Xt){h.Xt();const d=h.copy();if(d!==null){d.fromNode=e,d.fromPortId=o,d.toNode=i,d.toPortId=a,s.add(d);const f=A.archetypeLabelNodeData;if(f instanceof Et){f.Xt();const g=f.copy();g!==null&&(g.labeledLink=d,s.add(g))}return d}}else if(h!==null){const d=r.copyLinkData(h);if(u.j(d)){e!==null&&r.Qd(d,r.getKeyForNodeData(e.data),!0),r._d(d,o,!0),i!==null&&r.Qd(d,r.getKeyForNodeData(i.data),!1),r._d(d,a,!1),r.addLinkData(d);const f=A.archetypeLabelNodeData;if(f!==null&&!(f instanceof Et)){const g=r.copyNodeData(f);if(u.j(g)){r.addNodeData(g);const x=r.getKeyForNodeData(g);x!==void 0&&r.addLabelKeyForLinkData(d,x)}}return s.findLinkForData(d)}}return null}}class yr extends zn{constructor(){super(...arguments);p(this,"Dh",null)}D1(t,i){if(t===null||i===null||i.findTreeParentLink()!==null)return null;const n=this.diagram.toolManager.findTool("Linking");let s=t,r=i;if(this.diagram.isTreePathToChildren){if(n!==null&&n.ku(s,r,null,!0))return null}else if(s=i,r=t,n!==null&&n.ku(s,r,null,!0))return null;const A=this.getLinkCategoryForData(i.data),o=this.findLinkTemplateForCategory(A);if(o!==null){o.Xt();const a=o.copy();if(a!==null){const h=this.diagram.ge;return this.diagram.ge=!0,a.Jo=A,a.ii=i.data,a.fromNode=s,a.toNode=r,this.diagram.add(a),a.ii=null,a.data=i.data,this.diagram.ge=h,a}}return null}getLinkCategoryForData(t){return this.diagram.model.getParentLinkCategoryForNodeData(t)}setLinkCategoryForData(t,i){this.diagram.model.setParentLinkCategoryForNodeData(t,i)}setFromNodeForLink(t,i,n){const s=this.diagram.model;n===void 0&&(n=null);const r=i!==null?i.data:null;if(this.diagram.isTreePathToChildren)s.setParentKeyForNodeData(t.data,s.getKeyForNodeData(r));else{const A=this.Dh;this.Dh=t,n!==null&&s.setParentKeyForNodeData(n.data,void 0);const o=t.toNode!==null?t.toNode.data:null;s.setParentKeyForNodeData(r,s.getKeyForNodeData(o)),this.Dh=A}}setToNodeForLink(t,i,n){const s=this.diagram.model;n===void 0&&(n=null);const r=i!==null?i.data:null;if(this.diagram.isTreePathToChildren){const A=this.Dh;this.Dh=t,n!==null&&s.setParentKeyForNodeData(n.data,void 0);const o=t.fromNode!==null?t.fromNode.data:null;s.setParentKeyForNodeData(r,s.getKeyForNodeData(o)),this.Dh=A}else s.setParentKeyForNodeData(t.data,s.getKeyForNodeData(r))}hN(t){this.diagram.model.setParentKeyForNodeData(t.data,void 0)}findLinkForKey(t){if(t==null)return null;const i=this.diagram.model.findNodeDataForKey(t);return i!==null?this.findLinkForData(i):null}doModelChanged(t){if(super.doModelChanged(t),!this.diagram)return;const i=this.diagram;if(t.model!==i.model)return;const n=t.change;if(i.G){i.G=!1;try{const s=t.modelChange;if(s!==""){if(n===2){if(s==="nodeParentKey"){const r=t.object,A=t.newValue,o=this.findNodeForKey(A),a=this.findNodeForData(r);if(this.Dh!==null)o!==null&&(this.Dh.data=r,this.Dh.category=this.getLinkCategoryForData(r));else if(a!==null){const h=a.findTreeParentLink();h!==null?o===null?i.remove(h):i.isTreePathToChildren?h.fromNode=o:h.toNode=o:this.D1(o,a)}}else if(s==="parentLinkCategory"){const r=t.object,A=this.findNodeForData(r),o=t.newValue;if(A!==null&&typeof o=="string"){const a=A.findTreeParentLink();a!==null&&(a.category=o)}}i.isModified=!0}}else if(n===2){const r=t.propertyName,A=t.object,o=i.model;A===o&&r==="nodeParentKeyProperty"&&(i.undoManager.isUndoingRedoing||this.rebuildParts()),i.isModified=!0}}finally{i.G=!0}}}updateRelationshipsFromData(t){const i=t.data;if(i===null)return;const n=t.diagram;if(n===null)return;const s=n.model;if(t instanceof Et){const r=s.getParentKeyForNodeData(i),A=n.findNodeForKey(r),o=t.findTreeParentNode();if(A!==o){const a=t.findTreeParentLink();A!==null?a!==null?n.isTreePathToChildren?a.fromNode=A:a.toNode=A:this.D1(A,t):a!==null&&n.AM(a,!1)}}}Sy(t,i){if(super.Sy(t,i),typeof i=="string"&&this.findPartForData(t)!==null){const n=this.findLinkForData(t);n!==null&&n.updateTargetBindings(i)}}C1(t){const i=this.diagram.model,n=i.getKeyForNodeData(t);if(n!==void 0){const s=i.My(n),r=this.findPartForData(t);if(s!==null&&r!==null){const o=s.iterator;for(;o.next();){const a=o.value;if(i.containsNodeData(a)&&r instanceof Et&&i.getParentKeyForNodeData(a)===n){const h=this.findNodeForData(a);this.D1(r,h)}}i._s(n)}const A=i.getParentKeyForNodeData(t);if(A!==void 0&&r instanceof Et){const o=this.findNodeForKey(A);this.D1(o,r)}}}wN(t){const i=this.diagram.model;if(t instanceof Et){const n=i.getKeyForNodeData(t.data),s=this.findLinkForData(t.data);if(s!==null){s.isSelected=!1,s.isHighlighted=!1;const o=s.layer;if(o!==null){const a=o.se(-1,s,!1);a>=0&&this.diagram.raiseChangedEvent(4,"parts",o,s,null,a,null);const h=s.layerChanged;h!==null&&h(s,o,null)}}const r=this.diagram.isTreePathToChildren,A=t.linksConnected;for(;A.next();){const o=A.value,a=(r?o.toNode:o.fromNode).data;i.containsNodeData(a)&&i.tn(n,a)}}}insertLink(t,i,n,s){const r=this.diagram.model;let A=t,o=n;if(this.diagram.isTreePathToChildren||(A=n,o=t),A!==null&&o!==null){const a=A.data,h=o.data;return r.setParentKeyForNodeData(h,r.getKeyForNodeData(a)),o.findTreeParentLink()}return null}}var Ys=(k=>(k[k.OneWay=1]="OneWay",k[k.TwoWay=2]="TwoWay",k))(Ys||{});const $i=class $i{constructor(e,t,i,n){p(this,"n");p(this,"PN");p(this,"Ha");p(this,"Df");p(this,"Fh");p(this,"Ff");p(this,"Rf");p(this,"vf");p(this,"F1");p(this,"Me");p(this,"dd");p(this,"mf");X.qi(this),e===void 0?e="":u.s(e,"string",$i,"constructor:targetprop"),t===void 0?t=e:u.s(t,"string",$i,"constructor:sourceprop"),i===void 0?i=null:i!==null&&u.C(i,$i,"constructor:conv"),this.PN=-1,this.Me=null,this.Ha=e,this.dd=0,this.mf=0,this.Df=null,this.Fh=t,this.Ff=i,n===void 0?(this.Rf=1,this.vf=null):(this.Rf=2,this.vf=n),this.F1=new X,this.n=2}copy(){const e=new this.constructor;return this.cloneProtected(e),e}cloneProtected(e){e.Ha=this.Ha,e.dd=this.dd,e.mf=this.mf,e.Df=this.Df,e.Fh=this.Fh,e.Ff=this.Ff,e.Rf=this.Rf,e.vf=this.vf,e.n=this.n&-2}static parseEnum(e,t){return u.C(e,$i,"parseEnum:ctor"),i=>{let n=parseInt(i);return isNaN(n)&&(n=u.Yh(e,i),n===null)?t:n}}li(e){e in Ys?this.mode=e:u.ur(this,e)}static toString(e){return u.toString(e)}toString(){return"Binding("+this.targetProperty+":"+this.sourceProperty+(this.targetId!==-1?" "+this.targetId:"")+" "+Ys[this.mode]+")"}g(){return this.n=this.n|1,this}get targetId(){return this.PN}set targetId(e){this.h&&u.D(this),this.PN=e}get targetProperty(){return this.Ha}set targetProperty(e){this.h&&u.D(this),u.s(e,"string",$i,"targetProperty"),this.Ha=e}get sourceProperty(){return this.Fh}set sourceProperty(e){this.h&&u.D(this),u.s(e,"string",$i,"sourceProperty"),this.Fh=e}get h(){return(this.n&1)!==0}get isToData(){return(this.n&2)!==0}get isToObject(){return(this.n&4)!==0}get isToModel(){return(this.n&8)!==0}get isToTheme(){return(this.n&16)!==0}get SN(){return this.isToTheme&&!(this.isToData||this.isToObject||this.isToModel)}Zu(){return!1}get sourceName(){return this.Df}set sourceName(e){this.h&&u.D(this),e!==null&&u.s(e,"string",$i,"sourceName"),this.Df=e,e!==null?this.n=this.n&-3|4:this.n=this.n|2}get converter(){return this.Ff}set converter(e){this.h&&u.D(this),e!==null&&u.C(e,$i,"converter"),this.Ff=e}get backConverter(){return this.vf}set backConverter(e){this.h&&u.D(this),e!==null&&u.C(e,$i,"backConverter"),this.vf=e}get mode(){return this.Rf}set mode(e){this.h&&u.D(this),this.isToTheme&&e===2&&u.o("Theme Bindings cannot be TwoWay."),this.Rf=e}makeTwoWay(e){return this.isToTheme&&u.o("Theme Bindings cannot be TwoWay."),this.mode=2,e&&(u.C(e,$i,"makeTwoWay"),this.backConverter=e),this}ofObject(e){return this.h&&u.D(this),e===void 0&&(e=""),this.sourceName=e,this}ofModel(){return this.h&&u.D(this),this.n=this.n&-3&-5|8,this.Df=null,this}fA(e,t){const i=this.sourceName;let n=null;return i===null||i===""?n=e:i==="/"?n=t.part:i==="."?n=t:i===".."?n=t.panel:n=e.findObject(i),n}check(e){const t=this.Ha,i=this.Fh,n=this.Ff;(this.Zu()&&n===null&&this.Rh===null&&t===""||n===null&&t==="")&&u.ri("Binding error: target property is the empty string: "+this.toString()),this.Zu()&&this.SN&&i===""&&n===null&&this.Rh===null&&u.ri("Binding error: theme bindings require a source property when not using a converter: "+this.toString()),e&&typeof t=="string"&&(!u.lt(["setAttribute"])&&t.length>0&&t[0]!=="_"&&!u.cw(e,t)?u.ri("Binding error: undefined target property: "+t+" on "+e.toString()):t==="name"&&e instanceof Ye&&u.ri("Binding error: cannot modify GraphObject.name on "+e.toString()))}updateTarget(e,t,i,n){var h,d,f;const s=this.Fh;if(i!==void 0&&s!==""&&s!==i)return;const r=this.Ha,A=this.Ff;let o=t;if(s!==""&&!this.SN&&(n?o=n.kt(t,s):o=hi.kt(t,s)),o===void 0)return;const a=((h=e.diagram)==null?void 0:h.themeManager)??((f=(d=e.panel)==null?void 0:d.diagram)==null?void 0:f.themeManager);if(A===null){if(r!==""){if(this.Zu()&&(o=this.zT(a,o,e,r),o===void 0))return;n?n.nt(e,r,o):(t instanceof Ye||t instanceof je)&&hi.nt(e,r,o)}}else try{if(r!==""){let g=A(o,e);if(this.Zu()&&(g=this.zT(a,g,e,r),g===void 0))return;n?n.nt(e,r,g):(t instanceof Ye||t instanceof je)&&hi.nt(e,r,g)}else A(o,e)}catch{}}updateSource(e,t,i,n){if(this.Rf!==2)return;const s=this.Ha;if(i!==void 0&&s!==i)return;const r=this.Fh,A=this.vf,o=n!==null?n.diagram:null,a=o!==null?o.model:null;let h=e;if(s!==""&&(a?h=a.kt(e,s):h=hi.kt(e,s)),h!==void 0&&!this.F1.has(e))try{if(this.F1.add(e),A===null){if(r!=="")a!==null?a.setDataProperty(t,r,h):(t instanceof Ye||t instanceof je)&&(t[r]=h);else if(a!==null&&n!==null&&n.itemIndex>=0&&n.panel!==null&&Array.isArray(n.panel.itemArray)){const d=n.itemIndex,f=n.panel.itemArray;a.removeArrayItem(f,d),a.insertArrayItem(f,d,h)}}else try{if(r!==""){const d=A(h,t,a);a!==null?a.setDataProperty(t,r,d):(t instanceof Ye||t instanceof je)&&(t[r]=d)}else{const d=A(h,t,a);if(d!==void 0&&a!==null&&n!==null&&n.itemIndex>=0&&n.panel!==null&&Array.isArray(n.panel.itemArray)){const f=n.itemIndex,g=n.panel.itemArray;a.removeArrayItem(g,f),a.insertArrayItem(g,f,d)}}}catch{}}finally{this.F1.delete(e)}}};p($i,"OneWay",1),p($i,"TwoWay",2);let ms=$i;class wr extends ms{constructor(t,i,n,s,r){super(t,i,s);p(this,"Ny");p(this,"Rh");p(this,"ja");n==null&&(n=""),r===void 0&&(r=null),this.Ny=n,this.Rh=r,this.ja=null,this.n=16}cloneProtected(t){super.cloneProtected(t),t.Ny=this.Ny,t.Rh=this.Rh,t.ja=this.ja}Zu(){return!0}get themeSource(){return this.Ny}set themeSource(t){this.h&&u.D(this),t!==null&&u.s(t,"string",wr,"themeSource"),this.Ny=t,this.ja=null,t!==null?this.n=this.n|16:this.n=this.n&-17}get themeConverter(){return this.Rh}set themeConverter(t){this.h&&u.D(this),t!==null&&u.C(t,wr,"themeConverter"),this.Rh=t}ofData(){return this.h&&u.D(this),this.n=this.n|2,this.Df=null,this}zT(t,i,n,s){if(!t||(this.SN&&(i=this.Fh),!i&&i!==0))return;let r=this.themeSource;this.ja!==null?r=this.ja:typeof r=="string"&&r.includes(".")&&(this.ja=r.split("."),r=this.ja);let A=t.findValue(i,r,s);return A===void 0&&u.ri(`Theme warning: ${i} could not be found when setting target property ${s}.`),u.lt(this.Rh)&&(A=this.Rh(A,n)),A}}const he=class he{constructor(e,t){p(this,"Ct");p(this,"tg");p(this,"Eo");p(this,"MN");p(this,"Re");p(this,"wi");p(this,"vh");p(this,"Of");p(this,"If");p(this,"ig");p(this,"eg");p(this,"sg");p(this,"ng");p(this,"Cy");p(this,"qa");p(this,"or");p(this,"Ly");p(this,"Io");p(this,"R1");if(X.qi(this),this.Ct="",this.tg="",this.Eo=!1,this.MN={},this.Re=[],this.wi=new xt,this.vh="key",this.Of=null,this.If=null,this.ig=!1,this.eg=!1,this.sg=!1,this.ng=null,this.Cy=100,this.qa="category",this.or=new xt,this.Ly=[],this.Io=!1,this.R1=null,this.undoManager=new Ae,e!==void 0&&(Array.isArray(e)?this.nodeDataArray=e:t=e),t){Object.assign(this,t);const i=t.Changed;i&&(delete this.Changed,this.addChangedListener(i))}}cloneProtected(e){e.Ct=this.Ct,e.tg=this.tg,e.Eo=this.Eo,e.vh=this.vh,e.Of=this.Of,e.If=this.If,e.ig=this.ig,e.eg=this.eg,e.sg=this.sg,e.ng=this.ng,e.Cy=this.Cy,e.qa=this.qa}copy(){const e=new this.constructor;return this.cloneProtected(e),e}clear(){this.Re=[],this.wi.clear(),this.or.clear(),this.undoManager.clear()}toString(e){if(e===void 0&&(e=0),e>1)return this.toJson();{let t=(this.name!==""?this.name:"")+" Model";if(e>0){t+=`
 node data:`;const i=this.nodeDataArray,n=i.length;for(let s=0;s<n;s++){const r=i[s];t+=" "+this.getKeyForNodeData(r)+":"+u.toString(r)}}return t}}toIncrementalData(e){e.change!==1&&u.o("Model.toIncrementalData argument is not a Transaction ChangedEvent:"+e.toString());const t=e.object;if(!e.isTransactionFinished||!(t instanceof jt))return null;const i=this.XT(t);return this.NN(t,e.propertyName==="FinishedUndo",i)}NN(e,t,i){const n=this;let s=!1;const r=new X,A=new X,o=new X;e.changes.each(g=>{if(g.model===n){if(g.modelChange==="nodeDataArray")g.change===3?r.add(g.newValue):g.change===4&&o.add(g.oldValue);else if(n.containsNodeData(g.object))A.add(g.object);else if(g.change===2&&(n.modelData===g.object||g.propertyName==="modelData"))s=!0;else if(g.object!==null)if(i.has(g.object))i.get(g.object).each(x=>{n.containsNodeData(x)&&A.add(x)});else{if(g.object instanceof he||n.Ea()&&n.containsLinkData(g.object))return;n.YT(g.object).each(x=>{A.add(x)})}}});const a=new X;r.each(g=>{a.add(n.getKeyForNodeData(g)),t||A.add(g)});const h=new X;o.each(g=>{h.add(n.getKeyForNodeData(g)),t&&A.add(g)});const d=n.cloneDeep(A.toArray());let f=null;return s&&(f===null&&(f={}),f.modelData=this.cloneDeep(this.modelData)),a.count>0&&(f===null&&(f={}),t?f.removedNodeKeys=a.toArray():f.insertedNodeKeys=a.toArray()),d.length>0&&(f===null&&(f={}),f.modifiedNodeData=d),h.count>0&&(f===null&&(f={}),t?f.insertedNodeKeys=h.toArray():f.removedNodeKeys=h.toArray()),f}cloneDeep(e){return this.og(e,!0)}og(e,t,i,n){if(!u.j(e))return e;i||(i=new xt);const s=i.get(e);if(s)return s;let r;if(Array.isArray(e)){r=[],i.set(e,r);for(let A=0;A<e.length;A++){const o=e[A];r.push(this.og(o,!1,i,n))}}else if(e instanceof T||e instanceof ct||e instanceof it||e instanceof Rt||e instanceof q)r=e.copy(),i.set(e,r);else{if(e instanceof Qe||e instanceof Jt)return e;if(e instanceof H)r=new H().addAll(this.og(e.toArray(),!1,i,n)),i.set(e,r);else if(e instanceof X)r=new X().addAll(this.og(e.toArray(),!1,i,n)),i.set(e,r);else if(e instanceof xt)r=new xt().addAll(this.og(e.toArray(),!1,i,n)),i.set(e,r);else if(e instanceof Date)r=new Date(e),i.set(e,r);else if(e instanceof RegExp)r=new RegExp(e),i.set(e,r),r.lastIndex=e.lastIndex;else if(he.CN(null,"",e))r=e;else if(u.lt(e.copy))r=e.copy(),i.set(e,r);else{r={},i.set(e,r);for(const A in e){if(A==="__gohashid")continue;const o=e[A];r[A]=this.og(o,!1,i,n)}}}return r}ve(e){return JSON.stringify(e).replace(/[\u007F-\uFFFF]/g,t=>{const i="0000"+t.charCodeAt(0).toString(16);return"\\u"+i.substring(i.length-4)})}rg(){let e="";return this.name!==""&&(e+=`,
  "name": `+this.ve(this.name)),this.dataFormat!==""&&(e+=`,
  "dataFormat": `+this.ve(this.dataFormat)),this.isReadOnly&&(e+=`,
  "isReadOnly": `+this.isReadOnly),this.nodeKeyProperty!=="key"&&typeof this.nodeKeyProperty=="string"&&(e+=`,
  "nodeKeyProperty": `+this.ve(this.nodeKeyProperty)),this.copiesArrays&&(e+=`,
  "copiesArrays": true`),this.copiesArrayObjects&&(e+=`,
  "copiesArrayObjects": true`),this.copiesKey&&(e+=`,
  "copiesKey": true`),this.pointsDigits!==100&&(e+=`,
  "pointsDigits": `+this.pointsDigits.toString()),this.nodeCategoryProperty!=="category"&&typeof this.nodeCategoryProperty=="string"&&(e+=`,
  "nodeCategoryProperty": `+this.ve(this.nodeCategoryProperty)),e}Ay(e){e.name&&(this.name=e.name),e.dataFormat&&(this.dataFormat=e.dataFormat),e.isReadOnly&&(this.isReadOnly=!0),e.nodeKeyProperty&&(this.nodeKeyProperty=e.nodeKeyProperty),e.copiesArrays&&(this.copiesArrays=!0),e.copiesArrayObjects&&(this.copiesArrayObjects=!0),e.copiesKey!==void 0&&(this.copiesKey=e.copiesKey),e.pointsDigits!==void 0&&(this.pointsDigits=parseInt(e.pointsDigits)),e.nodeCategoryProperty&&(this.nodeCategoryProperty=e.nodeCategoryProperty)}KT(){const e=this.modelData;return`,
  "modelData": `+this.GT(e)}HT(e){const t=e.modelData;u.j(t)&&(this.replaceJsonObjects(t),this.modelData=t)}LN(){const e=this.modelData;let t=!1;for(const n in e)if(!this.v1(e,n,e[n])){t=!0;break}let i="";return t&&(i=this.KT()),i+`,
  "nodeDataArray": `+this.Oh(this.nodeDataArray,!0)}AN(e){this.HT(e);const t=e.nodeDataArray;Array.isArray(t)&&(this.replaceJsonObjects(t),this.nodeDataArray=t)}TN(e,t,i){if(e===t)return!0;if(typeof e!=typeof t||u.lt(e)||u.lt(t))return!1;if(Array.isArray(e)&&Array.isArray(t)){if(i.get(e)===t)return!0;if(i.set(e,t),e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!this.TN(e[n],t[n],i))return!1;return!0}else if(u.j(e)&&u.j(t)){if(i.get(e)===t)return!0;i.set(e,t);for(const n in e){const s=e[n];if(this.v1(e,n,s))continue;const r=t[n];if(r===void 0||!this.TN(s,r,i))return!1}for(const n in t){const s=t[n];if(this.v1(t,n,s))continue;const r=e[n];if(r===void 0||!this.TN(r,s,i))return!1}return!0}return!1}XT(e){let t=new xt;const i=(n,s)=>{const r=s.part;if(!r)return;const A=r.data;if(n===A)return;let o=t.get(n);o===null?(o=new X,o.add(A),t.set(n,o)):o.add(A)};return e.changes.each(n=>{if(n.diagram!==null){const s=n.change;if(s===2){const r=n.object.panel;if(r){const A=r.data;A&&i(A,r)}}else if(s===3||s===4){const r=n.object,A=r.itemArray;A&&i(A,r)}}}),t}YT(e){const t=new X;for(let i=0;i<this.nodeDataArray.length;i++){const n=this.nodeDataArray[i];this.O1(e,n,n,t)}return t}O1(e,t,i,n){if(Array.isArray(t))for(let s=0;s<t.length;s++){const r=t[s];if(r===e)return n.add(i),!0;if(this.O1(e,r,i,n))return!0}else if(u.j(t)&&Object.getPrototypeOf(t)===Object.prototype)for(const s in t){const r=t[s];if(r===e)return n.add(i),!0;if(this.O1(e,r,i,n))return!0}return!1}DN(e,t,i){const n=this;let s=!1;const r=new X,A=new X,o=new X;e.changes.each(f=>{if(f.model===n){if(f.modelChange==="nodeDataArray")f.change===3?r.add(f.newValue):f.change===4&&o.add(f.oldValue);else if(n.containsNodeData(f.object))A.add(f.object);else if(f.change===2&&(n.modelData===f.object||f.propertyName==="modelData"))s=!0;else if(f.object!==null)if(i.has(f.object))i.get(f.object).each(g=>{n.containsNodeData(g)&&A.add(g)});else{if(f.object instanceof he||n.Ea()&&n.containsLinkData(f.object))return;n.YT(f.object).each(g=>{A.add(g)})}}});const a=new X;r.each(f=>{a.add(n.getKeyForNodeData(f)),t||A.add(f)});const h=new X;o.each(f=>{h.add(n.getKeyForNodeData(f)),t&&A.add(f)});let d="";return s&&(d+=this.KT()),a.count>0&&(d+=(t?he.qT:he.jT)+this.Oh(a.toArray(),!0)),A.count>0&&(d+=he.XO+this.Oh(A.toArray(),!0)),h.count>0&&(d+=(t?he.jT:he.qT)+this.Oh(h.toArray(),!0)),d}Ty(e){(e.name!==void 0&&e.name!==this.name||e.dataFormat!==void 0&&e.dataFormat!==this.dataFormat||e.isReadOnly!==void 0&&e.isReadOnly!==this.isReadOnly||e.nodeKeyProperty!==void 0&&e.nodeKeyProperty!==this.nodeKeyProperty||e.copiesArrays!==void 0&&e.copiesArrays!==this.copiesArrays||e.copiesArrayObjects!==void 0&&e.copiesArrayObjects!==this.copiesArrayObjects||e.copiesKey!==void 0&&e.copiesKey!==this.copiesKey||e.nodeCategoryProperty!==void 0&&e.nodeCategoryProperty!==this.nodeCategoryProperty)&&u.o("applyIncrementalJson cannot change Model properties"),this.HT(e);const t=e.insertedNodeKeys,i=e.modifiedNodeData,n=new xt;if(Array.isArray(i))for(let r=0;r<i.length;r++){const A=i[r],o=this.getKeyForNodeData(A);o!=null&&n.set(o,A)}if(Array.isArray(t)){const r=t.length;for(let A=0;A<r;A++){const o=t[A];let a=this.findNodeDataForKey(o);a===null&&(a=n.get(o)||this.copyNodeData({}),this.setKeyForNodeData(a,o),this.addNodeData(a))}}if(Array.isArray(i)){const r=i.length;for(let A=0;A<r;A++){const o=i[A],a=this.getKeyForNodeData(o),h=this.findNodeDataForKey(a);if(h!==null){for(const d in o)d==="__gohashid"||d===this.nodeKeyProperty||(this.wm()||this.xb())&&d===this.nodeIsGroupProperty||this.setDataProperty(h,d,o[d]);this.lg(o,h)}}}const s=e.removedNodeKeys;if(Array.isArray(s)){const r=s.length;for(let A=0;A<r;A++){const o=s[A],a=this.findNodeDataForKey(o);a!==null&&this.removeNodeData(a)}}}toIncrementalJson(e,t){e.change!==1&&u.o("Model.toIncrementalJson argument is not a Transaction ChangedEvent:"+e.toString());const i=e.object;if(!e.isTransactionFinished||!(i instanceof jt))return'{ "incremental": 0 }';t===void 0&&(t=u.Vn(this));const n=this.XT(i),s=this.DN(i,e.propertyName==="FinishedUndo",n);return'{ "class": '+this.ve(t)+', "incremental": 1'+this.rg()+s+"}"}toIncrementalJSON(e,t){return this.toIncrementalJson(e,t)}toJson(e){return e===void 0&&(e=u.Vn(this)),'{ "class": '+this.ve(e)+this.rg()+this.LN()+"}"}toJSON(e){return this.toJson(e)}applyIncrementalJson(e){let t=null;if(typeof e=="string")try{t=y.JSON.parse(e)}catch{}else u.j(e)?t=e:u.o("Unable to modify a Model from: "+e);const i=t.incremental;typeof i!="number"&&u.o("Unable to apply non-incremental changes to Model: "+e),i!==0&&(this.startTransaction("applyIncrementalJson"),this.Ty(t),this.commitTransaction("applyIncrementalJson"))}applyIncrementalJSON(e){return this.applyIncrementalJson(e)}static fromJson(e,t){t===void 0&&(t=null);let i=null;if(typeof e=="string")try{i=y.JSON.parse(e)}catch{}else u.j(e)?i=e:u.o("Unable to construct a Model from: "+e);if(t===null){const n=he.YO(i);n===null||n instanceof he?t=n:u.o("Unable to construct a Model of declared class: "+i.class)}return t===null&&(t=he.WT()),t.Ay(i),t.AN(i),t}static fromJSON(e,t){return this.fromJson(e,t)}static WT(){return new he}static YO(e){let t=null,i=e.class;if(typeof i=="string")try{let n=null;i.indexOf("go.")===0?n=he.FN(i.substring(3)):(n=he.FN(i),n===null&&(n=y[i])),u.lt(n)&&(t=new n)}catch{}return t}replaceJsonObjects(e){if(Array.isArray(e)){const t=e.length;for(let i=0;i<t;i++){const n=e[i];u.j(n)&&this.JT(e,i,this.replaceJsonObjects(n))}}else if(u.j(e)){for(const t in e){const i=e[t];if(u.j(i)){const n=this.replaceJsonObjects(i);if(e[t]=n,t==="points"&&Array.isArray(n)){let s=n.length%2===0;for(let r=0;r<n.length;r++)if(typeof n[r]!="number"){s=!1;break}if(s){const r=new H;for(let A=0;A<n.length/2;A++)r.add(new T(n[A*2],n[A*2+1]));r.g(),e[t]=r}}}}return this.KO(e)}return e}writeJsonValue(e){return e===void 0?"undefined":e===null?"null":e===!0?"true":e===!1?"false":typeof e=="string"?this.ve(e):typeof e=="number"?e===1/0?"9e9999":e===-1/0?"-9e9999":isNaN(e)?'{"class":"NaN"}':e.toString():e instanceof Boolean?this.writeJsonValue(e.valueOf()):e instanceof String?this.writeJsonValue(e.valueOf()):e instanceof Number?this.writeJsonValue(e.valueOf()):e instanceof Date?'{"class":"Date", "value":"'+e.toJSON()+'"}':Array.isArray(e)?this.Oh(e):u.j(e)?this.GT(e):u.lt(e)?"null":'"'+e.toString()+'"'}Oh(e,t){t===void 0&&(t=!1);const i=e.length;if(i<=0)return"[]";const n=new w;n.add("["),t&&i>1&&n.add(`
`);for(let s=0;s<i;s++){const r=e[s];r!==void 0&&(s>0&&(n.add(","),t&&n.add(`
`)),n.add(this.writeJsonValue(r)))}return t&&i>1&&n.add(`
`),n.add("]"),n.toString()}v1(e,t,i){return!!(i===void 0||t==="__gohashid"||t[0]==="_"||u.lt(i))}Hi(e){return isNaN(e)?"NaN":e===1/0?"9e9999":e===-1/0?"-9e9999":e}GT(e){const t=e;if(t instanceof T)e={class:"go.Point",x:this.Hi(t.x),y:this.Hi(t.y)};else if(t instanceof ct)e={class:"go.Size",width:this.Hi(t.width),height:this.Hi(t.height)};else if(t instanceof it)e={class:"go.Rect",x:this.Hi(t.x),y:this.Hi(t.y),width:this.Hi(t.width),height:this.Hi(t.height)};else if(t instanceof Rt)e={class:"go.Margin",top:this.Hi(t.top),right:this.Hi(t.right),bottom:this.Hi(t.bottom),left:this.Hi(t.left)};else if(t instanceof q)t.isSpot()?e={class:"go.Spot",x:this.Hi(t.x),y:this.Hi(t.y),offsetX:this.Hi(t.offsetX),offsetY:this.Hi(t.offsetY)}:e={class:"go.Spot",enum:t.toString()};else if(t instanceof Qe){if(e={class:"go.Brush",type:Zn[t.type]},t.type===1?e.color=t.color:(t.type===2||t.type===3)&&(e.start=t.start,e.end=t.end,t.type===3&&(t.startRadius!==0&&(e.startRadius=this.Hi(t.startRadius)),isNaN(t.endRadius)||(e.endRadius=this.Hi(t.endRadius)))),t.colorStops!==null){const s={},r=t.colorStops.iterator;for(;r.next();){const A=r.key,o=r.value;s[A]=o}e.colorStops=s}}else if(t instanceof Jt)e={class:"go.Geometry",type:me[t.type]},t.startX!==0&&(e.startX=this.Hi(t.startX)),t.startY!==0&&(e.startY=this.Hi(t.startY)),t.endX!==0&&(e.endX=this.Hi(t.endX)),t.endY!==0&&(e.endY=this.Hi(t.endY)),t.spot1.equals(q.TopLeft)||(e.spot1=t.spot1),t.spot2.equals(q.BottomRight)||(e.spot2=t.spot2),t.type===4&&(e.path=Jt.stringify(t));else if(he.CN(null,"",t))return"{}";let i="{",n=!0;for(const s in e){const r=this.kt(e,s);if(!this.v1(e,s,r))if(n?n=!1:i+=",",i+=this.ve(s)+":",s==="points"&&r instanceof H){const A=r;let o="[";const a=A.iterator;for(;a.next();){const h=a.value;o.length>1&&(o+=","),o+=this.$T(h.x),o+=",",o+=this.$T(h.y)}o+="]",i+=o}else i+=this.writeJsonValue(r)}return i+="}",i}$T(e){if(e===1/0)return"9e9999";if(e===-1/0)return"-9e9999";if(isNaN(e))return"0";const t=this.pointsDigits;return t>16?e.toString():e.toFixed(t)}get pointsDigits(){return this.Cy}set pointsDigits(e){e<0?e=0:e>100&&(e=100),this.Cy=e}ji(e){return typeof e=="number"?e:e==="NaN"?NaN:e==="9e9999"?1/0:e==="-9e9999"?-1/0:parseFloat(e)}KO(e){if(!u.j(e))return e;let t=e.class||"";if(typeof t!="string"||t==="")return e;if(t==="NaN")return NaN;if(t==="Date")return new Date(e.value);if(t.indexOf("go.")!==0)return e;t=t.substring(3);let i=e;if(t==="Point")i=new T(this.ji(e.x),this.ji(e.y));else if(t==="Size")i=new ct(this.ji(e.width),this.ji(e.height));else if(t==="Rect")i=new it(this.ji(e.x),this.ji(e.y),this.ji(e.width),this.ji(e.height));else if(t==="Margin")i=new Rt(this.ji(e.top),this.ji(e.right),this.ji(e.bottom),this.ji(e.left));else if(t==="Spot")typeof e.enum=="string"?i=q.parse(e.enum):i=new q(this.ji(e.x),this.ji(e.y),this.ji(e.offsetX),this.ji(e.offsetY));else if(t==="Brush"){const n=new Qe;n.type=u.Yh(Zn,e.type)??1,typeof e.color=="string"&&(n.color=e.color),e.start instanceof q&&(n.start=e.start),e.end instanceof q&&(n.end=e.end),typeof e.startRadius=="number"&&(n.startRadius=this.ji(e.startRadius)),typeof e.endRadius=="number"&&(n.endRadius=this.ji(e.endRadius));const s=e.colorStops;if(u.j(s))for(const r in s){const A=parseFloat(r);n.addColorStop(A,s[r])}i=n}else if(t==="Geometry"){let n=null;typeof e.path=="string"?n=Jt.parse(e.path):n=new Jt,n.type=u.Yh(me,e.type)??1,typeof e.startX=="number"&&(n.startX=this.ji(e.startX)),typeof e.startY=="number"&&(n.startY=this.ji(e.startY)),typeof e.endX=="number"&&(n.endX=this.ji(e.endX)),typeof e.endY=="number"&&(n.endY=this.ji(e.endY)),e.spot1 instanceof q&&(n.spot1=e.spot1),e.spot2 instanceof q&&(n.spot2=e.spot2),i=n}else if(t==="EnumValue"){let n=e.classType;n.indexOf("go.")===0&&(n=n.substring(3));const s=he.FN(n);u.lt(s)&&(i=u.Yh(s,e.name))}return i}get name(){return this.Ct}set name(e){const t=this.Ct;t!==e&&(u.s(e,"string",he,"name"),this.Ct=e,this.t("name",t,e))}get dataFormat(){return this.tg}set dataFormat(e){const t=this.tg;t!==e&&(u.s(e,"string",he,"dataFormat"),this.tg=e,this.t("dataFormat",t,e))}get isReadOnly(){return this.Eo}set isReadOnly(e){const t=this.Eo;t!==e&&(u.s(e,"boolean",he,"isReadOnly"),this.Eo=e,this.t("isReadOnly",t,e))}get modelData(){return this.MN}set modelData(e){const t=this.modelData;t!==e&&(u.oc(e,he,"modelData"),this.containsNodeData(e)&&u.o("Model.modelData Object must not be used by the rest of the model: "+e),this.MN=e,this.t("modelData",t,e),this.updateTargetBindings(e))}addChangedListener(e){return u.C(e,he,"addChangedListener:listener"),this.Ly.push(e),this}removeChangedListener(e){u.C(e,he,"removeChangedListener:listener");const t=this.Ly.indexOf(e);t>=0&&this.Ly.splice(t,1)}DM(e){this.skipsUndoManager||this.undoManager.handleChanged(e),this.ZT(e)}ZT(e){this.Ly.forEach(t=>t(e))}rF(e){this.ZT(e)}raiseChangedEvent(e,t,i,n,s,r,A){this.Ut("",e,t,i,n,s,r,A)}raiseChanged(e,t,i,n,s){this.Ut("",2,e,this,t,i,n,s)}t(e,t,i,n,s){this.Ut("",2,e,this,t,i,n,s)}raiseDataChanged(e,t,i,n,s,r){this.Ut("",2,t,e,i,n,s,r)}Ut(e,t,i,n,s,r,A,o){A===void 0&&(A=null),o===void 0&&(o=null);const a=new ke;a.model=this,a.change=t,a.modelChange=e,a.propertyName=i,a.object=n,a.oldValue=s,a.oldParam=A,a.newValue=r,a.newParam=o,this.DM(a)}get undoManager(){return this.R1}set undoManager(e){const t=this.R1;t!==e&&(t!==null&&t.removeModel(this),this.R1=e,e!==null&&e.addModel(this))}get skipsUndoManager(){return this.Io}set skipsUndoManager(e){u.s(e,"boolean",he,"skipsUndoManager"),this.Io=e}changeState(e,t){if(e!==null&&e.model===this)if(e.change===2){const i=e.object,n=e.propertyName,s=e.getValue(t);if(n===this.nodeKeyProperty&&this.containsNodeData(i)){const r=e.getValue(!t);r!==void 0&&this.wi.delete(r),s!==void 0&&this.wi.set(s,i)}this.nt(i,n,s)}else if(e.change===3){const i=e.newParam;if(e.modelChange==="nodeDataArray"){const n=e.newValue;if(u.j(n)&&typeof i=="number"){const s=this.getKeyForNodeData(n);t?(this.Re[i]===n&&this.Po(this.Re,i),s!==void 0&&this.wi.delete(s)):(this.Re[i]!==n&&this.rr(this.Re,i,n),s!==void 0&&this.wi.set(s,n))}}else if(e.modelChange===""){let n=e.object;if(n&&!Array.isArray(n)&&e.propertyName&&(n=this.kt(n,e.propertyName)),Array.isArray(n)&&typeof i=="number"){const s=e.newValue;t?this.Po(n,i):this.rr(n,i,s)}}else u.o("unknown ChangeType.Insert modelChange: "+e.toString())}else if(e.change===4){const i=e.oldParam;if(e.modelChange==="nodeDataArray"){const n=e.oldValue;if(u.j(n)&&typeof i=="number"){const s=this.getKeyForNodeData(n);t?(this.Re[i]!==n&&this.rr(this.Re,i,n),s!==void 0&&this.wi.set(s,n)):(this.Re[i]===n&&this.Po(this.Re,i),s!==void 0&&this.wi.delete(s))}}else if(e.modelChange===""){let n=e.object;if(n&&!Array.isArray(n)&&e.propertyName&&(n=this.kt(n,e.propertyName)),Array.isArray(n)&&typeof i=="number"){const s=e.oldValue;t?this.rr(n,i,s):this.Po(n,i)}}else u.o("unknown ChangeType.Remove modelChange: "+e.toString())}else e.change===1||u.o("unknown ChangedEvent: "+e.toString())}startTransaction(e){return this.undoManager.startTransaction(e)}commitTransaction(e){return this.undoManager.commitTransaction(e)}rollbackTransaction(){return this.undoManager.rollbackTransaction()}commit(e,t){let i=t;i===void 0&&(i="");const n=this.skipsUndoManager;i===null&&(this.skipsUndoManager=!0,i=""),this.undoManager.startTransaction(i);let s=!1;try{e(this),s=!0}finally{s?this.undoManager.commitTransaction(i):this.undoManager.rollbackTransaction(),this.skipsUndoManager=n}}updateTargetBindings(e,t){t===void 0&&(t=""),this.Ut("SourceChanged",1,t,e,null,null)}get nodeKeyProperty(){return this.vh}set nodeKeyProperty(e){const t=this.vh;t!==e&&(this.Fn(e,he,"nodeKeyProperty"),e===""&&u.o("Model.nodeKeyProperty may not be the empty string"),this.wi.count>0&&u.o("Cannot set Model.nodeKeyProperty when there is existing node data"),this.vh=e,this.t("nodeKeyProperty",t,e))}Fn(e,t,i){}getKeyForNodeData(e){if(e===null)return;const t=this.vh;if(t==="")return;const i=this.kt(e,t);if(i!==void 0){if(this.isKeyType(i))return i;u.o("Key value for node data "+e+" is not a number or a string: "+i)}}setKeyForNodeData(e,t){if((t==null||!this.isKeyType(t))&&u.te(t,"number or string",he,"setKeyForNodeData:key"),e===null)return;const i=this.vh;if(i==="")return;if(!this.containsNodeData(e)){this.nt(e,i,t);return}const n=this.kt(e,i);if(n!==t){if(this.findNodeDataForKey(t)!==null)return;this.nt(e,i,t),n!==void 0&&this.wi.delete(n),this.wi.set(t,e),this.Ut("nodeKey",2,i,e,n,t),typeof i=="string"&&this.updateTargetBindings(e,i),this.Dy(n,t)}}get makeUniqueKeyFunction(){return this.Of}set makeUniqueKeyFunction(e){const t=this.Of;t!==e&&(e!==null&&u.C(e,he,"makeUniqueKeyFunction"),this.Of=e,this.t("makeUniqueKeyFunction",t,e))}isKeyType(e){return typeof e=="number"||typeof e=="string"}containsNodeData(e){if(e===null)return!1;const t=this.getKeyForNodeData(e);return t===void 0?!1:this.wi.get(t)===e}findNodeDataForKey(e){return e===null&&u.o("Model.findNodeDataForKey:key must not be null"),e===void 0||!this.isKeyType(e)?null:this.wi.get(e)}get nodeDataArray(){return this.Re}set nodeDataArray(e){const t=this.Re;if(t!==e){this.RN(e,he,"nodeDataArray"),this.wi.clear(),this.vN();const i=e.length;for(let r=0;r<i;r++){const A=e[r];u.j(A)||u.o("Model.nodeDataArray must only contain Objects, not: "+A),A===this.modelData&&u.o("nodeDataArray Objects must not be the shared Model.modelData")}this.Re=e;const n=new H;for(let r=0;r<i;r++){const A=e[r],o=this.getKeyForNodeData(A);o===void 0||this.wi.get(o)!==null?n.add(A):this.wi.set(o,A)}const s=n.iterator;for(;s.next();){const r=s.value;this.makeNodeDataKeyUnique(r);const A=this.getKeyForNodeData(r);A!==void 0&&this.wi.set(A,r)}this.Ut("nodeDataArray",2,"nodeDataArray",this,t,e);for(let r=0;r<i;r++){const A=e[r];this.hg(A),this.ag(A)}}}I1(e){return e===void 0?!1:this.wi.has(e)}makeNodeDataKeyUnique(e){if(e===null)return;const t=this.vh;if(t==="")return;let i=this.getKeyForNodeData(e);if(i!==void 0&&!this.I1(i))return;const n=this.Of;if(n!==null&&(i=n(this,e),i!=null&&!this.I1(i))){this.nt(e,t,i);return}if(typeof i=="string"){let s=2;for(;this.I1(i+s);)s++;this.nt(e,t,i+s)}else if(i===void 0||typeof i=="number"){let s=-this.wi.count-1;for(;this.I1(s);)s--;this.nt(e,t,s)}}addNodeData(e){e!==null&&(e===this.modelData&&u.o("Model.addNodeData cannot add the shared Model.modelData Object"),this.containsNodeData(e)||this.vT(e,!0))}vT(e,t){let i=this.getKeyForNodeData(e);if(i===void 0)this.makeNodeDataKeyUnique(e),i=this.getKeyForNodeData(e);else{if(this.wi.get(i)===e)return;this.makeNodeDataKeyUnique(e),i=this.getKeyForNodeData(e)}i===void 0&&u.o("Model.makeNodeDataKeyUnique failed on "+e+".  Data not added to Model."),this.wi.set(i,e);let n=null;t&&(n=this.Re.length,this.rr(this.Re,n,e)),this.Ut("nodeDataArray",3,"nodeDataArray",this,null,e,null,n),this.hg(e),this.ag(e)}addNodeDataCollection(e){if(Array.isArray(e)){const t=e.length;for(let i=0;i<t;i++)this.addNodeData(e[i])}else{const t=e.iterator;for(;t.next();){const i=t.value;this.addNodeData(i)}}}removeNodeData(e){e!==null&&this.RT(e,!0)}RT(e,t){const i=this.getKeyForNodeData(e);i!==void 0&&this.wi.delete(i);let n=null;if(t){if(n=this.Re.indexOf(e),n<0)return;this.Po(this.Re,n)}this.Ut("nodeDataArray",4,"nodeDataArray",this,e,null,n,null),this.Fy(e)}removeNodeDataCollection(e){if(Array.isArray(e)){const t=e.length;for(let i=0;i<t;i++)this.removeNodeData(e[i])}else{const t=e.iterator;for(;t.next();){const i=t.value;this.removeNodeData(i)}}}mergeNodeDataArray(e){if(e===this.nodeDataArray||!Array.isArray(e))return;const t=new X;t.addAll(this.wi.iteratorKeys);const i=new X,n=e.length;for(let r=0;r<n;r++){const A=e[r],o=this.getKeyForNodeData(A);if(o!==void 0){i.add(o);const a=this.findNodeDataForKey(o);if(a===A)continue;if(a!==null)this.assignAllDataProperties(a,A),this.lg(A,a);else{const h=this.cloneDeep(A);this.setKeyForNodeData(h,o),this.addNodeData(h)}}else{const a=this.cloneDeep(A);this.addNodeData(a),i.add(this.getKeyForNodeData(a))}}const s=t.iterator;for(;s.next();){const r=s.value;if(!i.has(r)){const A=this.findNodeDataForKey(r);A&&this.removeNodeData(A)}}}Dy(e,t){if(t===void 0)return;const i=this.My(e);i instanceof X&&this.or.set(t,i)}vN(){}hg(e){}ag(e){}Fy(e){}tn(e,t){if(e===void 0)return;let i=this.or.get(e);i===null&&(i=new X,this.or.set(e,i)),i.add(t)}_s(e,t){if(e===void 0)return;const i=this.or.get(e);i instanceof X&&(t==null?this.or.delete(e):(i.delete(t),i.count===0&&this.or.delete(e)))}My(e){if(e===void 0)return null;const t=this.or.get(e);return t instanceof X?t:null}AE(e){e===void 0?this.or.clear():this.or.delete(e)}get copyNodeDataFunction(){return this.If}set copyNodeDataFunction(e){const t=this.If;t!==e&&(e!==null&&u.C(e,he,"copyNodeDataFunction"),this.If=e,this.t("copyNodeDataFunction",t,e))}get copiesArrays(){return this.ig}set copiesArrays(e){const t=this.ig;t!==e&&(e!==null&&u.s(e,"boolean",he,"copiesArrays"),this.ig=e,this.t("copiesArrays",t,e))}get copiesArrayObjects(){return this.eg}set copiesArrayObjects(e){const t=this.eg;t!==e&&(e!==null&&u.s(e,"boolean",he,"copiesArrayObjects"),this.eg=e,this.t("copiesArrayObjects",t,e))}get copiesKey(){return this.sg}set copiesKey(e){const t=this.sg;t!==e&&(e!==null&&u.s(e,"boolean",he,"copiesKey"),this.sg=e,this.t("copiesKey",t,e))}copyNodeData(e){if(e===null)return null;let t=null;const i=this.If;return i!==null?t=i(e,this):t=this.E1(e,!0),t}E1(e,t){if(u.j(e))if(Array.isArray(e))if(this.copiesArrays){const i=e,n=[];for(let s=0;s<i.length;s++){const r=i[s],A=this.E1(r,this.copiesArrayObjects);n.push(A)}return n}else return e;else{if(e instanceof T||e instanceof ct||e instanceof it||e instanceof Rt||e instanceof q)return e.copy();if(t){const i=e,n=i.constructor,s=n?new n:{},r=!this.copiesKey&&typeof this.nodeKeyProperty=="string"?this.nodeKeyProperty:null;for(const A in i){if(A==="__gohashid"){s.__gohashid=void 0;continue}if(A===r){s[r]=void 0;continue}const o=this.kt(i,A);if(!u.j(o))s[A]=o;else if(he.CN(i,A,o))this.nt(s,A,o);else{const a=this.E1(o,!1);this.nt(s,A,a)}}return s}else return e}else return e}get afterCopyFunction(){return this.ng}set afterCopyFunction(e){const t=this.ng;t!==e&&(e!==null&&u.C(e,he,"afterCopyFunction"),this.ng=e,this.t("afterCopyFunction",t,e))}static CN(e,t,i){const n=u.Vn(i);return i instanceof he||i instanceof Ae||i instanceof jt||i instanceof ke||i instanceof Ye||i instanceof je||i instanceof ge||i instanceof EventTarget||n==="Layer"||n==="RowColumnDefinition"||n.indexOf("Animation")>=0||n.indexOf("Tool")>=0||n.indexOf("CommandHandler")>=0||n.indexOf("Layout")>=0}setDataProperty(e,t,i){if(this.containsNodeData(e)){if(t===this.nodeKeyProperty){this.setKeyForNodeData(e,i);return}else if(t===this.nodeCategoryProperty){this.setCategoryForNodeData(e,i);return}}else!he.QT&&e instanceof Ye&&(he.QT=!0,u.ri('Model.setDataProperty is modifying a GraphObject, "'+e.toString()+'"'),u.ri("  Is that really your intent?"));const n=this.kt(e,t);n!==i&&(this.nt(e,t,i),this.raiseDataChanged(e,t,n,i))}set(e,t,i){this.setDataProperty(e,t,i)}assignAllDataProperties(e,t){if(!t)return;const i=this.containsNodeData(e);for(const n in t)n!=="__gohashid"&&(i&&n===this.nodeKeyProperty||this.setDataProperty(e,n,t[n]))}addArrayItem(e,t){this.insertArrayItem(e,-1,t)}insertArrayItem(e,t,i){t<0&&(t=e.length),e=this.rr(e,t,i),this.Ut("",3,"",e,null,i,null,t)}removeArrayItem(e,t){t===void 0&&(t=-1),e===this.Re&&u.o("Model.removeArrayItem should not be called on the Model.nodeDataArray"),t===-1&&(t=e.length-1);const i=e[t];e=this.Po(e,t),this.Ut("",4,"",e,i,null,t,null)}get nodeCategoryProperty(){return this.qa}set nodeCategoryProperty(e){const t=this.qa;t!==e&&(this.Fn(e,he,"nodeCategoryProperty"),this.qa=e,this.t("nodeCategoryProperty",t,e))}getCategoryForNodeData(e){if(e===null)return"";const t=this.qa;if(t==="")return"";const i=this.kt(e,t);if(i===void 0)return"";if(typeof i=="string")return i;u.o("getCategoryForNodeData found a non-string category for "+e+": "+i)}setCategoryForNodeData(e,t){if(u.s(t,"string",he,"setCategoryForNodeData:cat"),e===null)return;const i=this.qa;if(i==="")return;if(!this.containsNodeData(e)){this.nt(e,i,t);return}let n=this.kt(e,i);n===void 0&&(n=""),n!==t&&(this.nt(e,i,t),this.Ut("nodeCategory",2,i,e,n,t))}lg(e,t){this.setCategoryForNodeData(t,this.getCategoryForNodeData(e))}get type(){return"Model"}xm(){return!1}wm(){return!1}xb(){return!1}Ea(){return!1}Uw(){return!1}$c(){return!1}static wM(){return new he}kt(e,t){return he.kt(e,t)}static kt(e,t){if(!e||!t)return null;let i;try{u.lt(t)?i=t(e):u.lt(e.getAttribute)?(i=e.getAttribute(t),i===null&&(i=void 0)):i=e[t]}catch{}return i}nt(e,t,i){he.nt(e,t,i)}static nt(e,t,i){if(!(!e||!t)){try{u.lt(t)?t(e,i):u.lt(e.setAttribute)?e.setAttribute(t,i):e[t]=i}catch{}return e}}RN(e,t,i){}JT(e,t,i){return e[t]=i,e}rr(e,t,i){return t>=e.length?e.push(i):e.splice(t,0,i),e}Po(e,t){return t>=e.length?e.pop():e.splice(t,1),e}static FN(e){return he.ON[e]?he.ON[e]:y.go!==void 0&&y.go[e]?y.go[e]:null}static xl(e,t){he.ON[t]=e}};p(he,"jT",`,
  "insertedNodeKeys": `),p(he,"XO",`,
  "modifiedNodeData": `),p(he,"qT",`,
  "removedNodeKeys": `),p(he,"QT",!1),p(he,"ON",{}),he.xl(Qe,"Brush"),he.xl(Jt,"Geometry"),he.xl(Rt,"Margin"),he.xl(T,"Point"),he.xl(it,"Rect"),he.xl(ct,"Size"),he.xl(q,"Spot"),he.xl(he,"Model");let hi=he;hi.fromJSON=hi.fromJson=hi.fromJson;const si=class si extends hi{constructor(t,i,n){super();p(this,"Ss");p(this,"lr");p(this,"vi");p(this,"Ih");p(this,"Ef");p(this,"Bf");p(this,"Ol");p(this,"So");p(this,"Mo");p(this,"Wa");p(this,"Ja");p(this,"$a");p(this,"en");p(this,"Uf");p(this,"Rn");p(this,"cg");p(this,"tD",`,
  "insertedLinkKeys": `);p(this,"GO",`,
  "modifiedLinkData": `);p(this,"iD",`,
  "removedLinkKeys": `);if(this.Ss=[],this.lr=new X,this.vi=new xt,this.Ih="",this.Ef=null,this.Bf=null,this.Ol=null,this.So="from",this.Mo="to",this.Wa="",this.Ja="",this.$a="category",this.en="",this.Uf="isGroup",this.Rn="group",this.cg=!1,i!==void 0&&(this.linkDataArray=i),t!==void 0&&(Array.isArray(t)?this.nodeDataArray=t:n=t),n){Object.assign(this,n);const s=n.Changed;s&&(delete this.Changed,this.addChangedListener(s))}}cloneProtected(t){super.cloneProtected(t),t.Ih=this.Ih,t.Ef=this.Ef,t.Bf=this.Bf,t.So=this.So,t.Mo=this.Mo,t.Wa=this.Wa,t.Ja=this.Ja,t.$a=this.$a,t.en=this.en,t.Uf=this.Uf,t.Rn=this.Rn,t.cg=this.cg}clear(){this.Ss=[],this.vi.clear(),this.lr.clear(),super.clear()}toString(t){if(t===void 0&&(t=0),t>=2)return this.toJson();{let i=(this.name!==""?this.name:"")+" GraphLinksModel";if(t>0){i+=`
 node data:`;let n=this.nodeDataArray,s=n.length,r=0;for(r=0;r<s;r++){const A=n[r];i+=" "+this.getKeyForNodeData(A)+":"+ms.toString(A)}for(i+=`
 link data:`,n=this.linkDataArray,s=n.length,r=0;r<s;r++){const A=n[r];i+=" "+this.Fe(A,!0)+"-->"+this.Fe(A,!1)}}return i}}NN(t,i,n){if(this.linkKeyProperty===""){const g=this.skipsUndoManager;this.skipsUndoManager=!0,this.linkKeyProperty="key",this.skipsUndoManager=g}let s=super.NN(t,i,n);const r=this,A=new X,o=new X,a=new X;t.changes.each(g=>{if(g.model===r){if(g.modelChange==="linkDataArray")g.change===3?A.add(g.newValue):g.change===4&&a.add(g.oldValue);else if(r.containsLinkData(g.object))o.add(g.object);else if(g.object!==null)if(g.object!==null&&n.has(g.object))n.get(g.object).each(x=>{r.containsLinkData(x)&&o.add(x)});else{if(g.object instanceof hi||r.containsNodeData(g.object))return;r._T(g.object).each(x=>o.add(x))}}});const h=new X;A.each(g=>{h.add(r.getKeyForLinkData(g)),i||o.add(g)});const d=new X;a.each(g=>{d.add(r.getKeyForLinkData(g)),i&&o.add(g)});const f=r.cloneDeep(o.toArray());return h.count>0&&(s===null&&(s={}),i?s.removedLinkKeys=h.toArray():s.insertedLinkKeys=h.toArray()),f.length>0&&(s===null&&(s={}),s.modifiedLinkData=f),d.count>0&&(s===null&&(s={}),i?s.insertedLinkKeys=d.toArray():s.removedLinkKeys=d.toArray()),s}rg(){const t=super.rg();let i="";return this.linkCategoryProperty!=="category"&&typeof this.linkCategoryProperty=="string"&&(i+=`,
  "linkCategoryProperty": `+this.ve(this.linkCategoryProperty)),this.linkKeyProperty!==""&&typeof this.linkKeyProperty=="string"&&(i+=`,
  "linkKeyProperty": `+this.ve(this.linkKeyProperty)),this.linkFromKeyProperty!=="from"&&typeof this.linkFromKeyProperty=="string"&&(i+=`,
  "linkFromKeyProperty": `+this.ve(this.linkFromKeyProperty)),this.linkToKeyProperty!=="to"&&typeof this.linkToKeyProperty=="string"&&(i+=`,
  "linkToKeyProperty": `+this.ve(this.linkToKeyProperty)),this.linkFromPortIdProperty!==""&&typeof this.linkFromPortIdProperty=="string"&&(i+=`,
  "linkFromPortIdProperty": `+this.ve(this.linkFromPortIdProperty)),this.linkToPortIdProperty!==""&&typeof this.linkToPortIdProperty=="string"&&(i+=`,
  "linkToPortIdProperty": `+this.ve(this.linkToPortIdProperty)),this.linkLabelKeysProperty!==""&&typeof this.linkLabelKeysProperty=="string"&&(i+=`,
  "linkLabelKeysProperty": `+this.ve(this.linkLabelKeysProperty)),this.nodeIsGroupProperty!=="isGroup"&&typeof this.nodeIsGroupProperty=="string"&&(i+=`,
  "nodeIsGroupProperty": `+this.ve(this.nodeIsGroupProperty)),this.nodeGroupKeyProperty!=="group"&&typeof this.nodeGroupKeyProperty=="string"&&(i+=`,
  "nodeGroupKeyProperty": `+this.ve(this.nodeGroupKeyProperty)),t+i}Ay(t){super.Ay(t),t.linkKeyProperty&&(this.linkKeyProperty=t.linkKeyProperty),t.linkFromKeyProperty&&(this.linkFromKeyProperty=t.linkFromKeyProperty),t.linkToKeyProperty&&(this.linkToKeyProperty=t.linkToKeyProperty),t.linkFromPortIdProperty&&(this.linkFromPortIdProperty=t.linkFromPortIdProperty),t.linkToPortIdProperty&&(this.linkToPortIdProperty=t.linkToPortIdProperty),t.linkCategoryProperty&&(this.linkCategoryProperty=t.linkCategoryProperty),t.linkLabelKeysProperty&&(this.linkLabelKeysProperty=t.linkLabelKeysProperty),t.nodeIsGroupProperty&&(this.nodeIsGroupProperty=t.nodeIsGroupProperty),t.nodeGroupKeyProperty&&(this.nodeGroupKeyProperty=t.nodeGroupKeyProperty)}LN(){const t=super.LN(),i=`,
  "linkDataArray": `+this.Oh(this.linkDataArray,!0);return t+i}AN(t){super.AN(t);const i=t.linkDataArray;Array.isArray(i)&&(this.replaceJsonObjects(i),this.linkDataArray=i)}_T(t){const i=new X;for(let n=0;n<this.linkDataArray.length;n++){const s=this.linkDataArray[n];this.O1(t,s,s,i)}return i}DN(t,i,n){if(this.linkKeyProperty===""){const g=this.skipsUndoManager;this.skipsUndoManager=!0,this.linkKeyProperty="key",this.skipsUndoManager=g}const s=super.DN(t,i,n),r=this,A=new X,o=new X,a=new X;t.changes.each(g=>{if(g.model===r){if(g.modelChange==="linkDataArray")g.change===3?A.add(g.newValue):g.change===4&&a.add(g.oldValue);else if(r.containsLinkData(g.object))o.add(g.object);else if(g.object!==null)if(g.object!==null&&n.has(g.object))n.get(g.object).each(x=>{r.containsLinkData(x)&&o.add(x)});else{if(g.object instanceof hi||r.containsNodeData(g.object))return;r._T(g.object).each(x=>o.add(x))}}});const h=new X;A.each(g=>{h.add(r.getKeyForLinkData(g)),i||o.add(g)});const d=new X;a.each(g=>{d.add(r.getKeyForLinkData(g)),i&&o.add(g)});let f=s;return h.count>0&&(f+=(i?this.iD:this.tD)+this.Oh(h.toArray(),!0)),o.count>0&&(f+=this.GO+this.Oh(o.toArray(),!0)),d.count>0&&(f+=(i?this.tD:this.iD)+this.Oh(d.toArray(),!0)),f}Ty(t){(t.linkCategoryProperty!==void 0&&t.linkCategoryProperty!==this.linkCategoryProperty||t.linkKeyProperty!==void 0&&t.linkKeyProperty!==this.linkKeyProperty||t.linkFromKeyProperty!==void 0&&t.linkFromKeyProperty!==this.linkFromKeyProperty||t.linkToKeyProperty!==void 0&&t.linkToKeyProperty!==this.linkToKeyProperty||t.linkFromPortIdProperty!==void 0&&t.linkFromPortIdProperty!==this.linkFromPortIdProperty||t.linkToPortIdProperty!==void 0&&t.linkToPortIdProperty!==this.linkToPortIdProperty||t.linkLabelKeysProperty!==void 0&&t.linkLabelKeysProperty!==this.linkLabelKeysProperty||t.nodeIsGroupProperty!==void 0&&t.nodeIsGroupProperty!==this.nodeIsGroupProperty||t.nodeGroupKeyProperty!==void 0&&t.nodeGroupKeyProperty!==this.nodeGroupKeyProperty)&&u.o("applyIncrementalJson cannot change Model properties"),super.Ty(t);const i=t.insertedLinkKeys;if(Array.isArray(i)){const r=i.length;for(let A=0;A<r;A++){const o=i[A];let a=this.findLinkDataForKey(o);a===null&&(a=this.copyLinkData({}),this.setKeyForLinkData(a,o),this.addLinkData(a))}}const n=t.modifiedLinkData;if(Array.isArray(n)){const r=n.length;for(let A=0;A<r;A++){const o=n[A],a=this.getKeyForLinkData(o),h=this.findLinkDataForKey(a);if(h!==null){for(const d in o)d==="__gohashid"||d===this.linkKeyProperty||this.setDataProperty(h,d,o[d]);this.eD(o,h)}}}const s=t.removedLinkKeys;if(Array.isArray(s)){const r=s.length;for(let A=0;A<r;A++){const o=s[A],a=this.findLinkDataForKey(o);a!==null&&this.removeLinkData(a)}}}changeState(t,i){if(!(t===null||t.model!==this)){if(t.change===2){const n=t.object,s=t.propertyName;if(s===this.linkKeyProperty&&this.containsLinkData(n)){const r=t.getValue(i),A=t.getValue(!i);A!==void 0&&this.vi.delete(A),r!==void 0&&this.vi.set(r,n),this.nt(n,s,r);return}}else if(t.change===3){let n=t.newParam;if(t.modelChange==="linkDataArray"){const s=t.newValue;if(u.j(s)&&typeof n=="number"){const r=this.getKeyForLinkData(s);i?(this.lr.delete(s),this.Ss[n]===s&&this.Po(this.linkDataArray,n),r!==void 0&&this.vi.delete(r)):(this.lr.add(s),this.Ss[n]!==s&&this.rr(this.Ss,n,s),r!==void 0&&this.vi.set(r,s))}return}else if(t.modelChange==="linkLabelKeys"){const s=t.object,r=this.getLabelKeysForLinkData(s);Array.isArray(r)&&typeof n=="number"&&(i?(n=r.indexOf(t.newValue),n>=0&&this.Po(r,n)):r.indexOf(t.newValue)<0&&this.rr(r,n,t.newValue));return}}else if(t.change===4){let n=t.oldParam;if(t.modelChange==="linkDataArray"){const s=t.oldValue;if(u.j(s)&&typeof n=="number"){const r=this.getKeyForLinkData(s);i?(this.lr.add(s),this.Ss[n]!==s&&this.rr(this.Ss,n,s),r!==void 0&&this.vi.set(r,s)):(this.lr.delete(s),this.Ss[n]===s&&this.Po(this.linkDataArray,n),r!==void 0&&this.vi.delete(r))}return}else if(t.modelChange==="linkLabelKeys"){const s=t.object,r=this.getLabelKeysForLinkData(s);Array.isArray(r)&&typeof n=="number"&&(i?r.indexOf(t.newValue)<0&&this.rr(r,n,t.newValue):(n=r.indexOf(t.newValue),n>=0&&this.Po(r,n)));return}}super.changeState(t,i)}}get archetypeNodeData(){return this.Ol}set archetypeNodeData(t){const i=this.Ol;i!==t&&(t!==null&&u.oc(t,si,"archetypeNodeData"),this.Ol=t,this.t("archetypeNodeData",i,t))}IN(t){if(t===void 0)return;const i=this.Ol;if(i!==null){let n=this.findNodeDataForKey(t);n===null&&(n=this.copyNodeData(i),this.nt(n,this.nodeKeyProperty,t),this.addNodeData(n))}return t}get linkFromKeyProperty(){return this.So}set linkFromKeyProperty(t){const i=this.So;i!==t&&(this.Fn(t,si,"linkFromKeyProperty"),this.So=t,this.t("linkFromKeyProperty",i,t))}getFromKeyForLinkData(t){return this.Fe(t,!0)}setFromKeyForLinkData(t,i){this.Qd(t,i,!0)}get linkToKeyProperty(){return this.Mo}set linkToKeyProperty(t){const i=this.Mo;i!==t&&(this.Fn(t,si,"linkToKeyProperty"),this.Mo=t,this.t("linkToKeyProperty",i,t))}getToKeyForLinkData(t){return this.Fe(t,!1)}setToKeyForLinkData(t,i){this.Qd(t,i,!1)}Fe(t,i){if(t===null)return;const n=i?this.So:this.Mo;if(n==="")return;const s=this.kt(t,n);if(s!==void 0){if(this.isKeyType(s))return s;u.o((i?"FromKey":"ToKey")+" value for link data "+t+" is not a number or a string: "+s)}}Qd(t,i,n){if(i===null&&(i=void 0),i!==void 0&&!this.isKeyType(i)&&u.te(i,"number or string",si,n?"setFromKeyForLinkData:key":"setToKeyForLinkData:key"),t===null)return;const s=n?this.So:this.Mo;if(s==="")return;if(i=this.IN(i),!this.containsLinkData(t)){this.nt(t,s,i);return}const r=this.kt(t,s);r!==i&&(this._s(r,t),this.nt(t,s,i),this.findNodeDataForKey(i)===null&&this.tn(i,t),this.Ut(n?"linkFromKey":"linkToKey",2,s,t,r,i),typeof s=="string"&&this.updateTargetBindings(t,s))}get linkFromPortIdProperty(){return this.Wa}set linkFromPortIdProperty(t){const i=this.Wa;i!==t&&(this.Fn(t,si,"linkFromPortIdProperty"),this.Wa=t,this.t("linkFromPortIdProperty",i,t))}getFromPortIdForLinkData(t){return this.T1(t,!0)}setFromPortIdForLinkData(t,i){this._d(t,i,!0)}get linkToPortIdProperty(){return this.Ja}set linkToPortIdProperty(t){const i=this.Ja;i!==t&&(this.Fn(t,si,"linkToPortIdProperty"),this.Ja=t,this.t("linkToPortIdProperty",i,t))}getToPortIdForLinkData(t){return this.T1(t,!1)}setToPortIdForLinkData(t,i){this._d(t,i,!1)}T1(t,i){if(t===null)return"";const n=i?this.Wa:this.Ja;if(n==="")return"";const s=this.kt(t,n);return s===void 0?"":s}_d(t,i,n){if(t===null)return;const s=n?this.Wa:this.Ja;if(s==="")return;if(!this.containsLinkData(t)){this.nt(t,s,i);return}let r=this.kt(t,s);r===void 0&&(r=""),r!==i&&(this.nt(t,s,i),this.Ut(n?"linkFromPortId":"linkToPortId",2,s,t,r,i),typeof s=="string"&&this.updateTargetBindings(t,s))}get linkLabelKeysProperty(){return this.en}set linkLabelKeysProperty(t){const i=this.en;i!==t&&(this.Fn(t,si,"linkLabelKeysProperty"),this.en=t,this.t("linkLabelKeysProperty",i,t))}getLabelKeysForLinkData(t){if(t===null)return si.EmptyArray;const i=this.en;if(i==="")return si.EmptyArray;const n=this.kt(t,i);return n===void 0?si.EmptyArray:n}setLabelKeysForLinkData(t,i){if(this.RN(i,si,"setLabelKeysForLinkData:arr"),t===null)return;const n=this.en;if(n==="")return;if(!this.containsLinkData(t)){this.nt(t,n,i);return}let s=this.kt(t,n);if(s===void 0&&(s=si.EmptyArray),s!==i){if(Array.isArray(s)){const A=s.length;for(let o=0;o<A;o++){const a=s[o];this._s(a,t)}}this.nt(t,n,i);const r=i.length;for(let A=0;A<r;A++){const o=i[A];this.findNodeDataForKey(o)===null&&this.tn(o,t)}this.Ut("linkLabelKeys",2,n,t,s,i),typeof n=="string"&&this.updateTargetBindings(t,n)}}addLabelKeyForLinkData(t,i){if(i==null||(this.isKeyType(i)||u.te(i,"number or string",si,"addLabelKeyForLinkData:key"),t===null))return;const n=this.en;if(n==="")return;const s=this.kt(t,n);if(s===void 0){const r=[];r.push(i),this.setLabelKeysForLinkData(t,r)}else if(Array.isArray(s)){let r=s.indexOf(i);if(r>=0)return;r=s.length,s.push(i),this.containsLinkData(t)&&(this.findNodeDataForKey(i)===null&&this.tn(i,t),this.Ut("linkLabelKeys",3,n,t,null,i,null,r))}else u.o(n+" property is not an Array; cannot addLabelKeyForLinkData: "+t)}removeLabelKeyForLinkData(t,i){if(i==null||(this.isKeyType(i)||u.te(i,"number or string",si,"removeLabelKeyForLinkData:key"),t===null))return;const n=this.en;if(n==="")return;const s=this.kt(t,n);if(Array.isArray(s)){const r=s.indexOf(i);if(r<0)return;this.Po(s,r),this.containsLinkData(t)&&(this._s(i,t),this.Ut("linkLabelKeys",4,n,t,i,null,r,null))}else s!==void 0&&u.o(n+" property is not an Array; cannot removeLabelKeyforLinkData: "+t)}get linkDataArray(){return this.Ss}set linkDataArray(t){const i=this.Ss;if(i!==t){this.RN(t,si,"linkDataArray"),this.vi.clear();const n=t.length;for(let r=0;r<n;r++){const A=t[r];u.j(A)||u.o("GraphLinksModel.linkDataArray must only contain Objects, not: "+A)}if(this.Ss=t,this.linkKeyProperty!==""){const r=new H;for(let o=0;o<n;o++){const a=t[o],h=this.getKeyForLinkData(a);h===void 0||this.vi.get(h)!==null?r.add(a):this.vi.set(h,a)}const A=r.iterator;for(;A.next();){const o=A.value;this.makeLinkDataKeyUnique(o);const a=this.getKeyForLinkData(o);a!==void 0&&this.vi.set(a,o)}}const s=new X;for(let r=0;r<n;r++){const A=t[r];s.add(A)}this.lr=s,this.Ut("linkDataArray",2,"linkDataArray",this,i,t);for(let r=0;r<n;r++){const A=t[r];this.EN(A)}}}get linkKeyProperty(){return this.Ih}set linkKeyProperty(t){const i=this.Ih;if(i!==t){this.Fn(t,si,"linkKeyProperty"),this.Ih=t,this.vi.clear();const n=this.linkDataArray.length;for(let s=0;s<n;s++){const r=this.linkDataArray[s];let A=this.getKeyForLinkData(r);A===void 0&&(this.makeLinkDataKeyUnique(r),A=this.getKeyForLinkData(r)),A!==void 0&&this.vi.set(A,r)}this.t("linkKeyProperty",i,t)}}getKeyForLinkData(t){if(t===null)return;const i=this.Ih;if(i==="")return;const n=this.kt(t,i);if(n!==void 0){if(this.isKeyType(n))return n;u.o("Key value for link data "+t+" is not a number or a string: "+n)}}setKeyForLinkData(t,i){if((i==null||!this.isKeyType(i))&&u.te(i,"number or string",si,"setKeyForLinkData:key"),t===null)return;const n=this.Ih;if(n==="")return;if(!this.containsLinkData(t)){this.nt(t,n,i);return}const s=this.kt(t,n);if(s!==i){if(this.findLinkDataForKey(i)!==null)return;this.nt(t,n,i),s!==void 0&&this.vi.delete(s),this.vi.set(i,t),this.Ut("linkKey",2,n,t,s,i),typeof n=="string"&&this.updateTargetBindings(t,n)}}get makeUniqueLinkKeyFunction(){return this.Ef}set makeUniqueLinkKeyFunction(t){const i=this.Ef;i!==t&&(this.Ef=t,this.t("makeUniqueLinkKeyFunction",i,t))}findLinkDataForKey(t){return t===null&&u.o("GraphLinksModel.findLinkDataForKey:key must not be null"),t===void 0||!this.isKeyType(t)?null:this.vi.get(t)}B1(t){return t===void 0?!1:this.vi.has(t)}makeLinkDataKeyUnique(t){if(t===null)return;const i=this.Ih;if(i==="")return;let n=this.getKeyForLinkData(t);if(n!==void 0&&!this.B1(n))return;const s=this.Ef;if(s!==null&&(n=s(this,t),n!=null&&!this.B1(n))){this.nt(t,i,n);return}if(typeof n=="string"){let r=2;for(;this.B1(n+r);)r++;this.nt(t,i,n+r)}else if(n===void 0||typeof n=="number"){let r=-this.vi.count-1;for(;this.B1(r);)r--;this.nt(t,i,r)}}containsLinkData(t){return t===null?!1:this.lr.has(t)}addLinkData(t){t!==null&&(this.containsLinkData(t)||this.VT(t,!0))}VT(t,i){if(this.linkKeyProperty!==""){let s=this.getKeyForLinkData(t);if(s===void 0)this.makeLinkDataKeyUnique(t),s=this.getKeyForLinkData(t);else{if(this.vi.get(s)===t)return;this.makeLinkDataKeyUnique(t),s=this.getKeyForLinkData(t)}s===void 0&&u.o("GraphLinksModel.makeLinkDataKeyUnique failed on "+t+". Data not added to model."),this.vi.set(s,t)}this.lr.add(t);let n=null;i&&(n=this.Ss.length,this.rr(this.Ss,n,t)),this.Ut("linkDataArray",3,"linkDataArray",this,null,t,null,n),this.EN(t)}addLinkDataCollection(t){if(Array.isArray(t)){const i=t.length;for(let n=0;n<i;n++)this.addLinkData(t[n])}else{const i=t.iterator;for(;i.next();){const n=i.value;this.addLinkData(n)}}}removeLinkData(t){t!==null&&this.UT(t,!0)}UT(t,i){this.lr.delete(t);const n=this.getKeyForLinkData(t);n!==void 0&&this.vi.delete(n);let s=null;if(i){if(s=this.Ss.indexOf(t),s<0)return;this.Po(this.Ss,s)}this.Ut("linkDataArray",4,"linkDataArray",this,t,null,s,null),this.HO(t)}removeLinkDataCollection(t){if(Array.isArray(t)){const i=t.length;for(let n=0;n<i;n++)this.removeLinkData(t[n])}else{const i=t.iterator;for(;i.next();){const n=i.value;this.removeLinkData(n)}}}mergeLinkDataArray(t){if(this.linkKeyProperty===""&&u.o("GraphLinksModel.linkKeyProperty must not be an empty string for .mergeLinkDataArray() to succeed."),t===this.linkDataArray||!Array.isArray(t))return;const i=new X;i.addAll(this.vi.iteratorKeys);const n=new X,s=t.length;for(let A=0;A<s;A++){const o=t[A],a=this.getKeyForLinkData(o);if(a!==void 0){n.add(a);const h=this.findLinkDataForKey(a);if(h===o)continue;if(h!==null)this.assignAllDataProperties(h,o),this.eD(o,h);else{const d=this.cloneDeep(o);this.setKeyForLinkData(d,a),this.addLinkData(d)}}else{const h=this.cloneDeep(o);this.addLinkData(h),n.add(this.getKeyForLinkData(h))}}const r=i.iterator;for(;r.next();){const A=r.value;if(!n.has(A)){const o=this.findLinkDataForKey(A);o&&this.removeLinkData(o)}}}EN(t){let i=this.Fe(t,!0);i=this.IN(i),this.findNodeDataForKey(i)===null&&this.tn(i,t),i=this.Fe(t,!1),i=this.IN(i),this.findNodeDataForKey(i)===null&&this.tn(i,t);const n=this.getLabelKeysForLinkData(t);if(Array.isArray(n)){const s=n.length;for(let r=0;r<s;r++)i=n[r],this.findNodeDataForKey(i)===null&&this.tn(i,t)}}HO(t){let i=this.Fe(t,!0);this._s(i,t),i=this.Fe(t,!1),this._s(i,t);const n=this.getLabelKeysForLinkData(t);if(Array.isArray(n)){const s=n.length;for(let r=0;r<s;r++)i=n[r],this._s(i,t)}}get copyLinkDataFunction(){return this.Bf}set copyLinkDataFunction(t){const i=this.Bf;i!==t&&(this.Bf=t,this.t("copyLinkDataFunction",i,t))}copyLinkData(t){if(t===null)return null;let i=null;const n=this.Bf;return n!==null?i=n(t,this):i=this.E1(t,!0),u.j(i)&&(this.So!==""&&this.nt(i,this.So,void 0),this.Mo!==""&&this.nt(i,this.Mo,void 0),this.en!==""&&this.nt(i,this.en,[])),i}get nodeIsGroupProperty(){return this.Uf}set nodeIsGroupProperty(t){const i=this.Uf;i!==t&&(this.Fn(t,si,"nodeIsGroupProperty"),this.Uf=t,this.t("nodeIsGroupProperty",i,t))}isGroupForNodeData(t){if(t===null)return!1;const i=this.Uf;return i===""?!1:!!this.kt(t,i)}isGroupForData(t){return this.isGroupForNodeData(t)}get nodeGroupKeyProperty(){return this.Rn}set nodeGroupKeyProperty(t){const i=this.Rn;i!==t&&(this.Fn(t,si,"nodeGroupKeyProperty"),this.Rn=t,this.t("nodeGroupKeyProperty",i,t))}get copiesGroupKeyOfNodeData(){return this.cg}set copiesGroupKeyOfNodeData(t){this.cg!==t&&(this.cg=t)}getGroupKeyForNodeData(t){if(t===null)return;const i=this.Rn;if(i==="")return;const n=this.kt(t,i);if(n!==void 0){if(this.isKeyType(n))return n;u.o("GroupKey value for node data "+t+" is not a number or a string: "+n)}}getGroupForData(t){return this.getGroupKeyForNodeData(t)}setGroupKeyForNodeData(t,i){if(i===null&&(i=void 0),i!==void 0&&!this.isKeyType(i)&&u.te(i,"number or string",si,"setGroupKeyForNodeData:key"),t===null)return;const n=this.Rn;if(n==="")return;if(!this.containsNodeData(t)){this.nt(t,n,i);return}const s=this.kt(t,n);s!==i&&(this._s(s,t),this.nt(t,n,i),this.findNodeDataForKey(i)===null&&this.tn(i,t),this.Ut("nodeGroupKey",2,n,t,s,i),typeof n=="string"&&this.updateTargetBindings(t,n))}setGroupForData(t,i){this.setGroupKeyForNodeData(t,i)}copyNodeData(t){if(t===null)return null;const i=super.copyNodeData(t);return!this.copiesGroupKeyOfNodeData&&this.Rn!==""&&this.kt(i,this.Rn)!==void 0&&this.nt(i,this.Rn,void 0),i}setDataProperty(t,i,n){if(this.containsNodeData(t)){if(i===this.nodeKeyProperty){this.setKeyForNodeData(t,n);return}else if(i===this.nodeCategoryProperty){this.setCategoryForNodeData(t,n);return}else if(i===this.nodeGroupKeyProperty){this.setGroupKeyForNodeData(t,n);return}}else if(this.containsLinkData(t)){if(i===this.linkFromKeyProperty){this.Qd(t,n,!0);return}else if(i===this.linkToKeyProperty){this.Qd(t,n,!1);return}else if(i===this.linkFromPortIdProperty){this._d(t,n,!0);return}else if(i===this.linkToPortIdProperty){this._d(t,n,!1);return}else if(i===this.linkKeyProperty){this.setKeyForLinkData(t,n);return}else if(i===this.linkCategoryProperty){this.setCategoryForLinkData(t,n);return}else if(i===this.linkLabelKeysProperty){this.setLabelKeysForLinkData(t,n);return}}const s=this.kt(t,i);s!==n&&(this.nt(t,i,n),this.raiseDataChanged(t,i,s,n))}assignAllDataProperties(t,i){if(!i)return;const n=this.containsNodeData(t),s=this.containsLinkData(t);for(const r in i)if(r!=="__gohashid"&&!(n&&r===this.nodeKeyProperty)){if(n&&r===this.nodeIsGroupProperty&&this.kt(t,r)===i[r]||s&&r===this.linkKeyProperty)continue;this.setDataProperty(t,r,i[r])}}Dy(t,i){super.Dy(t,i);const n=this.wi.iterator;for(;n.next();){const r=n.value;this.BN(r,t,i)}const s=this.lr.iterator;for(;s.next();){const r=s.value;this.jO(r,t,i)}}BN(t,i,n){if(this.getGroupKeyForNodeData(t)===i){const s=this.Rn;this.nt(t,s,n),this.Ut("nodeGroupKey",2,s,t,i,n),typeof s=="string"&&this.updateTargetBindings(t,s)}}jO(t,i,n){if(this.Fe(t,!0)===i){const r=this.So;this.nt(t,r,n),this.Ut("linkFromKey",2,r,t,i,n),typeof r=="string"&&this.updateTargetBindings(t,r)}if(this.Fe(t,!1)===i){const r=this.Mo;this.nt(t,r,n),this.Ut("linkToKey",2,r,t,i,n),typeof r=="string"&&this.updateTargetBindings(t,r)}const s=this.getLabelKeysForLinkData(t);if(Array.isArray(s)){const r=s.length,A=this.en;for(let o=0;o<r;o++)s[o]===i&&(this.JT(s,o,n),this.Ut("linkLabelKeys",3,A,t,i,n,o,o))}}vN(){super.vN();const t=this.linkDataArray,i=t.length;for(let n=0;n<i;n++){const s=t[n];this.EN(s)}}hg(t){super.hg(t);const i=this.getKeyForNodeData(t),n=this.My(i);if(n!==null){const s=u.ht(),r=n.iterator;for(;r.next();){const A=r.value;if(this.containsNodeData(A)){if(this.getGroupKeyForNodeData(A)===i){const o=this.Rn;this.Ut("nodeGroupKey",2,o,A,i,i),typeof o=="string"&&this.updateTargetBindings(A,o),s.push(A)}}else{if(this.Fe(A,!0)===i){const a=this.So;this.Ut("linkFromKey",2,a,A,i,i),typeof a=="string"&&this.updateTargetBindings(A,a),s.push(A)}if(this.Fe(A,!1)===i){const a=this.Mo;this.Ut("linkToKey",2,a,A,i,i),typeof a=="string"&&this.updateTargetBindings(A,a),s.push(A)}const o=this.getLabelKeysForLinkData(A);if(Array.isArray(o)){const a=o.length,h=this.en;for(let d=0;d<a;d++)o[d]===i&&(this.Ut("linkLabelKeys",3,h,A,i,i,d,d),s.push(A))}}}for(let A=0;A<s.length;A++)this._s(i,s[A]);u.et(s)}}ag(t){super.ag(t);const i=this.getGroupKeyForNodeData(t);this.findNodeDataForKey(i)===null&&this.tn(i,t)}Fy(t){super.Fy(t);const i=this.getGroupKeyForNodeData(t);this._s(i,t)}get linkCategoryProperty(){return this.$a}set linkCategoryProperty(t){const i=this.$a;i!==t&&(this.Fn(t,si,"linkCategoryProperty"),this.$a=t,this.t("linkCategoryProperty",i,t))}getCategoryForLinkData(t){if(t===null)return"";const i=this.$a;if(i==="")return"";const n=this.kt(t,i);if(n===void 0)return"";if(typeof n=="string")return n;u.o("getCategoryForLinkData found a non-string category for "+t+": "+n)}getLinkCategoryForData(t){return this.getCategoryForLinkData(t)}setCategoryForLinkData(t,i){if(t===null)return;const n=this.$a;if(n==="")return;if(!this.containsLinkData(t)){this.nt(t,n,i);return}let s=this.kt(t,n);s===void 0&&(s=""),s!==i&&(this.nt(t,n,i),this.Ut("linkCategory",2,n,t,s,i),typeof n=="string"&&this.updateTargetBindings(t,n))}setLinkCategoryForData(t,i){this.setCategoryForLinkData(t,i)}lg(t,i){super.lg(t,i),this.setGroupKeyForNodeData(i,this.getGroupKeyForNodeData(t))}eD(t,i){this.setCategoryForLinkData(i,this.getCategoryForLinkData(t)),this.setFromKeyForLinkData(i,this.getFromKeyForLinkData(t)),this.setToKeyForLinkData(i,this.getToKeyForLinkData(t)),this.setLabelKeysForLinkData(i,this.getLabelKeysForLinkData(t)),this.setFromPortIdForLinkData(i,this.getFromPortIdForLinkData(t)),this.setToPortIdForLinkData(i,this.getToPortIdForLinkData(t))}get type(){return"GraphLinksModel"}wm(){return!0}Ea(){return!0}Uw(){return!0}$c(){return!0}};p(si,"EmptyArray",Object.freeze([]));let ys=si;hi.xl(ys,"GraphLinksModel"),hi.WT=()=>new ys,hi.wM=()=>new ys;class Es extends hi{constructor(t,i){super();p(this,"vn");p(this,"fg");p(this,"Za");if(this.vn="parent",this.fg=!1,this.Za="parentLinkCategory",t!==void 0&&(Array.isArray(t)?this.nodeDataArray=t:i=t),i){Object.assign(this,i);const n=i.Changed;n&&(delete this.Changed,this.addChangedListener(n))}}cloneProtected(t){super.cloneProtected(t),t.vn=this.vn,t.fg=this.fg,t.Za=this.Za}toString(t){if(t===void 0&&(t=0),t>=2)return this.toJson();{let i=(this.name!==""?this.name:"")+" TreeModel";if(t>0){i+=`
 node data:`;const n=this.nodeDataArray,s=n.length;for(let r=0;r<s;r++){const A=n[r];i+=" "+this.getKeyForNodeData(A)+":"+ms.toString(A)}}return i}}rg(){const t=super.rg();let i="";return this.nodeParentKeyProperty!=="parent"&&typeof this.nodeParentKeyProperty=="string"&&(i+=`,
  "nodeParentKeyProperty": `+this.ve(this.nodeParentKeyProperty)),t+i}Ay(t){super.Ay(t),t.nodeParentKeyProperty&&(this.nodeParentKeyProperty=t.nodeParentKeyProperty)}Ty(t){t.nodeParentKeyProperty!==void 0&&t.nodeParentKeyProperty!==this.nodeParentKeyProperty&&u.o("applyIncrementalJson cannot change Model properties"),super.Ty(t)}maybeEnsureLinkReference(t){return t}get nodeParentKeyProperty(){return this.vn}set nodeParentKeyProperty(t){const i=this.vn;i!==t&&(this.Fn(t,Es,"nodeParentKeyProperty"),this.vn=t,this.t("nodeParentKeyProperty",i,t))}get copiesParentKeyOfNodeData(){return this.fg}set copiesParentKeyOfNodeData(t){this.fg!==t&&(this.fg=t)}getParentKeyForNodeData(t){if(t===null)return;const i=this.vn;if(i==="")return;const n=this.kt(t,i);if(n!==void 0){if(this.isKeyType(n))return n;u.o("ParentKey value for node data "+t+" is not a number or a string: "+n)}}setParentKeyForNodeData(t,i){if(i===null&&(i=void 0),i!==void 0&&!this.isKeyType(i)&&u.te(i,"number or string",Es,"setParentKeyForNodeData:key"),t===null)return;const n=this.vn;if(n==="")return;if(i=this.maybeEnsureLinkReference(i),!this.containsNodeData(t)){this.nt(t,n,i);return}const s=this.kt(t,n);s!==i&&(this._s(s,t),this.nt(t,n,i),this.findNodeDataForKey(i)===null&&this.tn(i,t),this.Ut("nodeParentKey",2,n,t,s,i),typeof n=="string"&&this.updateTargetBindings(t,n))}get parentLinkCategoryProperty(){return this.Za}set parentLinkCategoryProperty(t){const i=this.Za;i!==t&&(this.Fn(t,Es,"parentLinkCategoryProperty"),this.Za=t,this.t("parentLinkCategoryProperty",i,t))}get linkCategoryProperty(){return this.parentLinkCategoryProperty}set linkCategoryProperty(t){this.parentLinkCategoryProperty=t}getParentLinkCategoryForNodeData(t){if(t===null)return"";const i=this.Za;if(i==="")return"";const n=this.kt(t,i);if(n===void 0)return"";if(typeof n=="string")return n;u.o("getParentLinkCategoryForNodeData found a non-string category for "+t+": "+n)}getLinkCategoryForData(t){return this.getParentLinkCategoryForNodeData(t)}setParentLinkCategoryForNodeData(t,i){if(t===null)return;const n=this.Za;if(n==="")return;if(!this.containsNodeData(t)){this.nt(t,n,i);return}let s=this.kt(t,n);s===void 0&&(s=""),s!==i&&(this.nt(t,n,i),this.Ut("parentLinkCategory",2,n,t,s,i),typeof n=="string"&&this.updateTargetBindings(t,n))}setLinkCategoryForData(t,i){this.setParentLinkCategoryForNodeData(t,i)}copyNodeData(t){if(t===null)return null;const i=super.copyNodeData(t);return!this.copiesParentKeyOfNodeData&&this.vn!==""&&this.kt(i,this.vn)!==void 0&&this.nt(i,this.vn,void 0),i}setDataProperty(t,i,n){if(this.containsNodeData(t)){if(i===this.nodeKeyProperty){this.setKeyForNodeData(t,n);return}else if(i===this.nodeCategoryProperty){this.setCategoryForNodeData(t,n);return}else if(i===this.nodeParentKeyProperty){this.setParentKeyForNodeData(t,n);return}else if(i===this.parentLinkCategoryProperty){this.setParentLinkCategoryForNodeData(t,n);return}}const s=this.kt(t,i);s!==n&&(this.nt(t,i,n),this.raiseDataChanged(t,i,s,n))}Dy(t,i){super.Dy(t,i);const n=this.wi.iterator;for(;n.next();){const s=n.value;this.BN(s,t,i)}}BN(t,i,n){if(this.getParentKeyForNodeData(t)===i){const s=this.vn;this.nt(t,s,n),this.Ut("nodeParentKey",2,s,t,i,n),typeof s=="string"&&this.updateTargetBindings(t,s)}}hg(t){super.hg(t);const i=this.getKeyForNodeData(t),n=this.My(i);if(n!==null){const s=u.ht(),r=n.iterator;for(;r.next();){const A=r.value;if(this.containsNodeData(A)&&this.getParentKeyForNodeData(A)===i){const o=this.vn;this.Ut("nodeParentKey",2,o,A,i,i),typeof o=="string"&&this.updateTargetBindings(A,o),s.push(A)}}for(let A=0;A<s.length;A++)this._s(i,s[A]);u.et(s)}}ag(t){super.ag(t);let i=this.getParentKeyForNodeData(t);i=this.maybeEnsureLinkReference(i),this.findNodeDataForKey(i)===null&&this.tn(i,t)}Fy(t){super.Fy(t);const i=this.getParentKeyForNodeData(t);this._s(i,t)}lg(t,i){super.lg(t,i),this.setParentLinkCategoryForNodeData(i,this.getParentLinkCategoryForNodeData(t)),this.setParentKeyForNodeData(i,this.getParentKeyForNodeData(t))}get type(){return"TreeModel"}xm(){return!0}Uw(){return!0}}hi.xl(Es,"TreeModel");var HA=(k=>(k[k.ConstantSpacing=0]="ConstantSpacing",k[k.ConstantDistance=1]="ConstantDistance",k[k.ConstantAngle=2]="ConstantAngle",k[k.Packed=3]="Packed",k))(HA||{}),_n=(k=>(k[k.Clockwise=10]="Clockwise",k[k.Counterclockwise=11]="Counterclockwise",k[k.BidirectionalLeft=12]="BidirectionalLeft",k[k.BidirectionalRight=13]="BidirectionalRight",k))(_n||{}),tA=(k=>(k[k.Forwards=20]="Forwards",k[k.Reverse=21]="Reverse",k[k.Ascending=22]="Ascending",k[k.Descending=23]="Descending",k[k.Optimized=24]="Optimized",k))(tA||{}),Br=(k=>(k[k.Pythagorean=30]="Pythagorean",k[k.Circular=31]="Circular",k))(Br||{});class Ri extends Ni{constructor(t){super();p(this,"ce");p(this,"Vf");p(this,"U1");p(this,"ug");p(this,"V1");p(this,"Eh");p(this,"UN");p(this,"VN");p(this,"zN");p(this,"Ms");p(this,"Ry");p(this,"vy");p(this,"Qa");p(this,"Oy");p(this,"sD");p(this,"dg");p(this,"gg");p(this,"mg");p(this,"zf");p(this,"Gi");p(this,"S");p(this,"be");p(this,"ke");p(this,"Dn");p(this,"pg");this.ce=0,this.Vf=0,this.U1=0,this.ug=360,this.V1=0,this.Eh=0,this.UN=new T,this.VN=30,this.zN=0,this.Ms=0,this.Ry=0,this.vy=new eA,this.Qa=0,this.Oy=0,this.sD=600,this.dg=NaN,this.gg=1,this.mg=0,this.zf=360,this.Gi=0,this.S=10,this.be=24,this.ke=Qn.standardComparer,this.Dn=6,this.pg=30,t&&Object.assign(this,t)}cloneProtected(t){super.cloneProtected(t),t.dg=this.dg,t.gg=this.gg,t.mg=this.mg,t.zf=this.zf,t.Gi=this.Gi,t.S=this.S,t.be=this.be,t.ke=this.ke,t.Dn=this.Dn,t.pg=this.pg}li(t){t in tA?this.sorting=t:t in _n?this.direction=t:t in HA?this.arrangement=t:t in Br?this.nodeDiameterFormula=t:super.li(t)}createNetwork(){return new iA(this)}qO(t,i,n){t=this.WO(t);let s=this.V1,r=this.VN,A=this.ce,o=this.Vf,a=this.U1,h=this.ug,d=this.Eh,f=this.zN,g=this.Ms,x=this.Ry;if(s=this.arrangement,r=this.nodeDiameterFormula,A=this.radius,(!isFinite(A)||A<=0)&&(A=NaN),o=this.aspectRatio,(!isFinite(o)||o<=0)&&(o=1),a=this.startAngle,isFinite(a)||(a=0),h=this.sweepAngle,(!isFinite(h)||h>360||h<1)&&(h=360),d=this.spacing,isFinite(d)||(d=NaN),s===3&&r===31?s=0:s===3&&r!==31&&(r=31,s=this.arrangement),(this.direction===12||this.direction===13)&&this.sorting!==24){for(let F=0;!(F>=t.length||(i.add(t.elt(F)),F+1>=t.length));F+=2)n.add(t.elt(F+1));this.direction===12?(this.arrangement===3&&i.reverse(),t=new H,t.addAll(i),t.addAll(n)):(this.arrangement===3&&n.reverse(),t=new H,t.addAll(n),t.addAll(i))}const B=t.length;f=0;let C=0;for(let F=0;F<t.length;F++){const b=a+h*C*(this.direction===10?1:-1)/B;let L=t.elt(F).diameter;isNaN(L)&&(L=t.elt(F).Bh(b)),h<360&&(F===0||F===t.length-1)&&(L/=2),f+=L,C++}if(isNaN(A)||s===3){if(isNaN(d)&&(d=6),s!==0&&s!==3){let F=-1/0;for(let b=0;b<B;b++){const L=t.elt(b),Q=t.elt(b===B-1?0:b+1);isNaN(L.diameter)&&L.Bh(0),isNaN(Q.diameter)&&Q.Bh(0),F=Math.max(F,(L.diameter+Q.diameter)/2)}if(x=F+d,s===2){const b=2*Math.PI/B,L=(F+d)/b;o>1?(A=L,g=A*o):(g=L,A=g)}else A=this.z1(x*(h>=360?B:B-1),o,a*Math.PI/180,h*Math.PI/180)}else A=this.z1(f+(h>=360?B:B-1)*(s!==3?d:d*1.6),o,a*Math.PI/180,h*Math.PI/180);g=A*o}else{g=A*o;const F=this.XN(A,g,a*Math.PI/180,h*Math.PI/180);if(isNaN(d))s===0&&(d=(F-f)/(h>=360?B:B-1));else if(s===0){const b=(F-f)/(h>=360?B:B-1);b<d?(A=this.z1(f+d*(h>=360?B:B-1),o,a*Math.PI/180,h*Math.PI/180),g=A*o):d=b}else{let b=-1/0;for(let M=0;M<B;M++){const O=t.elt(M),D=t.elt(M===B-1?0:M+1);isNaN(O.diameter)&&O.Bh(0),isNaN(D.diameter)&&D.Bh(0),b=Math.max(b,(O.diameter+D.diameter)/2)}const L=b+d,Q=this.z1(L*(h>=360?B:B-1),o,a*Math.PI/180,h*Math.PI/180);Q>A?(A=Q,g=A*o,x=L):x=F/(h>=360?B:B-1)}}return this.V1=s,this.VN=r,this.ce=A,this.Vf=o,this.U1=a,this.ug=h,this.Eh=d,this.zN=f,this.Ms=g,this.Ry=x,t}doLayout(t){this.network===null&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);const i=this.network.vertexes;if(i.count<=1){if(i.count===1){const x=i.first();x.centerX=0,x.centerY=0}this.updateParts(),this.network=null,this.isValidLayout=!0;return}let n=new H;n.addAll(i.iterator);const s=new H,r=new H;n=this.qO(n,s,r);const A=this.V1,o=this.ce,a=this.U1,h=this.ug,d=this.Eh,f=this.Ms,g=this.Ry;if((this.direction===12||this.direction===13)&&A===3)this.nD(n,h,a-h/2,10);else if(this.direction===12||this.direction===13){let x=0;switch(A){case 1:x=this.X1(o,f,a,g)*180/Math.PI;break;case 0:{let B=0,C=0;const F=s.first();F!==null&&(B=F.Bh(Math.PI/2));const b=r.first();b!==null&&(C=b.Bh(Math.PI/2)),x=this.X1(o,f,a,d+(B+C)/2)*180/Math.PI;break}case 2:x=h/n.length;break}if(this.direction===12){switch(A){case 1:this.Iy(s,h/2,a,11);break;case 0:this.Ey(s,h/2,a,11);break;case 2:this.By(s,h/2,a,11);break}switch(A){case 1:this.Iy(r,h/2,a+x,10);break;case 0:this.Ey(r,h/2,a+x,10);break;case 2:this.By(r,h/2,a+x,10);break}}else{switch(A){case 1:this.Iy(r,h/2,a,11);break;case 0:this.Ey(r,h/2,a,11);break;case 2:this.By(r,h/2,a,11);break}switch(A){case 1:this.Iy(s,h/2,a+x,10);break;case 0:this.Ey(s,h/2,a+x,10);break;case 2:this.By(s,h/2,a+x,10);break}}}else switch(A){case 1:this.Iy(n,h,a,this.direction);break;case 0:this.Ey(n,h,a,this.direction);break;case 2:this.By(n,h,a,this.direction);break;case 3:this.nD(n,h,a,this.direction);break}this.updateParts(),this.network=null,this.isValidLayout=!0}By(t,i,n,s){const r=this.ug,A=this.ce,o=this.Ms,a=n*Math.PI/180,h=i*Math.PI/180,d=t.length;for(let f=0;f<d;f++){const g=a+(s===10?f*h/(r>=360?d:d-1):-(f*h)/d),x=t.elt(f),B=A*Math.tan(g)/o,C=Math.sqrt((A*A+o*o*B*B)/(1+B*B));x.centerX=C*Math.cos(g),x.centerY=C*Math.sin(g),x.actualAngle=g*180/Math.PI}}Ey(t,i,n,s){const r=this.ce,A=this.Ms,o=this.Eh;let a=n*Math.PI/180;const h=t.length;for(let d=0;d<h;d++){const f=t.elt(d),g=t.elt(d===h-1?0:d+1),x=r*Math.cos(a),B=A*Math.sin(a);f.centerX=x,f.centerY=B,f.actualAngle=a*180/Math.PI,isNaN(f.diameter)&&f.Bh(0),isNaN(g.diameter)&&g.Bh(0);const C=(f.diameter+g.diameter)/2,F=this.X1(r,A,s===10?a:-a,C+o);a+=s===10?F:-F}}Iy(t,i,n,s){const r=this.ce,A=this.Ms,o=this.Ry;let a=n*Math.PI/180;const h=t.length;for(let d=0;d<h;d++){const f=t.elt(d);f.centerX=r*Math.cos(a),f.centerY=A*Math.sin(a),f.actualAngle=a*180/Math.PI;const g=this.X1(r,A,s===10?a:-a,o);a+=s===10?g:-g}}nD(t,i,n,s){let r=this.Oy;const A=this.ug;if(this.Qa=0,this.vy=new eA,i<360){for(r=n+(s===10?A:-A);r<0;)r+=360;r%=360,r>180&&(r-=360),r*=Math.PI/180,this.Oy=r,this.oD(t,i,n,s)}else this.rD(t,i,n,s);this.vy.commit(t)}rD(t,i,n,s){const r=this.ce,A=this.Ms,o=this.Eh,a=this.Vf;let h=r*Math.cos(n*Math.PI/180),d=A*Math.sin(n*Math.PI/180);const f=t.toArray();if(f.length===3){f[0].centerX=r,f[0].centerY=0,f[1].centerX=f[0].centerX-f[0].width/2-f[1].width/2-o,f[1].y=f[0].y,f[2].centerX=(f[0].centerX+f[1].centerX)/2,f[2].y=f[0].y-f[2].height-o;return}else if(f.length===4){f[0].centerX=r,f[0].centerY=0,f[2].centerX=-f[0].centerX,f[2].centerY=f[0].centerY,f[1].centerX=0,f[1].y=Math.min(f[0].y,f[2].y)-f[1].height-o,f[3].centerX=0,f[3].y=Math.max(f[0].y+f[0].height+o,f[2].y+f[2].height+o);return}const g=T.l();for(let O=0;O<f.length&&(f[O].centerX=h,f[O].centerY=d,!(O>=f.length-1));O++)this.lD(h,d,f,O,s,g)||this.hD(h,d,f,O,s,g),h=g.x,d=g.y;if(T.e(g),this.Qa++,this.Qa>23)return;const x=f[0].centerX,B=f[0].centerY,C=f[f.length-1].centerX,F=f[f.length-1].centerY;let b=Math.abs(x-C)-((f[0].width+f[f.length-1].width)/2+o);const L=Math.abs(B-F)-((f[0].height+f[f.length-1].height)/2+o);let Q=0;if(Math.abs(L)<1){const O=Math.abs(x-C),D=(f[0].width+f[f.length-1].width)/2;O<D&&(Q=0),b=O-D}else L>0?Q=L:Math.abs(b)<1?Q=0:Q=b;let M=!1;Math.abs(C)>Math.abs(F)?M=C>0!=B>F:M=F>0!=x<C,M=s===10?M:!M,M&&(Q=-Math.abs(Q),Q=Math.min(Q,-f[f.length-1].width),Q=Math.min(Q,-f[f.length-1].height)),this.vy.JO(Q,f),Math.abs(Q)>1&&(this.Qa<8?this.ce-=Q/(2*Math.PI):f.length<5&&Q>10?this.ce/=2:this.ce-=Q>0?1.7:-2.3,this.Ms=this.ce*a,this.rD(t,i,n,s))}oD(t,i,n,s){const r=this.ce,A=this.Ms,o=this.Vf;let a=r*Math.cos(n*Math.PI/180),h=A*Math.sin(n*Math.PI/180);const d=T.l(),f=t.toArray();for(let C=0;C<f.length&&(f[C].centerX=a,f[C].centerY=h,!(C>=f.length-1));C++)this.lD(a,h,f,C,s,d)||this.hD(a,h,f,C,s,d),a=d.x,h=d.y;if(T.e(d),this.Qa++,this.Qa>23)return;const g=Math.atan2(h,a);let x=s===10?this.Oy-g:g-this.Oy;x=Math.abs(x)<Math.abs(x-2*Math.PI)?x:x-2*Math.PI;const B=x*(r+A)/2;this.vy.$O(B,f),Math.abs(B)>1&&(this.Qa<8?this.ce-=B/(2*Math.PI):this.ce-=B>0?1.7:-2.3,this.Ms=this.ce*o,this.oD(t,i,n,s))}lD(t,i,n,s,r,A){const o=this.Eh,a=this.ce,h=this.Ms;let d=0,f=0;const g=(n[s].width+n[s+1].width)/2+o;let x=!1;if(i>=0!=(r===10)){if(d=t+g,d>a){if(d=t-g,d<-a)return A.x=d,A.y=f,!1;x=!0}}else if(d=t-g,d<-a){if(d=t+g,d>a)return A.x=d,A.y=f,!1;x=!0}return f=Math.sqrt(1-Math.min(1,d*d/(a*a)))*h,i<0!==x&&(f=-f),Math.abs(i-f)>(n[s].height+n[s+1].height)/2?(A.x=d,A.y=f,!1):(A.x=d,A.y=f,!0)}hD(t,i,n,s,r,A){const o=this.Eh,a=this.ce,h=this.Ms;let d=0,f=0;const g=(n[s].height+n[s+1].height)/2+o;let x=!1;if(t>=0!=(r===10)){if(f=i-g,f<-h){if(f=i+g,f>h)return A.x=d,A.y=f,!1;x=!0}}else if(f=i+g,f>h){if(f=i-g,f<-h)return A.x=d,A.y=f,!1;x=!0}return d=Math.sqrt(1-Math.min(1,f*f/(h*h)))*a,t<0!==x&&(d=-d),Math.abs(t-d)>(n[s].width+n[s+1].width)/2?(A.x=d,A.y=f,!1):(A.x=d,A.y=f,!0)}commitLayout(){this.commitNodes(),this.isRouting&&this.commitLinks()}commitNodes(){const t=this.group!==null&&this.group.hasPlaceholder(),i=t?this.group.location.copy():null;let n=this.actualCenter;t?n=new T(0,0):(n.x=this.arrangementOrigin.x+this.ce,n.y=this.arrangementOrigin.y+this.Ms);const s=this.network.vertexes.iterator;for(;s.next();){const r=s.value;r.x+=n.x,r.y+=n.y,r.commit()}if(t){this.group.ensureBounds();const r=this.group.position.copy(),A=this.group.location.copy(),o=i.subtract(A.subtract(r));this.group.move(o),this.UN=o.subtract(r)}}commitLinks(){const t=this.network.edges.iterator;for(;t.next();)t.value.commit()}XN(t,i,n,s){const r=this.sD;if(Math.abs(this.Vf-1)<.001)return n!==void 0&&s!==void 0?s*t:2*Math.PI*t;const A=t>i?Math.sqrt(t*t-i*i)/t:Math.sqrt(i*i-t*t)/i;let o=0,a=0;n!==void 0&&s!==void 0?a=s/(r+1):a=Math.PI/(2*(r+1));let h=0;for(let d=0;d<=r;d++){n!==void 0&&s!==void 0?h=n+d*s/r:h=d*Math.PI/(2*r);const f=Math.sin(h);o+=Math.sqrt(1-A*A*f*f)*a}return n!==void 0&&s!==void 0?(t>i?t:i)*o:4*(t>i?t:i)*o}z1(t,i,n,s){let r=0;return n!==void 0&&s!==void 0?r=this.XN(1,i,n,s):r=this.XN(1,i),t/r}X1(t,i,n,s){if(Math.abs(this.Vf-1)<.001)return s/t;const r=t>i?Math.sqrt(t*t-i*i)/t:Math.sqrt(i*i-t*t)/i;let A=0;const o=2*Math.PI/(this.network.vertexes.count*700);t>i&&(n+=Math.PI/2);for(let a=0;;a++){const h=n+a*o,d=Math.sin(h);if(A+=(t>i?t:i)*Math.sqrt(1-r*r*d*d)*o,A>=s)return a*o}}WO(t){switch(this.sorting){case 20:break;case 21:t.reverse();break;case 22:t.sort(this.comparer);break;case 23:t.sort(this.comparer),t.reverse();break;case 24:return this.ZO(this.QO(t));default:u.o("Invalid sorting type.")}return t}QO(t){const i=[];for(let s=0;s<t.length;s++)i.push(0);const n=new H;for(let s=0;s<t.length;s++){let r=-1,A=-1;if(s===0)for(let f=0;f<t.length;f++){const g=t.elt(f).edgesCount;g>r&&(r=g,A=f)}else for(let f=0;f<t.length;f++){const g=i[f];g>r&&(r=g,A=f)}n.add(t.elt(A)),i[A]=-1;const o=t.elt(A);let a=0;const h=o.sourceEdges;for(;h.next();){const f=h.value.fromVertex;a=t.indexOf(f),!(a<0)&&i[a]>=0&&i[a]++}const d=o.destinationEdges;for(;d.next();){const f=d.value.toVertex;a=t.indexOf(f),!(a<0)&&i[a]>=0&&i[a]++}}return n}ZO(t){const i=[];for(let g=0;g<t.length;g++){const x=t.elt(g);i[g]=[];let B=0;const C=x.destinationEdges;for(;C.next();){const b=C.value.toVertex;B=t.indexOf(b),B!==g&&i[g].indexOf(B)<0&&i[g].push(B)}const F=x.sourceEdges;for(;F.next();){const b=F.value.fromVertex;B=t.indexOf(b),B!==g&&i[g].indexOf(B)<0&&i[g].push(B)}}const n=[];for(let g=0;g<i.length;g++)n[g]=0;const s=[],r=[],A=[],o=[],a=new H;let h=0;for(let g=0;g<i.length;g++){const x=i[g].length;if(x===1){o.push(g);continue}if(x===0){a.add(t.elt(g));continue}if(h===0){s.push(g),h++;continue}let B=1/0,C=1/0,F=-1;const b=[];for(let L=0;L<s.length;L++)i[s[L]].indexOf(s[L===s.length-1?0:L+1])<0&&b.push(L===s.length-1?0:L+1);if(b.length===0)for(let L=0;L<s.length;L++)b.push(L);for(let L=0;L<b.length;L++){const Q=b[L],M=this._O(i[g],r,A,n,Q,s);let O=0;for(let D=0;D<i[g].length;D++){const K=i[g][D],J=s.indexOf(K);if(J>=0){const R=Math.abs(Q-(J>=Q?J+1:J));O+=R<s.length+1-R?R:s.length+1-R}}for(let D=0;D<r.length;D++){let K=n[r[D]],J=n[A[D]];if(K>=Q&&K++,J>=Q&&J++,K>J){const R=J;J=K,K=R}J-K<(s.length+2)/2==(K<Q&&Q<=J)&&O++}(M<B||M===B&&O<C)&&(B=M,C=O,F=Q)}s.splice(F,0,g);for(let L=0;L<s.length;L++)n[s[L]]=L;for(let L=0;L<i[g].length;L++){const Q=i[g][L];s.indexOf(Q)>=0&&(r.push(g),A.push(Q))}h++}let d=!1;const f=s.length;for(;;){d=!0;for(let g=0;g<o.length;g++){const x=o[g],B=i[x][0],C=s.indexOf(B);if(C>=0){let F=0;for(let b=0;b<i[B].length;b++){const L=i[B][b],Q=s.indexOf(L);if(Q<0||Q===C)continue;const M=Q>C?Q-C:C-Q,O=f-M;F+=Q<C!=M>O?1:-1}s.splice(F<0?C:C+1,0,x),o.splice(g,1),g--}else d=!1}if(d)break;s.push(o[0]),o.splice(0,1)}for(let g=0;g<s.length;g++){const x=s[g];a.add(t.elt(x))}return a}_O(t,i,n,s,r,A){let o=0;for(let a=0;a<i.length;a++){const h=i[a],d=n[a],f=s[h],g=s[d];let x=0,B=0;if(f<g?(x=f,B=g):(x=g,B=f),x<r&&r<=B)for(let C=0;C<t.length;C++){const F=t[C];A.indexOf(F)<0||x<s[F]&&s[F]<B||x===s[F]||B===s[F]||o++}else for(let C=0;C<t.length;C++){const F=t[C];A.indexOf(F)<0||!(x<s[F]&&s[F]<B)||x===s[F]||B===s[F]||o++}}return o}get radius(){return this.dg}set radius(t){this.dg!==t&&(t>0||isNaN(t))&&(this.dg=t,this.invalidateLayout())}get aspectRatio(){return this.gg}set aspectRatio(t){this.gg!==t&&t>0&&(this.gg=t,this.invalidateLayout())}get startAngle(){return this.mg}set startAngle(t){this.mg!==t&&(this.mg=t,this.invalidateLayout())}get sweepAngle(){return this.zf}set sweepAngle(t){this.zf!==t&&(t>0&&t<=360?this.zf=t:this.zf=360,this.invalidateLayout())}get arrangement(){return this.Gi}set arrangement(t){this.Gi!==t&&(t===3||t===0||t===1||t===2)&&(this.Gi=t,this.invalidateLayout())}get direction(){return this.S}set direction(t){this.S!==t&&(t===10||t===11||t===12||t===13)&&(this.S=t,this.invalidateLayout())}get sorting(){return this.be}set sorting(t){this.be!==t&&(this.be=t,this.invalidateLayout())}get comparer(){return this.ke}set comparer(t){this.ke!==t&&(this.ke=t,this.invalidateLayout())}get spacing(){return this.Dn}set spacing(t){this.Dn!==t&&(this.Dn=t,this.invalidateLayout())}get nodeDiameterFormula(){return this.pg}set nodeDiameterFormula(t){this.pg!==t&&(t===30||t===31)&&(this.pg=t,this.invalidateLayout())}get actualXRadius(){return this.ce}get actualYRadius(){return this.Ms}get actualSpacing(){return this.Eh}get actualCenter(){return this.UN}}p(Ri,"ConstantSpacing",0),p(Ri,"ConstantDistance",1),p(Ri,"ConstantAngle",2),p(Ri,"Packed",3),p(Ri,"Clockwise",10),p(Ri,"Counterclockwise",11),p(Ri,"BidirectionalLeft",12),p(Ri,"BidirectionalRight",13),p(Ri,"Forwards",20),p(Ri,"Reverse",21),p(Ri,"Ascending",22),p(Ri,"Descending",23),p(Ri,"Optimized",24),p(Ri,"Pythagorean",30),p(Ri,"Circular",31);class eA{constructor(){p(this,"Xf");p(this,"_a");p(this,"Yf");this.Xf=-1/0,this._a=null,this.Yf=null}JO(e,t){if(e>0&&this.Xf<0||Math.abs(e)<Math.abs(this.Xf)&&!(e<0&&this.Xf>0)){this.Xf=e,this._a=[],this.Yf=[];for(let i=0;i<t.length;i++)this._a[i]=t[i].bounds.x,this.Yf[i]=t[i].bounds.y}}$O(e,t){if(Math.abs(e)<Math.abs(this.Xf)){this.Xf=e,this._a=[],this.Yf=[];for(let i=0;i<t.length;i++)this._a[i]=t[i].bounds.x,this.Yf[i]=t[i].bounds.y}}commit(e){if(!(this._a===null||this.Yf===null))for(let t=0;t<this._a.length;t++){const i=e.elt(t);i.x=this._a[t],i.y=this.Yf[t]}}}class iA extends ps{constructor(e){super(e)}createVertex(){return new Oo(this)}createEdge(){return new rn(this)}}class Oo extends Qn{constructor(t){super(t);p(this,"No");p(this,"Y1");this.No=NaN,this.Y1=NaN}Bh(t){const i=this.network;if(i===null)return NaN;const n=i.layout;if(n===null)return NaN;if(n.arrangement===3){if(n.nodeDiameterFormula===31)return this.No=Math.max(this.width,this.height),this.No;{const s=Math.abs(Math.sin(t)),r=Math.abs(Math.cos(t));return s===0?this.width:r===0?this.height:(this.No=Math.min(this.height/s,this.width/r),this.No)}}else return n.nodeDiameterFormula===31?(this.No=Math.max(this.width,this.height),this.No):(this.No=Math.sqrt(this.width*this.width+this.height*this.height),this.No)}get diameter(){return this.No}set diameter(t){this.No!==t&&(this.No=t)}get actualAngle(){return this.Y1}set actualAngle(t){this.Y1!==t&&(this.Y1=t)}}class rn extends pr{constructor(e){super(e)}}class xr extends Ni{constructor(t){super();p(this,"Uy");p(this,"Uh");p(this,"Ns");p(this,"yg");p(this,"On");p(this,"Oe");p(this,"wg");p(this,"xg");p(this,"bg");p(this,"Kf");p(this,"kg");p(this,"Pg");p(this,"Gf");p(this,"Hf");p(this,"jf");p(this,"qf");p(this,"Sg");p(this,"Mg");p(this,"Wf");p(this,"tc");this.Uy=0,this.Uh=0,this.Ns=new ct(100,100).g(),this.yg=!1,this.On=!0,this.Oe=!1,this.wg=100,this.xg=300,this.bg=1,this.Kf=1e3,this.kg=10,this.Pg=Math,this.Gf=.05,this.Hf=50,this.jf=150,this.qf=0,this.Sg=10,this.Mg=5,this.Wf=NaN,this.tc=10,t&&Object.assign(this,t)}cloneProtected(t){super.cloneProtected(t),t.Ns.a(this.Ns),t.yg=this.yg,t.On=this.On,t.Oe=this.Oe,t.wg=this.wg,t.xg=this.xg,t.bg=this.bg,t.Kf=this.Kf,t.kg=this.kg,t.Pg=this.Pg,t.Gf=this.Gf,t.Hf=this.Hf,t.jf=this.jf,t.qf=this.qf,t.Sg=this.Sg,t.Mg=this.Mg,t.Wf=this.Wf,t.tc=this.tc}createNetwork(){return new RA(this)}doLayout(t){this.network=this.makeNetwork(t);let i=this.network.vertexes.iterator;const n=this.maxIterations;if(this.network.vertexes.count>0){for(this.network.deleteSelfEdges(),i=this.network.vertexes.iterator;i.next();){const r=i.value;r.charge=this.electricalCharge(r),r.mass=this.gravitationalMass(r)}const s=this.network.edges.iterator;for(;s.next();){const r=s.value;r.stiffness=this.springStiffness(r),r.length=this.springLength(r)}if(this.YN(),this.Uh=0,this.needsPrelayout()){const r=this.network,A=r.splitIntoSubNetworks(!1);let o=A.iterator;for(;o.next();){const a=o.value;this.doConnectedSubnetLayout(a)}for(o=A.iterator,this.tI(o,r),o=A.iterator;o.next();){const a=o.value,h=a.vertexes.iterator;for(;h.next();){const f=h.value;r.addVertex(f)}const d=a.edges.iterator;for(;d.next();){const f=d.value;r.addEdge(f)}}}else this.aD(this.network,this.maxIterations);this.updateParts()}this.maxIterations=n,this.isValidLayout=!0}needsPrelayout(){if(this.network.vertexes.count<3)return!1;let t=0,i=0;const n=this.network.vertexes.first().bounds,s=this.network.vertexes.iterator;for(;s.next();){const r=s.value,A=r.bounds;if(isNaN(r.x)||isNaN(r.y)||A.intersectsRect(n)&&(t++,t>2))return!0;if(i>10)return!1;i++}return!1}doConnectedSubnetLayout(t){let i=t.vertexes.iterator;for(;i.next();){const a=i.value;a.hierarchicalVertexes.add(a)}let n=t,s=this.Wf;if(isNaN(s)&&(s=t.edges.count/t.vertexes.count),s<t.vertexes.count)for(;n.vertexes.count>Math.max(100,Math.sqrt(s*t.vertexes.count));)n=this.coarsenNetwork(n);let r=0;i=n.vertexes.iterator;let A=this.randomNumberGenerator;for(A===null&&(this.randomNumberGenerator=A=new KA(0));i.next();){i.value.idInCluster=r++;const a=10*(A.random()-.5),h=10*(A.random()-.5);this.isFixed(i.value)||(i.value.x=a,i.value.y=h);const d=i.value.hierarchicalVertexes.iterator;for(;d.next();)this.isFixed(d.value)||(d.value.x=a,d.value.y=h)}const o=this.computePairwiseDistances(n);this.iI(n,o,this.maxPrelayoutIterations,t.vertexes.count),this.aD(t,this.maxIterations)}computePairwiseDistances(t){const i=t.vertexes.count,n=new Array(i);for(let o=0;o<i;o++)n[o]=new Array(i).fill(-1),n[o][o]=0;const s=t.vertexes.iterator;let r=new Map,A=[];for(;s.next();){const o=s.value;for(A=[o],r=new Map,r.set(o.idInCluster,0);A.length>0;){const a=A.shift(),h=a.vertexes.iterator;for(;h.next();){const d=h.value;r.has(d.idInCluster)||(r.set(d.idInCluster,r.get(a.idInCluster)+1),A.push(d))}}for(let a=0;a<i;a++){const h=Math.min(n[o.idInCluster][a],n[a][o.idInCluster]),d=r.get(a);(h<0||d<h)&&(n[o.idInCluster][a]=d,n[a][o.idInCluster]=d)}}return n}coarsenNetwork(t){const i=this.createNetwork(),n=new Map;let s=0,r=t.vertexes.iterator;for(;r.next();)r.value.idInCluster=s++;for(r=t.vertexes.iterator;r.next();){const o=r.value;if(n.has(o.idInCluster))continue;let a=Number.MAX_SAFE_INTEGER,h=null;const d=o.vertexes.iterator;for(;d.next();){const g=d.value;n.has(g.idInCluster)||g.hierarchicalVertexes.length<a&&(a=g.hierarchicalVertexes.length,h=g)}const f=i.createVertex();f.hierarchicalVertexes.addAll(o.hierarchicalVertexes),h!=null&&f.hierarchicalVertexes.addAll(h.hierarchicalVertexes),n.set(o.idInCluster,f),h!=null&&n.set(h.idInCluster,f),i.addVertex(f)}const A=t.edges.iterator;for(;A.next();){const o=A.value,a=n.get(o.fromVertex.idInCluster),h=n.get(o.toVertex.idInCluster);if(a===h)continue;const d=i.createEdge();d.fromVertex=a,d.toVertex=h,i.addEdge(d)}return i}Mw(t,i){let n=!0;const s=t.vertexes.iterator;for(;s.next();){const r=s.value;n?(n=!1,i.set(r.bounds)):i.unionRect(r.bounds)}return i}tI(t,i){const n=this.arrangementSpacing,s=t.count;let r=!0,A=0,o=0;const a=u.ht();for(let g=0;g<s+i.vertexes.count+2;g++)a[g]=null;let h=0;t.reset();const d=it.l();let f;for(;t.next();){const g=t.value;if(this.Mw(g,d),r)r=!1,A=d.x+d.width/2,o=d.y+d.height/2,a[0]=new T(d.x+d.width+n.width,d.y),a[1]=new T(d.x,d.y+d.height+n.height),h=2;else{const x=this.cD(a,h,A,o,d.width,d.height,n),B=a[x],C=new T(B.x+d.width+n.width,B.y),F=new T(B.x,B.y+d.height+n.height);x+1<h&&a.splice(x+1,0,null),a[x]=C,a[x+1]=F,h++;const b=B.x-d.x,L=B.y-d.y;for(f=g.vertexes.iterator;f.next();){const Q=f.value;this.isFixed(Q)||(Q.centerX+=b,Q.centerY+=L)}}}for(it.e(d),f=i.vertexes.iterator;f.next();){const g=f.value,x=g.bounds;if(h<2){A=x.x+x.width/2,o=x.y+x.height/2,a[0]=new T(x.x+x.width+n.width,x.y),a[1]=new T(x.x,x.y+x.height+n.height),h=2;continue}const B=this.cD(a,h,A,o,x.width,x.height,n),C=a[B],F=new T(C.x+x.width+n.width,C.y),b=new T(C.x,C.y+x.height+n.height);B+1<h&&a.splice(B+1,0,null),a[B]=F,a[B+1]=b,h++,this.isFixed(g)||(g.centerX=C.x+g.width/2,g.centerY=C.y+g.height/2)}u.et(a)}cD(t,i,n,s,r,A,o){let a=9e19,h=-1;t:for(let d=0;d<i;d++){const f=t[d],g=f.x-n,x=f.y-s,B=g*g+x*x;if(B<a){for(let C=d-1;C>=0;C--)if(t[C].y>f.y&&t[C].x-f.x<r+o.width)continue t;for(let C=d+1;C<i;C++)if(t[C].x>f.x&&t[C].y-f.y<A+o.height)continue t;h=d,a=B}}return h}YN(){if(!this.comments)return;const t=this.network.vertexes.iterator;for(;t.next();){const i=t.value;this.addComments(i)}}addComments(t){const i=t.node;if(i!==null){const n=i.findNodesConnected();for(;n.next();){const s=n.value;if(s.category!=="Comment"||!s.isVisible())continue;let r=this.network.findVertex(s);r===null&&(r=this.network.addNode(s)),r.charge=this.defaultCommentElectricalCharge;let A=null;const o=r.destinationEdges;for(;o.next();){const a=o.value;if(a.toVertex===t){A=a;break}}if(A===null){const a=r.sourceEdges;for(;a.next();){const h=a.value;if(h.fromVertex===t){A=h;break}}}A===null&&(A=this.network.linkVertexes(t,r,null)),A.length=this.defaultCommentSpringLength}}}KN(t,i){const n=t.bounds,s=n.x,r=n.y,A=n.width,o=n.height,a=i.bounds,h=a.x,d=a.y,f=a.width,g=a.height;if(s+A<h)if(r>d+g){const x=s+A-h,B=r-d-g;return V.xw(x*x+B*B)}else if(r+o<d){const x=s+A-h,B=r+o-d;return V.xw(x*x+B*B)}else return h-(s+A);else if(s>h+f)if(r>d+g){const x=s-h-f,B=r-d-g;return V.xw(x*x+B*B)}else if(r+o<d){const x=s-h-f,B=r+o-d;return V.xw(x*x+B*B)}else return s-(h+f);else return r>d+g?r-(d+g):r+o<d?d-(r+o):.1}aD(t,i){const n=this.Uh+i;for(;this.Uh<n&&(this.Uh++,!!this.eI(t)););}eI(t){const i=t.vertexes.toArray();if(i.length<=0)return!1;const n=i[0];n.forceX=0,n.forceY=0;let s=n.centerX,r=s,A=n.centerY,o=A;for(let C=1;C<i.length;C++){const F=i[C];F.forceX=0,F.forceY=0;const b=F.centerX,L=F.centerY;s=Math.min(s,b),r=Math.max(r,b),A=Math.min(A,L),o=Math.max(o,L)}const a=r-s>o-A;a?i.sort((C,F)=>C===null||F===null||C===F?0:C.centerX-F.centerX):i.sort((C,F)=>C===null||F===null||C===F?0:C.centerY-F.centerY);const h=this.Kf;let d=0,f=0,g=0;for(let C=0;C<i.length;C++){const F=i[C],b=F.bounds,L=F.focus,Q=b.x+L.x,M=b.y+L.y;f=F.charge*this.electricalFieldX(Q,M),g=F.charge*this.electricalFieldY(Q,M),f+=F.mass*this.gravitationalFieldX(Q,M),g+=F.mass*this.gravitationalFieldY(Q,M),F.forceX+=f,F.forceY+=g;for(let O=C+1;O<i.length;O++){const D=i[O];if(!this.shouldInteract(F,D)||O===C)continue;const K=D.bounds,J=D.focus,R=K.x+J.x,G=K.y+J.y;if(Q-R>h||R-Q>h){if(a)break;continue}if(M-G>h||G-M>h){if(!a)break;continue}const W=this.KN(F,D),Y=2*F.charge,Z=2*D.charge;if(W>1)d=Y*Z/(W*W),f=d*(Q-R)/W,g=d*(M-G)/W;else{let et=this.randomNumberGenerator;et===null&&(this.randomNumberGenerator=et=new KA(0));const At=et.random(),ht=et.random();if(Q>R)f=Math.abs(D.bounds.right-F.bounds.x),f=Y*Z*(1+f)*At;else if(Q<R)f=Math.abs(D.bounds.x-F.bounds.right),f=-(Y*Z)*(1+f)*At;else{const nt=Math.max(D.width,F.width);f=Y*Z*((1+nt)*At-nt/2)}if(M>G)g=Math.abs(D.bounds.bottom-F.bounds.y),g=Y*Z*(1+g)*ht;else if(Q<R)g=Math.abs(D.bounds.y-F.bounds.bottom),g=-(Y*Z)*(1+g)*ht;else{const nt=Math.max(D.height,F.height);g=Y*Z*((1+nt)*ht-nt/2)}}F.forceX+=f,F.forceY+=g,D.forceX-=f,D.forceY-=g}}const x=t.edges.iterator;for(;x.next();){const C=x.value,F=C.fromVertex,b=C.toVertex,L=F.bounds,Q=F.focus,M=L.x+Q.x,O=L.y+Q.y,D=b.bounds,K=b.focus,J=D.x+K.x,R=D.y+K.y,G=this.KN(F,b);G>1&&(d=.1*C.stiffness*(G-C.length),f=d*.5*(F.width+b.height)*(M-J)/G,g=d*.5*(F.width+b.height)*(O-R)/G),F.forceX-=f,F.forceY-=g,b.forceX+=f,b.forceY+=g}let B=0;for(let C=0;C<i.length;C++){const F=i[C];this.isFixed(F)?this.moveFixedVertex(F):B=Math.max(B,this.moveVertex(F)||0)}return B>this.epsilonDistance*this.epsilonDistance}iI(t,i,n,s){const r=this.Uh+n,A=Math.sqrt(s);this.Uy=this.tc*t.vertexes.count;const o=t.vertexes.toArray();let a=0,h=0,d=0;for(;this.Uh<r;){this.Uh++,h=a,a=0;for(let f=0;f<o.length;f++){o[f].forceX=0,o[f].forceY=0;for(let x=0;x<o.length;x++){if(f===x)continue;const B=this.KN(o[f],o[x]),C=i[o[f].idInCluster][o[x].idInCluster],F=(B-this.tc*A*C)/B;o[f].forceX+=F*(o[x].x-o[f].x),o[f].forceY+=F*(o[x].y-o[f].y)}const g=Math.sqrt(o[f].forceX*o[f].forceX+o[f].forceY*o[f].forceY);if(g>0){o[f].forceX=this.Uy*o[f].forceX/g,o[f].forceY=this.Uy*o[f].forceY/g,this.isFixed(o[f])||(o[f].x+=o[f].forceX,o[f].y+=o[f].forceY);const x=o[f].hierarchicalVertexes.iterator;for(;x.next();){const B=x.value;this.isFixed(B)||(B.centerX+=o[f].forceX,B.centerY+=o[f].forceY)}}a+=g*g}if(a>=h){if(d++,d>=5)break}else d=0;this.Uy*=.95}}moveVertex(t){let i=t.forceX,n=t.forceY;const s=this.moveLimit;return i<-s?i=-s:i>s&&(i=s),n<-s?n=-s:n>s&&(n=s),t.centerX+=i,t.centerY+=n,i*i+n*n}shouldInteract(t,i){return!0}moveFixedVertex(t){}commitLayout(){this.Vy(),this.commitNodes(),this.isRouting&&this.commitLinks()}Vy(){if(!this.setsPortSpots)return;const t=this.network.edges.iterator;for(;t.next();){const i=t.value.link;i!==null&&(i.fromSpot=q.Default,i.toSpot=q.Default)}}commitNodes(){let t=0,i=0;if(this.arrangesToOrigin){const r=it.l();this.Mw(this.network,r);const A=this.arrangementOrigin;t=A.x-r.x,i=A.y-r.y,it.e(r)}const n=it.l(),s=this.network.vertexes.iterator;for(;s.next();){const r=s.value;(t!==0||i!==0)&&(n.a(r.bounds),n.x+=t,n.y+=i,r.bounds=n),r.commit()}it.e(n)}commitLinks(){const t=this.network.edges.iterator;for(;t.next();)t.value.commit()}springStiffness(t){const i=t.stiffness;return isNaN(i)?this.Gf:i}springLength(t){const i=t.length;return isNaN(i)?this.Hf:i}electricalCharge(t){const i=t.charge;return isNaN(i)?this.jf:i}electricalFieldX(t,i){return 0}electricalFieldY(t,i){return 0}gravitationalMass(t){const i=t.mass;return isNaN(i)?this.qf:i}gravitationalFieldX(t,i){return 0}gravitationalFieldY(t,i){return 0}isFixed(t){return t.isFixed}get currentIteration(){return this.Uh}get arrangementSpacing(){return this.Ns}set arrangementSpacing(t){this.Ns.equals(t)||(this.Ns.a(t),this.invalidateLayout())}get arrangesToOrigin(){return this.yg}set arrangesToOrigin(t){this.yg!==t&&(this.yg=t,this.invalidateLayout())}get setsPortSpots(){return this.On}set setsPortSpots(t){this.On!==t&&(this.On=t,this.invalidateLayout())}get comments(){return this.Oe}set comments(t){this.Oe!==t&&(this.Oe=t,this.invalidateLayout())}get maxPrelayoutIterations(){return this.wg}set maxPrelayoutIterations(t){this.wg!==t&&t>=0&&(this.wg=t,this.invalidateLayout())}get maxIterations(){return this.xg}set maxIterations(t){this.xg!==t&&t>=0&&(this.xg=t,this.invalidateLayout())}get epsilonDistance(){return this.bg}set epsilonDistance(t){this.bg!==t&&t>0&&(this.bg=t,this.invalidateLayout())}get infinityDistance(){return this.Kf}set infinityDistance(t){this.Kf!==t&&t>1&&(this.Kf=t,this.invalidateLayout())}get moveLimit(){return this.kg}set moveLimit(t){this.kg!==t&&(this.kg=t,this.invalidateLayout())}get randomNumberGenerator(){return this.Pg}set randomNumberGenerator(t){this.Pg!==t&&(t!==null&&!u.lt(t.random)&&u.o('ForceDirectedLayout.randomNumberGenerator must have a "random()" function on it: '+t),this.Pg=t)}get defaultSpringStiffness(){return this.Gf}set defaultSpringStiffness(t){this.Gf!==t&&(this.Gf=t,this.invalidateLayout())}get defaultSpringLength(){return this.Hf}set defaultSpringLength(t){this.Hf!==t&&(this.Hf=t,this.invalidateLayout())}get defaultElectricalCharge(){return this.jf}set defaultElectricalCharge(t){this.jf!==t&&(this.jf=t,this.invalidateLayout())}get defaultGravitationalMass(){return this.qf}set defaultGravitationalMass(t){this.qf!==t&&(this.qf=t,this.invalidateLayout())}get defaultCommentSpringLength(){return this.Sg}set defaultCommentSpringLength(t){this.Sg!==t&&(this.Sg=t,this.invalidateLayout())}get defaultCommentElectricalCharge(){return this.Mg}set defaultCommentElectricalCharge(t){this.Mg!==t&&(this.Mg=t,this.invalidateLayout())}get prelayoutQuality(){return this.Wf}set prelayoutQuality(t){this.Wf!==t&&(this.Wf=t,this.invalidateLayout())}get prelayoutSpread(){return this.tc}set prelayoutSpread(t){this.tc!==t&&(this.tc=t,this.invalidateLayout())}}class RA extends ps{constructor(e){super(e)}createVertex(){return new Cr(this)}createEdge(){return new Ha(this)}}class Cr extends Qn{constructor(t){super(t);p(this,"K1");p(this,"G1");p(this,"H1");p(this,"j1");p(this,"q1");p(this,"hierarchicalVertexes");p(this,"idInCluster");this.K1=!1,this.G1=NaN,this.H1=NaN,this.j1=0,this.q1=0,this.hierarchicalVertexes=new H,this.idInCluster=-1}get isFixed(){return this.K1}set isFixed(t){this.K1!==t&&(this.K1=t)}get charge(){return this.G1}set charge(t){this.G1!==t&&(this.G1=t)}get mass(){return this.H1}set mass(t){this.H1!==t&&(this.H1=t)}get forceX(){return this.j1}set forceX(t){this.j1!==t&&(this.j1=t)}get forceY(){return this.q1}set forceY(t){this.q1!==t&&(this.q1=t)}}class Ha extends pr{constructor(t){super(t);p(this,"W1");p(this,"J1");this.W1=NaN,this.J1=NaN}get stiffness(){return this.W1}set stiffness(t){this.W1!==t&&(this.W1=t)}get length(){return this.J1}set length(t){this.J1!==t&&(this.J1=t)}}class KA{constructor(e){p(this,"I");p(this,"R");p(this,"Q");p(this,"M");p(this,"A");p(this,"seed");e===void 0&&(e=42),this.seed=e,this.A=48271,this.M=2147483647,this.Q=this.M/this.A,this.R=this.M%this.A,this.I=1/this.M,this.random()}random(){const e=this.seed/this.Q,t=this.seed%this.Q,i=this.A*t-this.R*e;return i>0?this.seed=i:this.seed=i+this.M,this.seed*this.I}}var nA=(k=>(k[k.DepthFirst=0]="DepthFirst",k[k.Greedy=1]="Greedy",k[k.FromLayers=2]="FromLayers",k))(nA||{}),js=(k=>(k[k.OptimalLinkLength=10]="OptimalLinkLength",k[k.LongestPathSink=11]="LongestPathSink",k[k.LongestPathSource=12]="LongestPathSource",k))(js||{}),vr=(k=>(k[k.DepthFirstOut=20]="DepthFirstOut",k[k.DepthFirstIn=21]="DepthFirstIn",k[k.Naive=22]="Naive",k))(vr||{}),VA=(k=>(k[k.None=30]="None",k[k.Less=31]="Less",k[k.More=32]="More",k))(VA||{}),Ra=(k=>(k[k.None=0]="None",k[k.Expand=1]="Expand",k[k.Straighten=2]="Straighten",k[k.Median=4]="Median",k[k.MaybeExpand=8]="MaybeExpand",k[k.All=15]="All",k))(Ra||{}),Ka=(k=>(k[k.None=0]="None",k[k.UpperLeft=1]="UpperLeft",k[k.UpperRight=2]="UpperRight",k[k.LowerLeft=4]="LowerLeft",k[k.LowerRight=8]="LowerRight",k[k.All=15]="All",k))(Ka||{});class ui extends Ni{constructor(t){super();p(this,"Cs");p(this,"Zi");p(this,"S");p(this,"Jf");p(this,"$f");p(this,"Zf");p(this,"ic");p(this,"Qf");p(this,"hr");p(this,"_f");p(this,"On");p(this,"Nt");p(this,"zy");p(this,"Gt");p(this,"Ng");p(this,"Ls");p(this,"ui");p(this,"sn");p(this,"As");p(this,"Ts");p(this,"zt");p(this,"Cg");p(this,"ec");p(this,"Lg");p(this,"nn");p(this,"tu");p(this,"ar");p(this,"In");p(this,"En");p(this,"GN");this.Cs=25,this.Zi=25,this.S=0,this.Jf=0,this.$f=10,this.Zf=20,this.ic=4,this.Qf=31,this.hr=15,this._f=10,this.On=!0,this.Nt=-1,this.zy=-1,this.Gt=-1,this.Ng=0,this.Ls=0,this.ui=null,this.sn=null,this.As=null,this.Ts=null,this.zt=null,this.Cg=0,this.ec=null,this.Lg=null,this.nn=0,this.tu=null,this.ar=new T,this.In=[],this.In.length=100,this.En=15,this.GN=0,t&&Object.assign(this,t)}cloneProtected(t){super.cloneProtected(t),t.Cs=this.Cs,t.Zi=this.Zi,t.S=this.S,t.Jf=this.Jf,t.$f=this.$f,t.Zf=this.Zf,t.ic=this.ic,t.Qf=this.Qf,t.hr=this.hr,t._f=this._f,t.On=this.On,t.En=this.En}li(t){t in VA?this.aggressiveOption=t:t in nA?this.cycleRemoveOption=t:t in vr?this.initializeOption=t:t in js?this.layeringOption=t:super.li(t)}createNetwork(){return new GA(this)}doLayout(t){this.network===null&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin),this.sI(),this.network.vertexes.count>0&&(this.network.deleteSelfEdges(),this.cycleRemoveOption!==2&&this.removeCycles(),this.nI(),this.cycleRemoveOption===2&&this.removeCycles(),this.oI(),this.rI(),this.lI(),this.reduceCrossings(),this.straightenAndPack(),this.updateParts()),this.network=null,this.isValidLayout=!0}linkMinLength(t){return 1}linkLengthWeight(t){return 1}linkStraightenWeight(t){const i=t.fromVertex.node||t.fromVertex.data,n=t.toVertex.node||t.toVertex.data;return i===null&&n===null?8:i===null||n===null?4:1}nodeMinLayerSpace(t,i){return t.node===null&&t.data===null?0:this.S===90||this.S===270?i?t.focus.y+10:t.bounds.height-t.focus.y+10:i?t.focus.x+10:t.bounds.width-t.focus.x+10}nodeMinColumnSpace(t,i){if(t.node===null&&t.data===null)return 0;const n=i?t.$1:t.Z1;if(n!==null)return n;const s=this.S;return s===90||s===270?i?t.$1=t.focus.x/this.Zi+1|0:t.Z1=(t.bounds.width-t.focus.x)/this.Zi+1|0:i?t.$1=t.focus.y/this.Zi+1|0:t.Z1=(t.bounds.height-t.focus.y)/this.Zi+1|0}Qi(){this.ec===null&&(this.ec=[]);let t=0;const i=this.network.vertexes.iterator;for(;i.next();){const n=i.value;this.ec[t]=n.layer,t++,this.ec[t]=n.column,t++,this.ec[t]=n.index,t++}return this.ec}Ze(t){let i=0;const n=this.network.vertexes.iterator;for(;n.next();){const s=n.value;s.layer=t[i],i++,s.column=t[i],i++,s.index=t[i],i++}}fD(t,i){const n=this.Vh(t),s=this.ui[t];(this.Lg===null||this.Lg.length<s*s)&&(this.Lg=[]);const r=this.Lg;for(let A=0;A<s;A++){let o=0;const a=n[A],h=a.near;let d=0;h!==null&&h!==a&&h.layer===a.layer&&(o+=Math.max(0,Math.abs(h.index-a.index)-1));let f,g=0,x,B=0,C=0,F=0,b,L=0,Q,M=0,O=0,D=0,K;if(i>=0){for(f=n[A].bo,g=0;g<f.length;g++)if(x=f[g],x.valid&&x.fromVertex.layer!==t)for(B=x.fromVertex.index,C=x.portToPos,F=x.portFromPos,L=g+1;L<f.length;L++)Q=f[L],Q.valid&&Q.fromVertex.layer!==t&&(M=Q.fromVertex.index,O=Q.portToPos,D=Q.portFromPos,C<O&&(B>M||B===M&&F>D)&&o++,O<C&&(M>B||M===B&&D>F)&&o++)}if(i<=0){for(f=n[A].nr,g=0;g<f.length;g++)if(x=f[g],x.valid&&x.toVertex.layer!==t)for(B=x.toVertex.index,C=x.portToPos,F=x.portFromPos,L=g+1;L<f.length;L++)Q=f[L],Q.valid&&Q.toVertex.layer!==t&&(M=Q.toVertex.index,O=Q.portToPos,D=Q.portFromPos,F<D&&(B>M||B===M&&C>O)&&o++,D<F&&(M>B||M===B&&O>C)&&o++)}for(r[A*s+A]=o,d=A+1;d<s;d++){let J=0,R=0;if(i>=0){for(b=n[A].bo,K=n[d].bo,g=0;g<b.length;g++)if(x=b[g],x.valid&&x.fromVertex.layer!==t)for(B=x.fromVertex.index,C=x.portToPos,F=x.portFromPos,L=0;L<K.length;L++)Q=K[L],Q.valid&&Q.fromVertex.layer!==t&&(M=Q.fromVertex.index,O=Q.portToPos,D=Q.portFromPos,(B<M||B===M&&F<D)&&R++,(M<B||M===B&&D<F)&&J++)}if(i<=0){for(b=n[A].nr,K=n[d].nr,g=0;g<b.length;g++)if(x=b[g],x.valid&&x.toVertex.layer!==t)for(B=x.toVertex.index,C=x.portToPos,F=x.portFromPos,L=0;L<K.length;L++)Q=K[L],Q.valid&&Q.toVertex.layer!==t&&(M=Q.toVertex.index,O=Q.portToPos,D=Q.portFromPos,(B<M||B===M&&C<O)&&R++,(M<B||M===B&&O<C)&&J++)}r[A*s+d]=J,r[d*s+A]=R}}return this.zh(t,n),r}countCrossings(){let t=0;for(let i=0;i<=this.Nt;i++){const n=this.fD(i,1),s=this.ui[i];for(let r=0;r<s;r++)for(let A=r;A<s;A++)t+=n[r*s+A]}return t}hI(t,i,n){const s=this.Vh(t),r=this.ui[t];let A=0;for(let o=0;o<r;o++){let a=null;i<=0&&(a=s[o].bo);let h=null;i>=0&&(h=s[o].nr);let d,f=0,g=0;if(a!==null)for(let x=0;x<a.length;x++)d=a[x],d.valid&&d.fromVertex.layer!==t&&(f=d.fromVertex.column+d.portFromColOffset,g=d.toVertex.column+d.portToColOffset,n?A+=Math.abs(f-g)*this.linkStraightenWeight(d):A+=Math.abs(f-g));if(h!==null)for(let x=0;x<h.length;x++)d=h[x],d.valid&&d.toVertex.layer!==t&&(f=d.fromVertex.column+d.portFromColOffset,g=d.toVertex.column+d.portToColOffset,n?A+=(Math.abs(f-g)+1)*this.linkStraightenWeight(d):A+=Math.abs(f-g))}return this.zh(t,s),A}Q1(t){let i=0;for(let n=0;n<=this.Nt;n++)i+=this.hI(n,1,t);return i}Xy(){let t=1/0;this.Gt=-1;const i=this.network.vertexes.iterator;for(;i.next();){const n=i.value;t=Math.min(t,n.column-this.nodeMinColumnSpace(n,!0)),this.Gt=Math.max(this.Gt,n.column+this.nodeMinColumnSpace(n,!1))}for(i.reset();i.next();){const n=i.value;n.column-=t}this.Gt-=t}Yy(t,i){const n=this.Vh(t),s=this.ui[t],r=[];for(let A=0;A<s;A++){const o=n[A];let a=null;i<=0&&(a=o.bo);let h=null;i>=0&&(h=o.nr);let d=0,f=0;const g=o.near;g!==null&&g.layer===o.layer&&(d+=g.column-1,f++);let x;if(a!==null)for(let B=0;B<a.length;B++){x=a[B];const C=x.fromVertex;x.valid&&!x.rev&&C.layer!==t&&(d+=C.column,f++)}if(h!==null)for(let B=0;B<h.length;B++){x=h[B];const C=x.toVertex;x.valid&&!x.rev&&C.layer!==t&&(d+=C.column,f++)}f===0?r[A]=-1:r[A]=d/f}return this.zh(t,n),r}uD(t,i){const n=this.Vh(t),s=this.ui[t],r=[];for(let A=0;A<s;A++){const o=n[A];let a=null;i<=0&&(a=o.bo);let h=null;i>=0&&(h=o.nr);let d=0;const f=[],g=o.near;g!==null&&g.layer===o.layer&&(f[d]=g.column-1,d++);let x;if(a!==null)for(let B=0;B<a.length;B++){x=a[B];const C=x.fromVertex;x.valid&&!x.rev&&C.layer!==t&&(f[d]=C.column+x.portFromColOffset,d++)}if(h!==null)for(let B=0;B<h.length;B++){x=h[B];const C=x.toVertex;x.valid&&!x.rev&&C.layer!==t&&(f[d]=C.column+x.portToColOffset,d++)}if(d===0)r[A]=-1;else{f.sort((C,F)=>C-F);const B=d>>1;d&1?r[A]=f[B]:r[A]=f[B-1]+f[B]>>1}}return this.zh(t,n),r}Ky(t,i,n,s,r){if(t.component===n){t.component=i;let A=0,o=0;if(s){const a=t.destinationEdges;for(;a.next();){const h=a.value,d=h.toVertex;A=t.layer-d.layer,o=this.linkMinLength(h),A===o&&this.Ky(d,i,n,s,r)}}if(r){const a=t.sourceEdges;for(;a.next();){const h=a.value,d=h.fromVertex;A=d.layer-t.layer,o=this.linkMinLength(h),A===o&&this.Ky(d,i,n,s,r)}}}}HN(t,i,n,s,r){if(t.component===n){if(t.component=i,s){const A=t.destinationEdges;for(;A.next();){const o=A.value.toVertex;this.HN(o,i,n,s,r)}}if(r){const A=t.sourceEdges;for(;A.next();){const o=A.value.fromVertex;this.HN(o,i,n,s,r)}}}}removeCycles(){const t=this.network.edges.iterator;for(;t.next();){const i=t.value;i.rev=!1}switch(this.Jf){default:case 1:this.aI();break;case 0:this.cI();break;case 2:this.fI();break}}fI(){const t=this.network,i=t.vertexes.iterator;let n=1/0;for(;i.next();){const s=i.value;n=Math.min(n,s.layer)}if(n<1/0){if(n<0)for(i.reset();i.next();){const o=i.value;o.layer-=n}const s=[];for(i.reset();i.next();){const o=i.value,a=s[o.layer];a===void 0?s[o.layer]=[o]:a.push(o)}let r=0;for(let o=0;o<s.length;o++){const a=s[o];if(!a||a.length===0)r++;else if(o>0)for(let h=0;h<a.length;h++){const d=a[h];d.layer-=r}}const A=t.edges.iterator;for(;A.next();){const o=A.value,a=o.fromVertex,h=o.toVertex;a.layer<h.layer&&(t.reverseEdge(o),o.rev=!0)}}}aI(){const t=this.network;let i=0,n=t.vertexes.count-1;const s=[];s.length=n+1;const r=t.vertexes.iterator;for(;r.next();){const o=r.value;o._i=!0}for(;this.uI(t)!==null;){let o;for(o=this.dD(t);o!==null;)s[n]=o,n--,o._i=!1,o=this.dD(t);for(o=this.gD(t);o!==null;)s[i]=o,i++,o._i=!1,o=this.gD(t);o=this.dI(t),o!==null&&(s[i]=o,i++,o._i=!1)}for(let o=0;o<t.vertexes.count;o++)s[o].index=o;const A=t.edges.iterator;for(;A.next();){const o=A.value,a=o.fromVertex,h=o.toVertex;a.index>h.index&&(t.reverseEdge(o),o.rev=!0)}}uI(t){const i=t.vertexes.iterator;for(;i.next();){const n=i.value;if(n._i)return n}return null}dD(t){const i=t.vertexes.iterator;for(;i.next();){const n=i.value;if(n._i){let s=!0;const r=n.destinationEdges;for(;r.next();)if(r.value.toVertex._i){s=!1;break}if(s)return n}}return null}gD(t){const i=t.vertexes.iterator;for(;i.next();){const n=i.value;if(n._i){let s=!0;const r=n.sourceEdges;for(;r.next();)if(r.value.fromVertex._i){s=!1;break}if(s)return n}}return null}dI(t){let i=null,n=0;const s=this.network.vertexes.iterator;for(;s.next();){const r=s.value;if(r._i){let A=0;const o=r.destinationEdges;for(;o.next();)o.value.toVertex._i&&A++;let a=0;const h=r.sourceEdges;for(;h.next();)h.value.fromVertex._i&&a++;(i===null||n<A-a)&&(i=r,n=A-a)}}return i}cI(){const t=this.network.vertexes.iterator;for(;t.next();){const n=t.value;n.iu=-1,n.$n=-1}const i=this.network.edges.iterator;for(;i.next();){const n=i.value;n.forest=!1}for(this.Cg=0,t.reset();t.next();){const n=t.value;n.sourceEdges.count===0&&this.jN(n)}for(t.reset();t.next();){const n=t.value;n.iu===-1&&this.jN(n)}for(i.reset();i.next();){const n=i.value;if(!n.forest){const s=n.fromVertex,r=s.iu,A=s.$n,o=n.toVertex,a=o.iu,h=o.$n;a<r&&A<h&&(this.network.reverseEdge(n),n.rev=!0)}}}jN(t){t.iu=this.Cg,this.Cg++;const i=t.destinationEdges;for(;i.next();){const n=i.value,s=n.toVertex;s.iu===-1&&(n.forest=!0,this.jN(s))}t.$n=this.Cg,this.Cg++}nI(){const t=this.network.vertexes.iterator;for(;t.next();){const i=t.value;i.layer=-1}for(this.Nt=-1,this.assignLayers(),t.reset();t.next();){const i=t.value;this.Nt=Math.max(this.Nt,i.layer)}}assignLayers(){switch(this.$f){case 11:this.mD();break;case 12:this.gI();break;default:case 10:this.mI();break}}mD(){const t=this.network.vertexes.iterator;for(;t.next();){const i=t.value,n=this.pD(i);this.Nt=Math.max(n,this.Nt)}}pD(t){let i=0;if(t.layer===-1){const n=t.destinationEdges;for(;n.next();){const s=n.value,r=s.toVertex,A=this.linkMinLength(s);i=Math.max(i,this.pD(r)+A)}t.layer=i}else i=t.layer;return i}gI(){let t=0;const i=this.network.vertexes.iterator;for(;i.next();){const n=i.value;t=this.yD(n),this.Nt=Math.max(t,this.Nt)}for(i.reset();i.next();){const n=i.value;n.layer=this.Nt-n.layer}}yD(t){let i=0;if(t.layer===-1){const n=t.sourceEdges;for(;n.next();){const s=n.value,r=s.fromVertex,A=this.linkMinLength(s);i=Math.max(i,this.yD(r)+A)}t.layer=i}else i=t.layer;return i}mI(){this.mD();const t=this.network.vertexes.iterator;for(;t.next();){const n=t.value;n._i=!1}for(t.reset();t.next();){const n=t.value;n.sourceEdges.count===0&&this.wD(n)}let i=1/0;for(t.reset();t.next();){const n=t.value;i=Math.min(i,n.layer)}for(this.Nt=-1,t.reset();t.next();){const n=t.value;n.layer-=i,this.Nt=Math.max(this.Nt,n.layer)}}wD(t){if(!t._i){t._i=!0;const i=t.destinationEdges;for(;i.next();){const n=i.value.toVertex;this.wD(n)}this.pI(t),this.yI(t)}}pI(t){const i=this.network.vertexes.iterator;for(;i.next();){const o=i.value;o.component=-1}const n=0,s=1,r=t.bo;let A=r.length;for(let o=0;o<A;o++){const a=r[o],h=a.fromVertex,d=a.toVertex,f=this.linkMinLength(a);h.layer-d.layer>f&&this.Ky(h,n,-1,!0,!1)}for(this.Ky(t,s,-1,!0,!0);t.component!==n;){let o=0,a=1/0,h=0,d=null;const f=this.network.vertexes.iterator;for(;f.next();){const g=f.value;if(g.component===s){let x=0,B=!1;const C=g.bo;A=C.length;for(let b=0;b<A;b++){const L=C[b],Q=L.fromVertex;if(x+=this.linkLengthWeight(L),Q.component!==s){o+=this.linkLengthWeight(L);const M=Q.layer-g.layer,O=this.linkMinLength(L);a=Math.min(a,M-O)}}const F=g.nr;A=F.length;for(let b=0;b<A;b++){const L=F[b],Q=L.toVertex;x-=this.linkLengthWeight(L),Q.component!==s?o-=this.linkLengthWeight(L):B=!0}(d===null||x<h)&&!B&&(d=g,h=x)}}if(o>0){for(i.reset();i.next();){const g=i.value;g.component===s&&(g.layer+=a)}t.component=n}else d.component=n}}yI(t){const i=this.network.vertexes.iterator;for(;i.next();){const r=i.value;r.component=-1}const n=0,s=1;for(this.Ky(t,s,-1,!0,!1);t.component!==n;){let r=0,A=1/0,o=0,a=null;const h=this.network.vertexes.iterator;for(;h.next();){const d=h.value;if(d.component===s){let f=0,g=!1;const x=d.bo;let B=x.length;for(let F=0;F<B;F++){const b=x[F],L=b.fromVertex;f+=this.linkLengthWeight(b),L.component!==s?r+=this.linkLengthWeight(b):g=!0}const C=d.nr;B=C.length;for(let F=0;F<B;F++){const b=C[F],L=b.toVertex;if(f-=this.linkLengthWeight(b),L.component!==s){r-=this.linkLengthWeight(b);const Q=d.layer-L.layer,M=this.linkMinLength(b);A=Math.min(A,Q-M)}}(a===null||f>o)&&!g&&(a=d,o=f)}}if(r<0){for(i.reset();i.next();){const d=i.value;d.component===s&&(d.layer-=A)}t.component=n}else a.component=n}}oI(){const t=this.network,i=[],n=t.edges.iterator;for(;n.next();){const s=n.value;s.valid=!1,i.push(s)}for(let s=0;s<i.length;s++){const r=i[s];let A=r.fromVertex;const o=r.toVertex;if(r.valid||(A.node===null&&A.data===null||o.node===null&&o.data===null)&&A.layer===o.layer)continue;let a=0,h=0,d=0,f=0;if(r.link!==null){const D=r.link;if(D===null)continue;const K=A.node,J=o.node;if(K===null||J===null)continue;let R=D.fromNode,G=D.toNode,W=D.fromPort;for(;W!==null&&!W.isVisibleObject();)W=W.panel;let Y=D.toPort;for(;Y!==null&&!Y.isVisibleObject();)Y=Y.panel;if(r.rev){const Ct=R,Wt=W;R=G,W=Y,G=Ct,Y=Wt}const Z=A.focus,et=o.focus,At=r.rev?o.bounds:A.bounds,ht=T.l();K!==R?At.isReal()&&R.isVisible()?R.actualBounds.isReal()?(R.getRelativePoint(W,q.Center,ht),ht.x+=R.actualBounds.x-At.x,ht.y+=R.actualBounds.y-At.y):(R.getRelativePoint(W,q.Center,ht),ht.isReal()||ht.a(Z)):ht.a(Z):At.isReal()?(R.getRelativePoint(W,q.Center,ht),ht.isReal()||ht.a(Z)):ht.a(Z);const nt=r.rev?A.bounds:o.bounds,gt=T.l();J!==G?nt.isReal()&&G.isVisible()?G.actualBounds.isReal()?(G.getRelativePoint(Y,q.Center,gt),gt.x+=G.actualBounds.x-nt.x,gt.y+=G.actualBounds.y-nt.y):(G.getRelativePoint(Y,q.Center,gt),gt.isReal()||gt.a(et)):gt.a(et):nt.isReal()?(G.getRelativePoint(Y,q.Center,gt),gt.isReal()||gt.a(et)):gt.a(et),this.S===90||this.S===270?(a=Math.round((ht.x-Z.x)/this.Zi),d=ht.x,h=Math.round((gt.x-et.x)/this.Zi),f=gt.x):(a=Math.round((ht.y-Z.y)/this.Zi),d=ht.y,h=Math.round((gt.y-et.y)/this.Zi),f=gt.y),T.e(ht),T.e(gt),r.portFromColOffset=a,r.portFromPos=d,r.portToColOffset=h,r.portToPos=f}else r.portFromColOffset=0,r.portFromPos=0,r.portToColOffset=0,r.portToPos=0;let g=A.layer;const x=o.layer,B=this.wI(r),C=B===1||B===3,F=B===2||B===3;let b,L,Q=null,M;F&&(Q=this.xI(A,o),M=1,L=t.createVertex(),L.node=null,L._1=1,L.layer=g,L.near=A,t.addVertex(L),b=t.linkVertexes(A,L,r.link),b.valid=!1,b.rev=r.rev,b.portFromColOffset=a,b.portToColOffset=0,b.portFromPos=d,b.portToPos=0,A=L);let O=1;if(C&&O--,g-x>O&&g>0){for(r.valid=!1,L=t.createVertex(),L.node=null,L._1=2,L.layer=g-1,Q&&M<Q.length&&L.layer===Q[M].layer&&(L.near=Q[M++]),t.addVertex(L),b=t.linkVertexes(A,L,r.link),b.valid=!0,b.rev=r.rev,b.portFromColOffset=F?0:a,b.portToColOffset=0,b.portFromPos=F?0:d,b.portToPos=0,A=L,g--;g-x>O&&g>0;)L=t.createVertex(),L.node=null,L._1=3,L.layer=g-1,Q&&M<Q.length&&L.layer===Q[M].layer&&(L.near=Q[M++]),t.addVertex(L),b=t.linkVertexes(A,L,r.link),b.valid=!0,b.rev=r.rev,b.portFromColOffset=0,b.portToColOffset=0,b.portFromPos=0,b.portToPos=0,A=L,g--;b=t.linkVertexes(L,o,r.link),b.valid=!C,C&&(L.near=o),b.rev=r.rev,b.portFromColOffset=0,b.portToColOffset=h,b.portFromPos=0,b.portToPos=f}else r.valid=!0}}wI(t){let i=0;const n=t.link;if(n!==null){const s=n.fromPort,r=n.toPort;if(s!==null&&r!==null){const A=n.fromNode,o=n.toNode;if(A!==null&&o!==null){const a=this.tk(!0),h=this.tk(!1),d=this.setsPortSpots?a:n.computeSpot(!0,s),f=this.setsPortSpots?h:n.computeSpot(!1,r),g=n.isOrthogonal;if(d.isSide()&&d.includesSide(h)&&f.isSide()&&f.includesSide(a))return 0;const x=n.getLinkPoint(A,s,d,!0,g,o,r,T.l()),B=n.getLinkDirection(A,s,x,d,!0,g,o,r);T.e(x),(!d.isNone()&&B===this.xD(t,!0)||this.setsPortSpots&&A!==null&&A.ports.count===1&&t.rev)&&(i+=1);const C=n.getLinkPoint(o,r,f,!1,g,A,s,T.l()),F=n.getLinkDirection(o,r,C,f,!1,g,A,s);T.e(C),(!f.isNone()&&F===this.xD(t,!1)||this.setsPortSpots&&o!==null&&o.ports.count===1&&t.rev)&&(i+=2)}}}return i}xD(t,i){return this.S===90?i&&!t.rev||!i&&t.rev?270:90:this.S===180?i&&!t.rev||!i&&t.rev?0:180:this.S===270?i&&!t.rev||!i&&t.rev?90:270:i&&!t.rev||!i&&t.rev?180:0}xI(t,i){const n=[];return n.push(i),this.bD(t,n)?n.reverse():[]}bD(t,i){const n=i[i.length-1].sourceEdges.iterator;for(;n.next();){const s=n.value;if(s.rev||!s.valid)continue;const r=s.fromVertex;if(i.push(r),r===t||this.bD(t,i))return!0;i.pop()}return!1}rI(){const t=this.ui=[];for(let n=0;n<=this.Nt;n++)t[n]=0;const i=this.network.vertexes.iterator;for(;i.next();){const n=i.value;n.index=-1}this.initializeIndices(),this.zy=-1,this.Ng=0,this.Ls=0;for(let n=0;n<=this.Nt;n++)t[n]>t[this.Ls]&&(this.zy=t[n]-1,this.Ls=n),t[n]<t[this.Ng]&&(this.Ng=n);this.tu=[];for(let n=0;n<t.length;n++)this.tu[n]=[];for(i.reset();i.next();){const n=i.value,s=n.layer,r=this.tu[s];r[n.index]=n}}initializeIndices(){switch(this.Zf){default:case 22:this.bI();break;case 20:this.kI();break;case 21:this.SI();break}}bI(){let t=null;const i=this.network.vertexes.iterator;for(;i.next();){const n=i.value;if(n.near&&(t===null&&(t=new Map),n.layer===n.near.layer)){const s=t.get(n.near)||[];s.push(n),t.set(n.near,s)}}for(i.reset();i.next();){const n=i.value;if(n.near)continue;const s=n.layer;if(n.index=this.ui[s],this.ui[s]++,!t)continue;const r=t.get(n);Array.isArray(r)&&r.forEach(A=>{A.index=this.ui[s],this.ui[s]++})}}kI(){let t=null;const i=this.network.vertexes.iterator;for(;i.next();){const n=i.value;if(n.near&&(t===null&&(t=new Map),n.layer===n.near.layer)){const s=t.get(n.near)||[];s.push(n),t.set(n.near,s)}}for(let n=this.Nt;n>=0;n--)for(i.reset();i.next();){const s=i.value;s.layer===n&&s.index===-1&&this.kD(s,t)}}kD(t,i){if(t.near)return;const n=t.layer;if(t.index=this.ui[n],this.ui[n]++,i){const A=i.get(t);Array.isArray(A)&&A.forEach(o=>{o.index=this.ui[n],this.ui[n]++})}const s=t.nr;let r=!0;for(;r;){r=!1;for(let A=0;A<s.length-1;A++){const o=s[A],a=s[A+1];o.portFromColOffset>a.portFromColOffset&&(r=!0,s[A]=a,s[A+1]=o)}}for(let A=0;A<s.length;A++){const o=s[A];if(o.valid){const a=o.toVertex;a.index===-1&&this.kD(a,i)}}}SI(){let t=null;const i=this.network.vertexes.iterator;for(;i.next();){const n=i.value;if(n.near&&(t===null&&(t=new Map),n.layer===n.near.layer)){const s=t.get(n.near)||[];s.push(n),t.set(n.near,s)}}for(let n=0;n<=this.Nt;n++)for(i.reset();i.next();){const s=i.value;s.layer===n&&s.index===-1&&this.PD(s,t)}}PD(t,i){if(t.near)return;const n=t.layer;if(t.index=this.ui[n],this.ui[n]++,i){const h=i.get(t);Array.isArray(h)&&h.forEach(d=>{d.index=this.ui[n],this.ui[n]++})}const s=t.bo;let r=!0,A=0;for(;r;)for(r=!1,A=0;A<s.length-1;A++){const h=s[A],d=s[A+1];h.portToColOffset>d.portToColOffset&&(r=!0,s[A]=d,s[A+1]=h)}let o,a;for(A=0;A<s.length;A++)a=s[A],a.valid&&(o=a.fromVertex,o.index===-1&&this.PD(o,i))}lI(){this.Gt=-1;for(let t=0;t<=this.Nt;t++){const i=this.Vh(t);let n=0;const s=this.ui[t];for(let r=0;r<s;r++){const A=i[r];n+=this.nodeMinColumnSpace(A,!0),A.column=n,n+=1,n+=this.nodeMinColumnSpace(A,!1)}this.Gt=Math.max(this.Gt,n-1),this.zh(t,i)}}reduceCrossings(){let t=this.countCrossings(),i=this.Qi(),n=0,s=0,r=0;for(n=0;n<this.ic;n++){for(s=0;s<=this.Nt;s++)this.ik(s,1),this.as(s,1,!1,1);for(r=this.countCrossings(),r<t&&(t=r,i=this.Qi()),s=this.Nt;s>=0;s--)this.ik(s,-1),this.as(s,-1,!1,-1);r=this.countCrossings(),r<t&&(t=r,i=this.Qi())}for(this.Ze(i),n=0;n<this.ic;n++){for(s=0;s<=this.Nt;s++)this.ik(s,0),this.as(s,0,!1,0);for(r=this.countCrossings(),r<t&&(t=r,i=this.Qi()),s=this.Nt;s>=0;s--)this.ik(s,0),this.as(s,0,!1,0);r=this.countCrossings(),r<t&&(t=r,i=this.Qi())}this.Ze(i);let A=!1,o=0,a=0,h=0,d=0;switch(this.Qf){case 30:break;case 32:for(h=t+1;(d=this.countCrossings())<h;)for(h=d,o=this.Nt;o>=0;o--)for(a=0;a<=o;a++){for(A=!0;A;)for(A=!1,s=o;s>=a;s--)A=this.as(s,-1,!1,-1)||A;for(r=this.countCrossings(),r>=t?this.Ze(i):(t=r,i=this.Qi()),A=!0;A;)for(A=!1,s=o;s>=a;s--)A=this.as(s,1,!1,1)||A;for(r=this.countCrossings(),r>=t?this.Ze(i):(t=r,i=this.Qi()),A=!0;A;)for(A=!1,s=a;s<=o;s++)A=this.as(s,1,!1,1)||A;for(r>=t?this.Ze(i):(t=r,i=this.Qi()),A=!0;A;)for(A=!1,s=a;s<=o;s++)A=this.as(s,-1,!1,-1)||A;for(r>=t?this.Ze(i):(t=r,i=this.Qi()),A=!0;A;)for(A=!1,s=o;s>=a;s--)A=this.as(s,0,!1,0)||A;for(r>=t?this.Ze(i):(t=r,i=this.Qi()),A=!0;A;)for(A=!1,s=a;s<=o;s++)A=this.as(s,0,!1,0)||A;r>=t?this.Ze(i):(t=r,i=this.Qi())}break;default:case 31:for(o=this.Nt,a=0,h=t+1;(d=this.countCrossings())<h;){for(h=d,A=!0;A;)for(A=!1,s=o;s>=a;s--)A=this.as(s,-1,!1,-1)||A;for(r=this.countCrossings(),r>=t?this.Ze(i):(t=r,i=this.Qi()),A=!0;A;)for(A=!1,s=o;s>=a;s--)A=this.as(s,1,!1,1)||A;for(r=this.countCrossings(),r>=t?this.Ze(i):(t=r,i=this.Qi()),A=!0;A;)for(A=!1,s=a;s<=o;s++)A=this.as(s,1,!1,1)||A;for(r>=t?this.Ze(i):(t=r,i=this.Qi()),A=!0;A;)for(A=!1,s=a;s<=o;s++)A=this.as(s,-1,!1,-1)||A;for(r>=t?this.Ze(i):(t=r,i=this.Qi()),A=!0;A;)for(A=!1,s=o;s>=a;s--)A=this.as(s,0,!1,0)||A;for(r>=t?this.Ze(i):(t=r,i=this.Qi()),A=!0;A;)for(A=!1,s=a;s<=o;s++)A=this.as(s,0,!1,0)||A;r>=t?this.Ze(i):(t=r,i=this.Qi())}break}this.Ze(i)}ik(t,i){let n=0,s=!1;const r=this.Vh(t),A=this.ui[t],o=this.uD(t,i),a=this.Yy(t,i);for(n=0;n<A;n++)a[n]===-1&&(a[n]=r[n].column),o[n]===-1&&(o[n]=r[n].column);let h=!0,d;for(;h;)for(h=!1,n=0;n<A-1;n++)if(o[n+1]<o[n]||o[n+1]===o[n]&&a[n+1]<a[n]){s=!0,h=!0;const g=o[n];o[n]=o[n+1],o[n+1]=g;const x=a[n];a[n]=a[n+1],a[n+1]=x,d=r[n],r[n]=r[n+1],r[n+1]=d}let f=0;for(n=0;n<A;n++)d=r[n],d.index=n,f+=this.nodeMinColumnSpace(d,!0),d.column=f,f+=1,f+=this.nodeMinColumnSpace(d,!1);return this.zh(t,r),s}as(t,i,n,s){const r=this.Vh(t),A=this.ui[t],o=this.fD(t,i);let a=0,h;if(!n||s>0)for(h=[],a=0;a<A;a++)h[a]=-1;else h=this.Yy(t,-1);let d;if(!n||s<0)for(d=[],a=0;a<A;a++)d[a]=-1;else d=this.Yy(t,1);let f=!1,g=!0;for(;g;)for(g=!1,a=0;a<A-1;a++){const x=o[r[a].index*A+r[a+1].index],B=o[r[a+1].index*A+r[a].index];let C=0,F=0;const b=r[a].column,L=r[a+1].column,Q=this.nodeMinColumnSpace(r[a],!0),M=this.nodeMinColumnSpace(r[a],!1),O=this.nodeMinColumnSpace(r[a+1],!0),D=this.nodeMinColumnSpace(r[a+1],!1),K=b-Q+O,J=L-M+D;let R=0,G=0,W=0,Y=0,Z=0,et=0,At=0,ht,nt=0,gt,Ct=0;const Wt=r[a].sourceEdges.iterator;if(n&&s<=0)for(;Wt.next();){const ae=Wt.value;ht=ae.fromVertex,ae.valid&&ht.layer!==t&&(W=this.linkStraightenWeight(ae),Y=ae.portFromColOffset,Z=ae.portToColOffset,et=ht.column,R+=(Math.abs(b+Z-(et+Y))+1)*W,G+=(Math.abs(J+Z-(et+Y))+1)*W)}for(Wt.reset();Wt.next();){const ae=Wt.value;if(ht=ae.fromVertex,ae.valid&&ht.layer===t){for(nt=0;nt<r.length&&r[nt]!==ht;)nt++;nt<a&&(C+=2*(a-nt),F+=2*(a+1-nt)),nt===a+1&&(C+=1),nt>a+1&&(C+=4*(nt-a),F+=4*(nt-(a+1)))}}const St=r[a].destinationEdges.iterator;if(n&&s>=0)for(;St.next();){const ae=St.value;gt=ae.toVertex,ae.valid&&gt.layer!==t&&(W=this.linkStraightenWeight(ae),Y=ae.portFromColOffset,Z=ae.portToColOffset,At=gt.column,R+=(Math.abs(b+Y-(At+Z))+1)*W,G+=(Math.abs(J+Y-(At+Z))+1)*W)}for(St.reset();St.next();){const ae=St.value;if(gt=ae.toVertex,ae.valid&&gt.layer===t){for(Ct=0;Ct<r.length&&r[Ct]!==gt;)Ct++;Ct===a+1&&(F+=1)}}const Qt=r[a+1].sourceEdges.iterator;if(n&&s<=0)for(;Qt.next();){const ae=Qt.value;ht=ae.fromVertex,ae.valid&&ht.layer!==t&&(W=this.linkStraightenWeight(ae),Y=ae.portFromColOffset,Z=ae.portToColOffset,et=ht.column,R+=(Math.abs(L+Z-(et+Y))+1)*W,G+=(Math.abs(K+Z-(et+Y))+1)*W)}for(Qt.reset();Qt.next();){const ae=Qt.value;if(ht=ae.fromVertex,ae.valid&&ht.layer===t){for(nt=0;nt<r.length&&r[nt]!==ht;)nt++;nt<a&&(C+=2*(a+1-nt),F+=2*(a-nt)),nt===a&&(F+=1),nt>a+1&&(C+=4*(nt-(a+1)),F+=4*(nt-a))}}const Mt=r[a+1].destinationEdges.iterator;if(n&&s>=0)for(;Mt.next();){const ae=Mt.value;gt=ae.toVertex,ae.valid&&gt.layer!==t&&(W=this.linkStraightenWeight(ae),Y=ae.portFromColOffset,Z=ae.portToColOffset,At=gt.column,R+=(Math.abs(L+Y-(At+Z))+1)*W,G+=(Math.abs(K+Y-(At+Z))+1)*W)}for(Mt.reset();Mt.next();){const ae=Mt.value;if(gt=ae.toVertex,ae.valid&&gt.layer===t){for(Ct=0;Ct<r.length&&r[Ct]!==gt;)Ct++;Ct===a&&(C+=1)}}let Ut=0,ne=0;const te=h[r[a].index],Ft=d[r[a].index],zt=h[r[a+1].index],He=d[r[a+1].index];if(te!==-1&&(Ut+=Math.abs(te-b),ne+=Math.abs(te-J)),Ft!==-1&&(Ut+=Math.abs(Ft-b),ne+=Math.abs(Ft-J)),zt!==-1&&(Ut+=Math.abs(zt-L),ne+=Math.abs(zt-K)),He!==-1&&(Ut+=Math.abs(He-L),ne+=Math.abs(He-K)),F<C-.5||F===C&&B<x-.5||F===C&&B===x&&G<R-.5||F===C&&B===x&&G===R&&ne<Ut-.5){f=!0,g=!0,r[a].column=J,r[a+1].column=K;const ae=r[a];r[a]=r[a+1],r[a+1]=ae}}for(a=0;a<A;a++)r[a].index=a;return this.zh(t,r),f}straightenAndPack(){if(this.En!==0){this.MI();return}let t=0,i=!1,n=(this.hr&1)!==0;const s=(this.hr&8)!==0;if(this.network.edges.count>1e3&&s&&(n=!1),n){const r=[];let A=0;for(A=0;A<=this.Nt;A++)r[A]=0;let o=0;const a=this.network.vertexes.iterator;for(;a.next();){const d=a.value;t=d.layer,o=d.column;const f=this.nodeMinColumnSpace(d,!1);r[t]=Math.max(r[t],o+f)}const h=8;for(a.reset();a.next();){const d=a.value;t=d.layer,o=d.column,d.column=((this.Gt-r[t])*h>>1)+o*h}this.Gt*=h}if(this.hr&2){i=!0;let r=0;for(;i&&r<this._f;){for(i=!1,t=this.Ls+1;t<=this.Nt;t++)i=this.Ag(t,1)||i;for(t=this.Ls-1;t>=0;t--)i=this.Ag(t,-1)||i;i=this.Ag(this.Ls,0)||i,r++}}if(this.hr&4){for(t=this.Ls+1;t<=this.Nt;t++)this.qN(t,1);for(t=this.Ls-1;t>=0;t--)this.qN(t,-1);this.qN(this.Ls,0)}if(n&&(this.SD(-1),this.SD(1)),this.hr&2){i=!0;let r=0;for(;i&&r<this._f;){for(i=!1,i=this.Ag(this.Ls,0)||i,t=this.Ls+1;t<=this.Nt;t++)i=this.Ag(t,0)||i;for(t=this.Ls-1;t>=0;t--)i=this.Ag(t,0)||i;r++}}}Ag(t,i){let n=!1;for(;this.NI(t,i);)n=!0;return n}NI(t,i){let n=0;const s=this.Vh(t),r=this.ui[t],A=this.Yy(t,-1);if(i>0)for(n=0;n<r;n++)A[n]=-1;const o=this.Yy(t,1);if(i<0)for(n=0;n<r;n++)o[n]=-1;let a=!1,h=!0;for(;h;)for(h=!1,n=0;n<r;n++){const d=s[n].column,f=this.nodeMinColumnSpace(s[n],!0),g=this.nodeMinColumnSpace(s[n],!1);let x=0;n-1<0||d-s[n-1].column-1>f+this.nodeMinColumnSpace(s[n-1],!1)?x=d-1:x=d;let B=0;n+1>=r||s[n+1].column-d-1>g+this.nodeMinColumnSpace(s[n+1],!0)?B=d+1:B=d;let C=0,F=0,b=0,L=0,Q=0,M=0;if(i<=0){const G=s[n].sourceEdges.iterator;for(;G.next();){const W=G.value,Y=W.fromVertex;if(W.valid&&Y.layer!==t){L=this.linkStraightenWeight(W),Q=W.portFromColOffset,M=W.portToColOffset;const Z=Y.column;C+=(Math.abs(d+M-(Z+Q))+1)*L,F+=(Math.abs(x+M-(Z+Q))+1)*L,b+=(Math.abs(B+M-(Z+Q))+1)*L}}}if(i>=0){const G=s[n].destinationEdges.iterator;for(;G.next();){const W=G.value,Y=W.toVertex;if(W.valid&&Y.layer!==t){L=this.linkStraightenWeight(W),Q=W.portFromColOffset,M=W.portToColOffset;const Z=Y.column;C+=(Math.abs(d+Q-(Z+M))+1)*L,F+=(Math.abs(x+Q-(Z+M))+1)*L,b+=(Math.abs(B+Q-(Z+M))+1)*L}}}let O=0,D=0,K=0;const J=A[s[n].index],R=o[s[n].index];J!==-1&&(O+=Math.abs(J-d),D+=Math.abs(J-x),K+=Math.abs(J-B)),R!==-1&&(O+=Math.abs(R-d),D+=Math.abs(R-x),K+=Math.abs(R-B)),F<C||F===C&&D<O?(a=!0,h=!0,s[n].column=x):(b<C||b===C&&K<O)&&(a=!0,h=!0,s[n].column=B)}return this.zh(t,s),this.Xy(),a}qN(t,i){let n=0;const s=this.Vh(t),r=this.ui[t],A=this.uD(t,i),o=[];for(n=0;n<r;n++)o[n]=A[n];let a=!1,h=!0;for(;h;)for(h=!1,n=0;n<r;n++){const d=s[n].column,f=this.nodeMinColumnSpace(s[n],!0),g=this.nodeMinColumnSpace(s[n],!1);let x=0,B=0,C=0,F=0,b=0;o[n]===-1?n===0&&n===r-1?x=d:n===0?(B=s[n+1].column,B-d===g+this.nodeMinColumnSpace(s[n+1],!0)?x=d-1:x=d):n===r-1?(C=s[n-1].column,d-C===f+this.nodeMinColumnSpace(s[n-1],!1)?x=d+1:x=d):(C=s[n-1].column,b=C+this.nodeMinColumnSpace(s[n-1],!1)+f+1,B=s[n+1].column,F=B-this.nodeMinColumnSpace(s[n+1],!0)-g-1,x=(b+F)/2|0):n===0&&n===r-1?x=o[n]:n===0?(B=s[n+1].column,F=B-this.nodeMinColumnSpace(s[n+1],!0)-g-1,x=Math.min(o[n],F)):n===r-1?(C=s[n-1].column,b=C+this.nodeMinColumnSpace(s[n-1],!1)+f+1,x=Math.max(o[n],b)):(C=s[n-1].column,b=C+this.nodeMinColumnSpace(s[n-1],!1)+f+1,B=s[n+1].column,F=B-this.nodeMinColumnSpace(s[n+1],!0)-g-1,b<o[n]&&o[n]<F?x=o[n]:b>=o[n]?x=b:F<=o[n]&&(x=F)),x!==d&&(a=!0,h=!0,s[n].column=x)}return this.zh(t,s),this.Xy(),a}CI(){for(let t=0;t<=this.Gt;t++)for(;this.LI(t,1););this.Xy()}LI(t,i){let n=!0;const s=this.network.vertexes.iterator;for(;s.next();){const A=s.value,o=this.nodeMinColumnSpace(A,!0),a=this.nodeMinColumnSpace(A,!1);if(A.column-o<=t&&A.column+a>=t){n=!1;break}}let r=!1;if(n){if(i>0)for(s.reset();s.next();){const A=s.value;A.column>t&&(A.column-=1,r=!0)}if(i<0)for(s.reset();s.next();){const A=s.value;A.column<t&&(A.column+=1,r=!0)}}return r}AI(){this.CI();for(let t=0;t<this.Gt;t++)for(;this.TI(t,1););this.Xy()}TI(t,i){let n=t;i>0&&(n=t+1),i<0&&(n=t-1);let s=0;const r=[],A=[];for(s=0;s<=this.Nt;s++)r[s]=!1,A[s]=!1;const o=this.network.vertexes.iterator;for(;o.next();){const d=o.value,f=d.column-this.nodeMinColumnSpace(d,!0),g=d.column+this.nodeMinColumnSpace(d,!1);f<=t&&g>=t&&(r[d.layer]=!0),f<=n&&g>=n&&(A[d.layer]=!0)}let a=!0,h=!1;for(s=0;s<=this.Nt;s++)a=a&&!(r[s]&&A[s]);if(a){if(i>0)for(o.reset();o.next();){const d=o.value;d.column>t&&(d.column-=1,h=!0)}if(i<0)for(o.reset();o.next();){const d=o.value;d.column<t&&(d.column+=1,h=!0)}}return h}SD(t){this.AI();let i=0,n,s=0,r=0,A=0;if(t>0)for(i=0;i<=this.Gt;i++)for(n=this.Qi(),s=this.Q1(!0),r=s+1;s<r;)r=s,this.MD(i,1),A=this.Q1(!0),A>s?this.Ze(n):A<s&&(s=A,n=this.Qi());if(t<0)for(i=this.Gt;i>=0;i--)for(n=this.Qi(),s=this.Q1(!0),r=s+1;s<r;)r=s,this.MD(i,-1),A=this.Q1(!0),A>s?this.Ze(n):A<s&&(s=A,n=this.Qi());this.Xy()}MD(t,i){this.nn=0;const n=this.network.vertexes.iterator;for(;n.next();){const f=n.value;f.component=-1}if(i>0)for(n.reset();n.next();){const f=n.value;f.column-this.nodeMinColumnSpace(f,!0)<=t&&(f.component=this.nn)}if(i<0)for(n.reset();n.next();){const f=n.value;f.column+this.nodeMinColumnSpace(f,!1)>=t&&(f.component=this.nn)}for(this.nn++,n.reset();n.next();){const f=n.value;f.component===-1&&(this.HN(f,this.nn,-1,!0,!0),this.nn++)}let s=0;const r=[];for(s=0;s<this.nn*this.nn;s++)r[s]=!1;const A=[];for(s=0;s<(this.Nt+1)*(this.Gt+1);s++)A[s]=-1;for(n.reset();n.next();){const f=n.value,g=f.layer,x=Math.max(0,f.column-this.nodeMinColumnSpace(f,!0)),B=Math.min(this.Gt,f.column+this.nodeMinColumnSpace(f,!1));for(let C=x;C<=B;C++)A[g*(this.Gt+1)+C]=f.component}for(let f=0;f<=this.Nt;f++){if(i>0)for(let g=0;g<this.Gt;g++)A[f*(this.Gt+1)+g]!==-1&&A[f*(this.Gt+1)+g+1]!==-1&&A[f*(this.Gt+1)+g]!==A[f*(this.Gt+1)+g+1]&&(r[A[f*(this.Gt+1)+g]*this.nn+A[f*(this.Gt+1)+g+1]]=!0);if(i<0)for(let g=this.Gt;g>0;g--)A[f*(this.Gt+1)+g]!==-1&&A[f*(this.Gt+1)+g-1]!==-1&&A[f*(this.Gt+1)+g]!==A[f*(this.Gt+1)+g-1]&&(r[A[f*(this.Gt+1)+g]*this.nn+A[f*(this.Gt+1)+g-1]]=!0)}const o=[];for(s=0;s<this.nn;s++)o[s]=!0;const a=[];a.push(0);let h=0;for(;a.length!==0;)if(h=a[a.length-1],a.pop(),o[h])for(o[h]=!1,s=0;s<this.nn;s++)r[h*this.nn+s]&&a.splice(0,0,s);let d=!1;if(i>0)for(n.reset();n.next();){const f=n.value;o[f.component]&&(f.column-=1,d=!0)}if(i<0)for(n.reset();n.next();){const f=n.value;o[f.component]&&(f.column+=1,d=!0)}return d}MI(){const t=u.ht(),i=this.tu.length;for(let x=0;x<=i;x++)t[x]=[];const n=this.network.vertexes.iterator;for(;n.next();){const x=n.value,B=i-x.layer,C=t[B];C[x.index]=x}const s=new X;this.DI(t,s);let r=null,A=null,o=null,a=null;const h=(this.En&1)!==0,d=(this.En&2)!==0,f=(this.En&4)!==0,g=(this.En&8)!==0;h&&(this.al(t,s,!0),r=this.ek(t,!0,!1)),t.reverse(),f&&(this.al(t,s,!1),o=this.ek(t,!1,!1));for(const x of t)x.reverse();g&&(this.al(t,s,!1),a=this.ek(t,!1,!0)),t.reverse(),d&&(this.al(t,s,!0),A=this.ek(t,!0,!0)),u.et(t),this.FI(r,A,o,a),this.network.vertexes.each(x=>{const B=x,C=u.ht();h&&C.push(r.get(B)),d&&C.push(A.get(B)),f&&C.push(o.get(B)),g&&C.push(a.get(B)),C.sort((M,O)=>M-O);const F=C.length,b=Math.floor((F-1)/2),L=Math.ceil((F-1)/2),Q=(C[b]+C[L])/2;u.et(C),B.fe=Q})}DI(t,i){const n=t.length;for(let s=1;s<n-1;s++){let r=0,A=0;const o=t[s],a=t[s+1];for(let h=0;A<a.length;h++){const d=a[h],f=this.RI(d);if(h===a.length-1||f){let g=o.length-1;for(f&&(g=d.getProperSourceVertexes()[0].index);A<=h;){const x=a[A].getProperSourceEdges();for(const B of x){const C=B.fromVertex.index;(C<r||C>g)&&i.add(B)}A++}r=g}}}}RI(t){if(t.node===null){const i=t.getProperSourceVertexes();if(i.length>0)return i[0].node===null}return!1}al(t,i,n){this.vI(t);for(const s of t){let r=-1;for(const A of s){const o=n?A.getProperSourceVertexes():A.getProperDestinationVertexes(),a=o.length;if(a>0){o.sort((d,f)=>d.Xh-f.Xh);const h=(a-1)/2;for(let d=Math.floor(h),f=Math.ceil(h);d<=f;d++)if(A.Bn===A){const g=o[d];let x;n?x=g.getDestinationEdge(A):x=A.getDestinationEdge(g),!i.has(x)&&r<g.Xh&&(g.Bn=A,A.sc=g.sc,A.Bn=g.sc,r=g.Xh)}}}}}vI(t){for(let i=0;i<t.length;i++){const n=t[i];for(let s=0;s<n.length;s++){const r=n[s];r.sc=r,r.Bn=r,r.ND=i,r.Xh=s}}}ek(t,i,n){const s=this.S===90||this.S===270;for(const A of t)for(const o of A)o.Qe=o,o.eu=1/0,o.fe=NaN,o.Un=0;this.OI(t,i,n);for(const A of t)for(const o of A)o.sc===o&&this.CD(o,t);for(let A=0;A<t.length;A++){if(t[A].length<=0)continue;const o=t[A][0];if(o.Qe===o){o.Qe.eu===1/0&&(o.Qe.eu=0);let a=A,h=0,d;do{for(d=t[a][h];d.Bn!==d.sc;)if(d=d.Bn,a++,d.Xh>0){const f=this.LD(d,t),g=s?f.width:f.height,x=d.Qe.eu+d.fe+d.Un-(f.fe+f.Un+g+this.columnSpacing);f.Qe.eu=Math.min(f.Qe.eu,x)}h=d.Xh+1}while(a<t.length&&h<t[a].length&&d.Qe===t[a][h].Qe)}}const r=new xt;for(const A of t)for(const o of A){o.fe=o.fe+o.Qe.eu+o.Un;const a=s?o.width:o.height;r.set(o,n?-o.fe-a:o.fe)}return r}OI(t,i,n){const s=this.S===90||this.S===270;for(const r of t)for(const A of r)if(A.sc===A){let o=0,a=A;for(;a.Bn!==A;){const h=a.Bn,d=s?a.width:a.height,f=s?h.width:h.height;let g,x,B,C;i?(B=a.getDestinationEdge(h),g=B.portFromPos,x=B.portToPos,B.link!==null&&(a.node&&a.node!==B.link.fromNode&&(g=s?a.focusX:a.focusY),h.node&&h.node!==B.link.toNode&&(x=s?h.focusX:h.focusY)),n?C=a.Un+(d-g)-(f-x):C=a.Un+g-x):(B=h.getDestinationEdge(a),g=B.portToPos,x=B.portFromPos,B.link!==null&&(a.node&&a.node!==B.link.toNode&&(g=s?a.focusX:a.focusY),h.node&&h.node!==B.link.fromNode&&(x=s?h.focusX:h.focusY)),n?C=a.Un+(d-g)-(f-x):C=a.Un+g-x),h.Un=C,o=Math.min(o,C),a=a.Bn}a=A;do a.Un=a.Un-o,a=a.Bn;while(a!==A)}}CD(t,i){if(!isNaN(t.fe))return;t.fe=0;let n=t;do{if(n.Xh>0){const s=this.LD(n,i),r=s.sc;this.CD(r,i),t.Qe===t&&(t.Qe=r.Qe);const A=this.S===90||this.S===270?s.width:s.height;if(t.Qe===r.Qe){const o=r.fe+s.Un+A-n.Un+this.columnSpacing;t.fe=Math.max(t.fe,o)}}n=n.Bn}while(n!==t);for(;n.Bn!==t;)n=n.Bn,n.fe=t.fe,n.Qe=t.Qe}LD(t,i){const n=t.ND,s=t.Xh;return s<1&&u.o("Could not determine previous vertex in layer"),i[n][s-1]}FI(...t){let i=-1;const n=u.ht(),s=u.ht();let r=1/0;for(let A=0;A<4;A++){if(!t[A])continue;const o=this.II(t[A],n,s,A);o<r&&(i=A,r=o)}for(let A=0;A<4;A++){const o=t[A];if(!o)continue;const a=A===0||A===2?n[i]-n[A]:s[i]-s[A];a!==0&&o.each(h=>{o.set(h.key,h.value+a)})}u.et(n),u.et(s)}II(t,i,n,s){if(!t||t.count===0)return i[s]=0,n[s]=0,1/0;let r=1/0,A=-1/0;return t.each(o=>{const a=o.key,h=o.value,d=this.S===90||this.S===270?a.width:a.height;h<r&&(r=h),h+d>A&&(A=h+d)}),i[s]=r,n[s]=A,A-r}commitLayout(){this.Vy(),this.commitNodes(),this.WN(),this.isRouting&&this.commitLinks()}Vy(){if(!this.setsPortSpots)return;const t=this.tk(!0),i=this.tk(!1),n=this.network.edges.iterator;for(;n.next();){const s=n.value.link;s!==null&&(s.fromSpot=t,s.toSpot=i)}}tk(t){return this.S===270?t?q.MiddleTop:q.MiddleBottom:this.S===90?t?q.MiddleBottom:q.MiddleTop:this.S===180?t?q.MiddleLeft:q.MiddleRight:t?q.MiddleRight:q.MiddleLeft}commitNodes(){this.sn=[],this.As=[],this.Ts=[],this.zt=[];for(let B=0;B<=this.Nt;B++)this.sn[B]=0,this.As[B]=0,this.Ts[B]=0,this.zt[B]=0;const t=this.network.vertexes.iterator;for(;t.next();){const B=t.value,C=B.layer;this.sn[C]=Math.max(this.sn[C],this.nodeMinLayerSpace(B,!0)),this.As[C]=Math.max(this.As[C],this.nodeMinLayerSpace(B,!1))}let i=0;const n=this.Cs;for(let B=0;B<=this.Nt;B++){let C=n;this.sn[B]+this.As[B]<=0&&(C=0),B>0&&(i+=C/2),this.S===90||this.S===0?(i+=this.As[B],this.Ts[B]=i,i+=this.sn[B]):(i+=this.sn[B],this.Ts[B]=i,i+=this.As[B]),B<this.Nt&&(i+=C/2),this.zt[B]=i}const s=i,r=this.arrangementOrigin;for(let B=0;B<=this.Nt;B++)this.S===270?this.Ts[B]=r.y+this.Ts[B]:this.S===90?(this.Ts[B]=r.y+s-this.Ts[B],this.zt[B]=s-this.zt[B]):this.S===180?this.Ts[B]=r.x+this.Ts[B]:(this.Ts[B]=r.x+s-this.Ts[B],this.zt[B]=s-this.zt[B]);const A=this.En!==0;t.reset();const o=this.S===270||this.S===90;let a=1/0,h=1/0,d=1/0,f=-1/0;for(;t.next();){const B=t.value,C=B.layer,F=B.column|0;let b=0,L=0;o?(b=r.x+this.Zi*F,L=this.Ts[C]):(b=this.Ts[C],L=r.y+this.Zi*F),B.centerX=b,B.centerY=L,A&&isFinite(B.fe)&&(o?B.node?B.x=r.x+B.fe:B.centerX=r.x+B.fe:B.node?B.y=r.y+B.fe:B.centerY=r.y+B.fe),a=Math.min(B.x,a),h=Math.min(B.y,h),o?(d=a,f=Math.max(f,B.bounds.right)):(d=h,f=Math.max(f,B.bounds.bottom))}this.GN=f-d;const g=r.x-a,x=r.y-h;for(this.ar=new T(A&&o?0:g,A&&!o?0:x),t.reset();t.next();){const B=t.value;B.x+=g,B.y+=x,B.commit()}}WN(){let t=0;const i=this.Cs;for(let r=0;r<=this.Nt;r++)t+=this.sn[r],t+=this.As[r];t+=this.Nt*i;const n=[],s=this.En!==0?this.GN:this.Zi*this.Gt;for(let r=this.maxLayer;r>=0;r--)this.S===270?r===0?n.push(new it(0,0,s,Math.abs(this.zt[0]))):n.push(new it(0,this.zt[r-1],s,Math.abs(this.zt[r-1]-this.zt[r]))):this.S===90?r===0?n.push(new it(0,this.zt[0],s,Math.abs(this.zt[0]-t))):n.push(new it(0,this.zt[r],s,Math.abs(this.zt[r-1]-this.zt[r]))):this.S===180?r===0?n.push(new it(0,0,Math.abs(this.zt[0]),s)):n.push(new it(this.zt[r-1],0,Math.abs(this.zt[r-1]-this.zt[r]),s)):r===0?n.push(new it(this.zt[0],0,Math.abs(this.zt[0]-t),s)):n.push(new it(this.zt[r],0,Math.abs(this.zt[r-1]-this.zt[r]),s));this.commitLayers(n,this.ar)}commitLayers(t,i){}commitLinks(){const t=this.network.edges.iterator;let i;for(;t.next();)i=t.value.link,i!==null&&(i.startRoute(),i.clearPoints(),i.commitRoute());for(t.reset();t.next();)i=t.value.link,i!==null&&i.updateRoute();for(t.reset();t.next();){const n=t.value;if(i=n.link,i===null||i.pointsCount===0)continue;i.startRoute();const s=i;let r=s.fromNode,A=s.toNode,o=s.fromPort,a=s.toPort;if(r!==null){const W=r.findVisibleNode();W!==null&&W!==r&&(r=W,o=W.port)}if(A!==null){const W=A.findVisibleNode();W!==null&&W!==A&&(A=W,a=W.port)}const h=i.computeSpot(!0,o),d=i.computeSpot(!1,a);let f=n.fromVertex,g=n.toVertex;if(n.valid){if(i.curve===9&&i.pointsCount===4)if(f.column===g.column&&this.alignOption===0){const W=i.getLinkPoint(r,o,h,!0,!1,A,a),Y=i.getLinkPoint(A,a,d,!1,!1,r,o);W.isReal()||W.set(r.actualBounds.center),Y.isReal()||Y.set(A.actualBounds.center),i.clearPoints(),i.addPointAt(W.x,W.y),i.addPointAt((2*W.x+Y.x)/3,(2*W.y+Y.y)/3),i.addPointAt((W.x+2*Y.x)/3,(W.y+2*Y.y)/3),i.addPointAt(Y.x,Y.y)}else{let W=!1,Y=!1;if(o!==null&&h===q.None&&(W=!0),a!==null&&d===q.None&&(Y=!0),W||Y){let Z=null;W&&(Z=i.getLinkPointFromPoint(r,o,o.getDocumentPoint(q.Center),i.getPoint(3),!0),Z.isReal()||Z.set(r.actualBounds.center),i.setPointAt(0,Z.x,Z.y));let et=null;if(Y&&(et=i.getLinkPointFromPoint(A,a,a.getDocumentPoint(q.Center),i.getPoint(0),!1),et.isReal()||et.set(A.actualBounds.center),i.setPointAt(3,et.x,et.y)),Z){const At=i.getPoint(2);i.setPointAt(1,(Z.x*2+At.x)/3,(Z.y*2+At.y)/3)}if(et){const At=i.getPoint(1);i.setPointAt(2,(et.x*2+At.x)/3,(et.y*2+At.y)/3)}}}i.commitRoute();continue}if(f.layer===g.layer){i.commitRoute();continue}let x=!1,B=!1;const C=this.Cs;let F=0,b=i.firstPickIndex+1;if(i.isOrthogonal)B=!0,F=i.pointsCount,F>4&&i.points.removeRange(2,F-3);else if(i.curve===9)x=!0,F=i.pointsCount,F>4&&i.points.removeRange(2,F-3),F===4&&(b=2);else{F=i.pointsCount;const W=h===q.None,Y=d===q.None;F>2&&W&&Y?i.points.removeRange(1,F-2):F>3&&W&&!Y?i.points.removeRange(1,F-3):F>3&&!W&&Y?i.points.removeRange(2,F-2):F>4&&!W&&!Y&&i.points.removeRange(2,F-3)}let L,Q,M=0,O=0,D=0,K=0,J=0,R=0,G=0;if(n.rev){let W=0;for(;g!==null&&f!==g;){L=null,Q=null;const Y=g.sourceEdges.iterator;for(;Y.next();){const Z=Y.value;if(Z.link===n.link&&(L=Z.fromVertex,Q=Z.toVertex,L.node===null))break}if(L===null)break;if(L!==f)if(M=i.getPoint(b-1).x,O=i.getPoint(b-1).y,D=L.centerX,K=L.centerY,B)this.S===180||this.S===0?b===i.firstPickIndex+1?(i.insertPointAt(b++,M,O),i.insertPointAt(b++,M,K)):(Q!==null?Q.centerY:O)!==K&&(J=this.zt[L.layer-1]+this.ar.x,i.insertPointAt(b++,J,O),i.insertPointAt(b++,J,K)):b===i.firstPickIndex+1?(i.insertPointAt(b++,M,O),i.insertPointAt(b++,D,O)):(Q!==null?Q.centerX:M)!==D&&(J=this.zt[L.layer-1]+this.ar.y,i.insertPointAt(b++,M,J),i.insertPointAt(b++,D,J));else if(b===i.firstPickIndex+1)if(R=Math.max(10,this.sn[g.layer]),G=Math.max(10,this.As[g.layer]),x)this.S===180?D<=g.bounds.x?(W=g.bounds.x,i.insertPointAt(b++,W-R,K),i.insertPointAt(b++,W,K),i.insertPointAt(b++,W+G,K)):(i.insertPointAt(b++,D-R,K),i.insertPointAt(b++,D,K),i.insertPointAt(b++,D+G,K)):this.S===90?K>=g.bounds.bottom?(W=g.bounds.y+g.bounds.height,i.insertPointAt(b++,D,W+G),i.insertPointAt(b++,D,W),i.insertPointAt(b++,D,W-R)):(i.insertPointAt(b++,D,K+G),i.insertPointAt(b++,D,K),i.insertPointAt(b++,D,K-R)):this.S===270?K<=g.bounds.y?(W=g.bounds.y,i.insertPointAt(b++,D,W-R),i.insertPointAt(b++,D,W),i.insertPointAt(b++,D,W+G)):(i.insertPointAt(b++,D,K-R),i.insertPointAt(b++,D,K),i.insertPointAt(b++,D,K+G)):this.S===0&&(D>=g.bounds.right?(W=g.bounds.x+g.bounds.width,i.insertPointAt(b++,W+G,K),i.insertPointAt(b++,W,K),i.insertPointAt(b++,W-R,K)):(i.insertPointAt(b++,D+G,K),i.insertPointAt(b++,D,K),i.insertPointAt(b++,D-R,K)));else{i.insertPointAt(b++,M,O);let Z=0;this.S===180||this.S===0?((this.S===180?D>=g.bounds.right:D<=g.bounds.x)&&(Z=(this.S===0?-R:G)/2),i.insertPointAt(b++,M+Z,K)):((this.S===270?K>=g.bounds.bottom:K<=g.bounds.y)&&(Z=(this.S===90?-R:G)/2),i.insertPointAt(b++,D,O+Z)),i.insertPointAt(b++,D,K)}else R=Math.max(10,this.sn[L.layer]),G=Math.max(10,this.As[L.layer]),x?this.S===180?(i.insertPointAt(b++,D-R-C,K),i.insertPointAt(b++,Math.min(D-R+C/2,D),K),i.insertPointAt(b++,D,K),i.insertPointAt(b++,D,K),i.insertPointAt(b++,Math.max(D+G-C/2,D),K),i.insertPointAt(b++,D+G+C,K)):this.S===90?(i.insertPointAt(b++,D,K+G+C),i.insertPointAt(b++,D,Math.max(K+G-C/2,K)),i.insertPointAt(b++,D,K),i.insertPointAt(b++,D,K),i.insertPointAt(b++,D,Math.min(K-R+C/2,K)),i.insertPointAt(b++,D,K-R-C)):this.S===270?(i.insertPointAt(b++,D,K-R-C),i.insertPointAt(b++,D,Math.min(K-R+C/2,K)),i.insertPointAt(b++,D,K),i.insertPointAt(b++,D,K),i.insertPointAt(b++,D,Math.max(K+G-C/2,K)),i.insertPointAt(b++,D,K+G+C)):(i.insertPointAt(b++,D+G+C,K),i.insertPointAt(b++,Math.max(D+G-C/2,D),K),i.insertPointAt(b++,D,K),i.insertPointAt(b++,D,K),i.insertPointAt(b++,Math.min(D-R+C/2,D),K),i.insertPointAt(b++,D-R-C,K)):(this.S===180||this.S===90||this.S,i.insertPointAt(b++,D,K));g=L}if(a===null||h!==q.None||B)if(M=i.getPoint(b-1).x,O=i.getPoint(b-1).y,D=i.getPoint(b).x,K=i.getPoint(b).y,B){const Y=this.As[f.layer];let Z=0;this.S===180||this.S===0?(Z=O,Z>=f.bounds.y&&Z<=f.bounds.bottom&&(this.S===180?D>=f.bounds.x:D<=f.bounds.right)&&(W=f.centerX+(this.S===180?-Y:Y),Z<f.bounds.y+f.bounds.height/2?Z=f.bounds.y-this.Zi/2:Z=f.bounds.bottom+this.Zi/2,i.insertPointAt(b++,W,O),i.insertPointAt(b++,W,Z)),i.insertPointAt(b++,D,Z),i.insertPointAt(b++,D,K)):(Z=M,Z>=f.bounds.x&&Z<=f.bounds.right&&(this.S===270?K>=f.bounds.y:K<=f.bounds.bottom)&&(W=f.centerY+(this.S===270?-Y:Y),Z<f.bounds.x+f.bounds.width/2?Z=f.bounds.x-this.Zi/2:Z=f.bounds.right+this.Zi/2,i.insertPointAt(b++,M,W),i.insertPointAt(b++,Z,W)),i.insertPointAt(b++,Z,K),i.insertPointAt(b++,D,K))}else if(x)R=Math.max(10,this.sn[f.layer]),G=Math.max(10,this.As[f.layer]),this.S===180&&D>=f.bounds.x?(W=f.bounds.x+f.bounds.width,i.setPointAt(b-2,W,O),i.setPointAt(b-1,W+G,O)):this.S===90&&K<=f.bounds.bottom?(W=f.bounds.y,i.setPointAt(b-2,M,W),i.setPointAt(b-1,M,W-R)):this.S===270&&K>=f.bounds.y?(W=f.bounds.y+f.bounds.height,i.setPointAt(b-2,M,W),i.setPointAt(b-1,M,W+G)):this.S===0&&D<=f.bounds.right&&(W=f.bounds.x,i.setPointAt(b-2,W,O),i.setPointAt(b-1,W-R,O));else{R=Math.max(10,this.sn[f.layer]),G=Math.max(10,this.As[f.layer]);let Y=0;this.S===180||this.S===0?((this.S===180?D<=f.bounds.x:D>=f.bounds.right)&&(Y=(this.S===0?G:-R)/2),i.insertPointAt(b++,D+Y,O)):((this.S===270?K<=f.bounds.y:K>=f.bounds.bottom)&&(Y=(this.S===90?G:-R)/2),i.insertPointAt(b++,M,K+Y)),i.insertPointAt(b++,D,K)}}else{for(;f!==null&&f!==g;){L=null,Q=null;const W=f.destinationEdges.iterator;for(;W.next();){const Y=W.value;if(Y.link===n.link&&(L=Y.toVertex,Q=Y.fromVertex,Q.node!==null&&(Q=null),L.node===null))break}if(L===null)break;L!==g&&(M=i.getPoint(b-1).x,O=i.getPoint(b-1).y,D=L.centerX,K=L.centerY,B?this.S===180||this.S===0?(Q!==null?Q.centerY:O)!==K&&(J=this.zt[L.layer]+this.ar.x,b===i.firstPickIndex+1&&(this.S===0?J=Math.max(J,M):J=Math.min(J,M)),i.insertPointAt(b++,J,O),i.insertPointAt(b++,J,K)):(Q!==null?Q.centerX:M)!==D&&(J=this.zt[L.layer]+this.ar.y,b===i.firstPickIndex+1&&(this.S===90?J=Math.max(J,O):J=Math.min(J,O)),i.insertPointAt(b++,M,J),i.insertPointAt(b++,D,J)):(R=Math.max(10,this.sn[L.layer]),G=Math.max(10,this.As[L.layer]),x?this.S===180?(i.insertPointAt(b++,D+G+C,K),i.insertPointAt(b++,Math.max(D+G-C/2,D),K),i.insertPointAt(b++,D,K),i.insertPointAt(b++,D,K),i.insertPointAt(b++,Math.min(D-R+C/2,D),K),i.insertPointAt(b++,D-R-C,K)):this.S===90?(i.insertPointAt(b++,D,K-R-C),i.insertPointAt(b++,D,Math.min(K-R+C/2,K)),i.insertPointAt(b++,D,K),i.insertPointAt(b++,D,K),i.insertPointAt(b++,D,Math.max(K+G-C/2,K)),i.insertPointAt(b++,D,K+G+C)):this.S===270?(i.insertPointAt(b++,D,K+G+C),i.insertPointAt(b++,D,Math.max(K+G-C/2,K)),i.insertPointAt(b++,D,K),i.insertPointAt(b++,D,K),i.insertPointAt(b++,D,Math.min(K-R+C/2,K)),i.insertPointAt(b++,D,K-R-C)):(i.insertPointAt(b++,D-R-C,K),i.insertPointAt(b++,Math.min(D-R+C/2,D),K),i.insertPointAt(b++,D,K),i.insertPointAt(b++,D,K),i.insertPointAt(b++,Math.max(D+G-C/2,D),K),i.insertPointAt(b++,D+G+C,K)):this.S===180?(i.insertPointAt(b++,D+G,K),i.insertPointAt(b++,D-R,K)):this.S===90?(i.insertPointAt(b++,D,K-R),i.insertPointAt(b++,D,K+G)):this.S===270?(i.insertPointAt(b++,D,K+G),i.insertPointAt(b++,D,K-R)):(i.insertPointAt(b++,D-R,K),i.insertPointAt(b++,D+G,K)))),f=L}B&&(M=i.getPoint(b-1).x,O=i.getPoint(b-1).y,D=i.getPoint(b).x,K=i.getPoint(b).y,this.S===180||this.S===0?O!==K&&(this.S===0?J=Math.min(Math.max((D+M)/2,this.zt[g.layer]+this.ar.x),D):J=Math.max(Math.min((D+M)/2,this.zt[g.layer]+this.ar.x),D),i.insertPointAt(b++,J,O),i.insertPointAt(b++,J,K)):M!==D&&(this.S===90?J=Math.min(Math.max((K+O)/2,this.zt[g.layer]+this.ar.y),K):J=Math.max(Math.min((K+O)/2,this.zt[g.layer]+this.ar.y),K),i.insertPointAt(b++,M,J),i.insertPointAt(b++,D,J)))}if(s!==null&&x&&i.pointsCount>=4){if(o!==null){const W=h===q.None?i.getLinkPointFromPoint(r,o,o.getDocumentPoint(q.Center),i.getPoint(3),!0):i.getPoint(0);if(h===q.None){const Y=i.getPoint(2),Z=i.getPoint(3);this.direction===90||this.direction===270?(i.setPointAt(1,(W.x+Y.x)/2,Y.y),i.setPointAt(2,Z.x,(Y.y+Z.y)/2)):(i.setPointAt(1,Y.x,(W.y+Y.y)/2),i.setPointAt(2,(Y.x+Z.x)/2,Z.y))}W.isReal()||W.set(r.actualBounds.center),i.setPointAt(0,W.x,W.y)}if(a!==null){const W=d===q.None?i.getLinkPointFromPoint(A,a,a.getDocumentPoint(q.Center),i.getPoint(i.pointsCount-4),!1):i.getPoint(i.pointsCount-1);if(d===q.None){const Y=i.getPoint(i.pointsCount-3),Z=i.getPoint(i.pointsCount-4);this.direction===90||this.direction===270?(i.setPointAt(i.pointsCount-2,(W.x+Y.x)/2,Y.y),i.setPointAt(i.pointsCount-2,Z.x,(Y.y+Z.y)/2)):(i.setPointAt(i.pointsCount-2,Y.x,(W.y+Y.y)/2),i.setPointAt(i.pointsCount-3,(Y.x+Z.x)/2,Z.y))}W.isReal()||W.set(A.actualBounds.center),i.setPointAt(i.pointsCount-1,W.x,W.y)}}i.commitRoute(),n.commit()}}sI(){this.zy=-1,this.Ng=0,this.Ls=0,this.ec=null,this.Lg=null,this.tu=null;for(let t=0;t<this.In.length;t++)this.In[t]=null}Vh(t){let i;const n=this.ui[t];if(n>=this.In.length){const r=[];for(let A=0;A<this.In.length;A++)r[A]=this.In[A];this.In=r}this.In[n]===void 0||this.In[n]===null?i=[]:(i=this.In[n],this.In[n]=null);const s=this.tu[t];for(let r=0;r<s.length;r++){const A=s[r];i[A.index]=A}return i}zh(t,i){this.In[this.ui[t]]=i}get layerSpacing(){return this.Cs}set layerSpacing(t){this.Cs!==t&&t>=0&&(this.Cs=t,this.invalidateLayout())}get columnSpacing(){return this.Zi}set columnSpacing(t){this.Zi!==t&&t>0&&(this.Zi=t,this.invalidateLayout())}get direction(){return this.S}set direction(t){this.S!==t&&(t===0||t===90||t===180||t===270?(this.S=t,this.invalidateLayout()):u.o("LayeredDigraphLayout.direction must be 0, 90, 180, or 270"))}get cycleRemoveOption(){return this.Jf}set cycleRemoveOption(t){this.Jf!==t&&(t===1||t===0||t===2)&&(this.Jf=t,this.invalidateLayout())}get layeringOption(){return this.$f}set layeringOption(t){this.$f!==t&&(t===10||t===11||t===12)&&(this.$f=t,this.invalidateLayout())}get initializeOption(){return this.Zf}set initializeOption(t){this.Zf!==t&&(t===20||t===21||t===22)&&(this.Zf=t,this.invalidateLayout())}get iterations(){return this.ic}set iterations(t){this.ic!==t&&t>=0&&(this.ic=t,this.invalidateLayout())}get aggressiveOption(){return this.Qf}set aggressiveOption(t){this.Qf!==t&&(t===30||t===31||t===32)&&(this.Qf=t,this.invalidateLayout())}get packOption(){return this.hr}set packOption(t){this.hr!==t&&t>=0&&t<8&&(this.hr=t,this.invalidateLayout())}get packIterations(){return this._f}set packIterations(t){this._f=t}get alignOption(){return this.En}set alignOption(t){this.En!==t&&t>=0&&t<16&&(this.En=t,this.invalidateLayout())}get setsPortSpots(){return this.On}set setsPortSpots(t){this.On!==t&&(this.On=t,this.invalidateLayout())}get maxLayer(){return this.Nt}get maxIndex(){return this.zy}get maxColumn(){return this.Gt}get minIndexLayer(){return this.Ng}get maxIndexLayer(){return this.Ls}}p(ui,"CycleDepthFirst",0),p(ui,"CycleGreedy",1),p(ui,"CycleFromLayers",2),p(ui,"LayerOptimalLinkLength",10),p(ui,"LayerLongestPathSink",11),p(ui,"LayerLongestPathSource",12),p(ui,"InitDepthFirstOut",20),p(ui,"InitDepthFirstIn",21),p(ui,"InitNaive",22),p(ui,"AggressiveNone",30),p(ui,"AggressiveLess",31),p(ui,"AggressiveMore",32),p(ui,"PackNone",0),p(ui,"PackExpand",1),p(ui,"PackStraighten",2),p(ui,"PackMedian",4),p(ui,"PackAll",15),p(ui,"AlignNone",0),p(ui,"AlignUpperLeft",1),p(ui,"AlignUpperRight",2),p(ui,"AlignLowerLeft",4),p(ui,"AlignLowerRight",8),p(ui,"AlignAll",15);class GA extends ps{constructor(e){super(e)}createVertex(){return new sA(this)}createEdge(){return new Va(this)}}class sA extends Qn{constructor(t){super(t);p(this,"Zo");p(this,"il");p(this,"vt");p(this,"sk");p(this,"nk");p(this,"_i");p(this,"iu");p(this,"$n");p(this,"_1");p(this,"$1");p(this,"Z1");p(this,"sc");p(this,"Bn");p(this,"ND");p(this,"Xh");p(this,"Qe");p(this,"eu");p(this,"fe");p(this,"Un");p(this,"Gy",null);p(this,"Hy",null);p(this,"jy",null);p(this,"qy",null);this.Zo=-1,this.il=-1,this.vt=-1,this.sk=NaN,this.nk=null,this._i=!1,this.iu=NaN,this.$n=NaN,this._1=0,this.$1=null,this.Z1=null}static AD(t,i){return t.index-i.index}getProperSourceEdges(){if(!this.jy){const t=[];for(const i of this.bo){const n=i;n.valid&&t.push(n)}this.jy=t}return this.jy}getProperDestinationEdges(){if(!this.qy){const t=[];for(const i of this.nr){const n=i;n.valid&&t.push(n)}this.qy=t}return this.qy}getDestinationEdge(t){const i=this.getProperDestinationEdges();for(const n of i)if(n.toVertex===t)return n;u.o("Unable to find destination edge to given vertex")}getProperSourceVertexes(){if(!this.Gy){const t=[];for(const i of this.bo){const n=i;!n.valid||n.fromVertex.layer<=n.toVertex.layer||t.push(n.fromVertex)}t.sort(sA.AD),this.Gy=t}return this.Gy}getProperDestinationVertexes(){if(!this.Hy){const t=[];for(const i of this.nr){const n=i;!n.valid||n.fromVertex.layer<=n.toVertex.layer||t.push(n.toVertex)}t.sort(sA.AD),this.Hy=t}return this.Hy}addSourceEdge(t){super.addSourceEdge(t),this.Gy=null,this.jy=null}deleteSourceEdge(t){super.deleteSourceEdge(t),this.Gy=null,this.jy=null}addDestinationEdge(t){super.addDestinationEdge(t),this.Hy=null,this.qy=null}deleteDestinationEdge(t){super.deleteDestinationEdge(t),this.Hy=null,this.qy=null}get layer(){return this.Zo}set layer(t){this.Zo!==t&&(this.Zo=t)}get column(){return this.il}set column(t){this.il!==t&&(this.il=t)}get index(){return this.vt}set index(t){this.vt!==t&&(this.vt=t)}get component(){return this.sk}set component(t){this.sk!==t&&(this.sk=t)}get near(){return this.nk}set near(t){this.nk!==t&&(this.nk=t)}}class Va extends pr{constructor(t){super(t);p(this,"_i");p(this,"ok");p(this,"rk");p(this,"lk");p(this,"hk");p(this,"ak");p(this,"ck");this._i=!1,this.ok=!1,this.rk=!1,this.lk=NaN,this.hk=NaN,this.ak=0,this.ck=0}get fromVertex(){return this.Je}set fromVertex(t){this.Je!==t&&(this.Je=t)}get toVertex(){return this.$e}set toVertex(t){this.$e!==t&&(this.$e=t)}get valid(){return this._i}set valid(t){this._i!==t&&(this._i=t)}get rev(){return this.ok}set rev(t){this.ok!==t&&(this.ok=t)}get forest(){return this.rk}set forest(t){this.rk!==t&&(this.rk=t)}get portFromPos(){return this.lk}set portFromPos(t){this.lk!==t&&(this.lk=t)}get portToPos(){return this.hk}set portToPos(t){this.hk!==t&&(this.hk=t)}get portFromColOffset(){return this.ak}set portFromColOffset(t){this.ak!==t&&(this.ak=t)}get portToColOffset(){return this.ck}set portToColOffset(t){this.ck!==t&&(this.ck=t)}}var Ho=(k=>(k[k.Default=0]="Default",k[k.Destination=1]="Destination",k[k.Source=2]="Source",k))(Ho||{}),Ro=(k=>(k[k.Forwards=10]="Forwards",k[k.Reverse=11]="Reverse",k[k.Ascending=12]="Ascending",k[k.Descending=13]="Descending",k))(Ro||{}),Ko=(k=>(k[k.CenterSubtrees=20]="CenterSubtrees",k[k.CenterChildren=21]="CenterChildren",k[k.Start=22]="Start",k[k.End=23]="End",k[k.Bus=24]="Bus",k[k.BusBranching=25]="BusBranching",k[k.TopLeftBus=26]="TopLeftBus",k[k.BottomRightBus=27]="BottomRightBus",k[k.Custom=28]="Custom",k))(Ko||{}),XA=(k=>(k[k.None=30]="None",k[k.Block=31]="Block",k))(XA||{}),Vo=(k=>(k[k.Layered=40]="Layered",k[k.LastParents=41]="LastParents",k[k.Alternating=42]="Alternating",k[k.RootOnly=43]="RootOnly",k))(Vo||{}),Go=(k=>(k[k.Vertical=50]="Vertical",k[k.Horizontal=51]="Horizontal",k[k.FixedRoots=52]="FixedRoots",k))(Go||{}),Ga=(k=>(k[k.Individual=60]="Individual",k[k.Siblings=61]="Siblings",k[k.Uniform=62]="Uniform",k))(Ga||{});class _e extends Ni{constructor(t){super();p(this,"Oi");p(this,"Di");p(this,"su");p(this,"Tg");p(this,"JN");p(this,"Oe");p(this,"Gi");p(this,"Ns");p(this,"z");p(this,"X");p(this,"fk");p(this,"cs");this.Oi=new X,this.Di=0,this.cs=1,this.su=40,this.Tg=60,this.JN=[],this.Oe=!0,this.Gi=50,this.Ns=new ct(10,10).g();const i=new rA(this);this.z=new Un(i),this.X=new Un(i),this.fk=[],t&&Object.assign(this,t)}cloneProtected(t){super.cloneProtected(t),t.Di=this.Di,t.su=this.su,t.Tg=this.Tg,t.Oe=this.Oe,t.Gi=this.Gi,t.Ns.a(this.Ns),t.z.copyInheritedPropertiesFrom(this.z),t.X.copyInheritedPropertiesFrom(this.X)}li(t){t in Ko?this.alignment=t:t in Go?this.arrangement=t:t in XA?this.compaction=t:t in Ho?this.path=t:t in Ro?this.sorting=t:t in Vo?this.treeStyle=t:super.li(t)}createNetwork(){return new rA(this)}makeNetwork(t){const i=this.createNetwork(),n=s=>{if(s instanceof Et)return!s.isLinkLabel&&s.category!=="Comment";if(s instanceof Xt){const r=s.fromNode;if(r===null||r.isLinkLabel||r.category==="Comment")return!1;const A=s.toNode;return!(A===null||A.isLinkLabel||A.category==="Comment")}return!1};return t instanceof ge?(i.addParts(t.nodes,!0,n),i.addParts(t.links,!0,n)):t instanceof Vt?i.addParts(t.memberParts,!1,n):i.addParts(t.iterator,!1,n),i}doLayout(t){this.network===null&&(this.network=this.makeNetwork(t)),this.arrangement!==52&&(this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin));let i=this.diagram;i===null&&t instanceof ge&&(i=t),this.path===0&&i!==null?this.cs=i.isTreePathToChildren?1:2:this.cs=this.path===0?1:this.path,this.network.vertexes.count>0&&(this.zI(),this.XI(),this.YI(),this.KI(),this.YN(),this.GI(),this.arrangeTrees(),this.updateParts()),this.network=null,this.Oi=new X,this.isValidLayout=!0}zI(){this.network.deleteSelfEdges();const t=this.network.vertexes.iterator;for(;t.next();){const r=t.value;r.initialized=!1,r.level=0,r.parent=null,r.children=[]}if(this.Oi.count>0){const r=new X,A=this.Oi.iterator;for(;A.next();){const o=A.value;if(o instanceof Et){const a=this.network.findVertex(o);a!==null&&r.add(a)}else o instanceof Un&&r.add(o)}this.Oi=r}this.Oi.count===0&&this.findRoots();const i=this.Oi.copy().iterator;for(;i.next();){const r=i.value;r.initialized||(r.initialized=!0,this.$N(r))}let n=this.network.vertexes,s=null;for(;s=this.HI(n),s.count>0;){const r=this.TD(s);r!==null&&this.Oi.add(r),r.initialized=!0,this.$N(r),n=s}}HI(t){const i=new X,n=t.iterator;for(;n.next();){const s=n.value;s.initialized||i.add(s)}return i}findRoots(){const t=this.network.vertexes,i=t.iterator;for(;i.next();){const n=i.value;switch(this.cs){case 1:n.sourceEdges.count===0&&this.Oi.add(n);break;case 2:n.destinationEdges.count===0&&this.Oi.add(n);break;default:u.o("Unhandled path value "+this.cs.toString())}}if(this.Oi.count===0){const n=this.TD(t);n!==null&&this.Oi.add(n)}}TD(t){let i=999999,n=null;const s=t.iterator;for(;s.next();){const r=s.value;switch(this.cs){case 1:r.sourceEdges.count<i&&(i=r.sourceEdges.count,n=r);break;case 2:r.destinationEdges.count<i&&(i=r.destinationEdges.count,n=r);break;default:u.o("Unhandled path value "+this.cs.toString())}}return n}$N(t){if(t===null)return;switch(this.cs){case 1:if(t.destinationEdges.count>0){const s=new H,r=t.destinationVertexes;for(;r.next();){const A=r.value;this.DD(t,A)&&s.add(A)}s.count>0&&(t.children=s.toArray())}break;case 2:if(t.sourceEdges.count>0){const s=new H,r=t.sourceVertexes;for(;r.next();){const A=r.value;this.DD(t,A)&&s.add(A)}s.count>0&&(t.children=s.toArray())}break;default:u.o("Unhandled path value"+this.cs.toString())}const i=t.children,n=i.length;for(let s=0;s<n;s++){const r=i[s];r.initialized=!0,r.level=t.level+1,r.parent=t,this.Oi.delete(r)}for(let s=0;s<n;s++){const r=i[s];this.$N(r)}}DD(t,i){return i.initialized?this.jI(i,t)||i.level>t.level?!1:(this.qI(i.parent,i),!0):!0}jI(t,i){if(i===null)return!1;let n=i.parent;for(;n!==null&&n!==t;)n=n.parent;return n===t}qI(t,i){if(t===null||i===null)return;const n=t.children;let s=0;for(let r=0;r<n.length;r++)n[r]===i&&s++;if(s>0){const r=new Array(n.length-s);let A=0;for(let o=0;o<n.length;o++)n[o]!==i&&(r[A++]=n[o]);t.children=r}}XI(){const t=this.Oi.iterator;for(;t.next();){const i=t.value;i instanceof Un&&this.FD(i)}}FD(t){if(t===null)return;this.initializeTreeVertexValues(t),t.alignment===25&&this.sortTreeVertexChildren(t);let i=0,n=t.childrenCount,s=0;const r=t.children,A=r.length;for(let o=0;o<A;o++){const a=r[o];this.FD(a),i+=a.descendantCount+1,n=Math.max(n,a.maxChildrenCount),s=Math.max(s,a.maxGenerationCount)}t.descendantCount=i,t.maxChildrenCount=n,t.maxGenerationCount=n>0?s+1:0}WI(t){switch(this.su){default:case 40:return t.parent!==null?t.parent:this.z;case 43:return t.parent===null?this.z:t.parent.parent===null?this.X:t.parent;case 42:return t.parent!==null?t.parent.parent!==null?t.parent.parent:this.X:this.z;case 41:{let i=!0;if(t.childrenCount===0)i=!1;else{const n=t.children,s=n.length;for(let r=0;r<s;r++)if(n[r].childrenCount>0){i=!1;break}}return i&&t.parent!==null?this.X:t.parent!==null?t.parent:this.z}}}initializeTreeVertexValues(t){const i=this.WI(t);if(t.copyInheritedPropertiesFrom(i),t.parent!==null&&t.parent.alignment===25){let n=t.angle;const s=t.parent.children;let r=0;for(;r<s.length&&t!==s[r];)r++;r%2===0?r!==s.length-1&&(n===90?n=180:n===180?n=270:n===270?n=180:n=270):n===90?n=0:n===180?n=90:n===270?n=0:n=90,t.angle=n}t.initialized=!0}YI(){const t=this.Oi.iterator;for(;t.next();){const i=t.value;i instanceof Un&&this.RD(i)}}RD(t){if(t===null)return;this.assignTreeVertexValues(t);const i=t.children,n=i.length;for(let s=0;s<n;s++){const r=i[s];this.RD(r)}}assignTreeVertexValues(t){}KI(){const t=this.Oi.iterator;for(;t.next();){const i=t.value;i instanceof Un&&this.vD(i)}}vD(t){if(t===null)return;t.alignment!==25&&this.sortTreeVertexChildren(t);const i=t.children,n=i.length;for(let s=0;s<n;s++){const r=i[s];this.vD(r)}}sortTreeVertexChildren(t){switch(t.sorting){default:case 10:break;case 11:t.children.reverse();break;case 12:t.children.sort(t.comparer);break;case 13:t.children.sort(t.comparer),t.children.reverse();break}}YN(){if(!this.comments)return;const t=this.network.vertexes.iterator;for(;t.next();){const i=t.value;this.addComments(i)}}addComments(t){const i=t.angle,n=t.parent;let s=0,r=21,A=!1;n!==null&&(s=n.angle,r=n.alignment,A=this.isBusAlignment(r));const o=i===90||i===270,a=s===90||s===270,h=t.childrenCount===0;let d=0,f=0,g=0;const x=t.commentSpacing;if(t.node!==null){const B=t.node.findNodesConnected();for(;B.next();){const C=B.value;if(C.category!=="Comment"||!C.canLayout())continue;t.comments===null&&(t.comments=[]),t.comments.push(C),C.ensureBounds();const F=C.measuredBounds;o&&!h||!A&&!a&&h||A&&a&&h?(d=Math.max(d,F.width),f+=F.height+Math.abs(g)):(d+=F.width+Math.abs(g),f=Math.max(f,F.height)),g=x}}if(t.comments!==null){o&&!h||!A&&!a&&h||A&&a&&h?(d+=Math.abs(t.commentMargin),f=Math.max(0,f-t.height)):(f+=Math.abs(t.commentMargin),d=Math.max(0,d-t.width));const B=it.Y(0,0,t.bounds.width+d,t.bounds.height+f);t.bounds=B,it.e(B)}}isBusAlignment(t){return t===24||t===25||t===26||t===27}Wy(t){return t===24||t===25}ZN(t){const i=t.parent;if(i!==null){const n=i.alignment;if(this.isBusAlignment(n))if(this.Wy(n)){const s=i.children;let r=0;for(;r<s.length&&t!==s[r];)r++;return r%2===0}else return n===26}return!1}layoutComments(t){if(t.comments!==null){const i=t.node.measuredBounds,n=t.parent,s=t.angle;let r=0,A=21,o=!1;n!==null&&(r=n.angle,A=n.alignment,o=this.isBusAlignment(A));const a=s===90||s===270,h=r===90||r===270,d=t.childrenCount===0,f=this.ZN(t);let g=0;const x=t.comments,B=x.length,C=T.l();for(let b=0;b<B;b++){const L=x[b],Q=L.measuredBounds;if(a&&!d||!o&&!h&&d||o&&h&&d){if(r>135&&!o||h&&f)if(t.commentMargin>=0){C.i(t.bounds.x-t.commentMargin-Q.width,t.bounds.y+g),L.move(C);const M=L.findLinksInto();for(;M.next();){const O=M.value;O.fromSpot=q.MiddleLeft,O.toSpot=q.MiddleRight}}else{C.i(t.bounds.x+t.focus.x*2-t.commentMargin,t.bounds.y+g),L.move(C);const M=L.findLinksInto();for(;M.next();){const O=M.value;O.fromSpot=q.MiddleRight,O.toSpot=q.MiddleLeft}}else if(t.commentMargin>=0){C.i(t.bounds.x+t.focus.x*2+t.commentMargin,t.bounds.y+g),L.move(C);const M=L.findLinksInto();for(;M.next();){const O=M.value;O.fromSpot=q.MiddleRight,O.toSpot=q.MiddleLeft}}else{C.i(t.bounds.x+t.commentMargin-Q.width,t.bounds.y+g),L.move(C);const M=L.findLinksInto();for(;M.next();){const O=M.value;O.fromSpot=q.MiddleLeft,O.toSpot=q.MiddleRight}}t.commentSpacing>=0?g+=Q.height+t.commentSpacing:g+=t.commentSpacing-Q.height}else{if(r>135&&!o||!h&&f)if(t.commentMargin>=0){C.i(t.bounds.x+g,t.bounds.y-t.commentMargin-Q.height),L.move(C);const M=L.findLinksInto();for(;M.next();){const O=M.value;O.fromSpot=q.MiddleTop,O.toSpot=q.MiddleBottom}}else{C.i(t.bounds.x+g,t.bounds.y+t.focus.y*2-t.commentMargin),L.move(C);const M=L.findLinksInto();for(;M.next();){const O=M.value;O.fromSpot=q.MiddleBottom,O.toSpot=q.MiddleTop}}else if(t.commentMargin>=0){C.i(t.bounds.x+g,t.bounds.y+t.focus.y*2+t.commentMargin),L.move(C);const M=L.findLinksInto();for(;M.next();){const O=M.value;O.fromSpot=q.MiddleBottom,O.toSpot=q.MiddleTop}}else{C.i(t.bounds.x+g,t.bounds.y+t.commentMargin-Q.height),L.move(C);const M=L.findLinksInto();for(;M.next();){const O=M.value;O.fromSpot=q.MiddleTop,O.toSpot=q.MiddleBottom}}t.commentSpacing>=0?g+=Q.width+t.commentSpacing:g+=t.commentSpacing-Q.width}}T.e(C);const F=g-t.commentSpacing-(a?i.height:i.width);if(this.cs===1){const b=t.destinationEdges;for(;b.next();){const L=b.value.link;L!==null&&!L.isAvoiding&&(L.fromEndSegmentLength=F>0?F:NaN)}}else{const b=t.sourceEdges;for(;b.next();){const L=b.value.link;L!==null&&!L.isAvoiding&&(L.toEndSegmentLength=F>0?F:NaN)}}}}GI(){if(this.layerStyle===62){const i=[];let n=this.network.vertexes.iterator;for(;n.next();){const s=n.value;let r=s.parent;r===null&&(r=s);const A=r.angle===0||r.angle===180;let o=i[s.level];o===void 0&&(o=0),i[s.level]=Math.max(o,A?s.width:s.height)}for(let s=0;s<i.length;s++)i[s]===void 0&&(i[s]=0);for(this.JN=i,n=this.network.vertexes.iterator;n.next();){const s=n.value;let r=s.parent;r===null&&(r=s),r.angle===0||r.angle===180?(r.angle===180&&(s.focusX+=i[s.level]-s.width),s.width=i[s.level]):(r.angle===270&&(s.focusY+=i[s.level]-s.height),s.height=i[s.level])}}else if(this.layerStyle===61){const i=this.network.vertexes.iterator;for(;i.next();){const n=i.value,s=n.angle===0||n.angle===180;let r=-1;for(let A=0;A<n.children.length;A++){const o=n.children[A];r=Math.max(r,s?o.width:o.height)}if(r>=0)for(let A=0;A<n.children.length;A++){const o=n.children[A];s?(n.angle===180&&(o.focusX+=r-o.width),o.width=r):(n.angle===270&&(o.focusY+=r-o.height),o.height=r)}}}const t=this.Oi.iterator;for(;t.next();){const i=t.value;i instanceof Un&&this.layoutTree(i)}}layoutTree(t){if(t===null)return;const i=t.children,n=i.length;for(let s=0;s<n;s++){const r=i[s];this.layoutTree(r)}switch(t.compaction){case 30:this.OD(t);break;default:case 31:t.alignment===25?this.OD(t):this.JI(t);break}}OD(t){if(t.childrenCount===0){let ht=!1,nt=0,gt=21;t.parent!==null&&(nt=t.parent.angle,gt=t.parent.alignment,ht=this.isBusAlignment(gt));const Ct=this.ZN(t);t.U.i(0,0),t.wt.i(t.width,t.height),t.parent!==null&&t.comments!==null&&((nt===180||nt===270)&&!ht||Ct)?nt===180&&!ht||(nt===90||nt===270)&&Ct?t.ut.i(t.width-t.focus.x*2,0):t.ut.i(0,t.height-t.focus.y*2):t.ut.i(0,0);return}const i=this.orthoAngle(t),n=i===90||i===270;let s=0;const r=t.children,A=r.length;for(let ht=0;ht<A;ht++){const nt=r[ht];s=Math.max(s,n?nt.wt.width:nt.wt.height)}const o=t.alignment,a=o===22,h=o===23,d=this.isBusAlignment(o),f=Math.max(0,t.breadthLimit),g=this.computeLayerSpacing(t),x=t.nodeSpacing,B=this.computeNodeIndent(t),C=a||h?0:B/2,F=t.rowSpacing;let b=0;(a||h)&&(b=Math.max(0,t.rowIndent));const L=t.width,Q=t.height;let M=0,O=0,D=0,K=0,J=0,R=0,G=0,W=0,Y=0,Z=0;if(d&&!this.Wy(o)&&i>135&&r.reverse(),this.Wy(o))if(A>1)for(let ht=0;ht<A;ht++){const nt=r[ht],gt=nt.wt;ht%2===0&&ht!==A-1?Y=Math.max(Y,(n?gt.width:gt.height)+this.computeBusNodeSpacing(nt)-x):ht%2!==0&&(Z=Math.max(Z,(n?gt.width:gt.height)+this.computeBusNodeSpacing(nt)-x))}else A===1&&(Y=n?r[0].wt.width:r[0].wt.height);if(d)switch(o){case 24:case 25:let ht;i<135?ht=this.ID(t,r,Y,Z,M,O):ht=this.ED(t,r,Y,Z,M,O),Y=ht.x,M=ht.width,O=ht.height;break;case 26:for(let nt=0;nt<A;nt++){const gt=r[nt],Ct=gt.wt,Wt=G===0?0:F;n?(gt.U.i(s-Ct.width,J+Wt),M=Math.max(M,Ct.width),O=Math.max(O,J+Wt+Ct.height),J+=Wt+Ct.height):(gt.U.i(K+Wt,s-Ct.height),M=Math.max(M,K+Wt+Ct.width),O=Math.max(O,Ct.height),K+=Wt+Ct.width),G++}break;case 27:for(let nt=0;nt<A;nt++){const gt=r[nt],Ct=gt.wt,Wt=G===0?0:F;n?(gt.U.i(x/2+t.focus.x,J+Wt),M=Math.max(M,Ct.width),O=Math.max(O,J+Wt+Ct.height),J+=Wt+Ct.height):(gt.U.i(K+Wt,x/2+t.focus.y),M=Math.max(M,K+Wt+Ct.width),O=Math.max(O,Ct.height),K+=Wt+Ct.width),G++}break}else for(let ht=0;ht<A;ht++){const nt=r[ht],gt=nt.wt;if(n){f>0&&G>0&&K+x+gt.width>f&&(K<s&&this.nc(t,o,s-K,0,W,ht-1),R++,G=0,W=ht,D=O,K=0,J=i>135?-O-F:O+F);const Ct=G===0?C:x;this.uk(nt,0,J),nt.U.i(K+Ct,J),M=Math.max(M,K+Ct+gt.width),O=Math.max(O,D+(R===0?0:F)+gt.height),K+=Ct+gt.width}else{f>0&&G>0&&J+x+gt.height>f&&(J<s&&this.nc(t,o,0,s-J,W,ht-1),R++,G=0,W=ht,D=M,J=0,K=i>135?-M-F:M+F);const Ct=G===0?C:x;this.uk(nt,K,0),nt.U.i(K,J+Ct),O=Math.max(O,J+Ct+gt.height),M=Math.max(M,D+(R===0?0:F)+gt.width),J+=Ct+gt.height}G++}R>0&&(n?(O+=Math.max(0,g),K<M&&this.nc(t,o,M-K,0,W,A-1),b>0&&(h||this.nu(t,b,0,0,A-1),M+=b)):(M+=Math.max(0,g),J<O&&this.nc(t,o,0,O-J,W,A-1),b>0&&(h||this.nu(t,0,b,0,A-1),O+=b)));let et=0,At=0;switch(o){case 20:n?et+=M/2-t.focus.x-B/2:At+=O/2-t.focus.y-B/2;break;default:case 21:if(R>0)n?et+=M/2-t.focus.x-B/2:At+=O/2-t.focus.y-B/2;else{const nt=A;if(n){const gt=r[0].U.x+r[0].ut.x,Ct=r[nt-1].U.x+r[nt-1].ut.x+r[nt-1].focus.x*2;et+=gt+(Ct-gt)/2-t.focus.x-B/2}else{const gt=r[0].U.y+r[0].ut.y,Ct=r[nt-1].U.y+r[nt-1].ut.y+r[nt-1].focus.y*2;At+=gt+(Ct-gt)/2-t.focus.y-B/2}}break;case 22:n?(et-=B,M+=B):(At-=B,O+=B);break;case 23:n?(et+=M-t.width+B,M+=B):(At+=O-t.height+B,O+=B);break;case 24:case 25:n?A>1?et+=Y+x/2-t.focus.x:et+=r[0].focus.x-t.focus.x+r[0].ut.x:A>1?At+=Y+x/2-t.focus.y:At+=r[0].focus.y-t.focus.y+r[0].ut.y;break;case 26:n?et+=M+x/2-t.focus.x:At+=O+x/2-t.focus.y;break;case 27:break;case 28:const ht=this.customAlignment(t,et,At,M,O);et=ht[0],At=ht[1],M=ht[2],O=ht[3];break}for(let ht=0;ht<A;ht++){const nt=r[ht];n?nt.U.i(nt.U.x+nt.ut.x-et,nt.U.y+(i>135?(d?-O:-nt.wt.height)+nt.ut.y-g:Q+g+nt.ut.y)):nt.U.i(nt.U.x+(i>135?(d?-M:-nt.wt.width)+nt.ut.x-g:L+g+nt.ut.x),nt.U.y+nt.ut.y-At)}n?(M=this.QN(t,M,et),et<0&&(et=0),i>135&&(At+=O+g),O=Math.max(Math.max(O,Q),O+Q+g)):(i>135&&(et+=M+g),M=Math.max(Math.max(M,L),M+L+g),O=this._N(t,O,At),At<0&&(At=0)),t.ut.i(et,At),t.wt.i(M,O)}customAlignment(t,i,n,s,r){return[i,n,s,r]}ID(t,i,n,s,r,A){const o=i.length;if(o===0)return new it(n,0,r,A);if(o===1){const F=i[0];return r=F.wt.width,A=F.wt.height,new it(n,0,r,A)}const a=t.nodeSpacing,h=t.rowSpacing,d=this.orthoAngle(t)===90;let f=0,g=0,x=0;for(let F=0;F<o;F++){if(F%2!==0||o>1&&F===o-1)continue;const b=i[F],L=b.wt,Q=f===0?0:h;if(d){const M=this.computeBusNodeSpacing(b)-a;b.U.i(n-(L.width+M),x+Q),r=Math.max(r,L.width+M),A=Math.max(A,x+Q+L.height),x+=Q+L.height}else{const M=this.computeBusNodeSpacing(b)-a;b.U.i(g+Q,n-(L.height+M)),A=Math.max(A,L.height+M),r=Math.max(r,g+Q+L.width),g+=Q+L.width}f++}f=0;const B=g,C=x;d?(g=n+a,x=0):(g=0,x=n+a);for(let F=0;F<o;F++){if(F%2===0)continue;const b=i[F],L=b.wt,Q=f===0?0:h;if(d){const M=this.computeBusNodeSpacing(b)-a;b.U.i(g+M,x+Q),r=Math.max(r,g+L.width+M),A=Math.max(A,x+Q+L.height),x+=Q+L.height}else{const M=this.computeBusNodeSpacing(b)-a;b.U.i(g+Q,x+M),r=Math.max(r,g+Q+L.width),A=Math.max(A,x+L.height+M),g+=Q+L.width}f++}if(o>1&&o%2===1){const F=i[o-1],b=F.wt,L=this.computeBusLastRowSpacing(F,d?Math.max(Math.abs(C),Math.abs(x)):Math.max(Math.abs(B),Math.abs(g)));if(d){F.U.i(n+a/2-F.focus.x-F.ut.x,A+L);const Q=n+a/2-F.focus.x-F.ut.x;r=Math.max(r,Q+b.width),Q<0&&(r-=Q),A=Math.max(A,Math.max(C,x)+L+b.height),F.U.x<0&&(n=this.dk(t,F.U.x,!1,n,a))}else{F.U.i(r+L,n+a/2-F.focus.y-F.ut.y),r=Math.max(r,Math.max(B,g)+L+b.width);const Q=n+a/2-F.focus.y-F.ut.y;A=Math.max(A,Q+b.height),Q<0&&(A-=Q),F.U.y<0&&(n=this.dk(t,F.U.y,!0,n,a))}}return new it(n,0,r,A)}ED(t,i,n,s,r,A){const o=i.length;if(o===0)return new it(n,0,r,A);if(o===1){const F=i[0];return r=F.wt.width,A=F.wt.height,new it(n,0,r,A)}const a=t.nodeSpacing,h=t.rowSpacing,d=this.orthoAngle(t)===270;let f=0,g=0,x=0;for(let F=0;F<o;F++){if(F%2!==0||o>1&&F===o-1)continue;const b=i[F],L=b.wt,Q=f===0?0:h;if(d){const M=this.computeBusNodeSpacing(b)-a;x-=Q+L.height,b.U.i(n-(L.width+M),x),r=Math.max(r,L.width+M),A=Math.max(A,Math.abs(x))}else{const M=this.computeBusNodeSpacing(b)-a;g-=Q+L.width,b.U.i(g,n-(L.height+M)),A=Math.max(A,L.height+M),r=Math.max(r,Math.abs(g))}f++}f=0;const B=g,C=x;d?(g=n+a,x=0):(g=0,x=n+a);for(let F=0;F<o;F++){if(F%2===0)continue;const b=i[F],L=b.wt,Q=f===0?0:h;if(d){const M=this.computeBusNodeSpacing(b)-a;x-=Q+L.height,b.U.i(g+M,x),r=Math.max(r,g+L.width+M),A=Math.max(A,Math.abs(x))}else{const M=this.computeBusNodeSpacing(b)-a;g-=Q+L.width,b.U.i(g,x+M),A=Math.max(A,x+L.height+M),r=Math.max(r,Math.abs(g))}f++}if(o>1&&o%2===1){const F=i[o-1],b=F.wt,L=this.computeBusLastRowSpacing(F,d?Math.max(Math.abs(C),Math.abs(x)):Math.max(Math.abs(B),Math.abs(g)));if(d){F.U.i(n+a/2-F.focus.x-F.ut.x,-A-b.height-L);const Q=n+a/2-F.focus.x-F.ut.x;r=Math.max(r,Q+b.width),Q<0&&(r-=Q),A=Math.max(A,Math.abs(Math.min(C,x))+L+b.height),F.U.x<0&&(n=this.dk(t,F.U.x,!1,n,a))}else{F.U.i(-r-b.width-L,n+a/2-F.focus.y-F.ut.y),r=Math.max(r,Math.abs(Math.min(B,g))+L+b.width);const Q=n+a/2-F.focus.y-F.ut.y;A=Math.max(A,Q+b.height),Q<0&&(A-=Q),F.U.y<0&&(n=this.dk(t,F.U.y,!0,n,a))}}for(let F=0;F<o;F++){const b=i[F];d?b.U.i(b.U.x,b.U.y+A):b.U.i(b.U.x+r,b.U.y)}return new it(n,0,r,A)}computeBusNodeSpacing(t){return t.parent===null?0:t.parent.nodeSpacing}computeBusLastRowSpacing(t,i){return t.parent===null?0:t.parent.rowSpacing}dk(t,i,n,s,r){const A=t.children,o=A.length;for(let h=0;h<o;h++)n?A[h].U.i(A[h].U.x,A[h].U.y-i):A[h].U.i(A[h].U.x-i,A[h].U.y);const a=A[o-1];return Math.max(s,n?a.ut.y+a.focus.y-r/2:a.ut.x+a.focus.x-r/2)}QN(t,i,n){switch(t.alignment){case 21:case 20:let s=i;return n+t.width>s&&(s=n+t.width),n<0&&(s-=n),s;case 22:return t.width>i?t.width:i;case 23:return t.focus.x*2>i?t.width:i+t.width-t.focus.x*2;case 24:case 25:const r=Math.min(0,n),A=Math.max(i,n+t.width);return Math.max(t.width,A-r);case 26:return t.width-t.focus.x+t.nodeSpacing/2+i;case 27:return Math.max(t.width,t.focus.x+t.nodeSpacing/2+i);default:return i}}_N(t,i,n){switch(t.alignment){case 21:case 20:let s=i;return n+t.height>s&&(s=n+t.height),n<0&&(s-=n),s;case 22:return t.height>i?t.height:i;case 23:return t.focus.y*2>i?t.height:i+t.height-t.focus.y*2;case 24:case 25:const r=Math.min(0,n),A=Math.max(i,n+t.height);return Math.max(t.height,A-r);case 26:return t.height-t.focus.y+t.nodeSpacing/2+i;case 27:return Math.max(t.height,t.focus.y+t.nodeSpacing/2+i);default:return i}}tC(t,i,n){switch(t){case 20:i/=2,n/=2;break;case 21:i/=2,n/=2;break;case 22:i=0,n=0;break;case 23:break;default:u.o("Unhandled alignment value "+t.toString())}return new T(i,n)}nc(t,i,n,s,r,A){const o=this.tC(i,n,s);this.nu(t,o.x,o.y,r,A)}nu(t,i,n,s,r){if(i===0&&n===0)return;const A=t.children;for(let o=s;o<=r;o++){const a=A[o].U;a.x+=i,a.y+=n}}uk(t,i,n){const s=t.parent;switch(this.cs){case 1:{const r=t.sourceEdges;for(;r.next();){const A=r.value;A.fromVertex===s&&A.relativePoint.i(i,n)}break}case 2:{const r=t.destinationEdges;for(;r.next();){const A=r.value;A.toVertex===s&&A.relativePoint.i(i,n)}break}default:u.o("Unhandled path value "+this.cs.toString())}}JI(t){if(t.childrenCount===0){const Mt=t.parent;let Ut=!1,ne=0,te=21;Mt!==null&&(ne=Mt.angle,te=Mt.alignment,Ut=this.isBusAlignment(te));const Ft=this.ZN(t);t.U.i(0,0),t.wt.i(t.width,t.height),t.parent!==null&&t.comments!==null&&((ne===180||ne===270)&&!Ut||Ft)?ne===180&&!Ut||(ne===90||ne===270)&&Ft?t.ut.i(t.width-t.focus.x*2,0):t.ut.i(0,t.height-t.focus.y*2):t.ut.i(0,0),t.Dg=null,t.Fg=null;return}const i=this.orthoAngle(t),n=i===90||i===270;let s=0;const r=t.children,A=r.length;for(let Mt=0;Mt<A;Mt++){const Ut=r[Mt];s=Math.max(s,n?Ut.wt.width:Ut.wt.height)}const o=t.alignment,a=o===22,h=o===23,d=this.isBusAlignment(o),f=Math.max(0,t.breadthLimit),g=this.computeLayerSpacing(t),x=t.nodeSpacing,B=this.computeNodeIndent(t),C=t.rowSpacing;let F=0;(a||h)&&(F=Math.max(0,t.rowIndent));const b=t.width,L=t.height;let Q=0,M=0,O=0,D=null,K=null,J=0,R=0,G=0,W=0,Y=0,Z=0,et=0,At=0,ht=0;if(d&&!this.Wy(o)&&i>135&&r.reverse(),this.Wy(o))if(A>1)for(let Mt=0;Mt<A;Mt++)Mt%2===0&&Mt!==A-1?At=Math.max(At,n?r[Mt].wt.width:r[Mt].wt.height):Mt%2!==0&&(ht=Math.max(ht,n?r[Mt].wt.width:r[Mt].wt.height));else A===1&&(At=n?r[0].wt.width:r[0].wt.height);if(d){switch(o){case 24:let Mt;i<135?Mt=this.ID(t,r,At,ht,Q,M):Mt=this.ED(t,r,At,ht,Q,M),At=Mt.x,Q=Mt.width,M=Mt.height;break;case 26:for(let Ut=0;Ut<A;Ut++){const ne=r[Ut],te=ne.wt,Ft=Z===0?0:C;n?(ne.U.i(s-te.width,W+Ft),Q=Math.max(Q,te.width),M=Math.max(M,W+Ft+te.height),W+=Ft+te.height):(ne.U.i(G+Ft,s-te.height),Q=Math.max(Q,G+Ft+te.width),M=Math.max(M,te.height),G+=Ft+te.width),Z++}break;case 27:for(let Ut=0;Ut<A;Ut++){const ne=r[Ut],te=ne.wt,Ft=Z===0?0:C;n?(ne.U.i(x/2+t.focus.x,W+Ft),Q=Math.max(Q,te.width),M=Math.max(M,W+Ft+te.height),W+=Ft+te.height):(ne.U.i(G+Ft,x/2+t.focus.y),Q=Math.max(Q,G+Ft+te.width),M=Math.max(M,te.height),G+=Ft+te.width),Z++}break}D=this.ue(2),K=this.ue(2),n?(D[0].i(0,0),D[1].i(0,M),K[0].i(Q,0),K[1].i(Q,M)):(D[0].i(0,0),D[1].i(Q,0),K[0].i(0,M),K[1].i(Q,M))}else for(let Mt=0;Mt<A;Mt++){const Ut=r[Mt],ne=Ut.wt;if(n){f>0&&Z>0&&G+x+ne.width>f&&(G<s&&this.nc(t,o,s-G,0,et,Mt-1),Y++,Z=0,et=Mt,O=M,G=0,W=i>135?-M-C:M+C),this.uk(Ut,0,W);let te=0;if(Z===0)D=Ut.Dg,K=Ut.Fg,J=ne.width,R=ne.height,(D===null||K===null||i!==this.orthoAngle(Ut))&&(D=this.ue(2),K=this.ue(2),D[0].i(0,0),D[1].i(0,R),K[0].i(J,0),K[1].i(J,R));else{const Ft=u.ht(),zt=this.BD(t,Ut,D,K,J,R,Ft);te=zt.x,D=Ft[0],K=Ft[1],J=zt.width,R=zt.height,u.et(Ft),G<ne.width&&te<0&&(this.nu(t,-te,0,et,Mt-1),this.gk(D,-te,0),this.gk(K,-te,0),te=0)}Ut.U.i(te,W),Q=Math.max(Q,J),M=Math.max(M,O+(Y===0?0:C)+ne.height),G=J}else{f>0&&Z>0&&W+x+ne.height>f&&(W<s&&this.nc(t,o,0,s-W,et,Mt-1),Y++,Z=0,et=Mt,O=Q,W=0,G=i>135?-Q-C:Q+C),this.uk(Ut,G,0);let te=0;if(Z===0)D=Ut.Dg,K=Ut.Fg,J=ne.width,R=ne.height,(D===null||K===null||i!==this.orthoAngle(Ut))&&(D=this.ue(2),K=this.ue(2),D[0].i(0,0),D[1].i(J,0),K[0].i(0,R),K[1].i(J,R));else{const Ft=u.ht(),zt=this.BD(t,Ut,D,K,J,R,Ft);te=zt.x,D=Ft[0],K=Ft[1],J=zt.width,R=zt.height,u.et(Ft),W<ne.height&&te<0&&(this.nu(t,0,-te,et,Mt-1),this.gk(D,0,-te),this.gk(K,0,-te),te=0)}Ut.U.i(G,te),M=Math.max(M,R),Q=Math.max(Q,O+(Y===0?0:C)+ne.width),W=R}Z++}Y>0&&(n?(M+=Math.max(0,g),G<Q&&this.nc(t,o,Q-G,0,et,A-1),F>0&&(h||this.nu(t,F,0,0,A-1),Q+=F)):(Q+=Math.max(0,g),W<M&&this.nc(t,o,0,M-W,et,A-1),F>0&&(h||this.nu(t,0,F,0,A-1),M+=F)));let nt=0,gt=0;switch(o){case 20:n?nt+=Q/2-t.focus.x-B/2:gt+=M/2-t.focus.y-B/2;break;default:case 21:if(Y>0)n?nt+=Q/2-t.focus.x-B/2:gt+=M/2-t.focus.y-B/2;else{const Ut=A;if(n){const ne=r[0].U.x+r[0].ut.x,te=r[Ut-1].U.x+r[Ut-1].ut.x+r[Ut-1].focus.x*2;nt+=ne+(te-ne)/2-t.focus.x-B/2}else{const ne=r[0].U.y+r[0].ut.y,te=r[Ut-1].U.y+r[Ut-1].ut.y+r[Ut-1].focus.y*2;gt+=ne+(te-ne)/2-t.focus.y-B/2}}break;case 22:n?(nt-=B,Q+=B):(gt-=B,M+=B);break;case 23:n?(nt+=Q-t.width+B,Q+=B):(gt+=M-t.height+B,M+=B);break;case 24:n?A>1?nt+=At+x/2-t.focus.x:nt+=r[0].focus.x-t.focus.x+r[0].ut.x:A>1?gt+=At+x/2-t.focus.y:gt+=r[0].focus.y-t.focus.y+r[0].ut.y;break;case 26:n?nt+=Q+x/2-t.focus.x:gt+=M+x/2-t.focus.y;break;case 27:break;case 28:const Mt=this.customAlignment(t,nt,gt,Q,M);nt=Mt[0],gt=Mt[1],Q=Mt[2],M=Mt[3];break}for(let Mt=0;Mt<A;Mt++){const Ut=r[Mt];n?Ut.U.i(Ut.U.x+Ut.ut.x-nt,Ut.U.y+(i>135?(d?-M:-Ut.wt.height)+Ut.ut.y-g:L+g+Ut.ut.y)):Ut.U.i(Ut.U.x+(i>135?(d?-Q:-Ut.wt.width)+Ut.ut.x-g:b+g+Ut.ut.x),Ut.U.y+Ut.ut.y-gt)}let Ct=0,Wt=0;if(d)n?(Q=this.QN(t,Q,nt),nt<0&&(nt=0),i>135&&(gt+=M+g),M+=L+g,o===27&&(Ct+=x/2+t.focus.x),Wt+=L+g):(i>135&&(nt+=Q+g),Q+=b+g,M=this._N(t,M,gt),gt<0&&(gt=0),o===27&&(Wt+=x/2+t.focus.y),Ct+=b+g);else if(n){if(t.comments===null){if(b>Q){const Mt=this.tC(o,b-Q,0);Ct=Mt.x,Wt=Mt.y,Q=b,nt=0}}else Q=this.QN(t,Q,nt);nt<0&&(Ct-=nt,nt=0),i>135&&(gt+=M+g),M=Math.max(Math.max(M,L),M+L+g),Wt+=L+g}else{if(i>135&&(nt+=Q+g),Q=Math.max(Math.max(Q,b),Q+b+g),t.comments===null){if(L>M){const Mt=this.tC(o,0,L-M);Ct=Mt.x,Wt=Mt.y,M=L,gt=0}}else M=this._N(t,M,gt);gt<0&&(Wt-=gt,gt=0),Ct+=b+g}let St,Qt;if(Y>0)St=this.ue(4),Qt=this.ue(4),n?(St[2].i(0,L+g),St[3].i(St[2].x,M),Qt[2].i(Q,St[2].y),Qt[3].i(Qt[2].x,St[3].y)):(St[2].i(b+g,0),St[3].i(Q,St[2].y),Qt[2].i(St[2].x,M),Qt[3].i(St[3].x,Qt[2].y));else{St=this.ue(D.length+2),Qt=this.ue(K.length+2);for(let Mt=0;Mt<D.length;Mt++){const Ut=D[Mt];St[Mt+2].i(Ut.x+Ct,Ut.y+Wt)}for(let Mt=0;Mt<K.length;Mt++){const Ut=K[Mt];Qt[Mt+2].i(Ut.x+Ct,Ut.y+Wt)}}n?(St[0].i(nt,0),St[1].i(St[0].x,L),St[2].y<St[1].y&&(St[2].x>St[0].x?St[2].a(St[1]):St[1].a(St[2])),St[3].y<St[2].y&&(St[3].x>St[0].x?St[3].a(St[2]):St[2].a(St[3])),Qt[0].i(nt+b,0),Qt[1].i(Qt[0].x,L),Qt[2].y<Qt[1].y&&(Qt[2].x<Qt[0].x?Qt[2].a(Qt[1]):Qt[1].a(Qt[2])),Qt[3].y<Qt[2].y&&(Qt[3].x<Qt[0].x?Qt[3].a(Qt[2]):Qt[2].a(Qt[3])),St[2].y-=g/2,Qt[2].y-=g/2):(St[0].i(0,gt),St[1].i(b,St[0].y),St[2].x<St[1].x&&(St[2].y>St[0].y?St[2].a(St[1]):St[1].a(St[2])),St[3].x<St[2].x&&(St[3].y>St[0].y?St[3].a(St[2]):St[2].a(St[3])),Qt[0].i(0,gt+L),Qt[1].i(b,Qt[0].y),Qt[2].x<Qt[1].x&&(Qt[2].y<Qt[0].y?Qt[2].a(Qt[1]):Qt[1].a(Qt[2])),Qt[3].x<Qt[2].x&&(Qt[3].y<Qt[0].y?Qt[3].a(Qt[2]):Qt[2].a(Qt[3])),St[2].x-=g/2,Qt[2].x-=g/2),this.on(D),this.on(K),t.Dg=St,t.Fg=Qt,t.ut.i(nt,gt),t.wt.i(Q,M)}gk(t,i,n){for(let s=0;s<t.length;s++){const r=t[s];r.x+=i,r.y+=n}}BD(t,i,n,s,r,A,o){const a=this.orthoAngle(t),h=a===90||a===270,d=t.nodeSpacing,f=n,g=s,x=r,B=A;let C=i.Dg,F=i.Fg;const b=i.wt,L=h?Math.max(B,b.height):Math.max(x,b.width);if((C===null||a!==this.orthoAngle(i))&&(C=this.ue(2),F=this.ue(2),h?(C[0].i(0,0),C[1].i(0,b.height),F[0].i(b.width,0),F[1].i(F[0].x,C[1].y)):(C[0].i(0,0),C[1].i(b.width,0),F[0].i(0,b.height),F[1].i(C[1].x,F[0].y))),h){const Q=x;let M=Q-this.$I(g,C,Q);return M+=d,n=this.ZI(f,C,M),s=this.QI(g,F,M),r=Math.max(0,M)+b.width,A=L,this.on(f),this.on(C),this.on(g),this.on(F),o[0]=n,o[1]=s,new it(M,0,r,A)}else{const Q=B;let M=Q-this._I(g,C,Q);return M+=d,n=this.tE(f,C,M),s=this.iE(g,F,M),r=L,A=Math.max(0,M)+b.height,this.on(f),this.on(C),this.on(g),this.on(F),o[0]=n,o[1]=s,new it(M,0,r,A)}}tE(t,i,n){if(t===null||t.length<2||i===null||i.length<2)return null;const s=this.ue(t.length+i.length);let r=0,A=0,o=0;for(;A<i.length&&i[A].x<t[0].x;){const d=i[A++];s[o++].i(d.x,d.y+n)}for(;r<t.length;){const d=t[r++];s[o++].i(d.x,d.y)}const a=t[t.length-1].x;for(;A<i.length&&i[A].x<=a;)A++;for(;A<i.length&&i[A].x>a;){const d=i[A++];s[o++].i(d.x,d.y+n)}const h=this.ue(o);for(r=0;r<o;r++)h[r].a(s[r]);return this.on(s),h}ZI(t,i,n){if(t===null||t.length<2||i===null||i.length<2)return null;const s=this.ue(t.length+i.length);let r=0,A=0,o=0;for(;A<i.length&&i[A].y<t[0].y;){const d=i[A++];s[o++].i(d.x+n,d.y)}for(;r<t.length;){const d=t[r++];s[o++].i(d.x,d.y)}const a=t[t.length-1].y;for(;A<i.length&&i[A].y<=a;)A++;for(;A<i.length&&i[A].y>a;){const d=i[A++];s[o++].i(d.x+n,d.y)}const h=this.ue(o);for(r=0;r<o;r++)h[r].a(s[r]);return this.on(s),h}iE(t,i,n){if(t===null||t.length<2||i===null||i.length<2)return null;const s=this.ue(t.length+i.length);let r=0,A=0,o=0;for(;r<t.length&&t[r].x<i[0].x;){const d=t[r++];s[o++].i(d.x,d.y)}for(;A<i.length;){const d=i[A++];s[o++].i(d.x,d.y+n)}const a=i[i.length-1].x;for(;r<t.length&&t[r].x<=a;)r++;for(;r<t.length&&t[r].x>a;){const d=t[r++];s[o++].i(d.x,d.y)}const h=this.ue(o);for(r=0;r<o;r++)h[r].a(s[r]);return this.on(s),h}QI(t,i,n){if(t===null||t.length<2||i===null||i.length<2)return null;const s=this.ue(t.length+i.length);let r=0,A=0,o=0;for(;r<t.length&&t[r].y<i[0].y;){const d=t[r++];s[o++].i(d.x,d.y)}for(;A<i.length;){const d=i[A++];s[o++].i(d.x+n,d.y)}const a=i[i.length-1].y;for(;r<t.length&&t[r].y<=a;)r++;for(;r<t.length&&t[r].y>a;){const d=t[r++];s[o++].i(d.x,d.y)}const h=this.ue(o);for(r=0;r<o;r++)h[r].a(s[r]);return this.on(s),h}_I(t,i,n){let s=9999999;if(t===null||t.length<2||i===null||i.length<2)return s;let r=0,A=0;for(;r<t.length&&A<i.length;){const o=t[r],a=i[A],h=a.x;let d=a.y;d+=n;let f=o;r+1<t.length&&(f=t[r+1]);let g=a,x=g.x,B=g.y;A+1<i.length&&(g=i[A+1],x=g.x,B=g.y,B+=n);let C=s;o.x===h?C=d-o.y:o.x>h&&o.x<x?C=d+(o.x-h)/(x-h)*(B-d)-o.y:h>o.x&&h<f.x&&(C=d-(o.y+(h-o.x)/(f.x-o.x)*(f.y-o.y))),C<s&&(s=C),f.x<=o.x?r++:x<=h?A++:(f.x<=x&&r++,x<=f.x&&A++)}return s}$I(t,i,n){let s=9999999;if(t===null||t.length<2||i===null||i.length<2)return s;let r=0,A=0;for(;r<t.length&&A<i.length;){const o=t[r],a=i[A];let h=a.x;const d=a.y;h+=n;let f=o;r+1<t.length&&(f=t[r+1]);let g=a,x=g.x,B=g.y;A+1<i.length&&(g=i[A+1],x=g.x,B=g.y,x+=n);let C=s;o.y===d?C=h-o.x:o.y>d&&o.y<B?C=h+(o.y-d)/(B-d)*(x-h)-o.x:d>o.y&&d<f.y&&(C=h-(o.x+(d-o.y)/(f.y-o.y)*(f.x-o.x))),C<s&&(s=C),f.y<=o.y?r++:B<=d?A++:(f.y<=B&&r++,B<=f.y&&A++)}return s}ue(t){const i=this.fk[t];if(i!==void 0){const s=i.pop();if(s!==void 0)return s}const n=[];for(let s=0;s<t;s++)n[s]=new T;return n}on(t){const i=t.length;let n=this.fk[i];n===void 0&&(n=[],this.fk[i]=n),n.push(t)}arrangeTrees(){if(this.Gi===52){const t=this.Oi.iterator;for(;t.next();){const i=t.value;if(!(i instanceof Un))continue;const n=i.node;if(n===null)continue;const s=n.position;let r=s.x,A=s.y;isFinite(r)||(r=0),isFinite(A)||(A=0),this.iC(i,r,A)}}else{const t=[],i=this.Oi.iterator;for(;i.next();){const A=i.value;A instanceof Un&&t.push(A)}switch(this.sorting){default:case 10:break;case 11:t.reverse();break;case 12:t.sort(this.comparer);break;case 13:t.sort(this.comparer),t.reverse();break}const n=this.arrangementOrigin;let s=n.x,r=n.y;for(let A=0;A<t.length;A++){const o=t[A];switch(this.iC(o,s+o.ut.x,r+o.ut.y),this.Gi){case 50:r+=o.wt.height+this.Ns.height;break;default:case 51:s+=o.wt.width+this.Ns.width;break}}}}iC(t,i,n){if(t===null)return;t.x=i,t.y=n;const s=t.children,r=s.length;for(let A=0;A<r;A++){const o=s[A];this.iC(o,i+o.U.x,n+o.U.y)}}commitLayout(){this.Vy(),this.commitNodes(),this.WN(),this.isRouting&&this.commitLinks()}commitNodes(){const t=this.network.vertexes.iterator;for(;t.next();)t.value.commit();for(t.reset();t.next();){const i=t.value;this.layoutComments(i)}}WN(){if(this.layerStyle!==62)return;const t=this.JN,i=[];let n=null;const s=this.network.vertexes.iterator;for(;s.next();){const h=s.value;n===null?n=h.bounds.copy():n.unionRect(h.bounds);let d=i[h.level];d===void 0?d=this.computeLayerSpacing(h):d=Math.max(d,this.computeLayerSpacing(h)),i[h.level]=d}for(let h=0;h<i.length;h++)i[h]===void 0&&(i[h]=0);let r;this.angle===90||this.angle===270?(n.inflate(this.nodeSpacing/2,this.layerSpacing),r=new T(-this.nodeSpacing/2,-this.layerSpacing/2)):(n.inflate(this.layerSpacing,this.nodeSpacing/2),r=new T(-this.layerSpacing/2,-this.nodeSpacing/2));const A=[],o=this.angle===90||this.angle===270?n.width:n.height;let a=0;if(this.angle===180||this.angle===270)for(let h=0;h<t.length;h++)a+=t[h]+i[h];for(let h=0;h<t.length;h++){const d=t[h]+i[h];this.angle===270?(a-=d,A.push(new it(0,a,o,d))):this.angle===90?(A.push(new it(0,a,o,d)),a+=d):this.angle===180?(a-=d,A.push(new it(a,0,d,o))):(A.push(new it(a,0,d,o)),a+=d)}this.commitLayers(A,r)}commitLayers(t,i){}commitLinks(){const t=this.network.edges.iterator;for(;t.next();)t.value.commit()}Vy(){const t=this.Oi.iterator;for(;t.next();){const i=t.value;i instanceof Un&&this.UD(i)}}UD(t){if(t===null)return;this.setPortSpots(t);const i=t.children,n=i.length;for(let s=0;s<n;s++){const r=i[s];this.UD(r)}}setPortSpots(t){const i=t.alignment;if(this.isBusAlignment(i))this.eE(t,i);else{const n=this.orthoAngle(t);if(this.cs===1){const s=t.destinationEdges;for(;s.next();){const r=s.value.link;if(r!==null){if(t.setsPortSpot)if(t.portSpot.isDefault())switch(n){case 0:r.fromSpot=q.MiddleRight;break;case 90:r.fromSpot=q.MiddleBottom;break;case 180:r.fromSpot=q.MiddleLeft;break;default:r.fromSpot=q.MiddleTop;break}else r.fromSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.isDefault())switch(n){case 0:r.toSpot=q.MiddleLeft;break;case 90:r.toSpot=q.MiddleTop;break;case 180:r.toSpot=q.MiddleRight;break;default:r.toSpot=q.MiddleBottom;break}else r.toSpot=t.childPortSpot}}}else{const s=t.sourceEdges;for(;s.next();){const r=s.value.link;if(r!==null){if(t.setsPortSpot)if(t.portSpot.isDefault())switch(n){case 0:r.toSpot=q.MiddleRight;break;case 90:r.toSpot=q.MiddleBottom;break;case 180:r.toSpot=q.MiddleLeft;break;default:r.toSpot=q.MiddleTop;break}else r.toSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.isDefault())switch(n){case 0:r.fromSpot=q.MiddleLeft;break;case 90:r.fromSpot=q.MiddleTop;break;case 180:r.fromSpot=q.MiddleRight;break;default:r.fromSpot=q.MiddleBottom;break}else r.fromSpot=t.childPortSpot}}}}}eE(t,i){const n=this.cs===1,s=this.orthoAngle(t);let r;switch(s){case 0:r=q.MiddleRight;break;case 90:r=q.MiddleBottom;break;case 180:r=q.MiddleLeft;break;default:r=q.MiddleTop;break}const A=t.children,o=A.length;switch(i){case 24:case 25:{for(let a=0;a<o;a++){const h=A[a],d=(n?h.sourceEdges:h.destinationEdges).first();if(d===null)continue;const f=d.link;if(f!==null){let g=s===90||s===270?q.MiddleLeft:q.MiddleTop;if(o===1||a===o-1&&o%2===1)switch(s){case 0:g=q.MiddleLeft;break;case 90:g=q.MiddleTop;break;case 180:g=q.MiddleRight;break;default:g=q.MiddleBottom;break}else a%2===0&&(g=s===90||s===270?q.MiddleRight:q.MiddleBottom);n?(t.setsPortSpot&&(f.fromSpot=r),t.setsChildPortSpot&&(f.toSpot=g)):(t.setsPortSpot&&(f.fromSpot=g),t.setsChildPortSpot&&(f.toSpot=r))}}break}case 26:{const a=s===90||s===270?q.MiddleRight:q.MiddleBottom,h=n?t.destinationEdges:t.sourceEdges;for(;h.next();){const d=h.value.link;d!==null&&(n?(t.setsPortSpot&&(d.fromSpot=r),t.setsChildPortSpot&&(d.toSpot=a)):(t.setsPortSpot&&(d.fromSpot=a),t.setsChildPortSpot&&(d.toSpot=r)))}break}case 27:{const a=s===90||s===270?q.MiddleLeft:q.MiddleTop,h=n?t.destinationEdges:t.sourceEdges;for(;h.next();){const d=h.value.link;d!==null&&(n?(t.setsPortSpot&&(d.fromSpot=r),t.setsChildPortSpot&&(d.toSpot=a)):(t.setsPortSpot&&(d.fromSpot=a),t.setsChildPortSpot&&(d.toSpot=r)))}break}}}orthoAngle(t){const i=t.angle;return i<=45?0:i<=135?90:i<=225?180:i<=315?270:0}computeLayerSpacing(t){const i=this.orthoAngle(t),n=i===90||i===270;let s=t.layerSpacing;if(t.layerSpacingParentOverlap>0){const r=Math.min(1,t.layerSpacingParentOverlap);s-=n?t.height*r:t.width*r}return s<(n?-t.height:-t.width)&&(s=n?-t.height:-t.width),s}computeNodeIndent(t){const i=this.orthoAngle(t),n=i===90||i===270;let s=t.nodeIndent;if(t.nodeIndentPastParent>0){const r=Math.min(1,t.nodeIndentPastParent);s+=n?t.width*r:t.height*r}return s=Math.max(0,s),s}get roots(){return this.Oi}set roots(t){this.Oi!==t&&(this.Oi=t,this.invalidateLayout())}get path(){return this.Di}set path(t){this.Di!==t&&(this.Di=t,this.invalidateLayout())}get treeStyle(){return this.su}set treeStyle(t){this.su!==t&&(t===40||t===42||t===41||t===43)&&(this.su=t,this.invalidateLayout())}get layerStyle(){return this.Tg}set layerStyle(t){this.Tg!==t&&(t===60||t===61||t===62)&&(this.Tg=t,this.invalidateLayout())}get comments(){return this.Oe}set comments(t){this.Oe!==t&&(this.Oe=t,this.invalidateLayout())}get arrangement(){return this.Gi}set arrangement(t){this.Gi!==t&&(t===50||t===51||t===52)&&(this.Gi=t,this.invalidateLayout())}get arrangementSpacing(){return this.Ns}set arrangementSpacing(t){this.Ns.equals(t)||(this.Ns.a(t),this.invalidateLayout())}get rootDefaults(){return this.z}set rootDefaults(t){this.z!==t&&(this.z=t,this.invalidateLayout())}get alternateDefaults(){return this.X}set alternateDefaults(t){this.X!==t&&(this.X=t,this.invalidateLayout())}get sorting(){return this.z.sorting}set sorting(t){this.z.sorting!==t&&(this.z.sorting=t,this.invalidateLayout())}get comparer(){return this.z.comparer}set comparer(t){this.z.comparer!==t&&(this.z.comparer=t,this.invalidateLayout())}get angle(){return this.z.angle}set angle(t){this.z.angle!==t&&(t===0||t===90||t===180||t===270?(this.z.angle=t,this.invalidateLayout()):u.o("TreeLayout.angle must be 0, 90, 180, or 270"))}get alignment(){return this.z.alignment}set alignment(t){this.z.alignment!==t&&(this.z.alignment=t,this.invalidateLayout())}get nodeIndent(){return this.z.nodeIndent}set nodeIndent(t){this.z.nodeIndent!==t&&t>=0&&(this.z.nodeIndent=t,this.invalidateLayout())}get nodeIndentPastParent(){return this.z.nodeIndentPastParent}set nodeIndentPastParent(t){this.z.nodeIndentPastParent!==t&&t>=0&&t<=1&&(this.z.nodeIndentPastParent=t,this.invalidateLayout())}get nodeSpacing(){return this.z.nodeSpacing}set nodeSpacing(t){this.z.nodeSpacing!==t&&(this.z.nodeSpacing=t,this.invalidateLayout())}get layerSpacing(){return this.z.layerSpacing}set layerSpacing(t){this.z.layerSpacing!==t&&(this.z.layerSpacing=t,this.invalidateLayout())}get layerSpacingParentOverlap(){return this.z.layerSpacingParentOverlap}set layerSpacingParentOverlap(t){this.z.layerSpacingParentOverlap!==t&&t>=0&&t<=1&&(this.z.layerSpacingParentOverlap=t,this.invalidateLayout())}get compaction(){return this.z.compaction}set compaction(t){this.z.compaction!==t&&(t===30||t===31)&&(this.z.compaction=t,this.invalidateLayout())}get breadthLimit(){return this.z.breadthLimit}set breadthLimit(t){this.z.breadthLimit!==t&&t>=0&&(this.z.breadthLimit=t,this.invalidateLayout())}get rowSpacing(){return this.z.rowSpacing}set rowSpacing(t){this.z.rowSpacing!==t&&(this.z.rowSpacing=t,this.invalidateLayout())}get rowIndent(){return this.z.rowIndent}set rowIndent(t){this.z.rowIndent!==t&&t>=0&&(this.z.rowIndent=t,this.invalidateLayout())}get commentSpacing(){return this.z.commentSpacing}set commentSpacing(t){this.z.commentSpacing!==t&&(this.z.commentSpacing=t,this.invalidateLayout())}get commentMargin(){return this.z.commentMargin}set commentMargin(t){this.z.commentMargin!==t&&(this.z.commentMargin=t,this.invalidateLayout())}get setsPortSpot(){return this.z.setsPortSpot}set setsPortSpot(t){this.z.setsPortSpot!==t&&(this.z.setsPortSpot=t,this.invalidateLayout())}get portSpot(){return this.z.portSpot}set portSpot(t){this.z.portSpot.equals(t)||(this.z.portSpot=t,this.invalidateLayout())}get setsChildPortSpot(){return this.z.setsChildPortSpot}set setsChildPortSpot(t){this.z.setsChildPortSpot!==t&&(this.z.setsChildPortSpot=t,this.invalidateLayout())}get childPortSpot(){return this.z.childPortSpot}set childPortSpot(t){this.z.childPortSpot.equals(t)||(this.z.childPortSpot=t,this.invalidateLayout())}get alternateSorting(){return this.X.sorting}set alternateSorting(t){this.X.sorting!==t&&(this.X.sorting=t,this.invalidateLayout())}get alternateComparer(){return this.X.comparer}set alternateComparer(t){this.X.comparer!==t&&(this.X.comparer=t,this.invalidateLayout())}get alternateAngle(){return this.X.angle}set alternateAngle(t){this.X.angle!==t&&(t===0||t===90||t===180||t===270)&&(this.X.angle=t,this.invalidateLayout())}get alternateAlignment(){return this.X.alignment}set alternateAlignment(t){this.X.alignment!==t&&(this.X.alignment=t,this.invalidateLayout())}get alternateNodeIndent(){return this.X.nodeIndent}set alternateNodeIndent(t){this.X.nodeIndent!==t&&t>=0&&(this.X.nodeIndent=t,this.invalidateLayout())}get alternateNodeIndentPastParent(){return this.X.nodeIndentPastParent}set alternateNodeIndentPastParent(t){this.X.nodeIndentPastParent!==t&&t>=0&&t<=1&&(this.X.nodeIndentPastParent=t,this.invalidateLayout())}get alternateNodeSpacing(){return this.X.nodeSpacing}set alternateNodeSpacing(t){this.X.nodeSpacing!==t&&(this.X.nodeSpacing=t,this.invalidateLayout())}get alternateLayerSpacing(){return this.X.layerSpacing}set alternateLayerSpacing(t){this.X.layerSpacing!==t&&(this.X.layerSpacing=t,this.invalidateLayout())}get alternateLayerSpacingParentOverlap(){return this.X.layerSpacingParentOverlap}set alternateLayerSpacingParentOverlap(t){this.X.layerSpacingParentOverlap!==t&&t>=0&&t<=1&&(this.X.layerSpacingParentOverlap=t,this.invalidateLayout())}get alternateCompaction(){return this.X.compaction}set alternateCompaction(t){this.X.compaction!==t&&(t===30||t===31)&&(this.X.compaction=t,this.invalidateLayout())}get alternateBreadthLimit(){return this.X.breadthLimit}set alternateBreadthLimit(t){this.X.breadthLimit!==t&&t>=0&&(this.X.breadthLimit=t,this.invalidateLayout())}get alternateRowSpacing(){return this.X.rowSpacing}set alternateRowSpacing(t){this.X.rowSpacing!==t&&(this.X.rowSpacing=t,this.invalidateLayout())}get alternateRowIndent(){return this.X.rowIndent}set alternateRowIndent(t){this.X.rowIndent!==t&&t>=0&&(this.X.rowIndent=t,this.invalidateLayout())}get alternateCommentSpacing(){return this.X.commentSpacing}set alternateCommentSpacing(t){this.X.commentSpacing!==t&&(this.X.commentSpacing=t,this.invalidateLayout())}get alternateCommentMargin(){return this.X.commentMargin}set alternateCommentMargin(t){this.X.commentMargin!==t&&(this.X.commentMargin=t,this.invalidateLayout())}get alternateSetsPortSpot(){return this.X.setsPortSpot}set alternateSetsPortSpot(t){this.X.setsPortSpot!==t&&(this.X.setsPortSpot=t,this.invalidateLayout())}get alternatePortSpot(){return this.X.portSpot}set alternatePortSpot(t){this.X.portSpot.equals(t)||(this.X.portSpot=t,this.invalidateLayout())}get alternateSetsChildPortSpot(){return this.X.setsChildPortSpot}set alternateSetsChildPortSpot(t){this.X.setsChildPortSpot!==t&&(this.X.setsChildPortSpot=t,this.invalidateLayout())}get alternateChildPortSpot(){return this.X.childPortSpot}set alternateChildPortSpot(t){this.X.childPortSpot.equals(t)||(this.X.childPortSpot=t,this.invalidateLayout())}}p(_e,"PathDefault",0),p(_e,"PathDestination",1),p(_e,"PathSource",2),p(_e,"SortingForwards",10),p(_e,"SortingReverse",11),p(_e,"SortingAscending",12),p(_e,"SortingDescending",13),p(_e,"AlignmentCenterSubtrees",20),p(_e,"AlignmentCenterChildren",21),p(_e,"AlignmentStart",22),p(_e,"AlignmentEnd",23),p(_e,"AlignmentBus",24),p(_e,"AlignmentBusBranching",25),p(_e,"AlignmentTopLeftBus",26),p(_e,"AlignmentBottomRightBus",27),p(_e,"CompactionNone",30),p(_e,"CompactionBlock",31),p(_e,"StyleLayered",40),p(_e,"StyleLastParents",41),p(_e,"StyleAlternating",42),p(_e,"StyleRootOnly",43),p(_e,"ArrangementVertical",50),p(_e,"ArrangementHorizontal",51),p(_e,"ArrangementFixedRoots",52),p(_e,"LayerIndividual",60),p(_e,"LayerSiblings",61),p(_e,"LayerUniform",62);class rA extends ps{constructor(e){super(e)}createVertex(){return new Un(this)}createEdge(){return new Xa(this)}}class Un extends Qn{constructor(t){super(t);p(this,"U");p(this,"wt");p(this,"ut");p(this,"mk");p(this,"pk");p(this,"yk");p(this,"wk");p(this,"xk");p(this,"bk");p(this,"kk");p(this,"Oe");p(this,"Dg");p(this,"Fg");p(this,"be");p(this,"ke");p(this,"Ht");p(this,"ci");p(this,"Jy");p(this,"$y");p(this,"Zy");p(this,"Cs");p(this,"Qy");p(this,"_y");p(this,"tw");p(this,"iw");p(this,"ew");p(this,"sw");p(this,"nw");p(this,"ow");p(this,"rw");p(this,"lw");p(this,"hw");this.mk=!1,this.pk=null,this.yk=[],this.wk=0,this.xk=0,this.bk=0,this.kk=0,this.Oe=null,this.U=new T(0,0),this.wt=new ct(0,0),this.ut=new T(0,0),this.Dg=null,this.Fg=null,this.be=10,this.ke=Qn.standardComparer,this.Ht=0,this.ci=21,this.Jy=0,this.$y=0,this.Zy=20,this.Cs=50,this.Qy=0,this._y=31,this.tw=0,this.iw=25,this.ew=10,this.sw=10,this.nw=20,this.ow=!0,this.rw=q.Default,this.lw=!0,this.hw=q.Default}copyInheritedPropertiesFrom(t){t!==null&&(this.be=t.sorting,this.ke=t.comparer,this.Ht=t.angle,this.ci=t.alignment,this.Jy=t.nodeIndent,this.$y=t.nodeIndentPastParent,this.Zy=t.nodeSpacing,this.Cs=t.layerSpacing,this.Qy=t.layerSpacingParentOverlap,this._y=t.compaction,this.tw=t.breadthLimit,this.iw=t.rowSpacing,this.ew=t.rowIndent,this.sw=t.commentSpacing,this.nw=t.commentMargin,this.ow=t.setsPortSpot,this.rw=t.portSpot,this.lw=t.setsChildPortSpot,this.hw=t.childPortSpot)}get initialized(){return this.mk}set initialized(t){this.mk!==t&&(this.mk=t)}get parent(){return this.pk}set parent(t){this.pk!==t&&(this.pk=t)}get children(){return this.yk}set children(t){if(this.yk!==t){if(t!==null){const i=t.length;for(let n=0;n<i;n++)t[n]}this.yk=t}}get level(){return this.wk}set level(t){this.wk!==t&&(this.wk=t)}get descendantCount(){return this.xk}set descendantCount(t){this.xk!==t&&(this.xk=t)}get maxChildrenCount(){return this.bk}set maxChildrenCount(t){this.bk!==t&&(this.bk=t)}get maxGenerationCount(){return this.kk}set maxGenerationCount(t){this.kk!==t&&(this.kk=t)}get comments(){return this.Oe}set comments(t){if(this.Oe!==t){if(t!==null){const i=t.length;for(let n=0;n<i;n++)t[n]}this.Oe=t}}get sorting(){return this.be}set sorting(t){this.be!==t&&(this.be=t)}get comparer(){return this.ke}set comparer(t){this.ke!==t&&(this.ke=t)}get angle(){return this.Ht}set angle(t){this.Ht!==t&&(this.Ht=t)}get alignment(){return this.ci}set alignment(t){this.ci!==t&&(this.ci=t)}get nodeIndent(){return this.Jy}set nodeIndent(t){this.Jy!==t&&(this.Jy=t)}get nodeIndentPastParent(){return this.$y}set nodeIndentPastParent(t){this.$y!==t&&(this.$y=t)}get nodeSpacing(){return this.Zy}set nodeSpacing(t){this.Zy!==t&&(this.Zy=t)}get layerSpacing(){return this.Cs}set layerSpacing(t){this.Cs!==t&&(this.Cs=t)}get layerSpacingParentOverlap(){return this.Qy}set layerSpacingParentOverlap(t){this.Qy!==t&&(this.Qy=t)}get compaction(){return this._y}set compaction(t){this._y!==t&&(this._y=t)}get breadthLimit(){return this.tw}set breadthLimit(t){this.tw!==t&&(this.tw=t)}get rowSpacing(){return this.iw}set rowSpacing(t){this.iw!==t&&(this.iw=t)}get rowIndent(){return this.ew}set rowIndent(t){this.ew!==t&&(this.ew=t)}get commentSpacing(){return this.sw}set commentSpacing(t){this.sw!==t&&(this.sw=t)}get commentMargin(){return this.nw}set commentMargin(t){this.nw!==t&&(this.nw=t)}get setsPortSpot(){return this.ow}set setsPortSpot(t){this.ow!==t&&(this.ow=t)}get portSpot(){return this.rw}set portSpot(t){this.rw.equals(t)||(this.rw=t)}get setsChildPortSpot(){return this.lw}set setsChildPortSpot(t){this.lw!==t&&(this.lw=t)}get childPortSpot(){return this.hw}set childPortSpot(t){this.hw.equals(t)||(this.hw=t)}get childrenCount(){return this.children.length}get relativePosition(){return this.U}set relativePosition(t){this.U.set(t)}get subtreeSize(){return this.wt}set subtreeSize(t){this.wt.set(t)}get subtreeOffset(){return this.ut}set subtreeOffset(t){this.ut.set(t)}}class Xa extends pr{constructor(t){super(t);p(this,"Pk");this.Pk=new T(0,0)}commit(){const t=this.link;if(t===null||t.isAvoiding)return;const i=this.network.layout;let n=null,s=null;switch(i.cs){case 1:n=this.fromVertex,s=this.toVertex;break;case 2:n=this.toVertex,s=this.fromVertex;break;default:u.o("Unhandled path value "+i.cs.toString())}if(n===null||s===null)return;const r=this.Pk;if(r.x===0&&r.y===0){this.sE(n,s);return}const A=n.bounds,o=i.orthoAngle(n),a=i.computeLayerSpacing(n),h=n.rowSpacing;t.updateRoute();const d=t.curve===9,f=t.isOrthogonal;let g=0,x,B;if(t.startRoute(),f||d){for(g=2;t.pointsCount>4;)t.removePoint(2);x=t.getPoint(1),B=t.getPoint(2)}else{for(g=1;t.pointsCount>3;)t.removePoint(1);x=t.getPoint(0),B=t.getPoint(t.pointsCount-1)}const C=t.getPoint(t.pointsCount-1);let F=0;o===0?(n.alignment===23?(F=A.bottom+r.y,r.y===0&&x.y>C.y+n.rowIndent&&(F=Math.min(F,Math.max(x.y,F-i.computeNodeIndent(n))))):n.alignment===22?(F=A.top+r.y,r.y===0&&x.y<C.y-n.rowIndent&&(F=Math.max(F,Math.min(x.y,F+i.computeNodeIndent(n))))):F=A.y+A.height/2+r.y,d?(t.insertPointAt(g,x.x,F),g++,t.insertPointAt(g,A.right+a,F),g++,t.insertPointAt(g,A.right+a+(r.x-h)/3,F),g++,t.insertPointAt(g,A.right+a+(r.x-h)*2/3,F),g++,t.insertPointAt(g,A.right+a+(r.x-h),F),g++,t.insertPointAt(g,B.x,F),g++):(f&&(t.insertPointAt(g,A.right+a/2,x.y),g++),t.insertPointAt(g,A.right+a/2,F),g++,t.insertPointAt(g,A.right+a+r.x-(f?h/2:h),F),g++,f&&(t.insertPointAt(g,t.getPoint(g-1).x,B.y),g++))):o===90?(n.alignment===23?(F=A.right+r.x,r.x===0&&x.x>C.x+n.rowIndent&&(F=Math.min(F,Math.max(x.x,F-i.computeNodeIndent(n))))):n.alignment===22?(F=A.left+r.x,r.x===0&&x.x<C.x-n.rowIndent&&(F=Math.max(F,Math.min(x.x,F+i.computeNodeIndent(n))))):F=A.x+A.width/2+r.x,d?(t.insertPointAt(g,F,x.y),g++,t.insertPointAt(g,F,A.bottom+a),g++,t.insertPointAt(g,F,A.bottom+a+(r.y-h)/3),g++,t.insertPointAt(g,F,A.bottom+a+(r.y-h)*2/3),g++,t.insertPointAt(g,F,A.bottom+a+(r.y-h)),g++,t.insertPointAt(g,F,B.y),g++):(f&&(t.insertPointAt(g,x.x,A.bottom+a/2),g++),t.insertPointAt(g,F,A.bottom+a/2),g++,t.insertPointAt(g,F,A.bottom+a+r.y-(f?h/2:h)),g++,f&&(t.insertPointAt(g,B.x,t.getPoint(g-1).y),g++))):o===180?(n.alignment===23?(F=A.bottom+r.y,r.y===0&&x.y>C.y+n.rowIndent&&(F=Math.min(F,Math.max(x.y,F-i.computeNodeIndent(n))))):n.alignment===22?(F=A.top+r.y,r.y===0&&x.y<C.y-n.rowIndent&&(F=Math.max(F,Math.min(x.y,F+i.computeNodeIndent(n))))):F=A.y+A.height/2+r.y,d?(t.insertPointAt(g,x.x,F),g++,t.insertPointAt(g,A.left-a,F),g++,t.insertPointAt(g,A.left-a+(r.x+h)/3,F),g++,t.insertPointAt(g,A.left-a+(r.x+h)*2/3,F),g++,t.insertPointAt(g,A.left-a+(r.x+h),F),g++,t.insertPointAt(g,B.x,F),g++):(f&&(t.insertPointAt(g,A.left-a/2,x.y),g++),t.insertPointAt(g,A.left-a/2,F),g++,t.insertPointAt(g,A.left-a+r.x+(f?h/2:h),F),g++,f&&(t.insertPointAt(g,t.getPoint(g-1).x,B.y),g++))):o===270?(n.alignment===23?(F=A.right+r.x,r.x===0&&x.x>C.x+n.rowIndent&&(F=Math.min(F,Math.max(x.x,F-i.computeNodeIndent(n))))):n.alignment===22?(F=A.left+r.x,r.x===0&&x.x<C.x-n.rowIndent&&(F=Math.max(F,Math.min(x.x,F+i.computeNodeIndent(n))))):F=A.x+A.width/2+r.x,d?(t.insertPointAt(g,F,x.y),g++,t.insertPointAt(g,F,A.top-a),g++,t.insertPointAt(g,F,A.top-a+(r.y+h)/3),g++,t.insertPointAt(g,F,A.top-a+(r.y+h)*2/3),g++,t.insertPointAt(g,F,A.top-a+(r.y+h)),g++,t.insertPointAt(g,F,B.y),g++):(f&&(t.insertPointAt(g,x.x,A.top-a/2),g++),t.insertPointAt(g,F,A.top-a/2),g++,t.insertPointAt(g,F,A.top-a+r.y+(f?h/2:h)),g++,f&&(t.insertPointAt(g,B.x,t.getPoint(g-1).y),g++))):u.o("Invalid angle "+o),t.commitRoute()}sE(t,i){const n=this.link,s=this.network.layout,r=s.orthoAngle(t),A=s.orthoAngle(i);if(r===A)return;const o=s.computeLayerSpacing(t),a=t.bounds,h=i.bounds;if(r===0&&h.left-a.right<o+1||r===90&&h.top-a.bottom<o+1||r===180&&a.left-h.right<o+1||r===270&&a.top-h.bottom<o+1)return;n.updateRoute();const d=n.curve===9,f=n.isOrthogonal,g=this.fromVertex,x=s.isBusAlignment(g.alignment);if(n.startRoute(),r===0){const B=a.right+o/2;if(d){if(n.pointsCount===4){const C=n.getPoint(3).y;n.setPointAt(1,B-20,n.getPoint(1).y),n.insertPointAt(2,B-20,C),n.insertPointAt(3,B,C),n.insertPointAt(4,B+20,C),n.setPointAt(5,n.getPoint(5).x,C)}}else f?x?n.setPointAt(3,n.getPoint(2).x,n.getPoint(4).y):n.pointsCount===6&&(n.setPointAt(2,B,n.getPoint(2).y),n.setPointAt(3,B,n.getPoint(3).y)):n.pointsCount===4?n.insertPointAt(2,B,n.getPoint(2).y):n.pointsCount===3?n.setPointAt(1,B,n.getPoint(2).y):n.pointsCount===2&&n.insertPointAt(1,B,n.getPoint(1).y)}else if(r===90){const B=a.bottom+o/2;if(d){if(n.pointsCount===4){const C=n.getPoint(3).x;n.setPointAt(1,n.getPoint(1).x,B-20),n.insertPointAt(2,C,B-20),n.insertPointAt(3,C,B),n.insertPointAt(4,C,B+20),n.setPointAt(5,C,n.getPoint(5).y)}}else f?x?n.setPointAt(3,n.getPoint(2).x,n.getPoint(4).y):n.pointsCount===6&&(n.setPointAt(2,n.getPoint(2).x,B),n.setPointAt(3,n.getPoint(3).x,B)):n.pointsCount===4?n.insertPointAt(2,n.getPoint(2).x,B):n.pointsCount===3?n.setPointAt(1,n.getPoint(2).x,B):n.pointsCount===2&&n.insertPointAt(1,n.getPoint(1).x,B)}else if(r===180){const B=a.left-o/2;if(d){if(n.pointsCount===4){const C=n.getPoint(3).y;n.setPointAt(1,B+20,n.getPoint(1).y),n.insertPointAt(2,B+20,C),n.insertPointAt(3,B,C),n.insertPointAt(4,B-20,C),n.setPointAt(5,n.getPoint(5).x,C)}}else f?x?n.setPointAt(3,n.getPoint(2).x,n.getPoint(4).y):n.pointsCount===6&&(n.setPointAt(2,B,n.getPoint(2).y),n.setPointAt(3,B,n.getPoint(3).y)):n.pointsCount===4?n.insertPointAt(2,B,n.getPoint(2).y):n.pointsCount===3?n.setPointAt(1,B,n.getPoint(2).y):n.pointsCount===2&&n.insertPointAt(1,B,n.getPoint(1).y)}else if(r===270){const B=a.top-o/2;if(d){if(n.pointsCount===4){const C=n.getPoint(3).x;n.setPointAt(1,n.getPoint(1).x,B+20),n.insertPointAt(2,C,B+20),n.insertPointAt(3,C,B),n.insertPointAt(4,C,B-20),n.setPointAt(5,C,n.getPoint(5).y)}}else f?x?n.setPointAt(3,n.getPoint(2).x,n.getPoint(4).y):n.pointsCount===6&&(n.setPointAt(2,n.getPoint(2).x,B),n.setPointAt(3,n.getPoint(3).x,B)):n.pointsCount===4?n.insertPointAt(2,n.getPoint(2).x,B):n.pointsCount===3?n.setPointAt(1,n.getPoint(2).x,B):n.pointsCount===2&&n.insertPointAt(1,n.getPoint(1).x,B)}n.commitRoute()}get fromVertex(){return this.Je}set fromVertex(t){this.Je!==t&&(this.Je=t)}get toVertex(){return this.$e}set toVertex(t){this.$e!==t&&(this.$e=t)}get relativePoint(){return this.Pk}set relativePoint(t){this.Pk.set(t)}}class mn{constructor(){}}p(mn,"Light",{colors:{text:"#0a0a0a",comment:"#ca8a04",link:"#0a0a0a",group:"#a3a3a344",outline:"#a3a3a3",selection:"#0ea5e9",div:"#fff",gridMinor:"#e5e5e5",gridMajor:"#a3a3a3",overviewBox:"#c026d3",tempLink:"#2563eb",tempPort:"#c026d3",adornmentFill:"#0ea5e9",adornmentStroke:"#1e40af",dragSelect:"#c026d3"},fonts:{normal:"10pt sans-serif",bold:"bold 12pt sans-serif"},numbers:{group:1,selection:3},margins:{group:new Rt(5)},arrowheads:{toArrow:"Standard"}}),p(mn,"Dark",{colors:{text:"#f5f5f5",comment:"#facc15",link:"#f5f5f5",group:"#a3a3a388",outline:"#a3a3a3",selection:"#38bdf8",div:"#171717",gridMinor:"#262626",gridMajor:"#404040",overviewBox:"#e879f9",tempLink:"#60a5fa",tempPort:"#e879f9",adornmentFill:"#38bdf8",adornmentStroke:"#2563eb",dragSelect:"#e879f9"},fonts:{normal:"10pt sans-serif",bold:"bold 12pt sans-serif"},numbers:{group:1,selection:3},margins:{group:new Rt(5)},arrowheads:{toArrow:"Standard"}});const br=class br{constructor(e){p(this,"ss",new Set);p(this,"ou",new xt);p(this,"Sk","light");p(this,"Mk","light");p(this,"Nk",!1);p(this,"Rg","light");p(this,"VD",e=>{const t=e.matches?"dark":"light";t!==this.Rg&&(this.Rg=t,this.Mk==="system"&&this.aw())});e&&Object.assign(this,e),e!=null&&e.themeMap||(this.ou.set("light",{colors:{...mn.Light.colors},fonts:{...mn.Light.fonts},numbers:{...mn.Light.numbers},margins:{...mn.Light.margins},arrowheads:{...mn.Light.arrowheads}}),this.ou.set("dark",{colors:{...mn.Dark.colors},fonts:{...mn.Dark.fonts},numbers:{...mn.Dark.numbers},margins:{...mn.Dark.margins},arrowheads:{...mn.Dark.arrowheads}})),y.matchMedia&&(this.Rg=y.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}get themeMap(){return this.ou}set themeMap(e){this.ou!==e&&(this.ou=e,this.aw())}get defaultTheme(){return this.Sk}set defaultTheme(e){this.Sk!==e&&(u.s(e,"string",br,"defaultTheme"),this.Sk=e,this.aw())}get currentTheme(){return this.Mk}set currentTheme(e){this.Mk!==e&&(u.s(e,"string",br,"currentTheme"),this.Mk=e,this.aw())}get changesDivBackground(){return this.Nk}set changesDivBackground(e){if(this.Nk!==e&&(this.Nk=e,e))for(const t of this.ss)t.setDivBackground(this.findValue("div","","fill")),t.O("ThemeChanged",this)}get preferredColorScheme(){return this.Rg}addDiagram(e){return this.ss.add(e),this.eC(e),this}removeDiagram(e){return this.ss.delete(e),this.eC(e),this}iR(){var e;this.ss.size===0&&y.matchMedia&&((e=y.matchMedia("(prefers-color-scheme: dark)"))==null||e.addEventListener("change",this.VD))}eR(){var e;this.ss.size===0&&y.matchMedia&&((e=y.matchMedia("(prefers-color-scheme: dark)"))==null||e.removeEventListener("change",this.VD))}set(e,t){e===""&&(e=this.Sk),e==="system"&&(e=this.Rg);let i=this.ou.get(e);return i?i=this.zD(i,t):i=t,this.ou.set(e,i),this.aw(),this}findValue(e,t,i){return this.getValue(this.findTheme(this.currentTheme),e,t,i)||this.getValue(this.findTheme(this.defaultTheme),e,t,i)}getValue(e,t,i,n){var o;if(!e)return;i==null&&(i="");let s=e;const r=a=>{if(s===void 0||a==="")return;if(typeof a=="number"||!(Array.isArray(a)||a.includes(".")))return s[a];const h=Array.isArray(a)?a:a.split(".");for(let d=0;d<h.length;d++){const f=h[d];if(f!==""&&(s=s[f],s===void 0))return}return s},A=()=>{if(!(i!==""&&(s=r(i),s===void 0)))return Array.isArray(s)&&typeof t=="number"?s=s[t%s.length]:s=r(t),s};if(s=A(),s===void 0&&typeof n=="string"&&n.length>0){let a=(o=e.targetPropertyMap)==null?void 0:o.get(n);if(a?s=e[a]:(a=br.nE.get(n),s=a?e[a]:e.colors),s=A(),s!==void 0)return s}return s}findTheme(e){return this.themeMap.get(e==="system"?this.Rg:e)}eC(e){const t=e.skipsUndoManager;e.skipsUndoManager=!0,e.updateAllThemeBindings(),this.Nk&&e.setDivBackground(this.findValue("div","","fill")),e.skipsUndoManager=t,e.O("ThemeChanged",this)}aw(){for(const e of this.ss)this.eC(e)}zD(e,t){for(const i in t)if(u.cw(t,i))try{t[i].constructor===Object?e[i]=this.zD(e[i]??{},t[i]):e[i]=t[i]}catch{delete e[i]}return e}};p(br,"nE",new Map([["background","colors"],["defaultColumnSeparatorStroke","colors"],["defaultRowSeparatorStroke","colors"],["shadowColor","colors"],["fill","colors"],["stroke","colors"],["font","fonts"],["angle","numbers"],["fromEndSegmentLength","numbers"],["fromShortLength","numbers"],["height","numbers"],["opacity","numbers"],["scale","numbers"],["toEndSegmentLength","numbers"],["toShortLength","numbers"],["width","numbers"],["defaultColumnSeparatorStrokeWidth","numbers"],["defaultRowSeparatorStrokeWidth","numbers"],["shadowBlur","numbers"],["corner","numbers"],["curviness","numbers"],["smoothness","numbers"],["parameter1","numbers"],["parameter2","numbers"],["strokeWidth","numbers"],["strokeDashOffset","numbers"],["maxLines","numbers"],["spacingAbove","numbers"],["spacingBelow","numbers"],["position","points"],["shadowOffset","points"],["desiredSize","sizes"],["maxSize","sizes"],["minSize","sizes"],["margin","margins"],["defaultSeparatorPadding","margins"],["padding","margins"],["alignment","spots"],["alignmentFocus","spots"],["fromSpot","spots"],["toSpot","spots"],["defaultAlignment","spots"],["spot1","spots"],["spot2","spots"],["verticalAlignment","spots"],["imageAlignment","spots"],["fromArrow","arrowheads"],["toArrow","arrowheads"]]));let Fr=br;class za{constructor(){p(this,"Ct");p(this,"k");p(this,"Bi");p(this,"wl");this.k=ge.mm(),this.Ct="",this.Bi=!0,this.wl=!0}get name(){return this.Ct}set name(e){this.Ct=e}get isEnabled(){return this.Bi}set isEnabled(e){this.Bi=e}get isRealtime(){return this.wl}set isRealtime(e){this.wl=e}get diagram(){return this.k}set diagram(e){this.k!==e&&(this.k=e,e.Ll=!0,e.requestUpdate())}invalidateRouter(){this.k!==null&&(this.k.Ll=!0,this.k.requestUpdate())}canRoute(e){if(!this.isEnabled)return!1;const t=this.diagram;return!(t&&(!this.isRealtime&&t.wu||t.animationManager.isTicking))}routeLinks(e,t){}toString(){return this.name!==""?this.name+" Router":u.Vn(this.constructor)}}class Lh extends za{constructor(e){super(),this.name="AvoidsNodes",e&&Object.assign(this,e)}canRoute(e){return(e instanceof ge?e.Ym:e.diagram.Ym)?super.canRoute(e):!1}routeLinks(e,t){const i=t instanceof ge?null:t,n=e.iterator,s=this.diagram.getPositions(!0,i,null);for(;n.next();){const r=n.value;if(!r.isAvoiding||r.containingGroup!==i||r.toNode===null||r.fromNode===null||r.pointsCount<4)continue;r.startRoute();const A=r.pointsCount,o=r.getPoint(1),a=r.getPoint(A-2),h=r.fromNode.actualBounds.copy();h.inflate(Xt.za,Xt.za),h.unionPoint(r.getPoint(0));const d=r.toNode.actualBounds.copy();d.inflate(Xt.za,Xt.za),d.unionPoint(r.getPoint(A-1)),this.oE(r,h,d,s)&&this.rE(r,o,r.oN,a,r.rN,h,d,s),r.commitRoute()}}oE(e,t,i,n){const s=e.diagram,r=e.pointsCount;if(s===null||e.fromNode===e.toNode||e.layer.isTemporary||t.containsPoint(e.getPoint(r-1))&&!e.toNode.isMemberOf(e.fromNode)||i.containsPoint(e.getPoint(0))&&!e.fromNode.isMemberOf(e.toNode)||!e.isOrthogonal)return!1;if(e.segmentIndex===17)return!0;const A=e.getPoint(1),o=e.getPoint(r-2),a=e.getPoint(2);if(!n.isUnoccupied(Math.min(A.x,a.x),Math.min(A.y,a.y),Math.abs(A.x-a.x),Math.abs(A.y-a.y)))return!0;for(let d=2;d<r-3;d++){const f=e.getPoint(d),g=e.getPoint(d+1);if(!n.isUnoccupied(Math.min(f.x,g.x),Math.min(f.y,g.y),Math.abs(f.x-g.x),Math.abs(f.y-g.y)))return!0}const h=e.getPoint(r-3);return!n.isUnoccupied(Math.min(h.x,o.x),Math.min(h.y,o.y),Math.abs(h.x-o.x),Math.abs(h.y-o.y))}rE(e,t,i,n,s,r,A,o){const a=e.diagram,h=t,d=n;let f=null,g=null;if(a.isVirtualized){const C=o.bounds.copy(),F=e.getPoint(2),b=e.getPoint(e.pointsCount-3);C.inflate(-o.cellWidth,-o.cellHeight);const L=T.l();o.Bd(t.x,t.y)||(V.Pl(C.x,C.y,C.x+C.width,C.y+C.height,t.x,t.y,F.x,F.y,L)?(f=t=L.copy(),i=L.directionPoint(F)):V.Pl(C.x,C.y,C.x+C.width,C.y+C.height,F.x,F.y,b.x,b.y,L)?(f=t=L.copy(),i=L.directionPoint(b)):V.Pl(C.x,C.y,C.x+C.width,C.y+C.height,b.x,b.y,n.x,n.y,L)&&(f=t=L.copy(),i=L.directionPoint(n))),o.Bd(n.x,n.y)||(V.Pl(C.x,C.y,C.x+C.width,C.y+C.height,n.x,n.y,b.x,b.y,L)?(g=n=L.copy(),s=b.directionPoint(L)):V.Pl(C.x,C.y,C.x+C.width,C.y+C.height,b.x,b.y,F.x,F.y,L)?(g=n=L.copy(),s=F.directionPoint(L)):V.Pl(C.x,C.y,C.x+C.width,C.y+C.height,F.x,F.y,t.x,t.y,L)&&(g=n=L.copy(),s=t.directionPoint(L))),T.e(L)}const x=r.copy().unionRect(A);x.inflate(o.cellWidth*o.qc,o.cellHeight*o.qc),o.xT(t,i,n,s,x,!0);let B=o.po(n.x,n.y);if(!o.xy&&B>=Mn.Ed&&(o.tA(),x.inflate(o.cellWidth*o.BM,o.cellHeight*o.UM),o.xT(t,i,n,s,x,!1),B=o.po(n.x,n.y)),!o.xy&&B<Mn.Ed&&!o.MO(n.x,n.y)){e.points.removeRange(2,e.pointsCount-3),this.sC(e,o,n.x,n.y,s,!0);const C=0,F=90,b=180,L=270,Q=e.getPoint(2);if(e.pointsCount<4)i===C||i===b?(Q.x=t.x,Q.y=n.y):(Q.x=n.x,Q.y=t.y),e.setPointAt(2,Q.x,Q.y),e.insertPointAt(3,Q.x,Q.y);else{const M=e.getPoint(3);if(i===C||i===b)if(V.u(Q.x,M.x)){const O=i===C?Math.max(Q.x,t.x):Math.min(Q.x,t.x);e.setPointAt(2,O,t.y),e.setPointAt(3,O,M.y)}else V.u(Q.y,M.y)?(Math.abs(t.y-Q.y)<=o.cellHeight/2&&(e.setPointAt(2,Q.x,t.y),e.setPointAt(3,M.x,t.y)),e.insertPointAt(2,Q.x,t.y)):e.setPointAt(2,t.x,Q.y);else if(i===F||i===L)if(V.u(Q.y,M.y)){const O=i===F?Math.max(Q.y,t.y):Math.min(Q.y,t.y);e.setPointAt(2,t.x,O),e.setPointAt(3,M.x,O)}else V.u(Q.x,M.x)?(Math.abs(t.x-Q.x)<=o.cellWidth/2&&(e.setPointAt(2,t.x,Q.y),e.setPointAt(3,t.x,M.y)),e.insertPointAt(2,t.x,Q.y)):e.setPointAt(2,Q.x,t.y)}if(f!==null){const M=e.getPoint(1),O=e.getPoint(2);M.x!==O.x&&M.y!==O.y?i===C||i===b?e.insertPointAt(2,M.x,O.y):e.insertPointAt(2,O.x,M.y):i===C||i===b?e.insertPointAt(2,h.x,f.y):e.insertPointAt(2,f.x,h.y)}g!==null&&(s===C||s===b?e.insertPointAt(e.pointsCount-2,d.x,g.y):e.insertPointAt(e.pointsCount-2,g.x,d.y))}}sC(e,t,i,n,s,r){const A=t.cellWidth,o=t.cellHeight;let a=t.po(i,n),h=i,d=n,f=h,g=d;for(s===0?f+=A:s===90?g+=o:s===180?f-=A:g-=o,e.aN&&a>Mn.Ga&&t.po(f,g)!==a-1&&(t.po(h-A,d)===a-1?(s=180,f=h-A,g=d):t.po(h+A,d)===a-1?(s=0,f=h+A,g=d):t.po(h,d-o)===a-1?(s=270,f=h,g=d-o):t.po(h,d+o)===a-1&&(s=90,f=h,g=d+o));a>Mn.Ga&&t.po(f,g)===a-1;)h=f,d=g,s===0?f+=A:s===90?g+=o:s===180?f-=A:g-=o,a-=1;if(r?a>Mn.Ga&&(s===180||s===0?h=Math.floor(h/A)*A+A/2:(s===90||s===270)&&(d=Math.floor(d/o)*o+o/2)):(h=Math.floor(h/A)*A+A/2,d=Math.floor(d/o)*o+o/2),a>Mn.Ga){let x=s,B=h,C=d;if(s===0?(x=90,C+=o):s===90?(x=180,B-=A):s===180?(x=270,C-=o):s===270&&(x=0,B+=A),t.po(B,C)===a-1)this.sC(e,t,B,C,x,!1);else{let F=h,b=d;s===0?(x=270,b-=o):s===90?(x=0,F+=A):s===180?(x=90,b+=o):s===270&&(x=180,F-=A),t.po(F,b)===a-1&&this.sC(e,t,F,b,x,!1)}}e.insertPointAt(e.pointsCount-2,h,d)}}ue.prototype.initializeStandardTools=function(){this.Zt("Action",new FA,this.mouseDownTools),this.Zt("Relinking",new Ge,this.mouseDownTools),this.Zt("LinkReshaping",new Li,this.mouseDownTools),this.Zt("Rotating",new xo,this.mouseDownTools),this.Zt("Resizing",new Wr,this.mouseDownTools),this.Zt("Linking",new Te,this.mouseMoveTools),this.Zt("Dragging",new ye,this.mouseMoveTools),this.Zt("DragSelecting",new Co,this.mouseMoveTools),this.Zt("Panning",new SA,this.mouseMoveTools),this.Zt("ContextMenu",new Ms,this.mouseUpTools),this.Zt("TextEditing",new Zr,this.mouseUpTools),this.Zt("ClickCreating",new qr,this.mouseUpTools),this.Zt("ClickSelecting",new Jr,this.mouseUpTools)},ge.yM("GraphLinksModel",_r),ge.yM("TreeModel",yr);const zA=y.go,AA={get version(){return ge.version},Group:Vt,List:H,Set:X,Map:xt,Point:T,Size:ct,Rect:it,Margin:Rt,Spot:q,Geometry:Jt,PathFigure:ve,PathSegment:Nt,InputEvent:Le,DiagramEvent:pi,ChangedEvent:ke,Model:hi,GraphLinksModel:ys,TreeModel:Es,Binding:ms,ThemeBinding:wr,Transaction:jt,UndoManager:Ae,CommandHandler:sn,Tool:Gt,DraggingTool:ye,DraggingInfo:ds,DraggingOptions:lr,LinkingBaseTool:be,LinkingTool:Te,RelinkingTool:Ge,LinkReshapingTool:Li,ResizingTool:Wr,RotatingTool:xo,ClickSelectingTool:Jr,ActionTool:FA,ClickCreatingTool:qr,HTMLInfo:us,ContextMenuTool:Ms,DragSelectingTool:Co,PanningTool:SA,TextEditingTool:Zr,ToolManager:ue,Animation:Ps,AnimationManager:Vs,AnimationTrigger:cs,Layer:ki,Diagram:ge,Palette:hr,Overview:fs,Brush:Qe,GraphObject:Ye,Panel:Kt,RowColumnDefinition:je,Shape:Zt,TextBlock:We,Picture:pn,Part:Ce,Adornment:se,Node:Et,Link:Xt,Placeholder:Fi,Layout:Ni,LayoutNetwork:ps,LayoutVertex:Qn,LayoutEdge:pr,GridLayout:OA,PanelLayout:xe,CircularLayout:Ri,CircularNetwork:iA,CircularVertex:Oo,CircularEdge:rn,ForceDirectedLayout:xr,ForceDirectedNetwork:RA,ForceDirectedVertex:Cr,ForceDirectedEdge:Ha,LayeredDigraphLayout:ui,LayeredDigraphNetwork:GA,LayeredDigraphVertex:sA,LayeredDigraphEdge:Va,TreeLayout:_e,TreeNetwork:rA,TreeVertex:Un,TreeEdge:Xa,Themes:mn,ThemeManager:Fr,Router:za,AnimationStyle:Fo,AutoScale:bo,CycleMode:ko,Flip:Uo,TextFormat:Eo,ImageStretch:gr,LayoutConditions:LA,LinkAdjusting:$r,Curve:TA,Routing:EA,Orientation:PA,TextOverflow:Oa,PortSpreading:Je,ScrollMode:Mo,CollapsePolicy:Qa,Sizing:dr,TriggerStart:So,Stretch:MA,ViewboxStretch:UA,Wrap:No,BrushType:Zn,ColorSpace:QA,GeometryStretch:fe,GeometryType:me,SegmentType:$e,BindingMode:Ys,ChangeType:Ve,CircularArrangement:HA,CircularDirection:_n,CircularNodeDiameterFormula:Br,CircularSorting:tA,GridAlignment:DA,GridArrangement:mr,GridSorting:IA,LayeredDigraphAggressive:VA,LayeredDigraphAlign:Ka,LayeredDigraphCycleRemove:nA,LayeredDigraphInit:vr,LayeredDigraphLayering:js,LayeredDigraphPack:Ra,TreeAlignment:Ko,TreeArrangement:Go,TreeCompaction:XA,TreeLayerStyle:Ga,TreePath:Ho,TreeSorting:Ro,TreeStyle:Vo,GestureMode:kt,LinkingDirection:Pe,ReshapingBehavior:Ai,TextEditingAccept:Ks,TextEditingStarting:bA,TextEditingState:vo,WheelMode:at};for(const k in AA){const e=AA[k];u.lt(e)&&e!==Eo&&(e.className=k)}u.j(zA)&&zA.version&&u.ri("WARNING: a `go` object on the root object is already defined.  "+("Debug"in zA?"debug ":"")+"version: "+zA.version+", replaced with version: "+AA.version),ge.prototype.go=AA,y.go=AA})();const yt=typeof global<"u"?global.go:self.go;yt.Group;yt.List;yt.Set;yt.Map;const va=yt.Point,Jm=yt.Size;yt.Rect;const qm=yt.Margin,yo=yt.Spot,Dc=yt.Geometry,Ic=yt.PathFigure,Rr=yt.PathSegment;yt.InputEvent;yt.DiagramEvent;yt.ChangedEvent;yt.Model;const Oc=yt.GraphLinksModel;yt.TreeModel;const Zm=yt.Binding;yt.ThemeBinding;yt.Transaction;yt.UndoManager;yt.CommandHandler;yt.Tool;yt.DraggingTool;yt.DraggingInfo;yt.DraggingOptions;yt.LinkingBaseTool;yt.LinkingTool;yt.RelinkingTool;yt.LinkReshapingTool;yt.ResizingTool;yt.RotatingTool;yt.ClickSelectingTool;yt.ActionTool;yt.ClickCreatingTool;yt.HTMLInfo;yt.ContextMenuTool;yt.DragSelectingTool;yt.PanningTool;yt.TextEditingTool;yt.ToolManager;yt.Animation;yt.AnimationManager;yt.AnimationTrigger;yt.Layer;const mh=yt.Diagram,$m=yt.Palette,_m=yt.Overview;yt.Brush;yt.GraphObject;yt.Panel;yt.RowColumnDefinition;const t0=yt.Shape;yt.TextBlock;const e0=yt.Picture,Hc=yt.Part;yt.Adornment;yt.Node;yt.Link;yt.Placeholder;yt.Layout;yt.LayoutNetwork;yt.LayoutVertex;yt.LayoutEdge;yt.GridLayout;yt.PanelLayout;yt.CircularLayout;yt.CircularNetwork;yt.CircularVertex;yt.CircularEdge;yt.ForceDirectedLayout;yt.ForceDirectedNetwork;yt.ForceDirectedVertex;yt.ForceDirectedEdge;yt.LayeredDigraphLayout;yt.LayeredDigraphNetwork;yt.LayeredDigraphVertex;yt.LayeredDigraphEdge;yt.TreeLayout;yt.TreeNetwork;yt.TreeVertex;yt.TreeEdge;yt.Themes;yt.ThemeManager;yt.Router;yt.version;yt.AnimationStyle;yt.AutoScale;yt.Curve;yt.CycleMode;yt.Flip;yt.ImageStretch;yt.LayoutConditions;yt.LinkAdjusting;yt.Orientation;yt.PortSpreading;yt.Routing;yt.ScrollMode;yt.CollapsePolicy;yt.Sizing;yt.TriggerStart;const i0=yt.Stretch;yt.TextFormat;yt.TextOverflow;yt.ViewboxStretch;yt.Wrap;yt.BrushType;yt.ColorSpace;yt.GeometryStretch;yt.GeometryType;const Kr=yt.SegmentType;yt.BindingMode;yt.ChangeType;yt.CircularArrangement;yt.CircularDirection;yt.CircularNodeDiameterFormula;yt.CircularSorting;yt.GridAlignment;yt.GridArrangement;yt.GridSorting;yt.LayeredDigraphAggressive;yt.LayeredDigraphAlign;yt.LayeredDigraphCycleRemove;yt.LayeredDigraphInit;yt.LayeredDigraphLayering;yt.LayeredDigraphPack;yt.TreeAlignment;yt.TreeArrangement;yt.TreeCompaction;yt.TreeLayerStyle;yt.TreePath;yt.TreeSorting;yt.TreeStyle;yt.GestureMode;yt.LinkingDirection;yt.ReshapingBehavior;yt.TextEditingAccept;yt.TextEditingStarting;yt.TextEditingState;yt.WheelMode;/*! Copyright (C) 1998-2023 by Northwoods Software Corporation. All Rights Reserved. */var n0=function(y){Tc(u,y);function u(w){var v=y.call(this,w)||this;return v.wasCleared=!1,v.modelChangedListener=null,v.divRef=vi.createRef(),v}return u.prototype.getDiagram=function(){return this.divRef.current===null?null:mh.fromDiv(this.divRef.current)},u.prototype.clear=function(){var w=this.getDiagram();w!==null&&(w.clear(),this.wasCleared=!0)},u.prototype.componentDidMount=function(){var w=this;if(this.divRef.current!==null){var v=this.props.initDiagram();v.div=this.divRef.current,this.modelChangedListener=function(P){if(P.isTransactionFinished&&P.model&&!P.model.isReadOnly&&w.props.onModelChange){var N=P.model.toIncrementalData(P);N!==null&&w.props.onModelChange(N)}},v.addModelChangedListener(this.modelChangedListener),v.delayInitialization(function(){w.mergeData(v,!0)})}},u.prototype.componentWillUnmount=function(){var w=this.getDiagram();w!==null&&(w.div=null,this.modelChangedListener!==null&&(w.removeModelChangedListener(this.modelChangedListener),this.modelChangedListener=null))},u.prototype.shouldComponentUpdate=function(w,v){return w.divClassName!==this.props.divClassName||w.style!==this.props.style?!0:!(w.skipsDiagramUpdate||w.nodeDataArray===this.props.nodeDataArray&&w.linkDataArray===this.props.linkDataArray&&w.modelData===this.props.modelData)},u.prototype.componentDidUpdate=function(w,v){var P=this;if(!(w.nodeDataArray===this.props.nodeDataArray&&w.linkDataArray===this.props.linkDataArray&&w.modelData===this.props.modelData)){var N=this.getDiagram();N!==null&&(this.wasCleared?N.delayInitialization(function(){P.mergeData(N,!0),P.wasCleared=!1}):this.mergeData(N,!1))}},u.prototype.mergeData=function(w,v){var P=this,N=w.model;N.commit(function(I){P.props.modelData!==void 0&&I.assignAllDataProperties(I.modelData,P.props.modelData),I.mergeNodeDataArray(P.props.nodeDataArray),P.props.linkDataArray!==void 0&&I instanceof Oc&&I.mergeLinkDataArray(P.props.linkDataArray)},v?"initial merge":"merge data")},u.prototype.render=function(){return vi.createElement("div",{ref:this.divRef,className:this.props.divClassName,style:this.props.style})},u}(vi.Component);(function(y){Tc(u,y);function u(w){var v=y.call(this,w)||this;return v.divRef=vi.createRef(),v}return u.prototype.getOverview=function(){return this.divRef.current===null?null:mh.fromDiv(this.divRef.current)},u.prototype.componentDidMount=function(){if(this.divRef.current!==null){var w;this.props.initOverview!==void 0?w=this.props.initOverview():(w=new _m,w.contentAlignment=yo.Center),w.div=this.divRef.current,w.observed=this.props.observedDiagram}},u.prototype.componentWillUnmount=function(){var w=this.getOverview();w!==null&&(w.div=null,w.observed=null)},u.prototype.shouldComponentUpdate=function(w,v){return w.divClassName!==this.props.divClassName||w.style!==this.props.style?!0:w.observedDiagram!==this.props.observedDiagram},u.prototype.componentDidUpdate=function(w,v){if(w.observedDiagram!==this.props.observedDiagram){var P=this.getOverview();P!==null&&(P.observed=this.props.observedDiagram)}},u.prototype.render=function(){return vi.createElement("div",{ref:this.divRef,className:this.props.divClassName,style:this.props.style})},u})(vi.Component);var s0=function(y){Tc(u,y);function u(w){var v=y.call(this,w)||this;return v.wasCleared=!1,v.divRef=vi.createRef(),v}return u.prototype.getPalette=function(){return this.divRef.current===null?null:mh.fromDiv(this.divRef.current)},u.prototype.clear=function(){var w=this.getPalette();w!==null&&(w.clear(),this.wasCleared=!0)},u.prototype.componentDidMount=function(){var w=this;if(this.divRef.current!==null){var v=this.props.initPalette();v.div=this.divRef.current,v.delayInitialization(function(){w.mergeData(v,!0)})}},u.prototype.componentWillUnmount=function(){var w=this.getPalette();w!==null&&(w.div=null)},u.prototype.shouldComponentUpdate=function(w,v){return w.divClassName!==this.props.divClassName||w.style!==this.props.style?!0:!(w.nodeDataArray===this.props.nodeDataArray&&w.linkDataArray===this.props.linkDataArray&&w.modelData===this.props.modelData)},u.prototype.componentDidUpdate=function(w,v){var P=this;if(!(w.nodeDataArray===this.props.nodeDataArray&&w.linkDataArray===this.props.linkDataArray&&w.modelData===this.props.modelData)){var N=this.getPalette();N!==null&&(this.wasCleared?N.delayInitialization(function(){P.mergeData(N,!0),P.wasCleared=!1}):this.mergeData(N,!1))}},u.prototype.mergeData=function(w,v){var P=this,N=w.model;N.commit(function(I){P.props.modelData!==void 0&&I.assignAllDataProperties(I.modelData,P.props.modelData),I.mergeNodeDataArray(P.props.nodeDataArray),P.props.linkDataArray!==void 0&&I instanceof Oc&&I.mergeLinkDataArray(P.props.linkDataArray)},v?"initial merge":"merge data")},u.prototype.render=function(){return vi.createElement("div",{ref:this.divRef,className:this.props.divClassName,style:this.props.style})},u}(vi.Component);const Hg=[];function r0(){const y=Hg.pop();return y===void 0?[]:y}function Rc(y){y.length=0,Hg.push(y)}function A0(y,u,w,v,P,N,I,j,H){H||(H=new va);const tt=y-w,X=P-I;let st=NaN,lt=NaN;if(tt===0)if(X===0)y===w&&(st=y,lt=u);else{const Lt=(N-j)/X,vt=N-Lt*P;st=y,lt=Lt*st+vt}else if(X===0){const Lt=(u-v)/tt,vt=u-Lt*y;st=P,lt=Lt*st+vt}else{const Lt=(u-v)/tt,vt=(N-j)/X,bt=u-Lt*y;st=(N-vt*P-bt)/(Lt-vt),lt=Lt*st+bt}return H.x=st,H.y=lt,H}function Rg(y){const u=[],P=Math.PI*1.5;let N=0;for(let I=0;I<y;I++)N=2*Math.PI/y*I+P,u[I]=new va(.5+.5*Math.cos(N),.5+.5*Math.sin(N));return u.push(u[0]),u}function o0(y){const u=Rg(y),w=r0(),v=Math.floor(u.length/2),P=u.length-1,N=1;for(let I=0;I<P;I++){const j=u[I],H=u[I+1],tt=u[(v+I-1)%P],X=u[(v+I+N)%P];w[I*2]=j,w[I*2+1]=A0(j.x,j.y,tt.x,tt.y,H.x,H.y,X.x,X.y,new va)}return w[w.length]=w[0],Rc(u),w}class ka extends t0{}ka.defineFigureGenerator("FivePointedStar",function(y,u,w){const v=o0(5),P=new Dc,N=new Ic(v[0].x*u,v[0].y*w,!0);P.add(N);for(let I=1;I<10;I++)N.add(new Rr(Kr.Line,v[I].x*u,v[I].y*w));return N.add(new Rr(Kr.Line,v[0].x*u,v[0].y*w).close()),Rc(v),P.spot1=new yo(.266,.333),P.spot2=new yo(.733,.733),P});ka.defineFigureGenerator("Heart",function(y,u,w){return new Dc().add(new Ic(.5*u,w,!0).add(new Rr(Kr.Bezier,0,.3*w,.1*u,.8*w,0,.5*w)).add(new Rr(Kr.Bezier,.5*u,.3*w,0,0,.45*u,0)).add(new Rr(Kr.Bezier,u,.3*w,.55*u,0,u,0)).add(new Rr(Kr.Bezier,.5*u,w,u,.5*w,.9*u,.8*w).close())).setSpots(.14,.29,.86,.78)});ka.defineFigureGenerator("Octagon",function(y,u,w){const v=Rg(8),P=new Dc,N=new Ic(v[0].x*u,v[0].y*w,!0);P.add(N);for(let I=1;I<8;I++)N.add(new Rr(Kr.Line,v[I].x*u,v[I].y*w));return N.add(new Rr(Kr.Line,v[0].x*u,v[0].y*w).close()),Rc(v),P.spot1=new yo(.15,.15),P.spot2=new yo(.85,.85),P});const Ll=(y,u)=>new Hc({}).add(new ka(y,{width:40,height:40,fill:u})),Nl=(y,u)=>new Hc({resizable:!0,reshapable:!0,desiredSize:new Jm(40,40)}).bind(new Zm("location","loc",va.parse).makeTwoWay(va.stringify)).add(new ka(y,{stretch:i0.Fill,fill:u})),a0=()=>{const y=new mh({"undoManager.isEnabled":!0,"clickCreatingTool.archetypeNodeData":{text:"new node",color:"lightblue"},"panningTool.isEnabled":!1,allowVerticalScroll:!1,allowHorizontalScroll:!1,model:new Oc({linkKeyProperty:"key"})});return y.add(new Hc().add(new e0({pickable:!1,source:"src/assets/christmas-tree.png",width:500,height:500}))),y.nodeTemplateMap.add("Circle",Nl("Circle","blue")),y.nodeTemplateMap.add("Star",Nl("FivePointedStar","yellow")),y.nodeTemplateMap.add("Heart",Nl("Heart","red")),y.nodeTemplateMap.add("Octagon",Nl("Octagon","green")),y},l0=[{key:"circle",category:"Circle"},{key:"star",category:"Star"},{key:"heart",category:"Heart"},{key:"octagon",category:"Octagon"}],h0=()=>{const y=new $m({contentAlignment:yo.Center,padding:new qm(20,20,20,20)});return y.nodeTemplateMap.add("Circle",Ll("Circle","blue")),y.nodeTemplateMap.add("Star",Ll("FivePointedStar","yellow")),y.nodeTemplateMap.add("Heart",Ll("Heart","red")),y.nodeTemplateMap.add("Octagon",Ll("Octagon","green")),y};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var uc=function(y,u){return uc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,v){w.__proto__=v}||function(w,v){for(var P in v)Object.prototype.hasOwnProperty.call(v,P)&&(w[P]=v[P])},uc(y,u)};function ks(y,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");uc(y,u);function w(){this.constructor=y}y.prototype=u===null?Object.create(u):(w.prototype=u.prototype,new w)}var cc=function(){return cc=Object.assign||function(u){for(var w,v=1,P=arguments.length;v<P;v++){w=arguments[v];for(var N in w)Object.prototype.hasOwnProperty.call(w,N)&&(u[N]=w[N])}return u},cc.apply(this,arguments)};function Sn(y,u,w,v){function P(N){return N instanceof w?N:new w(function(I){I(N)})}return new(w||(w=Promise))(function(N,I){function j(X){try{tt(v.next(X))}catch(st){I(st)}}function H(X){try{tt(v.throw(X))}catch(st){I(st)}}function tt(X){X.done?N(X.value):P(X.value).then(j,H)}tt((v=v.apply(y,[])).next())})}function cn(y,u){var w={label:0,sent:function(){if(N[0]&1)throw N[1];return N[1]},trys:[],ops:[]},v,P,N,I;return I={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(I[Symbol.iterator]=function(){return this}),I;function j(tt){return function(X){return H([tt,X])}}function H(tt){if(v)throw new TypeError("Generator is already executing.");for(;w;)try{if(v=1,P&&(N=tt[0]&2?P.return:tt[0]?P.throw||((N=P.return)&&N.call(P),0):P.next)&&!(N=N.call(P,tt[1])).done)return N;switch(P=0,N&&(tt=[tt[0]&2,N.value]),tt[0]){case 0:case 1:N=tt;break;case 4:return w.label++,{value:tt[1],done:!1};case 5:w.label++,P=tt[1],tt=[0];continue;case 7:tt=w.ops.pop(),w.trys.pop();continue;default:if(N=w.trys,!(N=N.length>0&&N[N.length-1])&&(tt[0]===6||tt[0]===2)){w=0;continue}if(tt[0]===3&&(!N||tt[1]>N[0]&&tt[1]<N[3])){w.label=tt[1];break}if(tt[0]===6&&w.label<N[1]){w.label=N[1],N=tt;break}if(N&&w.label<N[2]){w.label=N[2],w.ops.push(tt);break}N[2]&&w.ops.pop(),w.trys.pop();continue}tt=u.call(y,w)}catch(X){tt=[6,X],P=0}finally{v=N=0}if(tt[0]&5)throw tt[1];return{value:tt[0]?tt[1]:void 0,done:!0}}}function El(y,u,w){if(arguments.length===2)for(var v=0,P=u.length,N;v<P;v++)(N||!(v in u))&&(N||(N=Array.prototype.slice.call(u,0,v)),N[v]=u[v]);return y.concat(N||u)}var ar=function(){function y(u,w,v,P){this.left=u,this.top=w,this.width=v,this.height=P}return y.prototype.add=function(u,w,v,P){return new y(this.left+u,this.top+w,this.width+v,this.height+P)},y.fromClientRect=function(u,w){return new y(w.left+u.windowBounds.left,w.top+u.windowBounds.top,w.width,w.height)},y.fromDOMRectList=function(u,w){var v=Array.from(w).find(function(P){return P.width!==0});return v?new y(v.left+u.windowBounds.left,v.top+u.windowBounds.top,v.width,v.height):y.EMPTY},y.EMPTY=new y(0,0,0,0),y}(),yh=function(y,u){return ar.fromClientRect(y,u.getBoundingClientRect())},u0=function(y){var u=y.body,w=y.documentElement;if(!u||!w)throw new Error("Unable to get document size");var v=Math.max(Math.max(u.scrollWidth,w.scrollWidth),Math.max(u.offsetWidth,w.offsetWidth),Math.max(u.clientWidth,w.clientWidth)),P=Math.max(Math.max(u.scrollHeight,w.scrollHeight),Math.max(u.offsetHeight,w.offsetHeight),Math.max(u.clientHeight,w.clientHeight));return new ar(0,0,v,P)},wh=function(y){for(var u=[],w=0,v=y.length;w<v;){var P=y.charCodeAt(w++);if(P>=55296&&P<=56319&&w<v){var N=y.charCodeAt(w++);(N&64512)===56320?u.push(((P&1023)<<10)+(N&1023)+65536):(u.push(P),w--)}else u.push(P)}return u},Ui=function(){for(var y=[],u=0;u<arguments.length;u++)y[u]=arguments[u];if(String.fromCodePoint)return String.fromCodePoint.apply(String,y);var w=y.length;if(!w)return"";for(var v=[],P=-1,N="";++P<w;){var I=y[P];I<=65535?v.push(I):(I-=65536,v.push((I>>10)+55296,I%1024+56320)),(P+1===w||v.length>16384)&&(N+=String.fromCharCode.apply(String,v),v.length=0)}return N},Hf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c0=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Tl=0;Tl<Hf.length;Tl++)c0[Hf.charCodeAt(Tl)]=Tl;var Rf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ua=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Dl=0;Dl<Rf.length;Dl++)ua[Rf.charCodeAt(Dl)]=Dl;var d0=function(y){var u=y.length*.75,w=y.length,v,P=0,N,I,j,H;y[y.length-1]==="="&&(u--,y[y.length-2]==="="&&u--);var tt=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(u):new Array(u),X=Array.isArray(tt)?tt:new Uint8Array(tt);for(v=0;v<w;v+=4)N=ua[y.charCodeAt(v)],I=ua[y.charCodeAt(v+1)],j=ua[y.charCodeAt(v+2)],H=ua[y.charCodeAt(v+3)],X[P++]=N<<2|I>>4,X[P++]=(I&15)<<4|j>>2,X[P++]=(j&3)<<6|H&63;return tt},f0=function(y){for(var u=y.length,w=[],v=0;v<u;v+=2)w.push(y[v+1]<<8|y[v]);return w},g0=function(y){for(var u=y.length,w=[],v=0;v<u;v+=4)w.push(y[v+3]<<24|y[v+2]<<16|y[v+1]<<8|y[v]);return w},CA=5,Kc=11,Vu=2,p0=Kc-CA,Kg=65536>>CA,m0=1<<CA,Gu=m0-1,y0=1024>>CA,w0=Kg+y0,B0=w0,x0=32,C0=B0+x0,v0=65536>>Kc,F0=1<<p0,S0=F0-1,Kf=function(y,u,w){return y.slice?y.slice(u,w):new Uint16Array(Array.prototype.slice.call(y,u,w))},b0=function(y,u,w){return y.slice?y.slice(u,w):new Uint32Array(Array.prototype.slice.call(y,u,w))},k0=function(y,u){var w=d0(y),v=Array.isArray(w)?g0(w):new Uint32Array(w),P=Array.isArray(w)?f0(w):new Uint16Array(w),N=24,I=Kf(P,N/2,v[4]/2),j=v[5]===2?Kf(P,(N+v[4])/2):b0(v,Math.ceil((N+v[4])/4));return new M0(v[0],v[1],v[2],v[3],I,j)},M0=function(){function y(u,w,v,P,N,I){this.initialValue=u,this.errorValue=w,this.highStart=v,this.highValueIndex=P,this.index=N,this.data=I}return y.prototype.get=function(u){var w;if(u>=0){if(u<55296||u>56319&&u<=65535)return w=this.index[u>>CA],w=(w<<Vu)+(u&Gu),this.data[w];if(u<=65535)return w=this.index[Kg+(u-55296>>CA)],w=(w<<Vu)+(u&Gu),this.data[w];if(u<this.highStart)return w=C0-v0+(u>>Kc),w=this.index[w],w+=u>>CA&S0,w=this.index[w],w=(w<<Vu)+(u&Gu),this.data[w];if(u<=1114111)return this.data[this.highValueIndex]}return this.errorValue},y}(),Vf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",P0=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Il=0;Il<Vf.length;Il++)P0[Vf.charCodeAt(Il)]=Il;var Q0="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",Gf=50,U0=1,Vg=2,Gg=3,L0=4,N0=5,Xf=7,Xg=8,zf=9,Vr=10,dc=11,Yf=12,fc=13,E0=14,ca=15,gc=16,Ol=17,ra=18,T0=19,jf=20,pc=21,Aa=22,Xu=23,oo=24,qn=25,da=26,fa=27,ao=28,D0=29,wA=30,I0=31,Hl=32,Rl=33,mc=34,yc=35,wc=36,Fa=37,Bc=38,nh=39,sh=40,zu=41,zg=42,O0=43,H0=[9001,65288],Yg="!",Oe="",Kl="",xc=k0(Q0),sr=[wA,wc],Cc=[U0,Vg,Gg,N0],jg=[Vr,Xg],Wf=[fa,da],R0=Cc.concat(jg),Jf=[Bc,nh,sh,mc,yc],K0=[ca,fc],V0=function(y,u){u===void 0&&(u="strict");var w=[],v=[],P=[];return y.forEach(function(N,I){var j=xc.get(N);if(j>Gf?(P.push(!0),j-=Gf):P.push(!1),["normal","auto","loose"].indexOf(u)!==-1&&[8208,8211,12316,12448].indexOf(N)!==-1)return v.push(I),w.push(gc);if(j===L0||j===dc){if(I===0)return v.push(I),w.push(wA);var H=w[I-1];return R0.indexOf(H)===-1?(v.push(v[I-1]),w.push(H)):(v.push(I),w.push(wA))}if(v.push(I),j===I0)return w.push(u==="strict"?pc:Fa);if(j===zg||j===D0)return w.push(wA);if(j===O0)return N>=131072&&N<=196605||N>=196608&&N<=262141?w.push(Fa):w.push(wA);w.push(j)}),[v,w,P]},Yu=function(y,u,w,v){var P=v[w];if(Array.isArray(y)?y.indexOf(P)!==-1:y===P)for(var N=w;N<=v.length;){N++;var I=v[N];if(I===u)return!0;if(I!==Vr)break}if(P===Vr)for(var N=w;N>0;){N--;var j=v[N];if(Array.isArray(y)?y.indexOf(j)!==-1:y===j)for(var H=w;H<=v.length;){H++;var I=v[H];if(I===u)return!0;if(I!==Vr)break}if(j!==Vr)break}return!1},qf=function(y,u){for(var w=y;w>=0;){var v=u[w];if(v===Vr)w--;else return v}return 0},G0=function(y,u,w,v,P){if(w[v]===0)return Oe;var N=v-1;if(Array.isArray(P)&&P[N]===!0)return Oe;var I=N-1,j=N+1,H=u[N],tt=I>=0?u[I]:0,X=u[j];if(H===Vg&&X===Gg)return Oe;if(Cc.indexOf(H)!==-1)return Yg;if(Cc.indexOf(X)!==-1||jg.indexOf(X)!==-1)return Oe;if(qf(N,u)===Xg)return Kl;if(xc.get(y[N])===dc||(H===Hl||H===Rl)&&xc.get(y[j])===dc||H===Xf||X===Xf||H===zf||[Vr,fc,ca].indexOf(H)===-1&&X===zf||[Ol,ra,T0,oo,ao].indexOf(X)!==-1||qf(N,u)===Aa||Yu(Xu,Aa,N,u)||Yu([Ol,ra],pc,N,u)||Yu(Yf,Yf,N,u))return Oe;if(H===Vr)return Kl;if(H===Xu||X===Xu)return Oe;if(X===gc||H===gc)return Kl;if([fc,ca,pc].indexOf(X)!==-1||H===E0||tt===wc&&K0.indexOf(H)!==-1||H===ao&&X===wc||X===jf||sr.indexOf(X)!==-1&&H===qn||sr.indexOf(H)!==-1&&X===qn||H===fa&&[Fa,Hl,Rl].indexOf(X)!==-1||[Fa,Hl,Rl].indexOf(H)!==-1&&X===da||sr.indexOf(H)!==-1&&Wf.indexOf(X)!==-1||Wf.indexOf(H)!==-1&&sr.indexOf(X)!==-1||[fa,da].indexOf(H)!==-1&&(X===qn||[Aa,ca].indexOf(X)!==-1&&u[j+1]===qn)||[Aa,ca].indexOf(H)!==-1&&X===qn||H===qn&&[qn,ao,oo].indexOf(X)!==-1)return Oe;if([qn,ao,oo,Ol,ra].indexOf(X)!==-1)for(var st=N;st>=0;){var lt=u[st];if(lt===qn)return Oe;if([ao,oo].indexOf(lt)!==-1)st--;else break}if([fa,da].indexOf(X)!==-1)for(var st=[Ol,ra].indexOf(H)!==-1?I:N;st>=0;){var lt=u[st];if(lt===qn)return Oe;if([ao,oo].indexOf(lt)!==-1)st--;else break}if(Bc===H&&[Bc,nh,mc,yc].indexOf(X)!==-1||[nh,mc].indexOf(H)!==-1&&[nh,sh].indexOf(X)!==-1||[sh,yc].indexOf(H)!==-1&&X===sh||Jf.indexOf(H)!==-1&&[jf,da].indexOf(X)!==-1||Jf.indexOf(X)!==-1&&H===fa||sr.indexOf(H)!==-1&&sr.indexOf(X)!==-1||H===oo&&sr.indexOf(X)!==-1||sr.concat(qn).indexOf(H)!==-1&&X===Aa&&H0.indexOf(y[j])===-1||sr.concat(qn).indexOf(X)!==-1&&H===ra)return Oe;if(H===zu&&X===zu){for(var Lt=w[N],vt=1;Lt>0&&(Lt--,u[Lt]===zu);)vt++;if(vt%2!==0)return Oe}return H===Hl&&X===Rl?Oe:Kl},X0=function(y,u){u||(u={lineBreak:"normal",wordBreak:"normal"});var w=V0(y,u.lineBreak),v=w[0],P=w[1],N=w[2];(u.wordBreak==="break-all"||u.wordBreak==="break-word")&&(P=P.map(function(j){return[qn,wA,zg].indexOf(j)!==-1?Fa:j}));var I=u.wordBreak==="keep-all"?N.map(function(j,H){return j&&y[H]>=19968&&y[H]<=40959}):void 0;return[v,P,I]},z0=function(){function y(u,w,v,P){this.codePoints=u,this.required=w===Yg,this.start=v,this.end=P}return y.prototype.slice=function(){return Ui.apply(void 0,this.codePoints.slice(this.start,this.end))},y}(),Y0=function(y,u){var w=wh(y),v=X0(w,u),P=v[0],N=v[1],I=v[2],j=w.length,H=0,tt=0;return{next:function(){if(tt>=j)return{done:!0,value:null};for(var X=Oe;tt<j&&(X=G0(w,N,P,++tt,I))===Oe;);if(X!==Oe||tt===j){var st=new z0(w,X,H,tt);return H=tt,{value:st,done:!1}}return{done:!0,value:null}}}},j0=1,W0=2,Ma=4,Zf=8,oh=10,$f=47,ya=92,J0=9,q0=32,Vl=34,oa=61,Z0=35,$0=36,_0=37,Gl=39,Xl=40,aa=41,ty=95,Gn=45,ey=33,iy=60,ny=62,sy=64,ry=91,Ay=93,oy=61,ay=123,zl=63,ly=125,_f=124,hy=126,uy=128,tg=65533,ju=42,BA=43,cy=44,dy=58,fy=59,Sa=46,gy=0,py=8,my=11,yy=14,wy=31,By=127,Os=-1,Wg=48,Jg=97,qg=101,xy=102,Cy=117,vy=122,Zg=65,$g=69,_g=70,Fy=85,Sy=90,dn=function(y){return y>=Wg&&y<=57},by=function(y){return y>=55296&&y<=57343},lo=function(y){return dn(y)||y>=Zg&&y<=_g||y>=Jg&&y<=xy},ky=function(y){return y>=Jg&&y<=vy},My=function(y){return y>=Zg&&y<=Sy},Py=function(y){return ky(y)||My(y)},Qy=function(y){return y>=uy},Yl=function(y){return y===oh||y===J0||y===q0},ah=function(y){return Py(y)||Qy(y)||y===ty},eg=function(y){return ah(y)||dn(y)||y===Gn},Uy=function(y){return y>=gy&&y<=py||y===my||y>=yy&&y<=wy||y===By},Hr=function(y,u){return y!==ya?!1:u!==oh},jl=function(y,u,w){return y===Gn?ah(u)||Hr(u,w):ah(y)?!0:!!(y===ya&&Hr(y,u))},Wu=function(y,u,w){return y===BA||y===Gn?dn(u)?!0:u===Sa&&dn(w):dn(y===Sa?u:y)},Ly=function(y){var u=0,w=1;(y[u]===BA||y[u]===Gn)&&(y[u]===Gn&&(w=-1),u++);for(var v=[];dn(y[u]);)v.push(y[u++]);var P=v.length?parseInt(Ui.apply(void 0,v),10):0;y[u]===Sa&&u++;for(var N=[];dn(y[u]);)N.push(y[u++]);var I=N.length,j=I?parseInt(Ui.apply(void 0,N),10):0;(y[u]===$g||y[u]===qg)&&u++;var H=1;(y[u]===BA||y[u]===Gn)&&(y[u]===Gn&&(H=-1),u++);for(var tt=[];dn(y[u]);)tt.push(y[u++]);var X=tt.length?parseInt(Ui.apply(void 0,tt),10):0;return w*(P+j*Math.pow(10,-I))*Math.pow(10,H*X)},Ny={type:2},Ey={type:3},Ty={type:4},Dy={type:13},Iy={type:8},Oy={type:21},Hy={type:9},Ry={type:10},Ky={type:11},Vy={type:12},Gy={type:14},Wl={type:23},Xy={type:1},zy={type:25},Yy={type:24},jy={type:26},Wy={type:27},Jy={type:28},qy={type:29},Zy={type:31},vc={type:32},tp=function(){function y(){this._value=[]}return y.prototype.write=function(u){this._value=this._value.concat(wh(u))},y.prototype.read=function(){for(var u=[],w=this.consumeToken();w!==vc;)u.push(w),w=this.consumeToken();return u},y.prototype.consumeToken=function(){var u=this.consumeCodePoint();switch(u){case Vl:return this.consumeStringToken(Vl);case Z0:var w=this.peekCodePoint(0),v=this.peekCodePoint(1),P=this.peekCodePoint(2);if(eg(w)||Hr(v,P)){var N=jl(w,v,P)?W0:j0,I=this.consumeName();return{type:5,value:I,flags:N}}break;case $0:if(this.peekCodePoint(0)===oa)return this.consumeCodePoint(),Dy;break;case Gl:return this.consumeStringToken(Gl);case Xl:return Ny;case aa:return Ey;case ju:if(this.peekCodePoint(0)===oa)return this.consumeCodePoint(),Gy;break;case BA:if(Wu(u,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(u),this.consumeNumericToken();break;case cy:return Ty;case Gn:var j=u,H=this.peekCodePoint(0),tt=this.peekCodePoint(1);if(Wu(j,H,tt))return this.reconsumeCodePoint(u),this.consumeNumericToken();if(jl(j,H,tt))return this.reconsumeCodePoint(u),this.consumeIdentLikeToken();if(H===Gn&&tt===ny)return this.consumeCodePoint(),this.consumeCodePoint(),Yy;break;case Sa:if(Wu(u,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(u),this.consumeNumericToken();break;case $f:if(this.peekCodePoint(0)===ju)for(this.consumeCodePoint();;){var X=this.consumeCodePoint();if(X===ju&&(X=this.consumeCodePoint(),X===$f))return this.consumeToken();if(X===Os)return this.consumeToken()}break;case dy:return jy;case fy:return Wy;case iy:if(this.peekCodePoint(0)===ey&&this.peekCodePoint(1)===Gn&&this.peekCodePoint(2)===Gn)return this.consumeCodePoint(),this.consumeCodePoint(),zy;break;case sy:var st=this.peekCodePoint(0),lt=this.peekCodePoint(1),Lt=this.peekCodePoint(2);if(jl(st,lt,Lt)){var I=this.consumeName();return{type:7,value:I}}break;case ry:return Jy;case ya:if(Hr(u,this.peekCodePoint(0)))return this.reconsumeCodePoint(u),this.consumeIdentLikeToken();break;case Ay:return qy;case oy:if(this.peekCodePoint(0)===oa)return this.consumeCodePoint(),Iy;break;case ay:return Ky;case ly:return Vy;case Cy:case Fy:var vt=this.peekCodePoint(0),bt=this.peekCodePoint(1);return vt===BA&&(lo(bt)||bt===zl)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(u),this.consumeIdentLikeToken();case _f:if(this.peekCodePoint(0)===oa)return this.consumeCodePoint(),Hy;if(this.peekCodePoint(0)===_f)return this.consumeCodePoint(),Oy;break;case hy:if(this.peekCodePoint(0)===oa)return this.consumeCodePoint(),Ry;break;case Os:return vc}return Yl(u)?(this.consumeWhiteSpace(),Zy):dn(u)?(this.reconsumeCodePoint(u),this.consumeNumericToken()):ah(u)?(this.reconsumeCodePoint(u),this.consumeIdentLikeToken()):{type:6,value:Ui(u)}},y.prototype.consumeCodePoint=function(){var u=this._value.shift();return typeof u>"u"?-1:u},y.prototype.reconsumeCodePoint=function(u){this._value.unshift(u)},y.prototype.peekCodePoint=function(u){return u>=this._value.length?-1:this._value[u]},y.prototype.consumeUnicodeRangeToken=function(){for(var u=[],w=this.consumeCodePoint();lo(w)&&u.length<6;)u.push(w),w=this.consumeCodePoint();for(var v=!1;w===zl&&u.length<6;)u.push(w),w=this.consumeCodePoint(),v=!0;if(v){var P=parseInt(Ui.apply(void 0,u.map(function(H){return H===zl?Wg:H})),16),N=parseInt(Ui.apply(void 0,u.map(function(H){return H===zl?_g:H})),16);return{type:30,start:P,end:N}}var I=parseInt(Ui.apply(void 0,u),16);if(this.peekCodePoint(0)===Gn&&lo(this.peekCodePoint(1))){this.consumeCodePoint(),w=this.consumeCodePoint();for(var j=[];lo(w)&&j.length<6;)j.push(w),w=this.consumeCodePoint();var N=parseInt(Ui.apply(void 0,j),16);return{type:30,start:I,end:N}}else return{type:30,start:I,end:I}},y.prototype.consumeIdentLikeToken=function(){var u=this.consumeName();return u.toLowerCase()==="url"&&this.peekCodePoint(0)===Xl?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Xl?(this.consumeCodePoint(),{type:19,value:u}):{type:20,value:u}},y.prototype.consumeUrlToken=function(){var u=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Os)return{type:22,value:""};var w=this.peekCodePoint(0);if(w===Gl||w===Vl){var v=this.consumeStringToken(this.consumeCodePoint());return v.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Os||this.peekCodePoint(0)===aa)?(this.consumeCodePoint(),{type:22,value:v.value}):(this.consumeBadUrlRemnants(),Wl)}for(;;){var P=this.consumeCodePoint();if(P===Os||P===aa)return{type:22,value:Ui.apply(void 0,u)};if(Yl(P))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Os||this.peekCodePoint(0)===aa?(this.consumeCodePoint(),{type:22,value:Ui.apply(void 0,u)}):(this.consumeBadUrlRemnants(),Wl);if(P===Vl||P===Gl||P===Xl||Uy(P))return this.consumeBadUrlRemnants(),Wl;if(P===ya)if(Hr(P,this.peekCodePoint(0)))u.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Wl;else u.push(P)}},y.prototype.consumeWhiteSpace=function(){for(;Yl(this.peekCodePoint(0));)this.consumeCodePoint()},y.prototype.consumeBadUrlRemnants=function(){for(;;){var u=this.consumeCodePoint();if(u===aa||u===Os)return;Hr(u,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},y.prototype.consumeStringSlice=function(u){for(var w=5e4,v="";u>0;){var P=Math.min(w,u);v+=Ui.apply(void 0,this._value.splice(0,P)),u-=P}return this._value.shift(),v},y.prototype.consumeStringToken=function(u){var w="",v=0;do{var P=this._value[v];if(P===Os||P===void 0||P===u)return w+=this.consumeStringSlice(v),{type:0,value:w};if(P===oh)return this._value.splice(0,v),Xy;if(P===ya){var N=this._value[v+1];N!==Os&&N!==void 0&&(N===oh?(w+=this.consumeStringSlice(v),v=-1,this._value.shift()):Hr(P,N)&&(w+=this.consumeStringSlice(v),w+=Ui(this.consumeEscapedCodePoint()),v=-1))}v++}while(!0)},y.prototype.consumeNumber=function(){var u=[],w=Ma,v=this.peekCodePoint(0);for((v===BA||v===Gn)&&u.push(this.consumeCodePoint());dn(this.peekCodePoint(0));)u.push(this.consumeCodePoint());v=this.peekCodePoint(0);var P=this.peekCodePoint(1);if(v===Sa&&dn(P))for(u.push(this.consumeCodePoint(),this.consumeCodePoint()),w=Zf;dn(this.peekCodePoint(0));)u.push(this.consumeCodePoint());v=this.peekCodePoint(0),P=this.peekCodePoint(1);var N=this.peekCodePoint(2);if((v===$g||v===qg)&&((P===BA||P===Gn)&&dn(N)||dn(P)))for(u.push(this.consumeCodePoint(),this.consumeCodePoint()),w=Zf;dn(this.peekCodePoint(0));)u.push(this.consumeCodePoint());return[Ly(u),w]},y.prototype.consumeNumericToken=function(){var u=this.consumeNumber(),w=u[0],v=u[1],P=this.peekCodePoint(0),N=this.peekCodePoint(1),I=this.peekCodePoint(2);if(jl(P,N,I)){var j=this.consumeName();return{type:15,number:w,flags:v,unit:j}}return P===_0?(this.consumeCodePoint(),{type:16,number:w,flags:v}):{type:17,number:w,flags:v}},y.prototype.consumeEscapedCodePoint=function(){var u=this.consumeCodePoint();if(lo(u)){for(var w=Ui(u);lo(this.peekCodePoint(0))&&w.length<6;)w+=Ui(this.consumeCodePoint());Yl(this.peekCodePoint(0))&&this.consumeCodePoint();var v=parseInt(w,16);return v===0||by(v)||v>1114111?tg:v}return u===Os?tg:u},y.prototype.consumeName=function(){for(var u="";;){var w=this.consumeCodePoint();if(eg(w))u+=Ui(w);else if(Hr(w,this.peekCodePoint(0)))u+=Ui(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(w),u}},y}(),ep=function(){function y(u){this._tokens=u}return y.create=function(u){var w=new tp;return w.write(u),new y(w.read())},y.parseValue=function(u){return y.create(u).parseComponentValue()},y.parseValues=function(u){return y.create(u).parseComponentValues()},y.prototype.parseComponentValue=function(){for(var u=this.consumeToken();u.type===31;)u=this.consumeToken();if(u.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(u);var w=this.consumeComponentValue();do u=this.consumeToken();while(u.type===31);if(u.type===32)return w;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},y.prototype.parseComponentValues=function(){for(var u=[];;){var w=this.consumeComponentValue();if(w.type===32)return u;u.push(w),u.push()}},y.prototype.consumeComponentValue=function(){var u=this.consumeToken();switch(u.type){case 11:case 28:case 2:return this.consumeSimpleBlock(u.type);case 19:return this.consumeFunction(u)}return u},y.prototype.consumeSimpleBlock=function(u){for(var w={type:u,values:[]},v=this.consumeToken();;){if(v.type===32||_y(v,u))return w;this.reconsumeToken(v),w.values.push(this.consumeComponentValue()),v=this.consumeToken()}},y.prototype.consumeFunction=function(u){for(var w={name:u.value,values:[],type:18};;){var v=this.consumeToken();if(v.type===32||v.type===3)return w;this.reconsumeToken(v),w.values.push(this.consumeComponentValue())}},y.prototype.consumeToken=function(){var u=this._tokens.shift();return typeof u>"u"?vc:u},y.prototype.reconsumeToken=function(u){this._tokens.unshift(u)},y}(),Pa=function(y){return y.type===15},Bo=function(y){return y.type===17},ri=function(y){return y.type===20},$y=function(y){return y.type===0},Fc=function(y,u){return ri(y)&&y.value===u},ip=function(y){return y.type!==31},wo=function(y){return y.type!==31&&y.type!==4},Hs=function(y){var u=[],w=[];return y.forEach(function(v){if(v.type===4){if(w.length===0)throw new Error("Error parsing function args, zero tokens for arg");u.push(w),w=[];return}v.type!==31&&w.push(v)}),w.length&&u.push(w),u},_y=function(y,u){return u===11&&y.type===12||u===28&&y.type===29?!0:u===2&&y.type===3},jr=function(y){return y.type===17||y.type===15},Oi=function(y){return y.type===16||jr(y)},np=function(y){return y.length>1?[y[0],y[1]]:[y[0]]},nn={type:17,number:0,flags:Ma},Vc={type:16,number:50,flags:Ma},Gr={type:16,number:100,flags:Ma},ga=function(y,u,w){var v=y[0],P=y[1];return[fi(v,u),fi(typeof P<"u"?P:v,w)]},fi=function(y,u){if(y.type===16)return y.number/100*u;if(Pa(y))switch(y.unit){case"rem":case"em":return 16*y.number;case"px":default:return y.number}return y.number},sp="deg",rp="grad",Ap="rad",op="turn",Bh={name:"angle",parse:function(y,u){if(u.type===15)switch(u.unit){case sp:return Math.PI*u.number/180;case rp:return Math.PI/200*u.number;case Ap:return u.number;case op:return Math.PI*2*u.number}throw new Error("Unsupported angle type")}},ap=function(y){return y.type===15&&(y.unit===sp||y.unit===rp||y.unit===Ap||y.unit===op)},lp=function(y){var u=y.filter(ri).map(function(w){return w.value}).join(" ");switch(u){case"to bottom right":case"to right bottom":case"left top":case"top left":return[nn,nn];case"to top":case"bottom":return ls(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[nn,Gr];case"to right":case"left":return ls(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Gr,Gr];case"to bottom":case"top":return ls(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Gr,nn];case"to left":case"right":return ls(270)}return 0},ls=function(y){return Math.PI*y/180},zr={name:"color",parse:function(y,u){if(u.type===18){var w=tw[u.name];if(typeof w>"u")throw new Error('Attempting to parse an unsupported color function "'+u.name+'"');return w(y,u.values)}if(u.type===5){if(u.value.length===3){var v=u.value.substring(0,1),P=u.value.substring(1,2),N=u.value.substring(2,3);return Xr(parseInt(v+v,16),parseInt(P+P,16),parseInt(N+N,16),1)}if(u.value.length===4){var v=u.value.substring(0,1),P=u.value.substring(1,2),N=u.value.substring(2,3),I=u.value.substring(3,4);return Xr(parseInt(v+v,16),parseInt(P+P,16),parseInt(N+N,16),parseInt(I+I,16)/255)}if(u.value.length===6){var v=u.value.substring(0,2),P=u.value.substring(2,4),N=u.value.substring(4,6);return Xr(parseInt(v,16),parseInt(P,16),parseInt(N,16),1)}if(u.value.length===8){var v=u.value.substring(0,2),P=u.value.substring(2,4),N=u.value.substring(4,6),I=u.value.substring(6,8);return Xr(parseInt(v,16),parseInt(P,16),parseInt(N,16),parseInt(I,16)/255)}}if(u.type===20){var j=or[u.value.toUpperCase()];if(typeof j<"u")return j}return or.TRANSPARENT}},Yr=function(y){return(255&y)===0},Wi=function(y){var u=255&y,w=255&y>>8,v=255&y>>16,P=255&y>>24;return u<255?"rgba("+P+","+v+","+w+","+u/255+")":"rgb("+P+","+v+","+w+")"},Xr=function(y,u,w,v){return(y<<24|u<<16|w<<8|Math.round(v*255)<<0)>>>0},ig=function(y,u){if(y.type===17)return y.number;if(y.type===16){var w=u===3?1:255;return u===3?y.number/100*w:Math.round(y.number/100*w)}return 0},ng=function(y,u){var w=u.filter(wo);if(w.length===3){var v=w.map(ig),P=v[0],N=v[1],I=v[2];return Xr(P,N,I,1)}if(w.length===4){var j=w.map(ig),P=j[0],N=j[1],I=j[2],H=j[3];return Xr(P,N,I,H)}return 0};function Ju(y,u,w){return w<0&&(w+=1),w>=1&&(w-=1),w<1/6?(u-y)*w*6+y:w<1/2?u:w<2/3?(u-y)*6*(2/3-w)+y:y}var sg=function(y,u){var w=u.filter(wo),v=w[0],P=w[1],N=w[2],I=w[3],j=(v.type===17?ls(v.number):Bh.parse(y,v))/(Math.PI*2),H=Oi(P)?P.number/100:0,tt=Oi(N)?N.number/100:0,X=typeof I<"u"&&Oi(I)?fi(I,1):1;if(H===0)return Xr(tt*255,tt*255,tt*255,1);var st=tt<=.5?tt*(H+1):tt+H-tt*H,lt=tt*2-st,Lt=Ju(lt,st,j+1/3),vt=Ju(lt,st,j),bt=Ju(lt,st,j-1/3);return Xr(Lt*255,vt*255,bt*255,X)},tw={hsl:sg,hsla:sg,rgb:ng,rgba:ng},wa=function(y,u){return zr.parse(y,ep.create(u).parseComponentValue())},or={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},ew={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(y,u){return u.map(function(w){if(ri(w))switch(w.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},iw={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},xh=function(y,u){var w=zr.parse(y,u[0]),v=u[1];return v&&Oi(v)?{color:w,stop:v}:{color:w,stop:null}},rg=function(y,u){var w=y[0],v=y[y.length-1];w.stop===null&&(w.stop=nn),v.stop===null&&(v.stop=Gr);for(var P=[],N=0,I=0;I<y.length;I++){var j=y[I].stop;if(j!==null){var H=fi(j,u);H>N?P.push(H):P.push(N),N=H}else P.push(null)}for(var tt=null,I=0;I<P.length;I++){var X=P[I];if(X===null)tt===null&&(tt=I);else if(tt!==null){for(var st=I-tt,lt=P[tt-1],Lt=(X-lt)/(st+1),vt=1;vt<=st;vt++)P[tt+vt-1]=Lt*vt;tt=null}}return y.map(function(bt,xt){var T=bt.color;return{color:T,stop:Math.max(Math.min(1,P[xt]/u),0)}})},nw=function(y,u,w){var v=u/2,P=w/2,N=fi(y[0],u)-v,I=P-fi(y[1],w);return(Math.atan2(I,N)+Math.PI*2)%(Math.PI*2)},sw=function(y,u,w){var v=typeof y=="number"?y:nw(y,u,w),P=Math.abs(u*Math.sin(v))+Math.abs(w*Math.cos(v)),N=u/2,I=w/2,j=P/2,H=Math.sin(v-Math.PI/2)*j,tt=Math.cos(v-Math.PI/2)*j;return[P,N-tt,N+tt,I-H,I+H]},bs=function(y,u){return Math.sqrt(y*y+u*u)},Ag=function(y,u,w,v,P){var N=[[0,0],[0,u],[y,0],[y,u]];return N.reduce(function(I,j){var H=j[0],tt=j[1],X=bs(w-H,v-tt);return(P?X<I.optimumDistance:X>I.optimumDistance)?{optimumCorner:j,optimumDistance:X}:I},{optimumDistance:P?1/0:-1/0,optimumCorner:null}).optimumCorner},rw=function(y,u,w,v,P){var N=0,I=0;switch(y.size){case 0:y.shape===0?N=I=Math.min(Math.abs(u),Math.abs(u-v),Math.abs(w),Math.abs(w-P)):y.shape===1&&(N=Math.min(Math.abs(u),Math.abs(u-v)),I=Math.min(Math.abs(w),Math.abs(w-P)));break;case 2:if(y.shape===0)N=I=Math.min(bs(u,w),bs(u,w-P),bs(u-v,w),bs(u-v,w-P));else if(y.shape===1){var j=Math.min(Math.abs(w),Math.abs(w-P))/Math.min(Math.abs(u),Math.abs(u-v)),H=Ag(v,P,u,w,!0),tt=H[0],X=H[1];N=bs(tt-u,(X-w)/j),I=j*N}break;case 1:y.shape===0?N=I=Math.max(Math.abs(u),Math.abs(u-v),Math.abs(w),Math.abs(w-P)):y.shape===1&&(N=Math.max(Math.abs(u),Math.abs(u-v)),I=Math.max(Math.abs(w),Math.abs(w-P)));break;case 3:if(y.shape===0)N=I=Math.max(bs(u,w),bs(u,w-P),bs(u-v,w),bs(u-v,w-P));else if(y.shape===1){var j=Math.max(Math.abs(w),Math.abs(w-P))/Math.max(Math.abs(u),Math.abs(u-v)),st=Ag(v,P,u,w,!1),tt=st[0],X=st[1];N=bs(tt-u,(X-w)/j),I=j*N}break}return Array.isArray(y.size)&&(N=fi(y.size[0],v),I=y.size.length===2?fi(y.size[1],P):N),[N,I]},Aw=function(y,u){var w=ls(180),v=[];return Hs(u).forEach(function(P,N){if(N===0){var I=P[0];if(I.type===20&&I.value==="to"){w=lp(P);return}else if(ap(I)){w=Bh.parse(y,I);return}}var j=xh(y,P);v.push(j)}),{angle:w,stops:v,type:1}},Jl=function(y,u){var w=ls(180),v=[];return Hs(u).forEach(function(P,N){if(N===0){var I=P[0];if(I.type===20&&["top","left","right","bottom"].indexOf(I.value)!==-1){w=lp(P);return}else if(ap(I)){w=(Bh.parse(y,I)+ls(270))%ls(360);return}}var j=xh(y,P);v.push(j)}),{angle:w,stops:v,type:1}},ow=function(y,u){var w=ls(180),v=[],P=1,N=0,I=3,j=[];return Hs(u).forEach(function(H,tt){var X=H[0];if(tt===0){if(ri(X)&&X.value==="linear"){P=1;return}else if(ri(X)&&X.value==="radial"){P=2;return}}if(X.type===18){if(X.name==="from"){var st=zr.parse(y,X.values[0]);v.push({stop:nn,color:st})}else if(X.name==="to"){var st=zr.parse(y,X.values[0]);v.push({stop:Gr,color:st})}else if(X.name==="color-stop"){var lt=X.values.filter(wo);if(lt.length===2){var st=zr.parse(y,lt[1]),Lt=lt[0];Bo(Lt)&&v.push({stop:{type:16,number:Lt.number*100,flags:Lt.flags},color:st})}}}}),P===1?{angle:(w+ls(180))%ls(360),stops:v,type:P}:{size:I,shape:N,stops:v,position:j,type:P}},hp="closest-side",up="farthest-side",cp="closest-corner",dp="farthest-corner",fp="circle",gp="ellipse",pp="cover",mp="contain",aw=function(y,u){var w=0,v=3,P=[],N=[];return Hs(u).forEach(function(I,j){var H=!0;if(j===0){var tt=!1;H=I.reduce(function(st,lt){if(tt)if(ri(lt))switch(lt.value){case"center":return N.push(Vc),st;case"top":case"left":return N.push(nn),st;case"right":case"bottom":return N.push(Gr),st}else(Oi(lt)||jr(lt))&&N.push(lt);else if(ri(lt))switch(lt.value){case fp:return w=0,!1;case gp:return w=1,!1;case"at":return tt=!0,!1;case hp:return v=0,!1;case pp:case up:return v=1,!1;case mp:case cp:return v=2,!1;case dp:return v=3,!1}else if(jr(lt)||Oi(lt))return Array.isArray(v)||(v=[]),v.push(lt),!1;return st},H)}if(H){var X=xh(y,I);P.push(X)}}),{size:v,shape:w,stops:P,position:N,type:2}},ql=function(y,u){var w=0,v=3,P=[],N=[];return Hs(u).forEach(function(I,j){var H=!0;if(j===0?H=I.reduce(function(X,st){if(ri(st))switch(st.value){case"center":return N.push(Vc),!1;case"top":case"left":return N.push(nn),!1;case"right":case"bottom":return N.push(Gr),!1}else if(Oi(st)||jr(st))return N.push(st),!1;return X},H):j===1&&(H=I.reduce(function(X,st){if(ri(st))switch(st.value){case fp:return w=0,!1;case gp:return w=1,!1;case mp:case hp:return v=0,!1;case up:return v=1,!1;case cp:return v=2,!1;case pp:case dp:return v=3,!1}else if(jr(st)||Oi(st))return Array.isArray(v)||(v=[]),v.push(st),!1;return X},H)),H){var tt=xh(y,I);P.push(tt)}}),{size:v,shape:w,stops:P,position:N,type:2}},lw=function(y){return y.type===1},hw=function(y){return y.type===2},Gc={name:"image",parse:function(y,u){if(u.type===22){var w={url:u.value,type:0};return y.cache.addImage(u.value),w}if(u.type===18){var v=yp[u.name];if(typeof v>"u")throw new Error('Attempting to parse an unsupported image function "'+u.name+'"');return v(y,u.values)}throw new Error("Unsupported image type "+u.type)}};function uw(y){return!(y.type===20&&y.value==="none")&&(y.type!==18||!!yp[y.name])}var yp={"linear-gradient":Aw,"-moz-linear-gradient":Jl,"-ms-linear-gradient":Jl,"-o-linear-gradient":Jl,"-webkit-linear-gradient":Jl,"radial-gradient":aw,"-moz-radial-gradient":ql,"-ms-radial-gradient":ql,"-o-radial-gradient":ql,"-webkit-radial-gradient":ql,"-webkit-gradient":ow},cw={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(y,u){if(u.length===0)return[];var w=u[0];return w.type===20&&w.value==="none"?[]:u.filter(function(v){return wo(v)&&uw(v)}).map(function(v){return Gc.parse(y,v)})}},dw={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(y,u){return u.map(function(w){if(ri(w))switch(w.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},fw={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(y,u){return Hs(u).map(function(w){return w.filter(Oi)}).map(np)}},gw={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(y,u){return Hs(u).map(function(w){return w.filter(ri).map(function(v){return v.value}).join(" ")}).map(pw)}},pw=function(y){switch(y){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},mo;(function(y){y.AUTO="auto",y.CONTAIN="contain",y.COVER="cover"})(mo||(mo={}));var mw={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(y,u){return Hs(u).map(function(w){return w.filter(yw)})}},yw=function(y){return ri(y)||Oi(y)},Ch=function(y){return{name:"border-"+y+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},ww=Ch("top"),Bw=Ch("right"),xw=Ch("bottom"),Cw=Ch("left"),vh=function(y){return{name:"border-radius-"+y,initialValue:"0 0",prefix:!1,type:1,parse:function(u,w){return np(w.filter(Oi))}}},vw=vh("top-left"),Fw=vh("top-right"),Sw=vh("bottom-right"),bw=vh("bottom-left"),Fh=function(y){return{name:"border-"+y+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(u,w){switch(w){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},kw=Fh("top"),Mw=Fh("right"),Pw=Fh("bottom"),Qw=Fh("left"),Sh=function(y){return{name:"border-"+y+"-width",initialValue:"0",type:0,prefix:!1,parse:function(u,w){return Pa(w)?w.number:0}}},Uw=Sh("top"),Lw=Sh("right"),Nw=Sh("bottom"),Ew=Sh("left"),Tw={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Dw={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(y,u){switch(u){case"rtl":return 1;case"ltr":default:return 0}}},Iw={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(y,u){return u.filter(ri).reduce(function(w,v){return w|Ow(v.value)},0)}},Ow=function(y){switch(y){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Hw={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(y,u){switch(u){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Rw={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(y,u){return u.type===20&&u.value==="normal"?0:u.type===17||u.type===15?u.number:0}},lh;(function(y){y.NORMAL="normal",y.STRICT="strict"})(lh||(lh={}));var Kw={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(y,u){switch(u){case"strict":return lh.STRICT;case"normal":default:return lh.NORMAL}}},Vw={name:"line-height",initialValue:"normal",prefix:!1,type:4},og=function(y,u){return ri(y)&&y.value==="normal"?1.2*u:y.type===17?u*y.number:Oi(y)?fi(y,u):u},Gw={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(y,u){return u.type===20&&u.value==="none"?null:Gc.parse(y,u)}},Xw={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(y,u){switch(u){case"inside":return 0;case"outside":default:return 1}}},Sc={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(y,u){switch(u){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},bh=function(y){return{name:"margin-"+y,initialValue:"0",prefix:!1,type:4}},zw=bh("top"),Yw=bh("right"),jw=bh("bottom"),Ww=bh("left"),Jw={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(y,u){return u.filter(ri).map(function(w){switch(w.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},qw={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(y,u){switch(u){case"break-word":return"break-word";case"normal":default:return"normal"}}},kh=function(y){return{name:"padding-"+y,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Zw=kh("top"),$w=kh("right"),_w=kh("bottom"),tB=kh("left"),eB={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(y,u){switch(u){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},iB={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(y,u){switch(u){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},nB={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(y,u){return u.length===1&&Fc(u[0],"none")?[]:Hs(u).map(function(w){for(var v={color:or.TRANSPARENT,offsetX:nn,offsetY:nn,blur:nn},P=0,N=0;N<w.length;N++){var I=w[N];jr(I)?(P===0?v.offsetX=I:P===1?v.offsetY=I:v.blur=I,P++):v.color=zr.parse(y,I)}return v})}},sB={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(y,u){switch(u){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},rB={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(y,u){if(u.type===20&&u.value==="none")return null;if(u.type===18){var w=aB[u.name];if(typeof w>"u")throw new Error('Attempting to parse an unsupported transform function "'+u.name+'"');return w(u.values)}return null}},AB=function(y){var u=y.filter(function(w){return w.type===17}).map(function(w){return w.number});return u.length===6?u:null},oB=function(y){var u=y.filter(function(H){return H.type===17}).map(function(H){return H.number}),w=u[0],v=u[1];u[2],u[3];var P=u[4],N=u[5];u[6],u[7],u[8],u[9],u[10],u[11];var I=u[12],j=u[13];return u[14],u[15],u.length===16?[w,v,P,N,I,j]:null},aB={matrix:AB,matrix3d:oB},ag={type:16,number:50,flags:Ma},lB=[ag,ag],hB={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(y,u){var w=u.filter(Oi);return w.length!==2?lB:[w[0],w[1]]}},uB={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(y,u){switch(u){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Ba;(function(y){y.NORMAL="normal",y.BREAK_ALL="break-all",y.KEEP_ALL="keep-all"})(Ba||(Ba={}));var cB={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(y,u){switch(u){case"break-all":return Ba.BREAK_ALL;case"keep-all":return Ba.KEEP_ALL;case"normal":default:return Ba.NORMAL}}},dB={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(y,u){if(u.type===20)return{auto:!0,order:0};if(Bo(u))return{auto:!1,order:u.number};throw new Error("Invalid z-index number parsed")}},wp={name:"time",parse:function(y,u){if(u.type===15)switch(u.unit.toLowerCase()){case"s":return 1e3*u.number;case"ms":return u.number}throw new Error("Unsupported time type")}},fB={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(y,u){return Bo(u)?u.number:1}},gB={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},pB={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(y,u){return u.filter(ri).map(function(w){switch(w.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(w){return w!==0})}},mB={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(y,u){var w=[],v=[];return u.forEach(function(P){switch(P.type){case 20:case 0:w.push(P.value);break;case 17:w.push(P.number.toString());break;case 4:v.push(w.join(" ")),w.length=0;break}}),w.length&&v.push(w.join(" ")),v.map(function(P){return P.indexOf(" ")===-1?P:"'"+P+"'"})}},yB={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},wB={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(y,u){if(Bo(u))return u.number;if(ri(u))switch(u.value){case"bold":return 700;case"normal":default:return 400}return 400}},BB={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(y,u){return u.filter(ri).map(function(w){return w.value})}},xB={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(y,u){switch(u){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Xi=function(y,u){return(y&u)!==0},CB={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(y,u){if(u.length===0)return[];var w=u[0];return w.type===20&&w.value==="none"?[]:u}},vB={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(y,u){if(u.length===0)return null;var w=u[0];if(w.type===20&&w.value==="none")return null;for(var v=[],P=u.filter(ip),N=0;N<P.length;N++){var I=P[N],j=P[N+1];if(I.type===20){var H=j&&Bo(j)?j.number:1;v.push({counter:I.value,increment:H})}}return v}},FB={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(y,u){if(u.length===0)return[];for(var w=[],v=u.filter(ip),P=0;P<v.length;P++){var N=v[P],I=v[P+1];if(ri(N)&&N.value!=="none"){var j=I&&Bo(I)?I.number:0;w.push({counter:N.value,reset:j})}}return w}},SB={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(y,u){return u.filter(Pa).map(function(w){return wp.parse(y,w)})}},bB={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(y,u){if(u.length===0)return null;var w=u[0];if(w.type===20&&w.value==="none")return null;var v=[],P=u.filter($y);if(P.length%2!==0)return null;for(var N=0;N<P.length;N+=2){var I=P[N].value,j=P[N+1].value;v.push({open:I,close:j})}return v}},lg=function(y,u,w){if(!y)return"";var v=y[Math.min(u,y.length-1)];return v?w?v.open:v.close:""},kB={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(y,u){return u.length===1&&Fc(u[0],"none")?[]:Hs(u).map(function(w){for(var v={color:255,offsetX:nn,offsetY:nn,blur:nn,spread:nn,inset:!1},P=0,N=0;N<w.length;N++){var I=w[N];Fc(I,"inset")?v.inset=!0:jr(I)?(P===0?v.offsetX=I:P===1?v.offsetY=I:P===2?v.blur=I:v.spread=I,P++):v.color=zr.parse(y,I)}return v})}},MB={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(y,u){var w=[0,1,2],v=[];return u.filter(ri).forEach(function(P){switch(P.value){case"stroke":v.push(1);break;case"fill":v.push(0);break;case"markers":v.push(2);break}}),w.forEach(function(P){v.indexOf(P)===-1&&v.push(P)}),v}},PB={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},QB={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(y,u){return Pa(u)?u.number:0}},UB=function(){function y(u,w){var v,P;this.animationDuration=ie(u,SB,w.animationDuration),this.backgroundClip=ie(u,ew,w.backgroundClip),this.backgroundColor=ie(u,iw,w.backgroundColor),this.backgroundImage=ie(u,cw,w.backgroundImage),this.backgroundOrigin=ie(u,dw,w.backgroundOrigin),this.backgroundPosition=ie(u,fw,w.backgroundPosition),this.backgroundRepeat=ie(u,gw,w.backgroundRepeat),this.backgroundSize=ie(u,mw,w.backgroundSize),this.borderTopColor=ie(u,ww,w.borderTopColor),this.borderRightColor=ie(u,Bw,w.borderRightColor),this.borderBottomColor=ie(u,xw,w.borderBottomColor),this.borderLeftColor=ie(u,Cw,w.borderLeftColor),this.borderTopLeftRadius=ie(u,vw,w.borderTopLeftRadius),this.borderTopRightRadius=ie(u,Fw,w.borderTopRightRadius),this.borderBottomRightRadius=ie(u,Sw,w.borderBottomRightRadius),this.borderBottomLeftRadius=ie(u,bw,w.borderBottomLeftRadius),this.borderTopStyle=ie(u,kw,w.borderTopStyle),this.borderRightStyle=ie(u,Mw,w.borderRightStyle),this.borderBottomStyle=ie(u,Pw,w.borderBottomStyle),this.borderLeftStyle=ie(u,Qw,w.borderLeftStyle),this.borderTopWidth=ie(u,Uw,w.borderTopWidth),this.borderRightWidth=ie(u,Lw,w.borderRightWidth),this.borderBottomWidth=ie(u,Nw,w.borderBottomWidth),this.borderLeftWidth=ie(u,Ew,w.borderLeftWidth),this.boxShadow=ie(u,kB,w.boxShadow),this.color=ie(u,Tw,w.color),this.direction=ie(u,Dw,w.direction),this.display=ie(u,Iw,w.display),this.float=ie(u,Hw,w.cssFloat),this.fontFamily=ie(u,mB,w.fontFamily),this.fontSize=ie(u,yB,w.fontSize),this.fontStyle=ie(u,xB,w.fontStyle),this.fontVariant=ie(u,BB,w.fontVariant),this.fontWeight=ie(u,wB,w.fontWeight),this.letterSpacing=ie(u,Rw,w.letterSpacing),this.lineBreak=ie(u,Kw,w.lineBreak),this.lineHeight=ie(u,Vw,w.lineHeight),this.listStyleImage=ie(u,Gw,w.listStyleImage),this.listStylePosition=ie(u,Xw,w.listStylePosition),this.listStyleType=ie(u,Sc,w.listStyleType),this.marginTop=ie(u,zw,w.marginTop),this.marginRight=ie(u,Yw,w.marginRight),this.marginBottom=ie(u,jw,w.marginBottom),this.marginLeft=ie(u,Ww,w.marginLeft),this.opacity=ie(u,fB,w.opacity);var N=ie(u,Jw,w.overflow);this.overflowX=N[0],this.overflowY=N[N.length>1?1:0],this.overflowWrap=ie(u,qw,w.overflowWrap),this.paddingTop=ie(u,Zw,w.paddingTop),this.paddingRight=ie(u,$w,w.paddingRight),this.paddingBottom=ie(u,_w,w.paddingBottom),this.paddingLeft=ie(u,tB,w.paddingLeft),this.paintOrder=ie(u,MB,w.paintOrder),this.position=ie(u,iB,w.position),this.textAlign=ie(u,eB,w.textAlign),this.textDecorationColor=ie(u,gB,(v=w.textDecorationColor)!==null&&v!==void 0?v:w.color),this.textDecorationLine=ie(u,pB,(P=w.textDecorationLine)!==null&&P!==void 0?P:w.textDecoration),this.textShadow=ie(u,nB,w.textShadow),this.textTransform=ie(u,sB,w.textTransform),this.transform=ie(u,rB,w.transform),this.transformOrigin=ie(u,hB,w.transformOrigin),this.visibility=ie(u,uB,w.visibility),this.webkitTextStrokeColor=ie(u,PB,w.webkitTextStrokeColor),this.webkitTextStrokeWidth=ie(u,QB,w.webkitTextStrokeWidth),this.wordBreak=ie(u,cB,w.wordBreak),this.zIndex=ie(u,dB,w.zIndex)}return y.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},y.prototype.isTransparent=function(){return Yr(this.backgroundColor)},y.prototype.isTransformed=function(){return this.transform!==null},y.prototype.isPositioned=function(){return this.position!==0},y.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},y.prototype.isFloating=function(){return this.float!==0},y.prototype.isInlineLevel=function(){return Xi(this.display,4)||Xi(this.display,33554432)||Xi(this.display,268435456)||Xi(this.display,536870912)||Xi(this.display,67108864)||Xi(this.display,134217728)},y}(),LB=function(){function y(u,w){this.content=ie(u,CB,w.content),this.quotes=ie(u,bB,w.quotes)}return y}(),hg=function(){function y(u,w){this.counterIncrement=ie(u,vB,w.counterIncrement),this.counterReset=ie(u,FB,w.counterReset)}return y}(),ie=function(y,u,w){var v=new tp,P=w!==null&&typeof w<"u"?w.toString():u.initialValue;v.write(P);var N=new ep(v.read());switch(u.type){case 2:var I=N.parseComponentValue();return u.parse(y,ri(I)?I.value:u.initialValue);case 0:return u.parse(y,N.parseComponentValue());case 1:return u.parse(y,N.parseComponentValues());case 4:return N.parseComponentValue();case 3:switch(u.format){case"angle":return Bh.parse(y,N.parseComponentValue());case"color":return zr.parse(y,N.parseComponentValue());case"image":return Gc.parse(y,N.parseComponentValue());case"length":var j=N.parseComponentValue();return jr(j)?j:nn;case"length-percentage":var H=N.parseComponentValue();return Oi(H)?H:nn;case"time":return wp.parse(y,N.parseComponentValue())}break}},NB="data-html2canvas-debug",EB=function(y){var u=y.getAttribute(NB);switch(u){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},bc=function(y,u){var w=EB(y);return w===1||u===w},Rs=function(){function y(u,w){if(this.context=u,this.textNodes=[],this.elements=[],this.flags=0,bc(w,3))debugger;this.styles=new UB(u,window.getComputedStyle(w,null)),Pc(w)&&(this.styles.animationDuration.some(function(v){return v>0})&&(w.style.animationDuration="0s"),this.styles.transform!==null&&(w.style.transform="none")),this.bounds=yh(this.context,w),bc(w,4)&&(this.flags|=16)}return y}(),TB="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",ug="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",pa=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Zl=0;Zl<ug.length;Zl++)pa[ug.charCodeAt(Zl)]=Zl;var DB=function(y){var u=y.length*.75,w=y.length,v,P=0,N,I,j,H;y[y.length-1]==="="&&(u--,y[y.length-2]==="="&&u--);var tt=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(u):new Array(u),X=Array.isArray(tt)?tt:new Uint8Array(tt);for(v=0;v<w;v+=4)N=pa[y.charCodeAt(v)],I=pa[y.charCodeAt(v+1)],j=pa[y.charCodeAt(v+2)],H=pa[y.charCodeAt(v+3)],X[P++]=N<<2|I>>4,X[P++]=(I&15)<<4|j>>2,X[P++]=(j&3)<<6|H&63;return tt},IB=function(y){for(var u=y.length,w=[],v=0;v<u;v+=2)w.push(y[v+1]<<8|y[v]);return w},OB=function(y){for(var u=y.length,w=[],v=0;v<u;v+=4)w.push(y[v+3]<<24|y[v+2]<<16|y[v+1]<<8|y[v]);return w},vA=5,Xc=11,qu=2,HB=Xc-vA,Bp=65536>>vA,RB=1<<vA,Zu=RB-1,KB=1024>>vA,VB=Bp+KB,GB=VB,XB=32,zB=GB+XB,YB=65536>>Xc,jB=1<<HB,WB=jB-1,cg=function(y,u,w){return y.slice?y.slice(u,w):new Uint16Array(Array.prototype.slice.call(y,u,w))},JB=function(y,u,w){return y.slice?y.slice(u,w):new Uint32Array(Array.prototype.slice.call(y,u,w))},qB=function(y,u){var w=DB(y),v=Array.isArray(w)?OB(w):new Uint32Array(w),P=Array.isArray(w)?IB(w):new Uint16Array(w),N=24,I=cg(P,N/2,v[4]/2),j=v[5]===2?cg(P,(N+v[4])/2):JB(v,Math.ceil((N+v[4])/4));return new ZB(v[0],v[1],v[2],v[3],I,j)},ZB=function(){function y(u,w,v,P,N,I){this.initialValue=u,this.errorValue=w,this.highStart=v,this.highValueIndex=P,this.index=N,this.data=I}return y.prototype.get=function(u){var w;if(u>=0){if(u<55296||u>56319&&u<=65535)return w=this.index[u>>vA],w=(w<<qu)+(u&Zu),this.data[w];if(u<=65535)return w=this.index[Bp+(u-55296>>vA)],w=(w<<qu)+(u&Zu),this.data[w];if(u<this.highStart)return w=zB-YB+(u>>Xc),w=this.index[w],w+=u>>vA&WB,w=this.index[w],w=(w<<qu)+(u&Zu),this.data[w];if(u<=1114111)return this.data[this.highValueIndex]}return this.errorValue},y}(),dg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$B=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var $l=0;$l<dg.length;$l++)$B[dg.charCodeAt($l)]=$l;var _B=1,$u=2,_u=3,fg=4,gg=5,tx=7,pg=8,tc=9,ec=10,mg=11,yg=12,wg=13,Bg=14,ic=15,ex=function(y){for(var u=[],w=0,v=y.length;w<v;){var P=y.charCodeAt(w++);if(P>=55296&&P<=56319&&w<v){var N=y.charCodeAt(w++);(N&64512)===56320?u.push(((P&1023)<<10)+(N&1023)+65536):(u.push(P),w--)}else u.push(P)}return u},ix=function(){for(var y=[],u=0;u<arguments.length;u++)y[u]=arguments[u];if(String.fromCodePoint)return String.fromCodePoint.apply(String,y);var w=y.length;if(!w)return"";for(var v=[],P=-1,N="";++P<w;){var I=y[P];I<=65535?v.push(I):(I-=65536,v.push((I>>10)+55296,I%1024+56320)),(P+1===w||v.length>16384)&&(N+=String.fromCharCode.apply(String,v),v.length=0)}return N},nx=qB(TB),os="",nc="",sx=function(y){return nx.get(y)},rx=function(y,u,w){var v=w-2,P=u[v],N=u[w-1],I=u[w];if(N===$u&&I===_u)return os;if(N===$u||N===_u||N===fg||I===$u||I===_u||I===fg)return nc;if(N===pg&&[pg,tc,mg,yg].indexOf(I)!==-1||(N===mg||N===tc)&&(I===tc||I===ec)||(N===yg||N===ec)&&I===ec||I===wg||I===gg||I===tx||N===_B)return os;if(N===wg&&I===Bg){for(;P===gg;)P=u[--v];if(P===Bg)return os}if(N===ic&&I===ic){for(var j=0;P===ic;)j++,P=u[--v];if(j%2===0)return os}return nc},Ax=function(y){var u=ex(y),w=u.length,v=0,P=0,N=u.map(sx);return{next:function(){if(v>=w)return{done:!0,value:null};for(var I=os;v<w&&(I=rx(u,N,++v))===os;);if(I!==os||v===w){var j=ix.apply(null,u.slice(P,v));return P=v,{value:j,done:!1}}return{done:!0,value:null}}}},ox=function(y){for(var u=Ax(y),w=[],v;!(v=u.next()).done;)v.value&&w.push(v.value.slice());return w},ax=function(y){var u=123;if(y.createRange){var w=y.createRange();if(w.getBoundingClientRect){var v=y.createElement("boundtest");v.style.height=u+"px",v.style.display="block",y.body.appendChild(v),w.selectNode(v);var P=w.getBoundingClientRect(),N=Math.round(P.height);if(y.body.removeChild(v),N===u)return!0}}return!1},lx=function(y){var u=y.createElement("boundtest");u.style.width="50px",u.style.display="block",u.style.fontSize="12px",u.style.letterSpacing="0px",u.style.wordSpacing="0px",y.body.appendChild(u);var w=y.createRange();u.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var v=u.firstChild,P=wh(v.data).map(function(H){return Ui(H)}),N=0,I={},j=P.every(function(H,tt){w.setStart(v,N),w.setEnd(v,N+H.length);var X=w.getBoundingClientRect();N+=H.length;var st=X.x>I.x||X.y>I.y;return I=X,tt===0?!0:st});return y.body.removeChild(u),j},hx=function(){return typeof new Image().crossOrigin<"u"},ux=function(){return typeof new XMLHttpRequest().responseType=="string"},cx=function(y){var u=new Image,w=y.createElement("canvas"),v=w.getContext("2d");if(!v)return!1;u.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{v.drawImage(u,0,0),w.toDataURL()}catch{return!1}return!0},xg=function(y){return y[0]===0&&y[1]===255&&y[2]===0&&y[3]===255},dx=function(y){var u=y.createElement("canvas"),w=100;u.width=w,u.height=w;var v=u.getContext("2d");if(!v)return Promise.reject(!1);v.fillStyle="rgb(0, 255, 0)",v.fillRect(0,0,w,w);var P=new Image,N=u.toDataURL();P.src=N;var I=kc(w,w,0,0,P);return v.fillStyle="red",v.fillRect(0,0,w,w),Cg(I).then(function(j){v.drawImage(j,0,0);var H=v.getImageData(0,0,w,w).data;v.fillStyle="red",v.fillRect(0,0,w,w);var tt=y.createElement("div");return tt.style.backgroundImage="url("+N+")",tt.style.height=w+"px",xg(H)?Cg(kc(w,w,0,0,tt)):Promise.reject(!1)}).then(function(j){return v.drawImage(j,0,0),xg(v.getImageData(0,0,w,w).data)}).catch(function(){return!1})},kc=function(y,u,w,v,P){var N="http://www.w3.org/2000/svg",I=document.createElementNS(N,"svg"),j=document.createElementNS(N,"foreignObject");return I.setAttributeNS(null,"width",y.toString()),I.setAttributeNS(null,"height",u.toString()),j.setAttributeNS(null,"width","100%"),j.setAttributeNS(null,"height","100%"),j.setAttributeNS(null,"x",w.toString()),j.setAttributeNS(null,"y",v.toString()),j.setAttributeNS(null,"externalResourcesRequired","true"),I.appendChild(j),j.appendChild(P),I},Cg=function(y){return new Promise(function(u,w){var v=new Image;v.onload=function(){return u(v)},v.onerror=w,v.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(y))})},en={get SUPPORT_RANGE_BOUNDS(){var y=ax(document);return Object.defineProperty(en,"SUPPORT_RANGE_BOUNDS",{value:y}),y},get SUPPORT_WORD_BREAKING(){var y=en.SUPPORT_RANGE_BOUNDS&&lx(document);return Object.defineProperty(en,"SUPPORT_WORD_BREAKING",{value:y}),y},get SUPPORT_SVG_DRAWING(){var y=cx(document);return Object.defineProperty(en,"SUPPORT_SVG_DRAWING",{value:y}),y},get SUPPORT_FOREIGNOBJECT_DRAWING(){var y=typeof Array.from=="function"&&typeof window.fetch=="function"?dx(document):Promise.resolve(!1);return Object.defineProperty(en,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:y}),y},get SUPPORT_CORS_IMAGES(){var y=hx();return Object.defineProperty(en,"SUPPORT_CORS_IMAGES",{value:y}),y},get SUPPORT_RESPONSE_TYPE(){var y=ux();return Object.defineProperty(en,"SUPPORT_RESPONSE_TYPE",{value:y}),y},get SUPPORT_CORS_XHR(){var y="withCredentials"in new XMLHttpRequest;return Object.defineProperty(en,"SUPPORT_CORS_XHR",{value:y}),y},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var y=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(en,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:y}),y}},xa=function(){function y(u,w){this.text=u,this.bounds=w}return y}(),fx=function(y,u,w,v){var P=mx(u,w),N=[],I=0;return P.forEach(function(j){if(w.textDecorationLine.length||j.trim().length>0)if(en.SUPPORT_RANGE_BOUNDS){var H=vg(v,I,j.length).getClientRects();if(H.length>1){var tt=zc(j),X=0;tt.forEach(function(lt){N.push(new xa(lt,ar.fromDOMRectList(y,vg(v,X+I,lt.length).getClientRects()))),X+=lt.length})}else N.push(new xa(j,ar.fromDOMRectList(y,H)))}else{var st=v.splitText(j.length);N.push(new xa(j,gx(y,v))),v=st}else en.SUPPORT_RANGE_BOUNDS||(v=v.splitText(j.length));I+=j.length}),N},gx=function(y,u){var w=u.ownerDocument;if(w){var v=w.createElement("html2canvaswrapper");v.appendChild(u.cloneNode(!0));var P=u.parentNode;if(P){P.replaceChild(v,u);var N=yh(y,v);return v.firstChild&&P.replaceChild(v.firstChild,v),N}}return ar.EMPTY},vg=function(y,u,w){var v=y.ownerDocument;if(!v)throw new Error("Node has no owner document");var P=v.createRange();return P.setStart(y,u),P.setEnd(y,u+w),P},zc=function(y){if(en.SUPPORT_NATIVE_TEXT_SEGMENTATION){var u=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(u.segment(y)).map(function(w){return w.segment})}return ox(y)},px=function(y,u){if(en.SUPPORT_NATIVE_TEXT_SEGMENTATION){var w=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(w.segment(y)).map(function(v){return v.segment})}return wx(y,u)},mx=function(y,u){return u.letterSpacing!==0?zc(y):px(y,u)},yx=[32,160,4961,65792,65793,4153,4241],wx=function(y,u){for(var w=Y0(y,{lineBreak:u.lineBreak,wordBreak:u.overflowWrap==="break-word"?"break-word":u.wordBreak}),v=[],P,N=function(){if(P.value){var I=P.value.slice(),j=wh(I),H="";j.forEach(function(tt){yx.indexOf(tt)===-1?H+=Ui(tt):(H.length&&v.push(H),v.push(Ui(tt)),H="")}),H.length&&v.push(H)}};!(P=w.next()).done;)N();return v},Bx=function(){function y(u,w,v){this.text=xx(w.data,v.textTransform),this.textBounds=fx(u,this.text,v,w)}return y}(),xx=function(y,u){switch(u){case 1:return y.toLowerCase();case 3:return y.replace(Cx,vx);case 2:return y.toUpperCase();default:return y}},Cx=/(^|\s|:|-|\(|\))([a-z])/g,vx=function(y,u,w){return y.length>0?u+w.toUpperCase():y},xp=function(y){ks(u,y);function u(w,v){var P=y.call(this,w,v)||this;return P.src=v.currentSrc||v.src,P.intrinsicWidth=v.naturalWidth,P.intrinsicHeight=v.naturalHeight,P.context.cache.addImage(P.src),P}return u}(Rs),Cp=function(y){ks(u,y);function u(w,v){var P=y.call(this,w,v)||this;return P.canvas=v,P.intrinsicWidth=v.width,P.intrinsicHeight=v.height,P}return u}(Rs),vp=function(y){ks(u,y);function u(w,v){var P=y.call(this,w,v)||this,N=new XMLSerializer,I=yh(w,v);return v.setAttribute("width",I.width+"px"),v.setAttribute("height",I.height+"px"),P.svg="data:image/svg+xml,"+encodeURIComponent(N.serializeToString(v)),P.intrinsicWidth=v.width.baseVal.value,P.intrinsicHeight=v.height.baseVal.value,P.context.cache.addImage(P.svg),P}return u}(Rs),Fp=function(y){ks(u,y);function u(w,v){var P=y.call(this,w,v)||this;return P.value=v.value,P}return u}(Rs),Mc=function(y){ks(u,y);function u(w,v){var P=y.call(this,w,v)||this;return P.start=v.start,P.reversed=typeof v.reversed=="boolean"&&v.reversed===!0,P}return u}(Rs),Fx=[{type:15,flags:0,unit:"px",number:3}],Sx=[{type:16,flags:0,number:50}],bx=function(y){return y.width>y.height?new ar(y.left+(y.width-y.height)/2,y.top,y.height,y.height):y.width<y.height?new ar(y.left,y.top+(y.height-y.width)/2,y.width,y.width):y},kx=function(y){var u=y.type===Mx?new Array(y.value.length+1).join(""):y.value;return u.length===0?y.placeholder||"":u},hh="checkbox",uh="radio",Mx="password",Fg=707406591,Yc=function(y){ks(u,y);function u(w,v){var P=y.call(this,w,v)||this;switch(P.type=v.type.toLowerCase(),P.checked=v.checked,P.value=kx(v),(P.type===hh||P.type===uh)&&(P.styles.backgroundColor=3739148031,P.styles.borderTopColor=P.styles.borderRightColor=P.styles.borderBottomColor=P.styles.borderLeftColor=2779096575,P.styles.borderTopWidth=P.styles.borderRightWidth=P.styles.borderBottomWidth=P.styles.borderLeftWidth=1,P.styles.borderTopStyle=P.styles.borderRightStyle=P.styles.borderBottomStyle=P.styles.borderLeftStyle=1,P.styles.backgroundClip=[0],P.styles.backgroundOrigin=[0],P.bounds=bx(P.bounds)),P.type){case hh:P.styles.borderTopRightRadius=P.styles.borderTopLeftRadius=P.styles.borderBottomRightRadius=P.styles.borderBottomLeftRadius=Fx;break;case uh:P.styles.borderTopRightRadius=P.styles.borderTopLeftRadius=P.styles.borderBottomRightRadius=P.styles.borderBottomLeftRadius=Sx;break}return P}return u}(Rs),Sp=function(y){ks(u,y);function u(w,v){var P=y.call(this,w,v)||this,N=v.options[v.selectedIndex||0];return P.value=N&&N.text||"",P}return u}(Rs),bp=function(y){ks(u,y);function u(w,v){var P=y.call(this,w,v)||this;return P.value=v.value,P}return u}(Rs),kp=function(y){ks(u,y);function u(w,v){var P=y.call(this,w,v)||this;P.src=v.src,P.width=parseInt(v.width,10)||0,P.height=parseInt(v.height,10)||0,P.backgroundColor=P.styles.backgroundColor;try{if(v.contentWindow&&v.contentWindow.document&&v.contentWindow.document.documentElement){P.tree=Pp(w,v.contentWindow.document.documentElement);var N=v.contentWindow.document.documentElement?wa(w,getComputedStyle(v.contentWindow.document.documentElement).backgroundColor):or.TRANSPARENT,I=v.contentWindow.document.body?wa(w,getComputedStyle(v.contentWindow.document.body).backgroundColor):or.TRANSPARENT;P.backgroundColor=Yr(N)?Yr(I)?P.styles.backgroundColor:I:N}}catch{}return P}return u}(Rs),Px=["OL","UL","MENU"],rh=function(y,u,w,v){for(var P=u.firstChild,N=void 0;P;P=N)if(N=P.nextSibling,Qp(P)&&P.data.trim().length>0)w.textNodes.push(new Bx(y,P,w.styles));else if(po(P))if(Ep(P)&&P.assignedNodes)P.assignedNodes().forEach(function(j){return rh(y,j,w,v)});else{var I=Mp(y,P);I.styles.isVisible()&&(Qx(P,I,v)?I.flags|=4:Ux(I.styles)&&(I.flags|=2),Px.indexOf(P.tagName)!==-1&&(I.flags|=8),w.elements.push(I),P.slot,P.shadowRoot?rh(y,P.shadowRoot,I,v):!ch(P)&&!Up(P)&&!dh(P)&&rh(y,P,I,v))}},Mp=function(y,u){return Qc(u)?new xp(y,u):Lp(u)?new Cp(y,u):Up(u)?new vp(y,u):Lx(u)?new Fp(y,u):Nx(u)?new Mc(y,u):Ex(u)?new Yc(y,u):dh(u)?new Sp(y,u):ch(u)?new bp(y,u):Np(u)?new kp(y,u):new Rs(y,u)},Pp=function(y,u){var w=Mp(y,u);return w.flags|=4,rh(y,u,w,w),w},Qx=function(y,u,w){return u.styles.isPositionedWithZIndex()||u.styles.opacity<1||u.styles.isTransformed()||jc(y)&&w.styles.isTransparent()},Ux=function(y){return y.isPositioned()||y.isFloating()},Qp=function(y){return y.nodeType===Node.TEXT_NODE},po=function(y){return y.nodeType===Node.ELEMENT_NODE},Pc=function(y){return po(y)&&typeof y.style<"u"&&!Ah(y)},Ah=function(y){return typeof y.className=="object"},Lx=function(y){return y.tagName==="LI"},Nx=function(y){return y.tagName==="OL"},Ex=function(y){return y.tagName==="INPUT"},Tx=function(y){return y.tagName==="HTML"},Up=function(y){return y.tagName==="svg"},jc=function(y){return y.tagName==="BODY"},Lp=function(y){return y.tagName==="CANVAS"},Sg=function(y){return y.tagName==="VIDEO"},Qc=function(y){return y.tagName==="IMG"},Np=function(y){return y.tagName==="IFRAME"},bg=function(y){return y.tagName==="STYLE"},Dx=function(y){return y.tagName==="SCRIPT"},ch=function(y){return y.tagName==="TEXTAREA"},dh=function(y){return y.tagName==="SELECT"},Ep=function(y){return y.tagName==="SLOT"},kg=function(y){return y.tagName.indexOf("-")>0},Ix=function(){function y(){this.counters={}}return y.prototype.getCounterValue=function(u){var w=this.counters[u];return w&&w.length?w[w.length-1]:1},y.prototype.getCounterValues=function(u){var w=this.counters[u];return w||[]},y.prototype.pop=function(u){var w=this;u.forEach(function(v){return w.counters[v].pop()})},y.prototype.parse=function(u){var w=this,v=u.counterIncrement,P=u.counterReset,N=!0;v!==null&&v.forEach(function(j){var H=w.counters[j.counter];H&&j.increment!==0&&(N=!1,H.length||H.push(1),H[Math.max(0,H.length-1)]+=j.increment)});var I=[];return N&&P.forEach(function(j){var H=w.counters[j.counter];I.push(j.counter),H||(H=w.counters[j.counter]=[]),H.push(j.reset)}),I},y}(),Mg={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Pg={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Ox={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Hx={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},ho=function(y,u,w,v,P,N){return y<u||y>w?ba(y,P,N.length>0):v.integers.reduce(function(I,j,H){for(;y>=j;)y-=j,I+=v.values[H];return I},"")+N},Tp=function(y,u,w,v){var P="";do w||y--,P=v(y)+P,y/=u;while(y*u>=u);return P},Qi=function(y,u,w,v,P){var N=w-u+1;return(y<0?"-":"")+(Tp(Math.abs(y),N,v,function(I){return Ui(Math.floor(I%N)+u)})+P)},yA=function(y,u,w){w===void 0&&(w=". ");var v=u.length;return Tp(Math.abs(y),v,!1,function(P){return u[Math.floor(P%v)]})+w},fo=1,Ir=2,Or=4,ma=8,rr=function(y,u,w,v,P,N){if(y<-9999||y>9999)return ba(y,4,P.length>0);var I=Math.abs(y),j=P;if(I===0)return u[0]+j;for(var H=0;I>0&&H<=4;H++){var tt=I%10;tt===0&&Xi(N,fo)&&j!==""?j=u[tt]+j:tt>1||tt===1&&H===0||tt===1&&H===1&&Xi(N,Ir)||tt===1&&H===1&&Xi(N,Or)&&y>100||tt===1&&H>1&&Xi(N,ma)?j=u[tt]+(H>0?w[H-1]:"")+j:tt===1&&H>0&&(j=w[H-1]+j),I=Math.floor(I/10)}return(y<0?v:"")+j},Qg="",Ug="",Lg="",sc="",ba=function(y,u,w){var v=w?". ":"",P=w?"":"",N=w?", ":"",I=w?" ":"";switch(u){case 0:return""+I;case 1:return""+I;case 2:return""+I;case 5:var j=Qi(y,48,57,!0,v);return j.length<4?"0"+j:j;case 4:return yA(y,"",P);case 6:return ho(y,1,3999,Mg,3,v).toLowerCase();case 7:return ho(y,1,3999,Mg,3,v);case 8:return Qi(y,945,969,!1,v);case 9:return Qi(y,97,122,!1,v);case 10:return Qi(y,65,90,!1,v);case 11:return Qi(y,1632,1641,!0,v);case 12:case 49:return ho(y,1,9999,Pg,3,v);case 35:return ho(y,1,9999,Pg,3,v).toLowerCase();case 13:return Qi(y,2534,2543,!0,v);case 14:case 30:return Qi(y,6112,6121,!0,v);case 15:return yA(y,"",P);case 16:return yA(y,"",P);case 17:case 48:return rr(y,"",Qg,"",P,Ir|Or|ma);case 47:return rr(y,"",Ug,"",P,fo|Ir|Or|ma);case 42:return rr(y,"",Qg,"",P,Ir|Or|ma);case 41:return rr(y,"",Ug,"",P,fo|Ir|Or|ma);case 26:return rr(y,"","",Lg,P,0);case 25:return rr(y,"","",Lg,P,fo|Ir|Or);case 31:return rr(y,"","",sc,N,fo|Ir|Or);case 33:return rr(y,"","",sc,N,0);case 32:return rr(y,"","",sc,N,fo|Ir|Or);case 18:return Qi(y,2406,2415,!0,v);case 20:return ho(y,1,19999,Hx,3,v);case 21:return Qi(y,2790,2799,!0,v);case 22:return Qi(y,2662,2671,!0,v);case 22:return ho(y,1,10999,Ox,3,v);case 23:return yA(y,"");case 24:return yA(y,"");case 27:return Qi(y,3302,3311,!0,v);case 28:return yA(y,"",P);case 29:return yA(y,"",P);case 34:return Qi(y,3792,3801,!0,v);case 37:return Qi(y,6160,6169,!0,v);case 38:return Qi(y,4160,4169,!0,v);case 39:return Qi(y,2918,2927,!0,v);case 40:return Qi(y,1776,1785,!0,v);case 43:return Qi(y,3046,3055,!0,v);case 44:return Qi(y,3174,3183,!0,v);case 45:return Qi(y,3664,3673,!0,v);case 46:return Qi(y,3872,3881,!0,v);case 3:default:return Qi(y,48,57,!0,v)}},Dp="data-html2canvas-ignore",Ng=function(){function y(u,w,v){if(this.context=u,this.options=v,this.scrolledElements=[],this.referenceElement=w,this.counters=new Ix,this.quoteDepth=0,!w.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(w.ownerDocument.documentElement,!1)}return y.prototype.toIFrame=function(u,w){var v=this,P=Rx(u,w);if(!P.contentWindow)return Promise.reject("Unable to find iframe window");var N=u.defaultView.pageXOffset,I=u.defaultView.pageYOffset,j=P.contentWindow,H=j.document,tt=Gx(P).then(function(){return Sn(v,void 0,void 0,function(){var X,st;return cn(this,function(lt){switch(lt.label){case 0:return this.scrolledElements.forEach(jx),j&&(j.scrollTo(w.left,w.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(j.scrollY!==w.top||j.scrollX!==w.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(j.scrollX-w.left,j.scrollY-w.top,0,0))),X=this.options.onclone,st=this.clonedReferenceElement,typeof st>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:H.fonts&&H.fonts.ready?[4,H.fonts.ready]:[3,2];case 1:lt.sent(),lt.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Vx(H)]:[3,4];case 3:lt.sent(),lt.label=4;case 4:return typeof X=="function"?[2,Promise.resolve().then(function(){return X(H,st)}).then(function(){return P})]:[2,P]}})})});return H.open(),H.write(zx(document.doctype)+"<html></html>"),Yx(this.referenceElement.ownerDocument,N,I),H.replaceChild(H.adoptNode(this.documentElement),H.documentElement),H.close(),tt},y.prototype.createElementClone=function(u){if(bc(u,2))debugger;if(Lp(u))return this.createCanvasClone(u);if(Sg(u))return this.createVideoClone(u);if(bg(u))return this.createStyleClone(u);var w=u.cloneNode(!1);return Qc(w)&&(Qc(u)&&u.currentSrc&&u.currentSrc!==u.src&&(w.src=u.currentSrc,w.srcset=""),w.loading==="lazy"&&(w.loading="eager")),kg(w)?this.createCustomElementClone(w):w},y.prototype.createCustomElementClone=function(u){var w=document.createElement("html2canvascustomelement");return rc(u.style,w),w},y.prototype.createStyleClone=function(u){try{var w=u.sheet;if(w&&w.cssRules){var v=[].slice.call(w.cssRules,0).reduce(function(N,I){return I&&typeof I.cssText=="string"?N+I.cssText:N},""),P=u.cloneNode(!1);return P.textContent=v,P}}catch(N){if(this.context.logger.error("Unable to access cssRules property",N),N.name!=="SecurityError")throw N}return u.cloneNode(!1)},y.prototype.createCanvasClone=function(u){var w;if(this.options.inlineImages&&u.ownerDocument){var v=u.ownerDocument.createElement("img");try{return v.src=u.toDataURL(),v}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",u)}}var P=u.cloneNode(!1);try{P.width=u.width,P.height=u.height;var N=u.getContext("2d"),I=P.getContext("2d");if(I)if(!this.options.allowTaint&&N)I.putImageData(N.getImageData(0,0,u.width,u.height),0,0);else{var j=(w=u.getContext("webgl2"))!==null&&w!==void 0?w:u.getContext("webgl");if(j){var H=j.getContextAttributes();(H==null?void 0:H.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",u)}I.drawImage(u,0,0)}return P}catch{this.context.logger.info("Unable to clone canvas as it is tainted",u)}return P},y.prototype.createVideoClone=function(u){var w=u.ownerDocument.createElement("canvas");w.width=u.offsetWidth,w.height=u.offsetHeight;var v=w.getContext("2d");try{return v&&(v.drawImage(u,0,0,w.width,w.height),this.options.allowTaint||v.getImageData(0,0,w.width,w.height)),w}catch{this.context.logger.info("Unable to clone video as it is tainted",u)}var P=u.ownerDocument.createElement("canvas");return P.width=u.offsetWidth,P.height=u.offsetHeight,P},y.prototype.appendChildNode=function(u,w,v){(!po(w)||!Dx(w)&&!w.hasAttribute(Dp)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(w)))&&(!this.options.copyStyles||!po(w)||!bg(w))&&u.appendChild(this.cloneNode(w,v))},y.prototype.cloneChildNodes=function(u,w,v){for(var P=this,N=u.shadowRoot?u.shadowRoot.firstChild:u.firstChild;N;N=N.nextSibling)if(po(N)&&Ep(N)&&typeof N.assignedNodes=="function"){var I=N.assignedNodes();I.length&&I.forEach(function(j){return P.appendChildNode(w,j,v)})}else this.appendChildNode(w,N,v)},y.prototype.cloneNode=function(u,w){if(Qp(u))return document.createTextNode(u.data);if(!u.ownerDocument)return u.cloneNode(!1);var v=u.ownerDocument.defaultView;if(v&&po(u)&&(Pc(u)||Ah(u))){var P=this.createElementClone(u);P.style.transitionProperty="none";var N=v.getComputedStyle(u),I=v.getComputedStyle(u,":before"),j=v.getComputedStyle(u,":after");this.referenceElement===u&&Pc(P)&&(this.clonedReferenceElement=P),jc(P)&&qx(P);var H=this.counters.parse(new hg(this.context,N)),tt=this.resolvePseudoContent(u,P,I,Ca.BEFORE);kg(u)&&(w=!0),Sg(u)||this.cloneChildNodes(u,P,w),tt&&P.insertBefore(tt,P.firstChild);var X=this.resolvePseudoContent(u,P,j,Ca.AFTER);return X&&P.appendChild(X),this.counters.pop(H),(N&&(this.options.copyStyles||Ah(u))&&!Np(u)||w)&&rc(N,P),(u.scrollTop!==0||u.scrollLeft!==0)&&this.scrolledElements.push([P,u.scrollLeft,u.scrollTop]),(ch(u)||dh(u))&&(ch(P)||dh(P))&&(P.value=u.value),P}return u.cloneNode(!1)},y.prototype.resolvePseudoContent=function(u,w,v,P){var N=this;if(v){var I=v.content,j=w.ownerDocument;if(!(!j||!I||I==="none"||I==="-moz-alt-content"||v.display==="none")){this.counters.parse(new hg(this.context,v));var H=new LB(this.context,v),tt=j.createElement("html2canvaspseudoelement");rc(v,tt),H.content.forEach(function(st){if(st.type===0)tt.appendChild(j.createTextNode(st.value));else if(st.type===22){var lt=j.createElement("img");lt.src=st.value,lt.style.opacity="1",tt.appendChild(lt)}else if(st.type===18){if(st.name==="attr"){var Lt=st.values.filter(ri);Lt.length&&tt.appendChild(j.createTextNode(u.getAttribute(Lt[0].value)||""))}else if(st.name==="counter"){var vt=st.values.filter(wo),bt=vt[0],xt=vt[1];if(bt&&ri(bt)){var T=N.counters.getCounterValue(bt.value),ct=xt&&ri(xt)?Sc.parse(N.context,xt.value):3;tt.appendChild(j.createTextNode(ba(T,ct,!1)))}}else if(st.name==="counters"){var it=st.values.filter(wo),bt=it[0],Rt=it[1],xt=it[2];if(bt&&ri(bt)){var q=N.counters.getCounterValues(bt.value),Bt=xt&&ri(xt)?Sc.parse(N.context,xt.value):3,V=Rt&&Rt.type===0?Rt.value:"",me=q.map(function(ve){return ba(ve,Bt,!1)}).join(V);tt.appendChild(j.createTextNode(me))}}}else if(st.type===20)switch(st.value){case"open-quote":tt.appendChild(j.createTextNode(lg(H.quotes,N.quoteDepth++,!0)));break;case"close-quote":tt.appendChild(j.createTextNode(lg(H.quotes,--N.quoteDepth,!1)));break;default:tt.appendChild(j.createTextNode(st.value))}}),tt.className=Uc+" "+Lc;var X=P===Ca.BEFORE?" "+Uc:" "+Lc;return Ah(w)?w.className.baseValue+=X:w.className+=X,tt}}},y.destroy=function(u){return u.parentNode?(u.parentNode.removeChild(u),!0):!1},y}(),Ca;(function(y){y[y.BEFORE=0]="BEFORE",y[y.AFTER=1]="AFTER"})(Ca||(Ca={}));var Rx=function(y,u){var w=y.createElement("iframe");return w.className="html2canvas-container",w.style.visibility="hidden",w.style.position="fixed",w.style.left="-10000px",w.style.top="0px",w.style.border="0",w.width=u.width.toString(),w.height=u.height.toString(),w.scrolling="no",w.setAttribute(Dp,"true"),y.body.appendChild(w),w},Kx=function(y){return new Promise(function(u){if(y.complete){u();return}if(!y.src){u();return}y.onload=u,y.onerror=u})},Vx=function(y){return Promise.all([].slice.call(y.images,0).map(Kx))},Gx=function(y){return new Promise(function(u,w){var v=y.contentWindow;if(!v)return w("No window assigned for iframe");var P=v.document;v.onload=y.onload=function(){v.onload=y.onload=null;var N=setInterval(function(){P.body.childNodes.length>0&&P.readyState==="complete"&&(clearInterval(N),u(y))},50)}})},Xx=["all","d","content"],rc=function(y,u){for(var w=y.length-1;w>=0;w--){var v=y.item(w);Xx.indexOf(v)===-1&&u.style.setProperty(v,y.getPropertyValue(v))}return u},zx=function(y){var u="";return y&&(u+="<!DOCTYPE ",y.name&&(u+=y.name),y.internalSubset&&(u+=y.internalSubset),y.publicId&&(u+='"'+y.publicId+'"'),y.systemId&&(u+='"'+y.systemId+'"'),u+=">"),u},Yx=function(y,u,w){y&&y.defaultView&&(u!==y.defaultView.pageXOffset||w!==y.defaultView.pageYOffset)&&y.defaultView.scrollTo(u,w)},jx=function(y){var u=y[0],w=y[1],v=y[2];u.scrollLeft=w,u.scrollTop=v},Wx=":before",Jx=":after",Uc="___html2canvas___pseudoelement_before",Lc="___html2canvas___pseudoelement_after",Eg=`{
    content: "" !important;
    display: none !important;
}`,qx=function(y){Zx(y,"."+Uc+Wx+Eg+`
         .`+Lc+Jx+Eg)},Zx=function(y,u){var w=y.ownerDocument;if(w){var v=w.createElement("style");v.textContent=u,y.appendChild(v)}},Ip=function(){function y(){}return y.getOrigin=function(u){var w=y._link;return w?(w.href=u,w.href=w.href,w.protocol+w.hostname+w.port):"about:blank"},y.isSameOrigin=function(u){return y.getOrigin(u)===y._origin},y.setContext=function(u){y._link=u.document.createElement("a"),y._origin=y.getOrigin(u.location.href)},y._origin="about:blank",y}(),$x=function(){function y(u,w){this.context=u,this._options=w,this._cache={}}return y.prototype.addImage=function(u){var w=Promise.resolve();return this.has(u)||(oc(u)||iC(u))&&(this._cache[u]=this.loadImage(u)).catch(function(){}),w},y.prototype.match=function(u){return this._cache[u]},y.prototype.loadImage=function(u){return Sn(this,void 0,void 0,function(){var w,v,P,N,I=this;return cn(this,function(j){switch(j.label){case 0:return w=Ip.isSameOrigin(u),v=!Ac(u)&&this._options.useCORS===!0&&en.SUPPORT_CORS_IMAGES&&!w,P=!Ac(u)&&!w&&!oc(u)&&typeof this._options.proxy=="string"&&en.SUPPORT_CORS_XHR&&!v,!w&&this._options.allowTaint===!1&&!Ac(u)&&!oc(u)&&!P&&!v?[2]:(N=u,P?[4,this.proxy(N)]:[3,2]);case 1:N=j.sent(),j.label=2;case 2:return this.context.logger.debug("Added image "+u.substring(0,256)),[4,new Promise(function(H,tt){var X=new Image;X.onload=function(){return H(X)},X.onerror=tt,(nC(N)||v)&&(X.crossOrigin="anonymous"),X.src=N,X.complete===!0&&setTimeout(function(){return H(X)},500),I._options.imageTimeout>0&&setTimeout(function(){return tt("Timed out ("+I._options.imageTimeout+"ms) loading image")},I._options.imageTimeout)})];case 3:return[2,j.sent()]}})})},y.prototype.has=function(u){return typeof this._cache[u]<"u"},y.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},y.prototype.proxy=function(u){var w=this,v=this._options.proxy;if(!v)throw new Error("No proxy defined");var P=u.substring(0,256);return new Promise(function(N,I){var j=en.SUPPORT_RESPONSE_TYPE?"blob":"text",H=new XMLHttpRequest;H.onload=function(){if(H.status===200)if(j==="text")N(H.response);else{var st=new FileReader;st.addEventListener("load",function(){return N(st.result)},!1),st.addEventListener("error",function(lt){return I(lt)},!1),st.readAsDataURL(H.response)}else I("Failed to proxy resource "+P+" with status code "+H.status)},H.onerror=I;var tt=v.indexOf("?")>-1?"&":"?";if(H.open("GET",""+v+tt+"url="+encodeURIComponent(u)+"&responseType="+j),j!=="text"&&H instanceof XMLHttpRequest&&(H.responseType=j),w._options.imageTimeout){var X=w._options.imageTimeout;H.timeout=X,H.ontimeout=function(){return I("Timed out ("+X+"ms) proxying "+P)}}H.send()})},y}(),_x=/^data:image\/svg\+xml/i,tC=/^data:image\/.*;base64,/i,eC=/^data:image\/.*/i,iC=function(y){return en.SUPPORT_SVG_DRAWING||!sC(y)},Ac=function(y){return eC.test(y)},nC=function(y){return tC.test(y)},oc=function(y){return y.substr(0,4)==="blob"},sC=function(y){return y.substr(-3).toLowerCase()==="svg"||_x.test(y)},_t=function(){function y(u,w){this.type=0,this.x=u,this.y=w}return y.prototype.add=function(u,w){return new y(this.x+u,this.y+w)},y}(),uo=function(y,u,w){return new _t(y.x+(u.x-y.x)*w,y.y+(u.y-y.y)*w)},_l=function(){function y(u,w,v,P){this.type=1,this.start=u,this.startControl=w,this.endControl=v,this.end=P}return y.prototype.subdivide=function(u,w){var v=uo(this.start,this.startControl,u),P=uo(this.startControl,this.endControl,u),N=uo(this.endControl,this.end,u),I=uo(v,P,u),j=uo(P,N,u),H=uo(I,j,u);return w?new y(this.start,v,I,H):new y(H,j,N,this.end)},y.prototype.add=function(u,w){return new y(this.start.add(u,w),this.startControl.add(u,w),this.endControl.add(u,w),this.end.add(u,w))},y.prototype.reverse=function(){return new y(this.end,this.endControl,this.startControl,this.start)},y}(),as=function(y){return y.type===1},rC=function(){function y(u){var w=u.styles,v=u.bounds,P=ga(w.borderTopLeftRadius,v.width,v.height),N=P[0],I=P[1],j=ga(w.borderTopRightRadius,v.width,v.height),H=j[0],tt=j[1],X=ga(w.borderBottomRightRadius,v.width,v.height),st=X[0],lt=X[1],Lt=ga(w.borderBottomLeftRadius,v.width,v.height),vt=Lt[0],bt=Lt[1],xt=[];xt.push((N+H)/v.width),xt.push((vt+st)/v.width),xt.push((I+bt)/v.height),xt.push((tt+lt)/v.height);var T=Math.max.apply(Math,xt);T>1&&(N/=T,I/=T,H/=T,tt/=T,st/=T,lt/=T,vt/=T,bt/=T);var ct=v.width-H,it=v.height-lt,Rt=v.width-st,q=v.height-bt,Bt=w.borderTopWidth,V=w.borderRightWidth,me=w.borderBottomWidth,fe=w.borderLeftWidth,Jt=fi(w.paddingTop,u.bounds.width),ve=fi(w.paddingRight,u.bounds.width),$e=fi(w.paddingBottom,u.bounds.width),Nt=fi(w.paddingLeft,u.bounds.width);this.topLeftBorderDoubleOuterBox=N>0||I>0?yi(v.left+fe/3,v.top+Bt/3,N-fe/3,I-Bt/3,ni.TOP_LEFT):new _t(v.left+fe/3,v.top+Bt/3),this.topRightBorderDoubleOuterBox=N>0||I>0?yi(v.left+ct,v.top+Bt/3,H-V/3,tt-Bt/3,ni.TOP_RIGHT):new _t(v.left+v.width-V/3,v.top+Bt/3),this.bottomRightBorderDoubleOuterBox=st>0||lt>0?yi(v.left+Rt,v.top+it,st-V/3,lt-me/3,ni.BOTTOM_RIGHT):new _t(v.left+v.width-V/3,v.top+v.height-me/3),this.bottomLeftBorderDoubleOuterBox=vt>0||bt>0?yi(v.left+fe/3,v.top+q,vt-fe/3,bt-me/3,ni.BOTTOM_LEFT):new _t(v.left+fe/3,v.top+v.height-me/3),this.topLeftBorderDoubleInnerBox=N>0||I>0?yi(v.left+fe*2/3,v.top+Bt*2/3,N-fe*2/3,I-Bt*2/3,ni.TOP_LEFT):new _t(v.left+fe*2/3,v.top+Bt*2/3),this.topRightBorderDoubleInnerBox=N>0||I>0?yi(v.left+ct,v.top+Bt*2/3,H-V*2/3,tt-Bt*2/3,ni.TOP_RIGHT):new _t(v.left+v.width-V*2/3,v.top+Bt*2/3),this.bottomRightBorderDoubleInnerBox=st>0||lt>0?yi(v.left+Rt,v.top+it,st-V*2/3,lt-me*2/3,ni.BOTTOM_RIGHT):new _t(v.left+v.width-V*2/3,v.top+v.height-me*2/3),this.bottomLeftBorderDoubleInnerBox=vt>0||bt>0?yi(v.left+fe*2/3,v.top+q,vt-fe*2/3,bt-me*2/3,ni.BOTTOM_LEFT):new _t(v.left+fe*2/3,v.top+v.height-me*2/3),this.topLeftBorderStroke=N>0||I>0?yi(v.left+fe/2,v.top+Bt/2,N-fe/2,I-Bt/2,ni.TOP_LEFT):new _t(v.left+fe/2,v.top+Bt/2),this.topRightBorderStroke=N>0||I>0?yi(v.left+ct,v.top+Bt/2,H-V/2,tt-Bt/2,ni.TOP_RIGHT):new _t(v.left+v.width-V/2,v.top+Bt/2),this.bottomRightBorderStroke=st>0||lt>0?yi(v.left+Rt,v.top+it,st-V/2,lt-me/2,ni.BOTTOM_RIGHT):new _t(v.left+v.width-V/2,v.top+v.height-me/2),this.bottomLeftBorderStroke=vt>0||bt>0?yi(v.left+fe/2,v.top+q,vt-fe/2,bt-me/2,ni.BOTTOM_LEFT):new _t(v.left+fe/2,v.top+v.height-me/2),this.topLeftBorderBox=N>0||I>0?yi(v.left,v.top,N,I,ni.TOP_LEFT):new _t(v.left,v.top),this.topRightBorderBox=H>0||tt>0?yi(v.left+ct,v.top,H,tt,ni.TOP_RIGHT):new _t(v.left+v.width,v.top),this.bottomRightBorderBox=st>0||lt>0?yi(v.left+Rt,v.top+it,st,lt,ni.BOTTOM_RIGHT):new _t(v.left+v.width,v.top+v.height),this.bottomLeftBorderBox=vt>0||bt>0?yi(v.left,v.top+q,vt,bt,ni.BOTTOM_LEFT):new _t(v.left,v.top+v.height),this.topLeftPaddingBox=N>0||I>0?yi(v.left+fe,v.top+Bt,Math.max(0,N-fe),Math.max(0,I-Bt),ni.TOP_LEFT):new _t(v.left+fe,v.top+Bt),this.topRightPaddingBox=H>0||tt>0?yi(v.left+Math.min(ct,v.width-V),v.top+Bt,ct>v.width+V?0:Math.max(0,H-V),Math.max(0,tt-Bt),ni.TOP_RIGHT):new _t(v.left+v.width-V,v.top+Bt),this.bottomRightPaddingBox=st>0||lt>0?yi(v.left+Math.min(Rt,v.width-fe),v.top+Math.min(it,v.height-me),Math.max(0,st-V),Math.max(0,lt-me),ni.BOTTOM_RIGHT):new _t(v.left+v.width-V,v.top+v.height-me),this.bottomLeftPaddingBox=vt>0||bt>0?yi(v.left+fe,v.top+Math.min(q,v.height-me),Math.max(0,vt-fe),Math.max(0,bt-me),ni.BOTTOM_LEFT):new _t(v.left+fe,v.top+v.height-me),this.topLeftContentBox=N>0||I>0?yi(v.left+fe+Nt,v.top+Bt+Jt,Math.max(0,N-(fe+Nt)),Math.max(0,I-(Bt+Jt)),ni.TOP_LEFT):new _t(v.left+fe+Nt,v.top+Bt+Jt),this.topRightContentBox=H>0||tt>0?yi(v.left+Math.min(ct,v.width+fe+Nt),v.top+Bt+Jt,ct>v.width+fe+Nt?0:H-fe+Nt,tt-(Bt+Jt),ni.TOP_RIGHT):new _t(v.left+v.width-(V+ve),v.top+Bt+Jt),this.bottomRightContentBox=st>0||lt>0?yi(v.left+Math.min(Rt,v.width-(fe+Nt)),v.top+Math.min(it,v.height+Bt+Jt),Math.max(0,st-(V+ve)),lt-(me+$e),ni.BOTTOM_RIGHT):new _t(v.left+v.width-(V+ve),v.top+v.height-(me+$e)),this.bottomLeftContentBox=vt>0||bt>0?yi(v.left+fe+Nt,v.top+q,Math.max(0,vt-(fe+Nt)),bt-(me+$e),ni.BOTTOM_LEFT):new _t(v.left+fe+Nt,v.top+v.height-(me+$e))}return y}(),ni;(function(y){y[y.TOP_LEFT=0]="TOP_LEFT",y[y.TOP_RIGHT=1]="TOP_RIGHT",y[y.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",y[y.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(ni||(ni={}));var yi=function(y,u,w,v,P){var N=4*((Math.sqrt(2)-1)/3),I=w*N,j=v*N,H=y+w,tt=u+v;switch(P){case ni.TOP_LEFT:return new _l(new _t(y,tt),new _t(y,tt-j),new _t(H-I,u),new _t(H,u));case ni.TOP_RIGHT:return new _l(new _t(y,u),new _t(y+I,u),new _t(H,tt-j),new _t(H,tt));case ni.BOTTOM_RIGHT:return new _l(new _t(H,u),new _t(H,u+j),new _t(y+I,tt),new _t(y,tt));case ni.BOTTOM_LEFT:default:return new _l(new _t(H,tt),new _t(H-I,tt),new _t(y,u+j),new _t(y,u))}},fh=function(y){return[y.topLeftBorderBox,y.topRightBorderBox,y.bottomRightBorderBox,y.bottomLeftBorderBox]},AC=function(y){return[y.topLeftContentBox,y.topRightContentBox,y.bottomRightContentBox,y.bottomLeftContentBox]},gh=function(y){return[y.topLeftPaddingBox,y.topRightPaddingBox,y.bottomRightPaddingBox,y.bottomLeftPaddingBox]},oC=function(){function y(u,w,v){this.offsetX=u,this.offsetY=w,this.matrix=v,this.type=0,this.target=6}return y}(),th=function(){function y(u,w){this.path=u,this.target=w,this.type=1}return y}(),aC=function(){function y(u){this.opacity=u,this.type=2,this.target=6}return y}(),lC=function(y){return y.type===0},Op=function(y){return y.type===1},hC=function(y){return y.type===2},Tg=function(y,u){return y.length===u.length?y.some(function(w,v){return w===u[v]}):!1},uC=function(y,u,w,v,P){return y.map(function(N,I){switch(I){case 0:return N.add(u,w);case 1:return N.add(u+v,w);case 2:return N.add(u+v,w+P);case 3:return N.add(u,w+P)}return N})},Hp=function(){function y(u){this.element=u,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return y}(),Rp=function(){function y(u,w){if(this.container=u,this.parent=w,this.effects=[],this.curves=new rC(this.container),this.container.styles.opacity<1&&this.effects.push(new aC(this.container.styles.opacity)),this.container.styles.transform!==null){var v=this.container.bounds.left+this.container.styles.transformOrigin[0].number,P=this.container.bounds.top+this.container.styles.transformOrigin[1].number,N=this.container.styles.transform;this.effects.push(new oC(v,P,N))}if(this.container.styles.overflowX!==0){var I=fh(this.curves),j=gh(this.curves);Tg(I,j)?this.effects.push(new th(I,6)):(this.effects.push(new th(I,2)),this.effects.push(new th(j,4)))}}return y.prototype.getEffects=function(u){for(var w=[2,3].indexOf(this.container.styles.position)===-1,v=this.parent,P=this.effects.slice(0);v;){var N=v.effects.filter(function(H){return!Op(H)});if(w||v.container.styles.position!==0||!v.parent){if(P.unshift.apply(P,N),w=[2,3].indexOf(v.container.styles.position)===-1,v.container.styles.overflowX!==0){var I=fh(v.curves),j=gh(v.curves);Tg(I,j)||P.unshift(new th(j,6))}}else P.unshift.apply(P,N);v=v.parent}return P.filter(function(H){return Xi(H.target,u)})},y}(),Nc=function(y,u,w,v){y.container.elements.forEach(function(P){var N=Xi(P.flags,4),I=Xi(P.flags,2),j=new Rp(P,y);Xi(P.styles.display,2048)&&v.push(j);var H=Xi(P.flags,8)?[]:v;if(N||I){var tt=N||P.styles.isPositioned()?w:u,X=new Hp(j);if(P.styles.isPositioned()||P.styles.opacity<1||P.styles.isTransformed()){var st=P.styles.zIndex.order;if(st<0){var lt=0;tt.negativeZIndex.some(function(vt,bt){return st>vt.element.container.styles.zIndex.order?(lt=bt,!1):lt>0}),tt.negativeZIndex.splice(lt,0,X)}else if(st>0){var Lt=0;tt.positiveZIndex.some(function(vt,bt){return st>=vt.element.container.styles.zIndex.order?(Lt=bt+1,!1):Lt>0}),tt.positiveZIndex.splice(Lt,0,X)}else tt.zeroOrAutoZIndexOrTransformedOrOpacity.push(X)}else P.styles.isFloating()?tt.nonPositionedFloats.push(X):tt.nonPositionedInlineLevel.push(X);Nc(j,X,N?X:w,H)}else P.styles.isInlineLevel()?u.inlineLevel.push(j):u.nonInlineLevel.push(j),Nc(j,u,w,H);Xi(P.flags,8)&&Kp(P,H)})},Kp=function(y,u){for(var w=y instanceof Mc?y.start:1,v=y instanceof Mc?y.reversed:!1,P=0;P<u.length;P++){var N=u[P];N.container instanceof Fp&&typeof N.container.value=="number"&&N.container.value!==0&&(w=N.container.value),N.listValue=ba(w,N.container.styles.listStyleType,!0),w+=v?-1:1}},cC=function(y){var u=new Rp(y,null),w=new Hp(u),v=[];return Nc(u,w,w,v),Kp(u.container,v),w},Dg=function(y,u){switch(u){case 0:return hs(y.topLeftBorderBox,y.topLeftPaddingBox,y.topRightBorderBox,y.topRightPaddingBox);case 1:return hs(y.topRightBorderBox,y.topRightPaddingBox,y.bottomRightBorderBox,y.bottomRightPaddingBox);case 2:return hs(y.bottomRightBorderBox,y.bottomRightPaddingBox,y.bottomLeftBorderBox,y.bottomLeftPaddingBox);case 3:default:return hs(y.bottomLeftBorderBox,y.bottomLeftPaddingBox,y.topLeftBorderBox,y.topLeftPaddingBox)}},dC=function(y,u){switch(u){case 0:return hs(y.topLeftBorderBox,y.topLeftBorderDoubleOuterBox,y.topRightBorderBox,y.topRightBorderDoubleOuterBox);case 1:return hs(y.topRightBorderBox,y.topRightBorderDoubleOuterBox,y.bottomRightBorderBox,y.bottomRightBorderDoubleOuterBox);case 2:return hs(y.bottomRightBorderBox,y.bottomRightBorderDoubleOuterBox,y.bottomLeftBorderBox,y.bottomLeftBorderDoubleOuterBox);case 3:default:return hs(y.bottomLeftBorderBox,y.bottomLeftBorderDoubleOuterBox,y.topLeftBorderBox,y.topLeftBorderDoubleOuterBox)}},fC=function(y,u){switch(u){case 0:return hs(y.topLeftBorderDoubleInnerBox,y.topLeftPaddingBox,y.topRightBorderDoubleInnerBox,y.topRightPaddingBox);case 1:return hs(y.topRightBorderDoubleInnerBox,y.topRightPaddingBox,y.bottomRightBorderDoubleInnerBox,y.bottomRightPaddingBox);case 2:return hs(y.bottomRightBorderDoubleInnerBox,y.bottomRightPaddingBox,y.bottomLeftBorderDoubleInnerBox,y.bottomLeftPaddingBox);case 3:default:return hs(y.bottomLeftBorderDoubleInnerBox,y.bottomLeftPaddingBox,y.topLeftBorderDoubleInnerBox,y.topLeftPaddingBox)}},gC=function(y,u){switch(u){case 0:return eh(y.topLeftBorderStroke,y.topRightBorderStroke);case 1:return eh(y.topRightBorderStroke,y.bottomRightBorderStroke);case 2:return eh(y.bottomRightBorderStroke,y.bottomLeftBorderStroke);case 3:default:return eh(y.bottomLeftBorderStroke,y.topLeftBorderStroke)}},eh=function(y,u){var w=[];return as(y)?w.push(y.subdivide(.5,!1)):w.push(y),as(u)?w.push(u.subdivide(.5,!0)):w.push(u),w},hs=function(y,u,w,v){var P=[];return as(y)?P.push(y.subdivide(.5,!1)):P.push(y),as(w)?P.push(w.subdivide(.5,!0)):P.push(w),as(v)?P.push(v.subdivide(.5,!0).reverse()):P.push(v),as(u)?P.push(u.subdivide(.5,!1).reverse()):P.push(u),P},Vp=function(y){var u=y.bounds,w=y.styles;return u.add(w.borderLeftWidth,w.borderTopWidth,-(w.borderRightWidth+w.borderLeftWidth),-(w.borderTopWidth+w.borderBottomWidth))},ph=function(y){var u=y.styles,w=y.bounds,v=fi(u.paddingLeft,w.width),P=fi(u.paddingRight,w.width),N=fi(u.paddingTop,w.width),I=fi(u.paddingBottom,w.width);return w.add(v+u.borderLeftWidth,N+u.borderTopWidth,-(u.borderRightWidth+u.borderLeftWidth+v+P),-(u.borderTopWidth+u.borderBottomWidth+N+I))},pC=function(y,u){return y===0?u.bounds:y===2?ph(u):Vp(u)},mC=function(y,u){return y===0?u.bounds:y===2?ph(u):Vp(u)},ac=function(y,u,w){var v=pC(go(y.styles.backgroundOrigin,u),y),P=mC(go(y.styles.backgroundClip,u),y),N=yC(go(y.styles.backgroundSize,u),w,v),I=N[0],j=N[1],H=ga(go(y.styles.backgroundPosition,u),v.width-I,v.height-j),tt=wC(go(y.styles.backgroundRepeat,u),H,N,v,P),X=Math.round(v.left+H[0]),st=Math.round(v.top+H[1]);return[tt,X,st,I,j]},co=function(y){return ri(y)&&y.value===mo.AUTO},ih=function(y){return typeof y=="number"},yC=function(y,u,w){var v=u[0],P=u[1],N=u[2],I=y[0],j=y[1];if(!I)return[0,0];if(Oi(I)&&j&&Oi(j))return[fi(I,w.width),fi(j,w.height)];var H=ih(N);if(ri(I)&&(I.value===mo.CONTAIN||I.value===mo.COVER)){if(ih(N)){var tt=w.width/w.height;return tt<N!=(I.value===mo.COVER)?[w.width,w.width/N]:[w.height*N,w.height]}return[w.width,w.height]}var X=ih(v),st=ih(P),lt=X||st;if(co(I)&&(!j||co(j))){if(X&&st)return[v,P];if(!H&&!lt)return[w.width,w.height];if(lt&&H){var Lt=X?v:P*N,vt=st?P:v/N;return[Lt,vt]}var bt=X?v:w.width,xt=st?P:w.height;return[bt,xt]}if(H){var T=0,ct=0;return Oi(I)?T=fi(I,w.width):Oi(j)&&(ct=fi(j,w.height)),co(I)?T=ct*N:(!j||co(j))&&(ct=T/N),[T,ct]}var it=null,Rt=null;if(Oi(I)?it=fi(I,w.width):j&&Oi(j)&&(Rt=fi(j,w.height)),it!==null&&(!j||co(j))&&(Rt=X&&st?it/v*P:w.height),Rt!==null&&co(I)&&(it=X&&st?Rt/P*v:w.width),it!==null&&Rt!==null)return[it,Rt];throw new Error("Unable to calculate background-size for element")},go=function(y,u){var w=y[u];return typeof w>"u"?y[0]:w},wC=function(y,u,w,v,P){var N=u[0],I=u[1],j=w[0],H=w[1];switch(y){case 2:return[new _t(Math.round(v.left),Math.round(v.top+I)),new _t(Math.round(v.left+v.width),Math.round(v.top+I)),new _t(Math.round(v.left+v.width),Math.round(H+v.top+I)),new _t(Math.round(v.left),Math.round(H+v.top+I))];case 3:return[new _t(Math.round(v.left+N),Math.round(v.top)),new _t(Math.round(v.left+N+j),Math.round(v.top)),new _t(Math.round(v.left+N+j),Math.round(v.height+v.top)),new _t(Math.round(v.left+N),Math.round(v.height+v.top))];case 1:return[new _t(Math.round(v.left+N),Math.round(v.top+I)),new _t(Math.round(v.left+N+j),Math.round(v.top+I)),new _t(Math.round(v.left+N+j),Math.round(v.top+I+H)),new _t(Math.round(v.left+N),Math.round(v.top+I+H))];default:return[new _t(Math.round(P.left),Math.round(P.top)),new _t(Math.round(P.left+P.width),Math.round(P.top)),new _t(Math.round(P.left+P.width),Math.round(P.height+P.top)),new _t(Math.round(P.left),Math.round(P.height+P.top))]}},BC="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Ig="Hidden Text",xC=function(){function y(u){this._data={},this._document=u}return y.prototype.parseMetrics=function(u,w){var v=this._document.createElement("div"),P=this._document.createElement("img"),N=this._document.createElement("span"),I=this._document.body;v.style.visibility="hidden",v.style.fontFamily=u,v.style.fontSize=w,v.style.margin="0",v.style.padding="0",v.style.whiteSpace="nowrap",I.appendChild(v),P.src=BC,P.width=1,P.height=1,P.style.margin="0",P.style.padding="0",P.style.verticalAlign="baseline",N.style.fontFamily=u,N.style.fontSize=w,N.style.margin="0",N.style.padding="0",N.appendChild(this._document.createTextNode(Ig)),v.appendChild(N),v.appendChild(P);var j=P.offsetTop-N.offsetTop+2;v.removeChild(N),v.appendChild(this._document.createTextNode(Ig)),v.style.lineHeight="normal",P.style.verticalAlign="super";var H=P.offsetTop-v.offsetTop+2;return I.removeChild(v),{baseline:j,middle:H}},y.prototype.getMetrics=function(u,w){var v=u+" "+w;return typeof this._data[v]>"u"&&(this._data[v]=this.parseMetrics(u,w)),this._data[v]},y}(),Gp=function(){function y(u,w){this.context=u,this.options=w}return y}(),CC=1e4,vC=function(y){ks(u,y);function u(w,v){var P=y.call(this,w,v)||this;return P._activeEffects=[],P.canvas=v.canvas?v.canvas:document.createElement("canvas"),P.ctx=P.canvas.getContext("2d"),v.canvas||(P.canvas.width=Math.floor(v.width*v.scale),P.canvas.height=Math.floor(v.height*v.scale),P.canvas.style.width=v.width+"px",P.canvas.style.height=v.height+"px"),P.fontMetrics=new xC(document),P.ctx.scale(P.options.scale,P.options.scale),P.ctx.translate(-v.x,-v.y),P.ctx.textBaseline="bottom",P._activeEffects=[],P.context.logger.debug("Canvas renderer initialized ("+v.width+"x"+v.height+") with scale "+v.scale),P}return u.prototype.applyEffects=function(w){for(var v=this;this._activeEffects.length;)this.popEffect();w.forEach(function(P){return v.applyEffect(P)})},u.prototype.applyEffect=function(w){this.ctx.save(),hC(w)&&(this.ctx.globalAlpha=w.opacity),lC(w)&&(this.ctx.translate(w.offsetX,w.offsetY),this.ctx.transform(w.matrix[0],w.matrix[1],w.matrix[2],w.matrix[3],w.matrix[4],w.matrix[5]),this.ctx.translate(-w.offsetX,-w.offsetY)),Op(w)&&(this.path(w.path),this.ctx.clip()),this._activeEffects.push(w)},u.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},u.prototype.renderStack=function(w){return Sn(this,void 0,void 0,function(){var v;return cn(this,function(P){switch(P.label){case 0:return v=w.element.container.styles,v.isVisible()?[4,this.renderStackContent(w)]:[3,2];case 1:P.sent(),P.label=2;case 2:return[2]}})})},u.prototype.renderNode=function(w){return Sn(this,void 0,void 0,function(){return cn(this,function(v){switch(v.label){case 0:if(Xi(w.container.flags,16))debugger;return w.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(w)]:[3,3];case 1:return v.sent(),[4,this.renderNodeContent(w)];case 2:v.sent(),v.label=3;case 3:return[2]}})})},u.prototype.renderTextWithLetterSpacing=function(w,v,P){var N=this;if(v===0)this.ctx.fillText(w.text,w.bounds.left,w.bounds.top+P);else{var I=zc(w.text);I.reduce(function(j,H){return N.ctx.fillText(H,j,w.bounds.top+P),j+N.ctx.measureText(H).width},w.bounds.left)}},u.prototype.createFontStyle=function(w){var v=w.fontVariant.filter(function(I){return I==="normal"||I==="small-caps"}).join(""),P=MC(w.fontFamily).join(", "),N=Pa(w.fontSize)?""+w.fontSize.number+w.fontSize.unit:w.fontSize.number+"px";return[[w.fontStyle,v,w.fontWeight,N,P].join(" "),P,N]},u.prototype.renderTextNode=function(w,v){return Sn(this,void 0,void 0,function(){var P,N,I,j,H,tt,X,st,lt=this;return cn(this,function(Lt){return P=this.createFontStyle(v),N=P[0],I=P[1],j=P[2],this.ctx.font=N,this.ctx.direction=v.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",H=this.fontMetrics.getMetrics(I,j),tt=H.baseline,X=H.middle,st=v.paintOrder,w.textBounds.forEach(function(vt){st.forEach(function(bt){switch(bt){case 0:lt.ctx.fillStyle=Wi(v.color),lt.renderTextWithLetterSpacing(vt,v.letterSpacing,tt);var xt=v.textShadow;xt.length&&vt.text.trim().length&&(xt.slice(0).reverse().forEach(function(T){lt.ctx.shadowColor=Wi(T.color),lt.ctx.shadowOffsetX=T.offsetX.number*lt.options.scale,lt.ctx.shadowOffsetY=T.offsetY.number*lt.options.scale,lt.ctx.shadowBlur=T.blur.number,lt.renderTextWithLetterSpacing(vt,v.letterSpacing,tt)}),lt.ctx.shadowColor="",lt.ctx.shadowOffsetX=0,lt.ctx.shadowOffsetY=0,lt.ctx.shadowBlur=0),v.textDecorationLine.length&&(lt.ctx.fillStyle=Wi(v.textDecorationColor||v.color),v.textDecorationLine.forEach(function(T){switch(T){case 1:lt.ctx.fillRect(vt.bounds.left,Math.round(vt.bounds.top+tt),vt.bounds.width,1);break;case 2:lt.ctx.fillRect(vt.bounds.left,Math.round(vt.bounds.top),vt.bounds.width,1);break;case 3:lt.ctx.fillRect(vt.bounds.left,Math.ceil(vt.bounds.top+X),vt.bounds.width,1);break}}));break;case 1:v.webkitTextStrokeWidth&&vt.text.trim().length&&(lt.ctx.strokeStyle=Wi(v.webkitTextStrokeColor),lt.ctx.lineWidth=v.webkitTextStrokeWidth,lt.ctx.lineJoin=window.chrome?"miter":"round",lt.ctx.strokeText(vt.text,vt.bounds.left,vt.bounds.top+tt)),lt.ctx.strokeStyle="",lt.ctx.lineWidth=0,lt.ctx.lineJoin="miter";break}})}),[2]})})},u.prototype.renderReplacedElement=function(w,v,P){if(P&&w.intrinsicWidth>0&&w.intrinsicHeight>0){var N=ph(w),I=gh(v);this.path(I),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(P,0,0,w.intrinsicWidth,w.intrinsicHeight,N.left,N.top,N.width,N.height),this.ctx.restore()}},u.prototype.renderNodeContent=function(w){return Sn(this,void 0,void 0,function(){var v,P,N,I,j,H,ct,ct,tt,X,st,lt,Rt,Lt,vt,q,bt,xt,T,ct,it,Rt,q;return cn(this,function(Bt){switch(Bt.label){case 0:this.applyEffects(w.getEffects(4)),v=w.container,P=w.curves,N=v.styles,I=0,j=v.textNodes,Bt.label=1;case 1:return I<j.length?(H=j[I],[4,this.renderTextNode(H,N)]):[3,4];case 2:Bt.sent(),Bt.label=3;case 3:return I++,[3,1];case 4:if(!(v instanceof xp))return[3,8];Bt.label=5;case 5:return Bt.trys.push([5,7,,8]),[4,this.context.cache.match(v.src)];case 6:return ct=Bt.sent(),this.renderReplacedElement(v,P,ct),[3,8];case 7:return Bt.sent(),this.context.logger.error("Error loading image "+v.src),[3,8];case 8:if(v instanceof Cp&&this.renderReplacedElement(v,P,v.canvas),!(v instanceof vp))return[3,12];Bt.label=9;case 9:return Bt.trys.push([9,11,,12]),[4,this.context.cache.match(v.svg)];case 10:return ct=Bt.sent(),this.renderReplacedElement(v,P,ct),[3,12];case 11:return Bt.sent(),this.context.logger.error("Error loading svg "+v.svg.substring(0,255)),[3,12];case 12:return v instanceof kp&&v.tree?(tt=new u(this.context,{scale:this.options.scale,backgroundColor:v.backgroundColor,x:0,y:0,width:v.width,height:v.height}),[4,tt.render(v.tree)]):[3,14];case 13:X=Bt.sent(),v.width&&v.height&&this.ctx.drawImage(X,0,0,v.width,v.height,v.bounds.left,v.bounds.top,v.bounds.width,v.bounds.height),Bt.label=14;case 14:if(v instanceof Yc&&(st=Math.min(v.bounds.width,v.bounds.height),v.type===hh?v.checked&&(this.ctx.save(),this.path([new _t(v.bounds.left+st*.39363,v.bounds.top+st*.79),new _t(v.bounds.left+st*.16,v.bounds.top+st*.5549),new _t(v.bounds.left+st*.27347,v.bounds.top+st*.44071),new _t(v.bounds.left+st*.39694,v.bounds.top+st*.5649),new _t(v.bounds.left+st*.72983,v.bounds.top+st*.23),new _t(v.bounds.left+st*.84,v.bounds.top+st*.34085),new _t(v.bounds.left+st*.39363,v.bounds.top+st*.79)]),this.ctx.fillStyle=Wi(Fg),this.ctx.fill(),this.ctx.restore()):v.type===uh&&v.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(v.bounds.left+st/2,v.bounds.top+st/2,st/4,0,Math.PI*2,!0),this.ctx.fillStyle=Wi(Fg),this.ctx.fill(),this.ctx.restore())),FC(v)&&v.value.length){switch(lt=this.createFontStyle(N),Rt=lt[0],Lt=lt[1],vt=this.fontMetrics.getMetrics(Rt,Lt).baseline,this.ctx.font=Rt,this.ctx.fillStyle=Wi(N.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=bC(v.styles.textAlign),q=ph(v),bt=0,v.styles.textAlign){case 1:bt+=q.width/2;break;case 2:bt+=q.width;break}xt=q.add(bt,0,0,-q.height/2+1),this.ctx.save(),this.path([new _t(q.left,q.top),new _t(q.left+q.width,q.top),new _t(q.left+q.width,q.top+q.height),new _t(q.left,q.top+q.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new xa(v.value,xt),N.letterSpacing,vt),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Xi(v.styles.display,2048))return[3,20];if(v.styles.listStyleImage===null)return[3,19];if(T=v.styles.listStyleImage,T.type!==0)return[3,18];ct=void 0,it=T.url,Bt.label=15;case 15:return Bt.trys.push([15,17,,18]),[4,this.context.cache.match(it)];case 16:return ct=Bt.sent(),this.ctx.drawImage(ct,v.bounds.left-(ct.width+10),v.bounds.top),[3,18];case 17:return Bt.sent(),this.context.logger.error("Error loading list-style-image "+it),[3,18];case 18:return[3,20];case 19:w.listValue&&v.styles.listStyleType!==-1&&(Rt=this.createFontStyle(N)[0],this.ctx.font=Rt,this.ctx.fillStyle=Wi(N.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",q=new ar(v.bounds.left,v.bounds.top+fi(v.styles.paddingTop,v.bounds.width),v.bounds.width,og(N.lineHeight,N.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new xa(w.listValue,q),N.letterSpacing,og(N.lineHeight,N.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),Bt.label=20;case 20:return[2]}})})},u.prototype.renderStackContent=function(w){return Sn(this,void 0,void 0,function(){var v,P,T,N,I,T,j,H,T,tt,X,T,st,lt,T,Lt,vt,T,bt,xt,T;return cn(this,function(ct){switch(ct.label){case 0:if(Xi(w.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(w.element)];case 1:ct.sent(),v=0,P=w.negativeZIndex,ct.label=2;case 2:return v<P.length?(T=P[v],[4,this.renderStack(T)]):[3,5];case 3:ct.sent(),ct.label=4;case 4:return v++,[3,2];case 5:return[4,this.renderNodeContent(w.element)];case 6:ct.sent(),N=0,I=w.nonInlineLevel,ct.label=7;case 7:return N<I.length?(T=I[N],[4,this.renderNode(T)]):[3,10];case 8:ct.sent(),ct.label=9;case 9:return N++,[3,7];case 10:j=0,H=w.nonPositionedFloats,ct.label=11;case 11:return j<H.length?(T=H[j],[4,this.renderStack(T)]):[3,14];case 12:ct.sent(),ct.label=13;case 13:return j++,[3,11];case 14:tt=0,X=w.nonPositionedInlineLevel,ct.label=15;case 15:return tt<X.length?(T=X[tt],[4,this.renderStack(T)]):[3,18];case 16:ct.sent(),ct.label=17;case 17:return tt++,[3,15];case 18:st=0,lt=w.inlineLevel,ct.label=19;case 19:return st<lt.length?(T=lt[st],[4,this.renderNode(T)]):[3,22];case 20:ct.sent(),ct.label=21;case 21:return st++,[3,19];case 22:Lt=0,vt=w.zeroOrAutoZIndexOrTransformedOrOpacity,ct.label=23;case 23:return Lt<vt.length?(T=vt[Lt],[4,this.renderStack(T)]):[3,26];case 24:ct.sent(),ct.label=25;case 25:return Lt++,[3,23];case 26:bt=0,xt=w.positiveZIndex,ct.label=27;case 27:return bt<xt.length?(T=xt[bt],[4,this.renderStack(T)]):[3,30];case 28:ct.sent(),ct.label=29;case 29:return bt++,[3,27];case 30:return[2]}})})},u.prototype.mask=function(w){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(w.slice(0).reverse()),this.ctx.closePath()},u.prototype.path=function(w){this.ctx.beginPath(),this.formatPath(w),this.ctx.closePath()},u.prototype.formatPath=function(w){var v=this;w.forEach(function(P,N){var I=as(P)?P.start:P;N===0?v.ctx.moveTo(I.x,I.y):v.ctx.lineTo(I.x,I.y),as(P)&&v.ctx.bezierCurveTo(P.startControl.x,P.startControl.y,P.endControl.x,P.endControl.y,P.end.x,P.end.y)})},u.prototype.renderRepeat=function(w,v,P,N){this.path(w),this.ctx.fillStyle=v,this.ctx.translate(P,N),this.ctx.fill(),this.ctx.translate(-P,-N)},u.prototype.resizeImage=function(w,v,P){var N;if(w.width===v&&w.height===P)return w;var I=(N=this.canvas.ownerDocument)!==null&&N!==void 0?N:document,j=I.createElement("canvas");j.width=Math.max(1,v),j.height=Math.max(1,P);var H=j.getContext("2d");return H.drawImage(w,0,0,w.width,w.height,0,0,v,P),j},u.prototype.renderBackgroundImage=function(w){return Sn(this,void 0,void 0,function(){var v,P,N,I,j,H;return cn(this,function(tt){switch(tt.label){case 0:v=w.styles.backgroundImage.length-1,P=function(X){var st,lt,Lt,Jt,Ve,ke,Nt,Le,me,vt,Jt,Ve,ke,Nt,Le,bt,xt,T,ct,it,Rt,q,Bt,V,me,fe,Jt,ve,$e,Nt,Le,pi,Ve,ke,jt,Ae,Gt,at,kt,ue,ye,be;return cn(this,function(Pe){switch(Pe.label){case 0:if(X.type!==0)return[3,5];st=void 0,lt=X.url,Pe.label=1;case 1:return Pe.trys.push([1,3,,4]),[4,N.context.cache.match(lt)];case 2:return st=Pe.sent(),[3,4];case 3:return Pe.sent(),N.context.logger.error("Error loading background-image "+lt),[3,4];case 4:return st&&(Lt=ac(w,v,[st.width,st.height,st.width/st.height]),Jt=Lt[0],Ve=Lt[1],ke=Lt[2],Nt=Lt[3],Le=Lt[4],me=N.ctx.createPattern(N.resizeImage(st,Nt,Le),"repeat"),N.renderRepeat(Jt,me,Ve,ke)),[3,6];case 5:lw(X)?(vt=ac(w,v,[null,null,null]),Jt=vt[0],Ve=vt[1],ke=vt[2],Nt=vt[3],Le=vt[4],bt=sw(X.angle,Nt,Le),xt=bt[0],T=bt[1],ct=bt[2],it=bt[3],Rt=bt[4],q=document.createElement("canvas"),q.width=Nt,q.height=Le,Bt=q.getContext("2d"),V=Bt.createLinearGradient(T,it,ct,Rt),rg(X.stops,xt).forEach(function(Te){return V.addColorStop(Te.stop,Wi(Te.color))}),Bt.fillStyle=V,Bt.fillRect(0,0,Nt,Le),Nt>0&&Le>0&&(me=N.ctx.createPattern(q,"repeat"),N.renderRepeat(Jt,me,Ve,ke))):hw(X)&&(fe=ac(w,v,[null,null,null]),Jt=fe[0],ve=fe[1],$e=fe[2],Nt=fe[3],Le=fe[4],pi=X.position.length===0?[Vc]:X.position,Ve=fi(pi[0],Nt),ke=fi(pi[pi.length-1],Le),jt=rw(X,Ve,ke,Nt,Le),Ae=jt[0],Gt=jt[1],Ae>0&&Gt>0&&(at=N.ctx.createRadialGradient(ve+Ve,$e+ke,0,ve+Ve,$e+ke,Ae),rg(X.stops,Ae*2).forEach(function(Te){return at.addColorStop(Te.stop,Wi(Te.color))}),N.path(Jt),N.ctx.fillStyle=at,Ae!==Gt?(kt=w.bounds.left+.5*w.bounds.width,ue=w.bounds.top+.5*w.bounds.height,ye=Gt/Ae,be=1/ye,N.ctx.save(),N.ctx.translate(kt,ue),N.ctx.transform(1,0,0,ye,0,0),N.ctx.translate(-kt,-ue),N.ctx.fillRect(ve,be*($e-ue)+ue,Nt,Le*be),N.ctx.restore()):N.ctx.fill())),Pe.label=6;case 6:return v--,[2]}})},N=this,I=0,j=w.styles.backgroundImage.slice(0).reverse(),tt.label=1;case 1:return I<j.length?(H=j[I],[5,P(H)]):[3,4];case 2:tt.sent(),tt.label=3;case 3:return I++,[3,1];case 4:return[2]}})})},u.prototype.renderSolidBorder=function(w,v,P){return Sn(this,void 0,void 0,function(){return cn(this,function(N){return this.path(Dg(P,v)),this.ctx.fillStyle=Wi(w),this.ctx.fill(),[2]})})},u.prototype.renderDoubleBorder=function(w,v,P,N){return Sn(this,void 0,void 0,function(){var I,j;return cn(this,function(H){switch(H.label){case 0:return v<3?[4,this.renderSolidBorder(w,P,N)]:[3,2];case 1:return H.sent(),[2];case 2:return I=dC(N,P),this.path(I),this.ctx.fillStyle=Wi(w),this.ctx.fill(),j=fC(N,P),this.path(j),this.ctx.fill(),[2]}})})},u.prototype.renderNodeBackgroundAndBorders=function(w){return Sn(this,void 0,void 0,function(){var v,P,N,I,j,H,tt,X,st=this;return cn(this,function(lt){switch(lt.label){case 0:return this.applyEffects(w.getEffects(2)),v=w.container.styles,P=!Yr(v.backgroundColor)||v.backgroundImage.length,N=[{style:v.borderTopStyle,color:v.borderTopColor,width:v.borderTopWidth},{style:v.borderRightStyle,color:v.borderRightColor,width:v.borderRightWidth},{style:v.borderBottomStyle,color:v.borderBottomColor,width:v.borderBottomWidth},{style:v.borderLeftStyle,color:v.borderLeftColor,width:v.borderLeftWidth}],I=SC(go(v.backgroundClip,0),w.curves),P||v.boxShadow.length?(this.ctx.save(),this.path(I),this.ctx.clip(),Yr(v.backgroundColor)||(this.ctx.fillStyle=Wi(v.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(w.container)]):[3,2];case 1:lt.sent(),this.ctx.restore(),v.boxShadow.slice(0).reverse().forEach(function(Lt){st.ctx.save();var vt=fh(w.curves),bt=Lt.inset?0:CC,xt=uC(vt,-bt+(Lt.inset?1:-1)*Lt.spread.number,(Lt.inset?1:-1)*Lt.spread.number,Lt.spread.number*(Lt.inset?-2:2),Lt.spread.number*(Lt.inset?-2:2));Lt.inset?(st.path(vt),st.ctx.clip(),st.mask(xt)):(st.mask(vt),st.ctx.clip(),st.path(xt)),st.ctx.shadowOffsetX=Lt.offsetX.number+bt,st.ctx.shadowOffsetY=Lt.offsetY.number,st.ctx.shadowColor=Wi(Lt.color),st.ctx.shadowBlur=Lt.blur.number,st.ctx.fillStyle=Lt.inset?Wi(Lt.color):"rgba(0,0,0,1)",st.ctx.fill(),st.ctx.restore()}),lt.label=2;case 2:j=0,H=0,tt=N,lt.label=3;case 3:return H<tt.length?(X=tt[H],X.style!==0&&!Yr(X.color)&&X.width>0?X.style!==2?[3,5]:[4,this.renderDashedDottedBorder(X.color,X.width,j,w.curves,2)]:[3,11]):[3,13];case 4:return lt.sent(),[3,11];case 5:return X.style!==3?[3,7]:[4,this.renderDashedDottedBorder(X.color,X.width,j,w.curves,3)];case 6:return lt.sent(),[3,11];case 7:return X.style!==4?[3,9]:[4,this.renderDoubleBorder(X.color,X.width,j,w.curves)];case 8:return lt.sent(),[3,11];case 9:return[4,this.renderSolidBorder(X.color,j,w.curves)];case 10:lt.sent(),lt.label=11;case 11:j++,lt.label=12;case 12:return H++,[3,3];case 13:return[2]}})})},u.prototype.renderDashedDottedBorder=function(w,v,P,N,I){return Sn(this,void 0,void 0,function(){var j,H,tt,X,st,lt,Lt,vt,bt,xt,T,ct,it,Rt,q,Bt,q,Bt;return cn(this,function(V){return this.ctx.save(),j=gC(N,P),H=Dg(N,P),I===2&&(this.path(H),this.ctx.clip()),as(H[0])?(tt=H[0].start.x,X=H[0].start.y):(tt=H[0].x,X=H[0].y),as(H[1])?(st=H[1].end.x,lt=H[1].end.y):(st=H[1].x,lt=H[1].y),P===0||P===2?Lt=Math.abs(tt-st):Lt=Math.abs(X-lt),this.ctx.beginPath(),I===3?this.formatPath(j):this.formatPath(H.slice(0,2)),vt=v<3?v*3:v*2,bt=v<3?v*2:v,I===3&&(vt=v,bt=v),xt=!0,Lt<=vt*2?xt=!1:Lt<=vt*2+bt?(T=Lt/(2*vt+bt),vt*=T,bt*=T):(ct=Math.floor((Lt+bt)/(vt+bt)),it=(Lt-ct*vt)/(ct-1),Rt=(Lt-(ct+1)*vt)/ct,bt=Rt<=0||Math.abs(bt-it)<Math.abs(bt-Rt)?it:Rt),xt&&(I===3?this.ctx.setLineDash([0,vt+bt]):this.ctx.setLineDash([vt,bt])),I===3?(this.ctx.lineCap="round",this.ctx.lineWidth=v):this.ctx.lineWidth=v*2+1.1,this.ctx.strokeStyle=Wi(w),this.ctx.stroke(),this.ctx.setLineDash([]),I===2&&(as(H[0])&&(q=H[3],Bt=H[0],this.ctx.beginPath(),this.formatPath([new _t(q.end.x,q.end.y),new _t(Bt.start.x,Bt.start.y)]),this.ctx.stroke()),as(H[1])&&(q=H[1],Bt=H[2],this.ctx.beginPath(),this.formatPath([new _t(q.end.x,q.end.y),new _t(Bt.start.x,Bt.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},u.prototype.render=function(w){return Sn(this,void 0,void 0,function(){var v;return cn(this,function(P){switch(P.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Wi(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),v=cC(w),[4,this.renderStack(v)];case 1:return P.sent(),this.applyEffects([]),[2,this.canvas]}})})},u}(Gp),FC=function(y){return y instanceof bp||y instanceof Sp?!0:y instanceof Yc&&y.type!==uh&&y.type!==hh},SC=function(y,u){switch(y){case 0:return fh(u);case 2:return AC(u);case 1:default:return gh(u)}},bC=function(y){switch(y){case 1:return"center";case 2:return"right";case 0:default:return"left"}},kC=["-apple-system","system-ui"],MC=function(y){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?y.filter(function(u){return kC.indexOf(u)===-1}):y},PC=function(y){ks(u,y);function u(w,v){var P=y.call(this,w,v)||this;return P.canvas=v.canvas?v.canvas:document.createElement("canvas"),P.ctx=P.canvas.getContext("2d"),P.options=v,P.canvas.width=Math.floor(v.width*v.scale),P.canvas.height=Math.floor(v.height*v.scale),P.canvas.style.width=v.width+"px",P.canvas.style.height=v.height+"px",P.ctx.scale(P.options.scale,P.options.scale),P.ctx.translate(-v.x,-v.y),P.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+v.width+"x"+v.height+" at "+v.x+","+v.y+") with scale "+v.scale),P}return u.prototype.render=function(w){return Sn(this,void 0,void 0,function(){var v,P;return cn(this,function(N){switch(N.label){case 0:return v=kc(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,w),[4,QC(v)];case 1:return P=N.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Wi(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(P,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},u}(Gp),QC=function(y){return new Promise(function(u,w){var v=new Image;v.onload=function(){u(v)},v.onerror=w,v.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(y))})},UC=function(){function y(u){var w=u.id,v=u.enabled;this.id=w,this.enabled=v,this.start=Date.now()}return y.prototype.debug=function(){for(var u=[],w=0;w<arguments.length;w++)u[w]=arguments[w];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,El([this.id,this.getTime()+"ms"],u)):this.info.apply(this,u))},y.prototype.getTime=function(){return Date.now()-this.start},y.prototype.info=function(){for(var u=[],w=0;w<arguments.length;w++)u[w]=arguments[w];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,El([this.id,this.getTime()+"ms"],u))},y.prototype.warn=function(){for(var u=[],w=0;w<arguments.length;w++)u[w]=arguments[w];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,El([this.id,this.getTime()+"ms"],u)):this.info.apply(this,u))},y.prototype.error=function(){for(var u=[],w=0;w<arguments.length;w++)u[w]=arguments[w];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,El([this.id,this.getTime()+"ms"],u)):this.info.apply(this,u))},y.instances={},y}(),LC=function(){function y(u,w){var v;this.windowBounds=w,this.instanceName="#"+y.instanceCount++,this.logger=new UC({id:this.instanceName,enabled:u.logging}),this.cache=(v=u.cache)!==null&&v!==void 0?v:new $x(this,u)}return y.instanceCount=1,y}(),NC=function(y,u){return u===void 0&&(u={}),EC(y,u)};typeof window<"u"&&Ip.setContext(window);var EC=function(y,u){return Sn(void 0,void 0,void 0,function(){var w,v,P,N,I,j,H,tt,X,st,lt,Lt,vt,bt,xt,T,ct,it,Rt,q,V,Bt,V,me,fe,Jt,ve,$e,Nt,Le,pi,Ve,ke,jt,Ae,Gt,at,kt,ue,ye;return cn(this,function(be){switch(be.label){case 0:if(!y||typeof y!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(w=y.ownerDocument,!w)throw new Error("Element is not attached to a Document");if(v=w.defaultView,!v)throw new Error("Document is not attached to a Window");return P={allowTaint:(me=u.allowTaint)!==null&&me!==void 0?me:!1,imageTimeout:(fe=u.imageTimeout)!==null&&fe!==void 0?fe:15e3,proxy:u.proxy,useCORS:(Jt=u.useCORS)!==null&&Jt!==void 0?Jt:!1},N=cc({logging:(ve=u.logging)!==null&&ve!==void 0?ve:!0,cache:u.cache},P),I={windowWidth:($e=u.windowWidth)!==null&&$e!==void 0?$e:v.innerWidth,windowHeight:(Nt=u.windowHeight)!==null&&Nt!==void 0?Nt:v.innerHeight,scrollX:(Le=u.scrollX)!==null&&Le!==void 0?Le:v.pageXOffset,scrollY:(pi=u.scrollY)!==null&&pi!==void 0?pi:v.pageYOffset},j=new ar(I.scrollX,I.scrollY,I.windowWidth,I.windowHeight),H=new LC(N,j),tt=(Ve=u.foreignObjectRendering)!==null&&Ve!==void 0?Ve:!1,X={allowTaint:(ke=u.allowTaint)!==null&&ke!==void 0?ke:!1,onclone:u.onclone,ignoreElements:u.ignoreElements,inlineImages:tt,copyStyles:tt},H.logger.debug("Starting document clone with size "+j.width+"x"+j.height+" scrolled to "+-j.left+","+-j.top),st=new Ng(H,y,X),lt=st.clonedReferenceElement,lt?[4,st.toIFrame(w,j)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return Lt=be.sent(),vt=jc(lt)||Tx(lt)?u0(lt.ownerDocument):yh(H,lt),bt=vt.width,xt=vt.height,T=vt.left,ct=vt.top,it=TC(H,lt,u.backgroundColor),Rt={canvas:u.canvas,backgroundColor:it,scale:(Ae=(jt=u.scale)!==null&&jt!==void 0?jt:v.devicePixelRatio)!==null&&Ae!==void 0?Ae:1,x:((Gt=u.x)!==null&&Gt!==void 0?Gt:0)+T,y:((at=u.y)!==null&&at!==void 0?at:0)+ct,width:(kt=u.width)!==null&&kt!==void 0?kt:Math.ceil(bt),height:(ue=u.height)!==null&&ue!==void 0?ue:Math.ceil(xt)},tt?(H.logger.debug("Document cloned, using foreign object rendering"),V=new PC(H,Rt),[4,V.render(lt)]):[3,3];case 2:return q=be.sent(),[3,5];case 3:return H.logger.debug("Document cloned, element located at "+T+","+ct+" with size "+bt+"x"+xt+" using computed rendering"),H.logger.debug("Starting DOM parsing"),Bt=Pp(H,lt),it===Bt.styles.backgroundColor&&(Bt.styles.backgroundColor=or.TRANSPARENT),H.logger.debug("Starting renderer for element at "+Rt.x+","+Rt.y+" with size "+Rt.width+"x"+Rt.height),V=new vC(H,Rt),[4,V.render(Bt)];case 4:q=be.sent(),be.label=5;case 5:return(!((ye=u.removeContainer)!==null&&ye!==void 0)||ye)&&(Ng.destroy(Lt)||H.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),H.logger.debug("Finished rendering"),[2,q]}})})},TC=function(y,u,w){var v=u.ownerDocument,P=v.documentElement?wa(y,getComputedStyle(v.documentElement).backgroundColor):or.TRANSPARENT,N=v.body?wa(y,getComputedStyle(v.body).backgroundColor):or.TRANSPARENT,I=typeof w=="string"?wa(y,w):w===null?or.TRANSPARENT:4294967295;return u===v.documentElement?Yr(P)?Yr(N)?I:N:P:I};const DC=()=>{const y=async()=>{const u=document.getElementsByClassName("diagram-component")[0];if(u){const v=(await NC(u,{scale:1})).toDataURL("image/png"),P=document.createElement("a");P.href=v,P.download="christmas-tree.png",P.click()}};return bn.jsx("div",{children:bn.jsx("button",{className:"buttonCustom",onClick:y,children:"Download"})})};function IC(){return bn.jsxs("div",{className:"tree-layout",children:[bn.jsxs("div",{className:"tree-options",children:[bn.jsx(s0,{initPalette:h0,divClassName:"palette-component",nodeDataArray:l0}),bn.jsx(DC,{})]}),bn.jsx(n0,{initDiagram:a0,divClassName:"diagram-component",nodeDataArray:[]})]})}function OC(){return bn.jsxs(bn.Fragment,{children:[bn.jsx("h1",{children:"Decorate your Christmas tree"}),bn.jsx(IC,{}),bn.jsx(Wm,{})]})}Tm.createRoot(document.getElementById("root")).render(bn.jsx(vi.StrictMode,{children:bn.jsx(OC,{})}));
